<div class="container">

<table style="width: 100%;"><tr>
<td>optimalPortfolio</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Optimal portfolio</h2>

<h3>Description</h3>

<p>Function wich computes the optimal portfolio's weights.
</p>


<h3>Usage</h3>

<pre><code class="language-R">optimalPortfolio(Sigma, mu = NULL, semiDev = NULL, control = list())
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Sigma</code></td>
<td>
<p>a <code class="reqn">(N \times N)</code> covariance matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mu</code></td>
<td>
<p>a <code class="reqn">(N \times 1)</code> vector of expected returns. Default:
<code>mu = NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>semiDev</code></td>
<td>
<p>a vector <code class="reqn">(N \times 1)</code> of semideviations.
Default: <code>semiDev = NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>control</code></td>
<td>
<p>control parameters (see *Details*).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The argument <code>control</code> is a list that can supply any of the following
components: 
</p>

<ul>
<li> <p><code>type</code> method used to compute the
optimal portfolio, among <code>'mv'</code>, <code>'minvol'</code>, <code>'invvol'</code>,
<code>'erc'</code>, <code>'maxdiv'</code>, <code>'riskeff'</code> and <code>'maxdec'</code> where: 
</p>
<p><code>'mv'</code> is used to compute the weights of the mean-variance portfolio. The weights are
computed following this equation: </p>
<p style="text-align: center;"><code class="reqn">w = \frac{1}{\gamma} \Sigma^{-1}
\mu </code>
</p>
<p>. 
</p>
<p><code>'minvol'</code> is used to compute the weights of the minimum variance portfolio.  
</p>
<p><code>'invvol'</code> is the inverse volatility portfolio.
</p>
<p><code>'erc'</code> is used to compute the weights of the equal-risk-contribution portfolio. For a 
portfolio <code class="reqn">w</code>, the percentage volatility risk contribution of the i-th
asset in the portfolio is given by: 
</p>
<p style="text-align: center;"><code class="reqn">\% RC_i = \frac{ w_i {[\Sigma w]}_i}{w' \Sigma w} </code>
</p>
<p>. 
Then we compute the optimal portfolio by solving the following optimization problem:
</p>
<p style="text-align: center;"><code class="reqn">w = argmin \left\{ \sum_{i=1}^N (\% RC_i - \frac{1}{N})^2 \right\}
</code>
</p>
<p>.
</p>
<p><code>'maxdiv'</code> is used to compute the weights of the maximum diversification portfolio where:
</p>
<p style="text-align: center;"><code class="reqn">DR(w) = \frac{ w' \sigma}{\sqrt{w' \Sigma w} } \geq 1 </code>
</p>
<p> is used in the optimization problem.
</p>
<p><code>'riskeff'</code> is used to compute the weights of the risk-efficient
portfolio: </p>
<p style="text-align: center;"><code class="reqn">w = {argmax}\left\{ \frac{w' J \xi}{ \sqrt{w' \Sigma w}
}\right\} </code>
</p>
<p> where <code class="reqn">J</code> is a
<code class="reqn">(N \times 10)</code> matrix of zeros whose <code class="reqn">(i,j)</code>-th element
is one if the semi-deviation of stock <code class="reqn">i</code> belongs to decile
<code class="reqn">j</code>,<code class="reqn">\xi = (\xi_1,\ldots,\xi_{10})'</code>. 
</p>
<p><code>'maxdec'</code> is used to compute the weights of the maximum-decorrelation
portfolio: </p>
<p style="text-align: center;"><code class="reqn">w = {argmax}\left\{ 1 -  \sqrt{w' \Sigma w} \right\}
</code>
</p>
<p> where <code class="reqn">R</code> is the correlation matrix. 
</p>
<p>Default: <code>type = 'mv'</code>.
</p>
<p>These portfolios are summarized in Ardia and Boudt (2015) and Ardia et al. (2017). Below we list the various references.
</p>
</li>
<li> <p><code>constraint</code> constraint used for the optimization, among
<code>'none'</code>, <code>'lo'</code>, <code>'gross'</code> and <code>'user'</code>, where: <code>'none'</code> is used to 
compute the unconstraint portfolio, <code>'lo'</code> is the long-only constraints (non-negative weighted),  
<code>'gross'</code> is the gross exposure constraint, and <code>'user'</code> is the set of user constraints (typically
lower and upper boundaries. Default: <code>constraint = 'none'</code>. Note that the 
summability constraint is always imposed.
</p>
</li>
<li> <p><code>LB</code> lower boundary for the weights. Default: <code>LB = NULL</code>. 
</p>
</li>
<li> <p><code>UB</code> lower boundary for the weights. Default: <code>UB = NULL</code>. 
</p>
</li>
<li> <p><code>w0</code> starting value for the optimizer. Default: <code>w0 = NULL</code> takes the 
equally-weighted portfolio as a starting value. When <code>LB</code> and <code>UB</code> are provided, it is set to 
mid-point of the bounds.
</p>
</li>
<li> <p><code>gross.c</code> gross exposure constraint. Default: <code>gross.c = 1.6</code>. 
</p>
</li>
<li> <p><code>gamma</code> risk aversion parameter. Default: <code>gamma = 0.89</code>.
</p>
</li>
<li> <p><code>ctr.slsqp</code> list with control parameters for slsqp function.
</p>
</li>
</ul>
<h3>Value</h3>

<p>A <code class="reqn">(N \times 1)</code> vector of optimal portfolio weights.
</p>


<h3>Author(s)</h3>

<p>David Ardia, Kris Boudt and Jean-Philippe Gagnon Fleury.
</p>


<h3>References</h3>

<p>Amenc, N., Goltz, F., Martellini, L., Retowsky, P. (2011).
Efficient indexation: An alternatice to cap-weightes indices.  
<em>Journal of Investment Management</em> <b>9</b>(4), pp.1-23.
</p>
<p>Ardia, D., Boudt, K. (2015). 
Implied expected returns and the choice of a mean-variance efficient portfolio proxy.
<em>Journal of Portfolio Management</em> <b>41</b>(4), pp.66-81.
doi: <a href="https://doi.org/10.3905/jpm.2015.41.4.068">10.3905/jpm.2015.41.4.068</a> 
</p>
<p>Ardia, D., Bolliger, G., Boudt, K., Gagnon-Fleury, J.-P. (2017).  
The Impact of covariance misspecification in risk-based portfolios.  
<em>Annals of Operations Research</em> <b>254</b>(1-2), pp.1-16. 
doi: <a href="https://doi.org/10.1007/s10479-017-2474-7">10.1007/s10479-017-2474-7</a>
</p>
<p>Choueifaty, Y., Coignard, Y. (2008).  
Toward maximum diversification.
<em>Journal of Portfolio Management</em> <b>35</b>(1), pp.40-51. 
</p>
<p>Choueifaty, Y., Froidure, T., Reynier, J. (2013).  
Properties of the most diversified portfolio.  
<em>Journal of Investment Strategies</em> <b>2</b>(2), pp.49-70. 
</p>
<p>Das, S., Markowitz, H., Scheid, J., Statman, M. (2010).  
Portfolio optimization with mental accounts.  
<em>Journal of Financial and Quantitative Analysis</em> <b>45</b>(2), pp.311-334. 
</p>
<p>DeMiguel, V., Garlappi, L., Uppal, R. (2009).  
Optimal versus naive diversification: How inefficient is the 1/n portfolio strategy.  
<em>Review of Financial Studies</em> <b>22</b>(5), pp.1915-1953. 
</p>
<p>Fan, J., Zhang, J., Yu, K. (2012).  
Vast portfolio selection with gross-exposure constraints.
<em>Journal of the American Statistical Association</em> <b>107</b>(498), pp.592-606. 
</p>
<p>Maillard, S., Roncalli, T., Teiletche, J. (2010).  
The properties of equally weighted risk contribution portfolios.  
<em>Journal of Portfolio Management</em> <b>36</b>(4), pp.60-70. 
</p>
<p>Martellini, L. (2008).  
Towards the design of better equity benchmarks.
<em>Journal of Portfolio Management</em> <b>34</b>(4), Summer,pp.34-41.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Load returns of assets or portfolios
data("Industry_10")
rets = Industry_10

# Mean estimation
mu = meanEstimation(rets)

# Covariance estimation
Sigma = covEstimation(rets)

# Semi-deviation estimation
semiDev = semidevEstimation(rets)

# Mean-variance portfolio without constraint and gamma = 0.89
optimalPortfolio(mu = mu, Sigma = Sigma)

# Mean-variance portfolio without constraint and gamma = 1
optimalPortfolio(mu = mu, Sigma = Sigma, 
  control = list(gamma = 1))

# Mean-variance portfolio without constraint and gamma = 0.89
optimalPortfolio(mu = mu, Sigma = Sigma, 
  control = list(type = 'mv'))

# Mean-variance portfolio without constraint and gamma = 0.89
optimalPortfolio(mu = mu, Sigma = Sigma, 
  control = list(type = 'mv', constraint = 'none'))

# Mean-variance portfolio with the long-only constraint and gamma = 0.89
optimalPortfolio(mu = mu, Sigma = Sigma, 
  control = list(type = 'mv', constraint = 'lo'))

# Mean-variance portfolio with LB and UB constraints
optimalPortfolio(mu = mu, Sigma = Sigma, 
  control = list(type = 'mv', constraint = 'user', LB = rep(0.02, 10), UB = rep(0.8, 10)))

# Mean-variance portfolio with the gross constraint, 
# gross constraint parameter = 1.6 and gamma = 0.89
optimalPortfolio(mu = mu, Sigma = Sigma, 
  control = list(type = 'mv', constraint = 'gross'))

# Mean-variance portfolio with the gross constraint, 
# gross constraint parameter = 1.2 and gamma = 0.89
optimalPortfolio(mu = mu, Sigma = Sigma, 
  control = list(type = 'mv', constraint = 'gross', gross.c = 1.2))

# Minimum volatility portfolio without constraint
optimalPortfolio(Sigma = Sigma, 
  control = list(type = 'minvol'))

# Minimum volatility portfolio without constraint
optimalPortfolio(Sigma = Sigma, 
  control = list(type = 'minvol', constraint = 'none'))

# Minimim volatility portfolio with the long-only constraint
optimalPortfolio(Sigma = Sigma, 
  control = list(type = 'minvol', constraint = 'lo'))
  
# Minimim volatility portfolio with LB and UB constraints
optimalPortfolio(Sigma = Sigma, 
  control = list(type = 'minvol', constraint = 'user', LB = rep(0.02, 10), UB = rep(0.8, 10)))

# Minimum volatility portfolio with the gross constraint 
# and the gross constraint parameter = 1.6
optimalPortfolio(Sigma = Sigma, 
  control = list(type = 'minvol', constraint = 'gross'))

# Minimum volatility portfolio with the gross constraint 
# and the gross parameter = 1.2
optimalPortfolio(Sigma = Sigma, 
  control = list(type = 'minvol', constraint = 'gross', gross.c = 1.2))
    
# Inverse volatility portfolio
optimalPortfolio(Sigma = Sigma, 
  control = list(type = 'invvol'))

# Equal-risk-contribution portfolio with the long-only constraint
optimalPortfolio(Sigma = Sigma, 
  control = list(type = 'erc', constraint = 'lo'))
  
# Equal-risk-contribution portfolio with LB and UB constraints
optimalPortfolio(Sigma = Sigma, 
  control = list(type = 'erc', constraint = 'user', LB = rep(0.02, 10), UB = rep(0.8, 10)))

# Maximum diversification portfolio without constraint
optimalPortfolio(Sigma = Sigma, 
  control = list(type = 'maxdiv'))

# Maximum diversification portoflio with the long-only constraint
optimalPortfolio(Sigma = Sigma, 
  control = list(type = 'maxdiv', constraint = 'lo'))
  
# Maximum diversification portoflio with LB and UB constraints
optimalPortfolio(Sigma = Sigma, 
  control = list(type = 'maxdiv', constraint = 'user', LB = rep(0.02, 10), UB = rep(0.8, 10)))

# Risk-efficient portfolio without constraint
optimalPortfolio(Sigma = Sigma, semiDev = semiDev, 
  control = list(type = 'riskeff'))

# Risk-efficient portfolio with the long-only constraint
optimalPortfolio(Sigma = Sigma, semiDev = semiDev, 
  control = list(type = 'riskeff', constraint = 'lo'))
  
# Risk-efficient portfolio with LB and UB constraints
optimalPortfolio(Sigma = Sigma, semiDev = semiDev, 
  control = list(type = 'riskeff', constraint = 'user', LB = rep(0.02, 10), UB = rep(0.8, 10)))
  
# Maximum decorrelation portfolio without constraint
optimalPortfolio(Sigma = Sigma, 
  control = list(type = 'maxdec'))

# Maximum decorrelation portoflio with the long-only constraint
optimalPortfolio(Sigma = Sigma, 
  control = list(type = 'maxdec', constraint = 'lo'))
  
# Maximum decorrelation portoflio with LB and UB constraints
optimalPortfolio(Sigma = Sigma, 
  control = list(type = 'maxdec', constraint = 'user', LB = rep(0.02, 10), UB = rep(0.8, 10)))
</code></pre>


</div>