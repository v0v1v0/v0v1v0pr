<div class="container">

<table style="width: 100%;"><tr>
<td>read.obj</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Read a Wavefront OBJ 3D scene file into an R list</h2>

<h3>Description</h3>

<p>Read a Wavefront OBJ 3D scene file into an R list
</p>


<h3>Usage</h3>

<pre><code class="language-R">read.obj(f, materialspath = NULL, convert.rgl = FALSE, triangulate = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>f</code></td>
<td>
<p>Path to an OBJ file</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>materialspath</code></td>
<td>
<p>Path to a folder containing materials files. This is
optional and only required if materials files are in a different folder
from the OBJ file defined by <code>f</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>convert.rgl</code></td>
<td>
<p>Whether to convert the returned list to a
<code>rgl::shapelist3d</code> object containing
<code>rgl::mesh3d</code> objects.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>triangulate</code></td>
<td>
<p>(default <code>TRUE</code>) Whether to convert all mesh faces to
triangles. Note that only meshes with triangular or quad faces are
supported, so setting <code>triangulate=FALSE</code> will throw an error for more
complex files.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>tinyobjloader</code> made some substantial changes to its data
structures after the first code snapshot was taken for the this package in
2015. In order to benefit from bug fixes, we updated the code in 2020 but
we note that <code>tinyobjloader</code> now de-duplicates vertices more
aggressively e.g. in the situation where there are normals or texture coordinates.
We were forced when converting to <code>rgl::shapelist3d</code> objects
to revert these de-duplications on the R side
in order for display in rgl; note that this only happens
when there are texture coordinates and/or normals in the obj file.
</p>
<p>Note that some fields in the <code>tinyobjloader</code> return structure will be
omitted when they are not relevant for a given obj file. In this case, as
with any R list, the list element will have the value <code>NULL</code> when
tested. See examples.
</p>


<h3>Value</h3>

<p>When <code>convert.rgl=FALSE</code>, the default, a named list with items
<code>shapes</code> and <code>materials</code>, each containing sublists with one entry
per object (shapes) or material (materials). Objects in the <code>shapes</code>
list have the following structure </p>

<ul>
<li> <p><code>positions</code> 3 x N matrix of 3D vertices
</p>
</li>
<li> <p><code>indices</code> 3/4 x M matrix of indices into vertex array
(trimesh/quadmesh) 0-indexed
</p>
</li>
<li> <p><code>normals</code> 3 x N matrix of normal directions for each vertex
(missing when there are no normals)
</p>
</li>
<li> <p><code>normindices</code> 3/4 x M matrix of indices into normals array
(trimesh/quadmesh) 0-indexed (missing when there are no normals)
</p>
</li>
<li> <p><code>texcoords</code> 2 x N matrix of texture coordinates (missing when
there are no texture coordinates)
</p>
</li>
<li> <p><code>texindices</code> 3/4 x M matrix of indices into <code>texcoords</code>
array (trimesh/quadmesh) 0-indexed (missing when there are no texture
coordinates)
</p>
</li>
<li> <p><code>nvfaces</code> Raw vector specifying the number of vertices per face
(missing unless <code>triangulate=FALSE</code> and there are a mixture of
different numbers of vertices per face.)
</p>
</li>
<li> <p><code>material_ids</code> 0-indexed, -1 when not set (missing when no
materials)
</p>
</li>
</ul>
<p>When <code>convert.rgl=TRUE</code> a list of class <code>shapelist3d</code>
containing a <code>mesh3d</code> for each object or group element in
the original OBJ file. See <code>tinyobj2shapelist3d</code> for details of
rgl conversion.
</p>


<h3>Sample files</h3>

<p>Note that at the request of the CRAN maintainers the
sample files have the file extension <code>.wavefront</code> instead of the
standard <code>.obj</code> because this triggers a false positive R CMD check
NOTE.
</p>


<h3>See Also</h3>

<p><code>tinyobj2shapelist3d</code>, <code>rgl::readOBJ</code>
for simpler, pure R implementation.
</p>


<h3>Examples</h3>

<pre><code class="language-R">cube=read.obj(system.file("obj/cube.wavefront", package = "readobj"))
str(cube)
# elements will be NULL when not present in the obj file e.g. normals
is.null(cube$shapes[[1]]$texcoords)

# demonstrate direct conversion of result to rgl format
if(require('rgl')) {
  cuber=read.obj(system.file("obj/cube.wavefront", package = "readobj"),
    convert.rgl=TRUE)
  shade3d(cuber)
}
</code></pre>


</div>