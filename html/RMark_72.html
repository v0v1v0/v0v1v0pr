<div class="container">

<table style="width: 100%;"><tr>
<td>MS_popan</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Convert Multistate data for POPAN-style abundance estimation</h2>

<h3>Description</h3>

<p>Converts data and optionally creates and structures design data list
such that population size can be derived with multistate data. Variance estimate is questionable.
</p>


<h3>Usage</h3>

<pre><code class="language-R">MS_popan(
  x,
  augment_num = 100,
  augment_stratum = "A",
  enter_stratum = "B",
  strata = NULL,
  begin.time = 1,
  groups = NULL,
  ddl = FALSE,
  time.intervals = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>an RMark dataframe</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>augment_num</code></td>
<td>
<p>the number to add with a capture history of all 0s; this is the expected number that were in the population and not ever seen</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>augment_stratum</code></td>
<td>
<p>the single character to represent outside of the population; use a value not used in the data capture history</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>enter_stratum</code></td>
<td>
<p>the single character to represent inside of the population but not yet entered; use a value not used in the data capture history</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>strata</code></td>
<td>
<p>vector of single characters for observed and unobserved states</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>begin.time</code></td>
<td>
<p>beginning time of observed occasions; two occasions are added to the fron of the capture history at times begin.time-1 and begin.time-2</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>groups</code></td>
<td>
<p>vector of character variable names of factor variables to use for grouping</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ddl</code></td>
<td>
<p>if TRUE, will return processed data and a design data list with the appropriate fixed parameters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time.intervals</code></td>
<td>
<p>intervals of time between observed occasions</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Jeff Laake
</p>


<h3>Examples</h3>

<pre><code class="language-R">
data(dipper)
popan_N=summary(mark(dipper,model="POPAN",
        model.parameters=list(pent=list(formula=~time)),delete=TRUE),se=TRUE)$reals$N
data.list=MS_popan(dipper,ddl=TRUE,augment_num=30)
modMS=mark(data.list$data,data.list$ddl,
        model.parameters=list(Psi=list(formula=~B:toB:time)),brief=TRUE,delete=TRUE)
Psi_estimates=summary(modMS,se=TRUE)$reals$Psi
Nhat_MS=Psi_estimates$estimate[1]*sum(abs(data.list$data$data$freq))
se_Nhat_MS=Psi_estimates$se[1]*Nhat_MS
cat("Popan N = ",popan_N$estimate," (se = ",popan_N$se,")\n")
cat("MS N = ",Nhat_MS," (se = ",se_Nhat_MS,")\n")


</code></pre>


</div>