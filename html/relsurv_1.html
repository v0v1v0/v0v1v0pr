<div class="container">

<table style="width: 100%;"><tr>
<td>cmp.rel</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compute crude probability of death</h2>

<h3>Description</h3>

<p>Estimates the crude probability of death due to disease and due to
population reasons
</p>


<h3>Usage</h3>

<pre><code class="language-R">cmp.rel(
  formula = formula(data),
  data = parent.frame(),
  ratetable = relsurv::slopop,
  na.action,
  tau,
  conf.int = 0.95,
  precision = 1,
  add.times,
  rmap
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>a formula object, with the response as a <code>Surv</code> object
on the left of a <code>~</code> operator, and, if desired, terms separated by the
<code>+</code> operator on the right. If no strata are used, <code>~1</code> should be
specified.
</p>
<p>NOTE: The follow-up time must be in days.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>a data.frame in which to interpret the variables named in the
<code>formula</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ratetable</code></td>
<td>
<p>a table of event rates, organized as a <code>ratetable</code>
object, such as <code>slopop</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.action</code></td>
<td>
<p>a missing-data filter function, applied to the model.frame,
after any subset argument has been used.  Default is
<code>options()$na.action</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tau</code></td>
<td>
<p>the maximum follow-up time of interest, all times larger than
<code>tau</code> shall be censored. Equals maximum observed time by default</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf.int</code></td>
<td>
<p>the level for a two-sided confidence interval on the
survival curve(s). Default is 0.95.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>precision</code></td>
<td>
<p>the level of precision used in the numerical integration of
variance. Default is 1, which means that daily intervals are taken, the
value may be decreased to get a higher precision or increased to achieve a
faster calculation. The calculation intervals always include at least all
times of event and censoring as border points.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add.times</code></td>
<td>
<p>specific times at which the value of estimator and its
variance should be evaluated. Default is all the event and censoring times.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rmap</code></td>
<td>
<p>an optional list to be used if the variables are not organized
and named in the same way as in the <code>ratetable</code> object. See details
below.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>NOTE: The follow-up time must be specified in days. The <code>ratetable</code>
being used may have different variable names and formats than the user's
data set, this is dealt with by the <code>rmap</code> argument. For example, if
age is in years in the data set but in days in the <code>ratetable</code> object,
age=age*365.241 should be used. The calendar year can be in any date format
(date, Date and POSIXt are allowed), the date formats in the
<code>ratetable</code> and in the data may differ.
</p>
<p>Note that numerical integration is required to calculate the variance
estimator. The integration precision is set with argument <code>precision</code>,
which defaults to daily intervals, a default that should give enough
precision for any practical purpose.
</p>
<p>The area under the curve is calculated on the interval [0,<code>tau</code>].
</p>
<p>Function <code>summary</code> may be used to get the output at specific points in
time.
</p>


<h3>Value</h3>

<p>An object of class <code>cmp.rel</code>. Objects of this class have
methods for the functions <code>print</code> and <code>plot</code>. The <code>summary</code>
function can be used for printing output at required time points. An object
of class <code>cmp.rel</code> is composed of several lists, each pertaining the
cumulative hazard function for one risk and one strata. Each of the lists
contains the following objects: </p>
<table>
<tr style="vertical-align: top;">
<td><code>time</code></td>
<td>
<p>the time-points at which the
curves are estimated</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>est</code></td>
<td>
<p>the estimate</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var</code></td>
<td>
<p>the variance of
the estimate</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lower</code></td>
<td>
<p>the lower limit of the confidence interval</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>upper</code></td>
<td>
<p>the upper limit of the confidence interval</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>area</code></td>
<td>
<p>the
area under the curve calculated on the interval [0,<code>tau</code>]</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>index</code></td>
<td>
<p>indicator of event and censoring times among all the times in
the output. The times added via paramater <code>add.times</code> are also
included</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add.times</code></td>
<td>
<p>the times added via parameter <code>add.times</code></p>
</td>
</tr>
</table>
<h3>References</h3>

<p>Package: Pohar Perme, M., Pavlic, K. (2018) "Nonparametric
Relative Survival Analysis with the R Package relsurv". Journal of
Statistical Software. 87(8), 1-27, doi: "10.18637/jss.v087.i08"
</p>


<h3>See Also</h3>

<p><code>rs.surv</code>, <code>summary.cmp.rel</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">

data(slopop)
data(rdata)
#calculate the crude probability of death
#note that the variable year must be given in a date format and that 
#age must be multiplied by 365.241 in order to be expressed in days.
fit &lt;- cmp.rel(Surv(time,cens)~sex,rmap=list(age=age*365.241),
		ratetable=slopop,data=rdata,tau=3652.41)
fit
plot(fit,col=c(1,1,2,2),xscale=365.241,xlab="Time (years)")
#if no strata are desired:
fit &lt;- cmp.rel(Surv(time,cens)~1,rmap=list(age=age*365.241),
		ratetable=slopop,data=rdata,tau=3652.41)



</code></pre>


</div>