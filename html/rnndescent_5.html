<div class="container">

<table style="width: 100%;"><tr>
<td>k_occur</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Quantify hubness of a nearest neighbor graph</h2>

<h3>Description</h3>

<p><code>k_occur</code> returns a vector of the k-occurrences of a nearest neighbor graph
as defined by  Radovanovic and co-workers (2010). The k-occurrence of an
object is the number of times it occurs among the k-nearest neighbors of
objects in a dataset.
</p>


<h3>Usage</h3>

<pre><code class="language-R">k_occur(idx, k = NULL, include_self = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>idx</code></td>
<td>
<p>integer matrix containing the nearest neighbor indices, integers
labeled starting at 1. Note that the integer labels do <em>not</em> have to
refer to the rows of <code>idx</code>, for example if the nearest neighbor result
is from querying one set of objects with respect to another (for instance
from running <code>graph_knn_query()</code>). You may also pass a nearest
neighbor graph object (e.g. the output of running <code>nnd_knn()</code>),
and the indices will be extracted from it, or a sparse matrix in the same
format as that returned by <code>prepare_search_graph()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k</code></td>
<td>
<p>The number of closest neighbors to use. Must be between 1 and the
number of columns in <code>idx</code>. By default, all columns of <code>idx</code> are
used. Ignored if <code>idx</code> is sparse.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>include_self</code></td>
<td>
<p>logical indicating whether the label <code>i</code> in
<code>idx</code> is considered to be a valid neighbor when found in row <code>i</code>.
By default this is <code>TRUE</code>. This can be set to <code>FALSE</code> when the
the labels in <code>idx</code> refer to the row indices of <code>idx</code>, as in the
case of results from <code>nnd_knn()</code>. In this case you may not want
to consider the trivial case of an object being a neighbor of itself. In
all other cases leave this set to <code>TRUE</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The k-occurrence can take values between 0 and the size of the dataset. The
larger the k-occurrence for an object, the more "popular" it is. Very large
values of the k-occurrence (much larger than k) indicates that an object is a
"hub" and also implies the existence of "anti-hubs": objects that never
appear as k-nearest neighbors of other objects.
</p>
<p>The presence of hubs can reduce the accuracy of nearest-neighbor descent and
other approximate nearest neighbor algorithms in terms of retrieving the
exact k-nearest neighbors. However the appearance of hubs can still be
detected in these approximate results, so calculating the k-occurrences for
the output of nearest neighbor descent is a useful diagnostic step.
</p>


<h3>Value</h3>

<p>a vector of length <code>max(idx)</code>, containing the number of times an
object in <code>idx</code> was found in the nearest neighbor list of the objects
represented by the row indices of <code>idx</code>.
</p>


<h3>References</h3>

<p>Radovanovic, M., Nanopoulos, A., &amp; Ivanovic, M. (2010).
Hubs in space: Popular nearest neighbors in high-dimensional data.
<em>Journal of Machine Learning Research</em>, <em>11</em>, 2487-2531.
<a href="https://www.jmlr.org/papers/v11/radovanovic10a.html">https://www.jmlr.org/papers/v11/radovanovic10a.html</a>
</p>
<p>Bratic, B., Houle, M. E., Kurbalija, V., Oria, V., &amp; Radovanovic, M. (2019).
The Influence of Hubness on NN-Descent.
<em>International Journal on Artificial Intelligence Tools</em>, <em>28</em>(06), 1960002.
<a href="https://doi.org/10.1142/S0218213019600029">doi:10.1142/S0218213019600029</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">iris_nbrs &lt;- brute_force_knn(iris, k = 15)
iris_ko &lt;- k_occur(iris_nbrs$idx)
# items 42 and 107 are not in 15 nearest neighbors of any other members of
# iris
which(iris_ko == 1) # they are only their own nearest neighbor
max(iris_ko) # most "popular" item appears on 29 15-nearest neighbor lists
which(iris_ko == max(iris_ko)) # it's iris item 64
# with k = 15, a maximum k-occurrence = 29 ~= 1.9 * k, which is not a cause
# for concern
</code></pre>


</div>