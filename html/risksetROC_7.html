<div class="container">

<table style="width: 100%;"><tr>
<td>risksetAUC</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Incident/Dynamic (I/D) ROC curve, AUC and integrated AUC (iAUC)
estimation of censored survival data</h2>

<h3>Description</h3>

<p>This function creates risksetAUC from a survival data set
</p>


<h3>Usage</h3>

<pre><code class="language-R">risksetAUC(Stime, entry=NULL, status, marker, method="Cox",
                       span=NULL, order=1, window="asymmetric",
                       tmax, weight="rescale", plot=TRUE, type="l",
                       xlab="Time", ylab="AUC", ...)  
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Stime</code></td>
<td>
<p>For right censored data, this is the follow up time. For
left truncated data, this is the ending time for the interval.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>entry</code></td>
<td>
<p>For left truncated data, this is the entry time of
the interval. The default is set to NULL for right censored
data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>status</code></td>
<td>
<p>survival status, 1 if had an event and 0 otherwise</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>marker</code></td>
<td>
<p>marker</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>either of "Cox", "LocalCox" and "Schoenfeld", default is "Cox"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>span</code></td>
<td>
<p>bandwidth parameter that controls the size of a local
neighborhood, needed for <em>method="LocalCox"</em> or
<em>method="Schoenfeld"</em></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>order</code></td>
<td>
<p>0 or 1, locally mean if 0 and local linear if 1, needed
for method="Schoenfeld", default is 1</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>window</code></td>
<td>
<p>either of "asymmetric" or "symmetric", default is
asymmetric, needed for method="LocalCox"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tmax</code></td>
<td>
<p>maximum time to be considered for calculation of AUC</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weight</code></td>
<td>
<p>either of "rescale" or "conditional". If
<em>weight="rescale"</em>, then weights are rescaled so that the sum
is unity. If <em>weight="conditional"</em> both the event times are
assumed to be less than <em>tmax</em></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>TRUE or FALSE, default is TRUE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>default is "l", can be either of "p" for points, "l" for
line, "b" for both</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab</code></td>
<td>
<p>label for x-axis</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab</code></td>
<td>
<p>label for y-axis</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional plot arguments</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function creates and plots AUC based on incident/dynamic
definition of Heagerty, et. al. based on a survival data and marker
values. If proportional hazard is assumed then method="Cox" can be
used. In case of non-proportional hazard, either of "LocalCox" or
"Schoenfeld" can be used. These two methods differ in how the
smoothing is done. If <em>plot="TRUE"</em> then the AUC curve is plotted
against time (till <em>tmax+1</em>). Additional plot arguments can be
supplied. 
</p>


<h3>Value</h3>

<p>Returns a list of the following items:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>utimes</code></td>
<td>
<p>ordered unique failure times</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>St</code></td>
<td>
<p>estimated survival probability at utimes</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>AUC</code></td>
<td>
<p>Area under ROC curve at utimes</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Cindex</code></td>
<td>
<p>Cindex</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Paramita Saha</p>


<h3>References</h3>

<p>Heagerty, P.J., Zheng Y. (2005)
Survival Model Predictive Accuracy and ROC curves
<em>Biometrics</em>, <b>61</b>, 92 â€“ 105</p>


<h3>See Also</h3>

<p>IntegrateAUC(), weightedKM(), llCoxReg(), SchoenSmooth(),
CoxWeights()</p>


<h3>Examples</h3>

<pre><code class="language-R">library(MASS)
data(VA)
survival.time=VA$stime
survival.status=VA$status
score &lt;- VA$Karn
cell.type &lt;- factor(VA$cell)
tx &lt;- as.integer( VA$treat==1 )
age &lt;- VA$age
survival.status[survival.time&gt;500 ] &lt;- 0
survival.time[survival.time&gt;500 ] &lt;- 500
fit0 &lt;- coxph( Surv(survival.time,survival.status)
        ~ score + cell.type + tx + age, na.action=na.omit )
eta &lt;- fit0$linear.predictor
tmax=365
AUC.CC=risksetAUC(Stime=survival.time,
       status=survival.status, marker=eta, method="Cox", tmax=tmax); 

</code></pre>


</div>