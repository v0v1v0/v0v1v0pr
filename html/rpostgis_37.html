<div class="container">

<table style="width: 100%;"><tr>
<td>pgWriteRast</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Write raster to PostGIS database table.</h2>

<h3>Description</h3>

<p>Sends R raster to a PostGIS database table.
</p>


<h3>Usage</h3>

<pre><code class="language-R">pgWriteRast(
  conn,
  name,
  raster,
  bit.depth = NULL,
  blocks = NULL,
  constraints = TRUE,
  overwrite = FALSE,
  append = FALSE,
  progress = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>conn</code></td>
<td>
<p>A connection object to a PostgreSQL database.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p>A character string specifying a PostgreSQL schema in the
database (if necessary) and table name to hold the raster (e.g., 
<code>name = c("schema","table")</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>raster</code></td>
<td>
<p>An terra <code>SpatRaster</code>; objects from the raster
package (<code>RasterLayer</code>, <code>RasterBrick</code>, or <code>RasterStack</code>); 
a <code>SpatialGrid*</code> or <code>SpatialPixels*</code> from sp package.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bit.depth</code></td>
<td>
<p>The bit depth of the raster. Will be set to 32-bit
(unsigned int, signed int, or float, depending on the data)
if left null, but can be specified (as character) as one of the
PostGIS pixel types (see <a href="http://postgis.net/docs/RT_ST_BandPixelType.html">http://postgis.net/docs/RT_ST_BandPixelType.html</a>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>blocks</code></td>
<td>
<p>Optional desired number of blocks (tiles) to split the raster
into in the resulting PostGIS table. This should be specified as a
one or two-length (columns, rows) integer vector. See also 'Details'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>constraints</code></td>
<td>
<p>Whether to create constraints from raster data. Recommended
to leave <code>TRUE</code> unless applying constraints manually (see
<a href="http://postgis.net/docs/RT_AddRasterConstraints.html">http://postgis.net/docs/RT_AddRasterConstraints.html</a>).
Note that constraint notices may print to the console,
depending on the PostgreSQL server settings.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>overwrite</code></td>
<td>
<p>Whether to overwrite the existing table (<code>name</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>append</code></td>
<td>
<p>Whether to append to the existing table (<code>name</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>progress</code></td>
<td>
<p>whether to show a progress bar (TRUE by default). The progress
bar mark the progress of writing blocks into the database.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>SpatRaster band names will be stored in an array in the column
"band_names", which will be restored in R when imported with the function
<code>pgGetRast</code>.
</p>
<p>Rasters from the <code>sp</code> and <code>raster</code> packages are converted to 
<code>terra</code> objects prior to insert.
</p>
<p>If <code>blocks = NULL</code>, the number of block will vary by raster size, with
a default value of 100 copies of the data in the memory at any point in time.
If a specified number of blocks is desired, set blocks to a one or two-length 
integer vector. Note that fewer, larger blocks generally results in faster
write times.
</p>


<h3>Value</h3>

<p>TRUE for successful import.
</p>


<h3>Author(s)</h3>

<p>David Bucklin <a href="mailto:david.bucklin@gmail.com">david.bucklin@gmail.com</a> and Adrián Cidre 
González <a href="mailto:adrian.cidre@gmail.com">adrian.cidre@gmail.com</a>
</p>


<h3>See Also</h3>

<p>Function follows process from 
<a href="http://postgis.net/docs/using_raster_dataman.html#RT_Creating_Rasters">http://postgis.net/docs/using_raster_dataman.html#RT_Creating_Rasters</a>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
pgWriteRast(conn, c("schema", "tablename"), raster_name)

# basic test
r &lt;- terra::rast(nrows=180, ncols=360, xmin=-180, xmax=180,
    ymin=-90, ymax=90, vals=1)
pgWriteRast(conn, c("schema", "test"), raster = r,
    bit.depth = "2BUI", overwrite = TRUE)

## End(Not run)
</code></pre>


</div>