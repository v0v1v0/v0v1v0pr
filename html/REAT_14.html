<div class="container">

<table style="width: 100%;"><tr>
<td>dist.buf</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Counting points in a buffer
</h2>

<h3>Description</h3>

<p>Counting points within a buffer of a given distance with points with given coordinates
</p>


<h3>Usage</h3>

<pre><code class="language-R">dist.buf(startpoints, sp_id, lat_start, lon_start, endpoints, ep_id, lat_end, lon_end, 
ep_sum = NULL, bufdist = 500, extract_local = TRUE, unit = "m")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>startpoints</code></td>
<td>

<p>A data frame containing the start points
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sp_id</code></td>
<td>

<p>Column containing the IDs of the startpoints in the data frame <code>startpoints</code>
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lat_start</code></td>
<td>

<p>Column containing the latitudes of the start points in the data frame <code>startpoints</code>
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lon_start</code></td>
<td>

<p>Column containing the longitudes of the start points in the data frame <code>startpoints</code>
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>endpoints</code></td>
<td>

<p>A data frame containing the points to count
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ep_id</code></td>
<td>

<p>Column containing the IDs of the points to count in the data frame <code>endpoints</code>
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lat_end</code></td>
<td>

<p>Column containing the latitudes of the points to count in the data frame <code>endpoints</code>
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lon_end</code></td>
<td>

<p>Column containing the longitudes of the points to count in the data frame <code>endpoints</code>
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ep_sum</code></td>
<td>

<p>Column of an additional variable in the data frame <code>endpoints</code> to sum 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bufdist</code></td>
<td>

<p>The buffer distance
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>extract_local</code></td>
<td>

<p>Logical argument that indicates if the start points should be included or not (default: <code>TRUE</code>)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>unit</code></td>
<td>

<p>Unit of the buffer distance: <code>unit="m"</code> for meters, <code>unit="km"</code> for kilometers or <code>unit="miles"</code> for miles
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function is based on the idea of a buffer analysis in GIS (Geographic Information System), e.g. to count the points of interest within a given buffer distance.  
</p>


<h3>Value</h3>

<p>The function returns a <code>list</code> containing:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>count_table </code></td>
<td>
<p>A <code>data.frame</code> containing two columns: The start point IDs (<code>from</code>) and the number of counted points in the given buffer distance (<code>count_location</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>distmat </code></td>
<td>
<p>A <code>data.frame</code> containing the corresponding distance matrix wiht <code class="reqn">I x J</code> rows</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Thomas Wieland
</p>


<h3>References</h3>

<p>de Lange, N. (2013): “Geoinformatik in Theorie und Praxis”. 3rd edition. Berlin : Springer Spektrum.
</p>
<p>Krider, R. E./Putler, R. S. (2013): “Which Birds of a Feather Flock Together? Clustering and Avoidance Patterns of Similar Retail Outlets”. In: <em>Geographical Analysis</em>, <b>45</b>, 2, p. 123-149</p>


<h3>See Also</h3>

<p><code>dist</code>, <code>dist.mat</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">citynames &lt;- c("Goettingen", "Karlsruhe", "Freiburg")
lat &lt;- c(51.556307, 49.009603, 47.9874)
lon &lt;- c(9.947375, 8.417004, 7.8945)
citynames &lt;- c("Goettingen", "Karlsruhe", "Freiburg")
cities &lt;- data.frame(citynames, lat, lon)
dist.mat (cities, "citynames", "lat", "lon", cities, "citynames", "lat", "lon")
# Euclidean distance matrix (3 x 3 cities = 9 distances)
dist.buf (cities, "citynames", "lat", "lon", cities, "citynames", "lat", "lon", bufdist = 300000)
# Cities within 300 km
</code></pre>


</div>