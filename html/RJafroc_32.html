<div class="container">

<table style="width: 100%;"><tr>
<td>DfFroc2Roc</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Convert an FROC dataset to an ROC dataset</h2>

<h3>Description</h3>

<p>Convert an FROC dataset to a highest rating inferred ROC dataset
</p>


<h3>Usage</h3>

<pre><code class="language-R">DfFroc2Roc(dataset)
</code></pre>


<h3>Arguments</h3>

<table><tr style="vertical-align: top;">
<td><code>dataset</code></td>
<td>
<p>The FROC dataset to be converted, <code>RJafroc-package</code>.</p>
</td>
</tr></table>
<h3>Details</h3>

<p>The first member of the ROC dataset is <code>NL</code>, whose 3rd dimension has
length <code>(K1 + K2)</code>, the total number of cases. Ratings of cases <code>(K1 + 1)</code> 
through <code>(K1 + K2)</code> are <code>-Inf</code>. <strong>This is because in an ROC dataset 
FPs are only possible on non-diseased cases.</strong>The second member of the list is <code>LL</code>. 
Its 3rd dimension has length K2, the number of diseased cases.  <strong>This is 
because TPs are only possible on diseased cases</strong>. For each case the  
inferred ROC rating is the highest of all FROC ratings on that case. If a case has 
no marks, a <strong>finite ROC rating, guaranteed to be smaller than the rating on 
any marked case</strong>, is assigned to it. The dataset structure is shown below:
</p>

<ul>
<li>
<p><code>NL</code> Ratings array [1:I, 1:J, 1:(K1+K2), 1], of false positives, FPs
</p>
</li>
<li>
<p><code>LL</code> Ratings array [1:I, 1:J, 1:K2, 1], of true positives, TPs
</p>
</li>
<li>
<p><code>perCase</code> array [1:K2], number of lesions per diseased case
</p>
</li>
<li>
<p><code>IDs</code> array [1:K2, 1], labels of lesions on diseased cases
</p>
</li>
<li>
<p><code>weights</code> array [1:K2, 1], weights (or clinical importances) of lesions
</p>
</li>
<li>
<p><code>dataType</code> "ROC", the data type
</p>
</li>
<li>
<p><code>modalityID</code> [1:I] inherited modality labels
</p>
</li>
<li>
<p><code>readerID</code> [1:J] inherited reader labels
</p>
</li>
</ul>
<h3>Value</h3>

<p>An ROC dataset with <strong>finite ratings</strong> in NL[,,1:K1,1] and LL[,,1:K2,1].
</p>


<h3>Examples</h3>

<pre><code class="language-R">rocDataSet &lt;- DfFroc2Roc(dataset05)
rocSpDataSet &lt;- DfFroc2Roc(datasetFROCSpC)

## in the following example, because of the smaller number of cases, 
## it is easy to see the process at work:

set.seed(1);K1 &lt;- 3;K2 &lt;- 5
mu &lt;- 1;nu &lt;- 0.5;lambda &lt;- 2;zeta1 &lt;- 0
lambda_i &lt;- UtilRSM2Intrinsic(mu,lambda,nu)$lambda_i
nu_i &lt;- UtilRSM2Intrinsic(mu,lambda,nu)$nu_i
Lmax &lt;- 2;Lk2 &lt;- floor(runif(K2, 1, Lmax + 1))
frocDataRaw &lt;- SimulateFrocDataset(mu, lambda_i, nu_i, zeta1, I = 1, J = 1, 
K1, K2, perCase = Lk2)
hrData &lt;- DfFroc2Roc(frocDataRaw)

## print("frocDataRaw$ratings$NL[1,1,,] = ")
## print("hrData$ratings$NL[1,1,1:K1,] = ")
## print("frocDataRaw$ratings$LL[1,1,,] = ")
## print("hrData$ratings$LL[1,1,,] = ")

## following is the output

## [1] "frocDataRaw$ratings$NL[1,1,,] = "
## [,1]      [,2]      [,3] [,4]
## [1,] 2.4046534 0.7635935      -Inf -Inf
## [2,]      -Inf      -Inf      -Inf -Inf
## [3,] 0.2522234      -Inf      -Inf -Inf
## [4,] 0.4356833      -Inf      -Inf -Inf
## [5,]      -Inf      -Inf      -Inf -Inf
## [6,]      -Inf      -Inf      -Inf -Inf
## [7,]      -Inf      -Inf      -Inf -Inf
## [8,] 0.8041895 0.3773956 0.1333364 -Inf

## &gt; ## print("hrData$ratings$NL[1,1,1:K1,] = ")
## [1] "hrData$ratings$NL[1,1,1:K1,] = "
## [1] 2.4046534      -Inf 0.2522234
## &gt; ## print("frocDataRaw$ratings$LL[1,1,,] = ")
## [1] "frocDataRaw$ratings$LL[1,1,,] = "
## [,1] [,2]
## [1,]      -Inf -Inf
## [2,] 1.5036080 -Inf
## [3,] 0.8442045 -Inf
## [4,] 1.0467262 -Inf
## [5,]      -Inf -Inf
## &gt; ## print("hrData$ratings$LL[1,1,,] = ")
## [1] "hrData$ratings$LL[1,1,,] = "
## [1] 0.4356833 1.5036080 0.8442045 1.0467262 0.8041895
## Note that rating of the first and the last diseased case came from NL marks


</code></pre>


</div>