<div class="container">

<table style="width: 100%;"><tr>
<td>summarize_weighted_production</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Summaries based on the weight of each loan per sector per year</h2>

<h3>Description</h3>

<p>Based on on the weight of each loan per sector per year,
<code>summarize_weighted_production()</code> and <code>summarize_weighted_percent_change()</code>
summarize the production and percent-change, respectively.
</p>


<h3>Usage</h3>

<pre><code class="language-R">summarize_weighted_production(data, ..., use_credit_limit = FALSE)

summarize_weighted_percent_change(data, ..., use_credit_limit = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data frame like the output of <code>join_abcd_scenario()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Variables to group by.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use_credit_limit</code></td>
<td>
<p>Logical vector of length 1. <code>FALSE</code> defaults to using
the column <code>loan_size_outstanding</code>. Set to <code>TRUE</code> to instead use the column
<code>loan_size_credit_limit</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A tibble with the same groups as the input (if any) and columns:
<code>sector</code>, <code>technology</code>, and <code>year</code>; and <code>weighted_production</code> or
<code>weighted_production</code> for <code>summarize_weighted_production()</code> and
<code>summarize_weighted_percent_change()</code>, respectively.
</p>


<h3>Warning</h3>

<p>The percent-change analysis excludes companies with 0 production. percent-change is
undefined for companies that have no initial production; including such
companies would cause percent-change percentage to be infinite, which is wrong.
</p>


<h3>See Also</h3>

<p><code>join_abcd_scenario()</code>.
</p>
<p>Other utility functions: 
<code>join_abcd_scenario()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(r2dii.data)
library(r2dii.match)

loanbook &lt;- head(loanbook_demo, 150)
abcd &lt;- head(abcd_demo, 100)
master &lt;- loanbook %&gt;%
  match_name(abcd) %&gt;%
  prioritize() %&gt;%
  join_abcd_scenario(
    abcd = abcd,
    scenario = scenario_demo_2020,
    region_isos = region_isos_demo
    ) %&gt;%
  dplyr::filter(production != 0)

summarize_weighted_production(master)

summarize_weighted_production(master, use_credit_limit = TRUE)

summarize_weighted_percent_change(master)

summarize_weighted_percent_change(master, use_credit_limit = TRUE)

</code></pre>


</div>