<div class="container">

<table style="width: 100%;"><tr>
<td>ext_query</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Query extension</h2>

<h3>Description</h3>

<p>The <code>ext_query()</code> is the <em>exported function</em> of the STAC API
query extension. It can be used after a call to <code>stac_search()</code>
function. It allows that additional fields and operators other than those
defined in <code>stac_search()</code> function be used to make a complex filter.
</p>
<p>The function accepts multiple filter criteria. Each filter entry is an
expression formed by <code style="white-space: pre;">⁠&lt;field&gt; &lt;operator&gt; &lt;value&gt;⁠</code>, where
<code style="white-space: pre;">⁠&lt;field&gt;⁠</code> refers to a valid item property. Supported <code style="white-space: pre;">⁠&lt;fields&gt;⁠</code>
depends on STAC API service implementation. The users must rely on the
service providers' documentation to know which properties can be used
by this extension.
</p>
<p>The <code>ext_query()</code> function allows the following <code style="white-space: pre;">⁠&lt;operators&gt;⁠</code>
</p>

<ul>
<li> <p><code>==</code> corresponds to '<code>eq</code>'
</p>
</li>
<li> <p><code>!=</code> corresponds to '<code>neq</code>'
</p>
</li>
<li> <p><code>&lt;</code> corresponds to '<code>lt</code>'
</p>
</li>
<li> <p><code>&lt;=</code> corresponds to '<code>lte</code>'
</p>
</li>
<li> <p><code>&gt;</code> corresponds to '<code>gt</code>'
</p>
</li>
<li> <p><code>&gt;=</code> corresponds to '<code>gte</code>'
</p>
</li>
<li> <p><code style="white-space: pre;">⁠\%startsWith\%⁠</code> corresponds to '<code>startsWith</code>' and implements
a string prefix search operator.
</p>
</li>
<li> <p><code style="white-space: pre;">⁠\%endsWith\%⁠</code> corresponds to '<code>endsWith</code>' and implements a
string suffix search operator.
</p>
</li>
<li> <p><code style="white-space: pre;">⁠\%contains\%⁠</code>: corresponds to '<code>contains</code>' and implements a
string infix search operator.
</p>
</li>
<li> <p><code style="white-space: pre;">⁠\%in\%⁠</code>: corresponds to '<code style="white-space: pre;">⁠in⁠</code>' and implements a vector
search operator.
</p>
</li>
</ul>
<p>Besides this function, the following S3 generic methods were implemented
to get things done for this extension:
</p>

<ul>
<li>
<p> The <code>before_request()</code> for subclass <code>ext_query</code>
</p>
</li>
<li>
<p> The <code>after_response()</code> for subclass <code>ext_query</code>
</p>
</li>
</ul>
<p>See source file <code>ext_query.R</code> for an example of how to implement new
extensions.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ext_query(q, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>q</code></td>
<td>
<p>a <code>rstac_query</code> object expressing a STAC query
criteria.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>entries with format <code style="white-space: pre;">⁠&lt;field&gt; &lt;operator&gt; &lt;value&gt;⁠</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A <code>rstac_query</code> object  with the subclass <code>ext_query</code> containing
all request parameters to be passed to <code>post_request()</code> function.
</p>


<h3>See Also</h3>

<p><code>ext_filter()</code>, <code>stac_search()</code>, <code>post_request()</code>,
<code>before_request()</code>, <code>after_response()</code>, <code>content_response()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
 stac("https://brazildatacube.dpi.inpe.br/stac/") %&gt;%
   stac_search(collections = "CB4-16D-2") %&gt;%
   ext_query("bdc:tile" %in% "007004") %&gt;%
   post_request()

## End(Not run)

</code></pre>


</div>