<div class="container">

<table style="width: 100%;"><tr>
<td>redist.ipw</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Inverse probability reweighting for MCMC Redistricting</h2>

<h3>Description</h3>

<p><code>redist.ipw</code> properly weights and resamples simulated redistricting plans
so that the set of simulated plans resemble a random sample from the
underlying distribution. <code>redist.ipw</code> is used to correct the sample when
population parity, geographic compactness, or other constraints are
implemented.
</p>


<h3>Usage</h3>

<pre><code class="language-R">redist.ipw(
  plans,
  resampleconstraint = c("pop_dev", "edges_removed", "segregation", "status_quo"),
  targetbeta,
  targetpop = NULL,
  temper = 0
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>plans</code></td>
<td>
<p>An object of class <code>redist_plans</code> from <code>redist_flip()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>resampleconstraint</code></td>
<td>
<p>The constraint implemented in the simulations: one
of "pop", "compact", "segregation", or "similar".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>targetbeta</code></td>
<td>
<p>The target value of the constraint.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>targetpop</code></td>
<td>
<p>The desired level of population parity. <code>targetpop</code> =
0.01 means that the desired distance from population parity is 1%. The
default is <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>temper</code></td>
<td>
<p>A flag for whether simulated tempering was used to improve the
mixing of the Markov Chain. The default is <code>1</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function allows users to resample redistricting plans using
inverse probability weighting techniques described in Rubin (1987). This
techniques reweights and resamples redistricting plans so that the resulting
sample is representative of a random sample from the uniform distribution.
</p>


<h3>Value</h3>

<p><code>redist.ipw</code> returns an object of class "redist". The object
<code>redist</code> is a list that contains the following components (the
inclusion of some components is dependent on whether tempering
techniques are used):
</p>
<table>
<tr style="vertical-align: top;">
<td><code>plans</code></td>
<td>
<p>Matrix of congressional district assignments generated by the
algorithm. Each row corresponds to a geographic unit, and each column
corresponds to a simulation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>distance_parity</code></td>
<td>
<p>Vector containing the maximum distance from parity for
a particular simulated redistricting plan.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mhdecisions</code></td>
<td>
<p>A vector specifying whether a proposed redistricting plan
was accepted (1) or rejected (0) in a given iteration.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mhprob</code></td>
<td>
<p>A vector containing the Metropolis-Hastings acceptance
probability for each iteration of the algorithm.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pparam</code></td>
<td>
<p>A vector containing the draw of the <code>p</code> parameter for each
simulation, which dictates the number of swaps attempted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>constraint_pop</code></td>
<td>
<p>A vector containing the value of the population
constraint for each accepted redistricting plan.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>constraint_compact</code></td>
<td>
<p>A vector containing the value of the compactness
constraint for each accepted redistricting plan.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>constraint_segregation</code></td>
<td>
<p>A vector containing the value of the
segregation constraint for each accepted redistricting plan.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>constraint_similar</code></td>
<td>
<p>A vector containing the value of the similarity
constraint for each accepted redistricting plan.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>constraint_vra</code></td>
<td>
<p>A vector containing the value of the
vra constraint for each accepted redistricting plan.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>constraint_partisan</code></td>
<td>
<p>A vector containing the value of the
partisan constraint for each accepted redistricting plan.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>constraint_minority</code></td>
<td>
<p>A vector containing the value of the
minority constraint for each accepted redistricting plan.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>constraint_hinge</code></td>
<td>
<p>A vector containing the value of the
hinge constraint for each accepted redistricting plan.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>constraint_qps</code></td>
<td>
<p>A vector containing the value of the
QPS constraint for each accepted redistricting plan.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>beta_sequence</code></td>
<td>
<p>A vector containing the value of beta for each iteration
of the algorithm. Returned when tempering is being used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mhdecisions_beta</code></td>
<td>
<p>A vector specifying whether a proposed beta value was
accepted (1) or rejected (0) in a given iteration of the algorithm. Returned
when tempering is being used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mhprob_beta</code></td>
<td>
<p>A vector containing the Metropolis-Hastings acceptance
probability for each iteration of the algorithm. Returned when tempering
is being used.</p>
</td>
</tr>
</table>
<h3>References</h3>

<p>Fifield, Benjamin, Michael Higgins, Kosuke Imai and Alexander
Tarr. (2016) "A New Automated Redistricting Simulator Using Markov Chain
Monte Carlo." Working Paper.
Available at <a href="http://imai.princeton.edu/research/files/redist.pdf">http://imai.princeton.edu/research/files/redist.pdf</a>.
</p>
<p>Rubin, Donald. (1987) "Comment: A Noniterative Sampling/Importance Resampling
Alternative to the Data Augmentation Algorithm for Creating a Few Imputations
when Fractions of Missing Information are Modest: the SIR Algorithm."
Journal of the American Statistical Association.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
data(iowa)
map_ia &lt;- redist_map(iowa, existing_plan = cd_2010, pop_tol = 0.01)
cons &lt;- redist_constr(map_ia)
cons &lt;- add_constr_pop_dev(cons, strength = 5.4)
alg &lt;- redist_flip(map_ia, nsims = 500, constraints = cons)

alg_ipw &lt;- redist.ipw(plans = alg,
    resampleconstraint = "pop_dev",
    targetbeta = 1,
    targetpop = 0.05)


</code></pre>


</div>