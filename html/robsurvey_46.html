<div class="container">

<table style="width: 100%;"><tr>
<td>svymean_ratio</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Robust Ratio Predictor of the Mean and Total</h2>

<h3>Description</h3>

<p>Robust ratio predictor (<em>M</em>-estimator) of the population mean and
total with Huber and Tukey biweight (bisquare) psi-function.
</p>


<h3>Usage</h3>

<pre><code class="language-R">svytotal_ratio(object, total, variance = "wu", keep_object = TRUE, ...)
svymean_ratio(object, total, N = NULL, variance = "wu",
              keep_object = TRUE, N_unknown = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>an object of class <code>[ratio]</code>, e.g., result of
the Huber ratio <code class="reqn">M</code>-estimator <code>svyratio_huber</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>total</code></td>
<td>
<p><code>[numeric]</code> vector of population totals of the
auxiliary variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N</code></td>
<td>
<p><code>[numeric]</code> population size (see also <code>N_unknown</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>variance</code></td>
<td>
<p><code>[character]</code> type of variance estimator (default:
"wu"); see Details Section.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keep_object</code></td>
<td>
<p><code>[logical]</code> if <code>TRUE</code>, <code>object</code> is
returned as an additional slot of the return value (default:
<code>TRUE</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N_unknown</code></td>
<td>
<p><code>[logical]</code> if <code>TRUE</code>, it is assumed that
the population size is unknown; thus, it is estimated
(default: <code>FALSE</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments (currently not used).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Package <span class="pkg">survey</span> must be attached to the search path in order to use
the functions (see <code>library</code> or <code>require</code>).
</p>
<p>The (robust) ratio predictor of the population total or mean is
computed in two steps.
</p>

<ul>
<li>
<p> Step 1: Fit the ratio model associated with the predictor
by one of the functions <code>svyratio_huber</code>
or <code>svyratio_tukey</code>. The fitted model is called
<code>object</code>.
</p>
</li>
<li>
<p> Step 2: Based on the fitted model obtained in the first step,
we predict the population total and mean, respectively, by
the predictors <code>svytotal_ratio</code> and <code>svymean_ratio</code>,
where <code>object</code> is the fitted ratio model.
</p>
</li>
</ul>
<dl>
<dt>Auxiliary data</dt>
<dd>
<p>Two types of auxiliary variables are distinguished: (1)
population size <code class="reqn">N</code> and (2) the population total of the
auxiliary variable (denominator) used in the ratio model.
</p>
<p>The option <code>N_unknown = TRUE</code> can be used in the predictor
of the population mean if <code class="reqn">N</code> is unknown.
</p>
</dd>
<dt>Variance estimation</dt>
<dd>
<p>Three variance estimators are implemented (argument
<code>variance</code>): <code>"base"</code>, <code>"wu"</code>, and <code>"hajek"</code>.
These estimators correspond to the estimators <code>v0</code>, <code>v1</code>,
and <code>v2</code> in Wu (1982).
</p>
</dd>
<dt>Utility functions</dt>
<dd>
<p>The return value is an object of class <code>svystat_rob</code>.
Thus, the utility functions <code>summary</code>,
<code>coef</code>,
<code>SE</code>,
<code>vcov</code>,
<code>residuals</code>,
<code>fitted</code>, and
<code>robweights</code> are available.
</p>
</dd>
</dl>
<h3>Value</h3>

<p>Object of class <code>svystat_rob</code>
</p>


<h3>References</h3>

<p>Wu, C.-F. (1982). Estimation of Variance of the Ratio Estimator.
<em>Biometrika</em> <b>69</b>, 183â€“189.
</p>


<h3>See Also</h3>

<p>Overview (of all implemented functions)
</p>
<p><code>svymean_reg</code> and <code>svytotal_reg</code> for (robust) GREG
regression predictors
</p>
<p><code>svyreg_huberM</code>, <code>svyreg_huberGM</code>,
<code>svyreg_tukeyM</code> and <code>svyreg_tukeyGM</code> for robust
regression <code class="reqn">M</code>- and <code class="reqn">GM</code>-estimators
</p>
<p><code>svymean_huber</code>, <code>svytotal_huber</code>,
<code>svymean_tukey</code> and <code>svytotal_tukey</code> for
<code class="reqn">M</code>-estimators
</p>


<h3>Examples</h3>

<pre><code class="language-R">head(workplace)

library(survey)
# Survey design for stratified simple random sampling without replacement
dn &lt;- if (packageVersion("survey") &gt;= "4.2") {
        # survey design with pre-calibrated weights
        svydesign(ids = ~ID, strata = ~strat, fpc = ~fpc, weights = ~weight,
                  data = workplace, calibrate.formula = ~-1 + strat)
    } else {
        # legacy mode
        svydesign(ids = ~ID, strata = ~strat, fpc = ~fpc, weights = ~weight,
                  data = workplace)
    }

# Robust ratio M-estimator with Huber psi-function
rat &lt;- svyratio_huber(~payroll, ~ employment, dn, k = 5)

# Summary of the ratio estimate
summary(rat)

# Diagnostic plots of the ration/regression M-estimate (e.g.,
# standardized residuals against fitted values)
plot(rat, which = 1L)

# Plot of the robustness weights of the ratio/regression M-estimate
# against its residuals
plot(residuals(rat), robweights(rat))

# Robust ratio predictor of the population mean
m &lt;- svymean_ratio(rat, total = 1001233, N = 90840)
m

# Summary of the ratio estimate of the population mean
summary(m)

# Extract estimate
coef(m)

# Extract estimate of scale
scale(m)

# Extract estimated standard error
SE(m)
</code></pre>


</div>