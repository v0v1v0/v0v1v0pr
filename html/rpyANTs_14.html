<div class="container">

<table style="width: 100%;"><tr>
<td>ants_registration</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Register two images using 'ANTs'</h2>

<h3>Description</h3>

<p>Register two images using 'ANTs'
</p>


<h3>Usage</h3>

<pre><code class="language-R">ants_registration(
  fixed,
  moving,
  type_of_transform = "SyN",
  initial_transform = NULL,
  outprefix = tempfile(),
  mask = NULL,
  grad_step = 0.2,
  flow_sigma = 3,
  total_sigma = 0,
  aff_metric = c("mattes", "GC", "meansquares"),
  aff_sampling = 32,
  aff_random_sampling_rate = 0.2,
  syn_metric = c("mattes", "CC", "meansquares", "demons"),
  syn_sampling = 32,
  reg_iterations = c(40, 20, 0),
  aff_iterations = c(2100, 1200, 1200, 10),
  aff_shrink_factors = c(6, 4, 2, 1),
  aff_smoothing_sigmas = c(3, 2, 1, 0),
  write_composite_transform = FALSE,
  verbose = FALSE,
  smoothing_in_mm = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>fixed</code></td>
<td>
<p>fixed image to which we register the moving image, can be
character path to 'NIfTI' image, or <code>'ANTsImage'</code> instance,
<code>'oro.nifti'</code> object, <code>'niftiImage'</code> from
package <code>'RNifti'</code>, or <code>'threeBrain.nii'</code> from package
<code>'threeBrain'</code>; see also <code>as_ANTsImage</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>moving</code></td>
<td>
<p>moving image to be mapped to fixed space; see also <code>as_ANTsImage</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type_of_transform</code></td>
<td>
<p>a linear or non-linear registration type;
print <code>ants$registration</code> to see details</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>initial_transform</code></td>
<td>
<p>optional list of strings; transforms to apply prior
to registration</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outprefix</code></td>
<td>
<p>output file to save results</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mask</code></td>
<td>
<p>image mask; see also <code>as_ANTsImage</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grad_step, flow_sigma, total_sigma</code></td>
<td>
<p>optimization parameters</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aff_metric</code></td>
<td>
<p>the metric for the 'affine' transformation, choices are
<code>'GC'</code>, <code>'mattes'</code>, <code>'meansquares'</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aff_sampling, aff_random_sampling_rate, aff_iterations, aff_shrink_factors, aff_smoothing_sigmas</code></td>
<td>
<p>controls 'affine' transform</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>syn_metric</code></td>
<td>
<p>the metric for the <code>'SyN'</code> transformation, choices
are <code>'GC'</code>, <code>'mattes'</code>, <code>'meansquares'</code>, <code>'demons'</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>syn_sampling, reg_iterations</code></td>
<td>
<p>controls the <code>'SyN'</code> transform</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>write_composite_transform</code></td>
<td>
<p>whether the composite transform (and its
inverse, if it exists) should be written to an 'HDF5' composite file;
default is false</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>verbose the progress</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>smoothing_in_mm</code></td>
<td>
<p>logical, currently only impacts low dimensional
registration</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>others passed to <code>ants$registration</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Function family <code>ants_registration*</code> align images (specified by
<code>moving</code>) to <code>fixed</code>. Here are descriptions of the variations:
</p>

<dl>
<dt><code>ants_registration</code></dt>
<dd>
<p>Simple wrapper function for 'Python'
implementation <code>ants.registration</code>, providing various of registration
options</p>
</dd>
<dt><code>ants_registration_halpern1</code></dt>
<dd>
<p>Rigid-body registration designed
for 'Casey-Halpern' lab, mainly used for aligning 'MRI' to 'CT' (or the other
way around)</p>
</dd>
</dl>
<h3>Value</h3>

<p>A 'Python' dictionary of aligned images and transform files.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
if(interactive() &amp;&amp; ants_available()) {

  ants &lt;- load_ants()

  # check the python documentation here for detailed explanation
  print(ants$registration)

  # example to register
  fi &lt;- ants$image_read(ants$get_ants_data('r16'))
  mo &lt;- ants$image_read(ants$get_ants_data('r64'))

  # resample to speed up this example
  fi &lt;- ants$resample_image(fi, list(60L,60L), TRUE, 0L)
  mo &lt;- ants$resample_image(mo, list(60L,60L), TRUE, 0L)

  # SDR transform
  transform &lt;- ants_registration(
    fixed=fi, moving=mo, type_of_transform = 'SyN' )

  ants$plot(fi, overlay = transform$warpedmovout, overlay_alpha = 0.3)


}


</code></pre>


</div>