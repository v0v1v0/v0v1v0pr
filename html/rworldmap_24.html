<div class="container">

<table style="width: 100%;"><tr>
<td>mapBubbles</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>function to produce bubble plots on a map, size and colour determined by
attribute data</h2>

<h3>Description</h3>

<p>The function will produce a map with bubbles (circles) centred on country
centroids (or other chosen points). Bubbles can be sized and coloured
according to specified attribute values.
</p>


<h3>Usage</h3>

<pre><code class="language-R">mapBubbles(
  dF = "",
  nameX = "longitude",
  nameY = "latitude",
  nameZSize = "",
  nameZColour = "",
  fill = TRUE,
  pch = 21,
  symbolSize = 1,
  maxZVal = NA,
  main = nameZSize,
  numCats = 5,
  catMethod = "categorical",
  colourPalette = "heat",
  xlim = NA,
  ylim = NA,
  mapRegion = "world",
  borderCol = "grey",
  oceanCol = NA,
  landCol = NA,
  addLegend = TRUE,
  legendBg = "white",
  legendVals = "",
  legendPos = "bottomright",
  legendHoriz = FALSE,
  legendTitle = nameZSize,
  addColourLegend = TRUE,
  colourLegendPos = "bottomleft",
  colourLegendTitle = nameZColour,
  add = FALSE,
  plotZeroVals = TRUE,
  lwd = 0.5,
  lwdSymbols = 1,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dF</code></td>
<td>
<p>data frame or SpatialPolygonsDataFrame</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nameX</code></td>
<td>
<p>name of column containing the X variable (longitude), not
needed if dF is a SpatialPolygonsDataFrame</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nameY</code></td>
<td>
<p>name of column containing the Y variable (lattitude), not
needed if dF is a SpatialPolygonsDataFrame</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nameZSize</code></td>
<td>
<p>name of column containing numeric variable to set symbol
size</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nameZColour</code></td>
<td>
<p>name of column containing variable to set symbol colour</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fill</code></td>
<td>
<p>whether or not to fill symbols TRUE/FALSE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pch</code></td>
<td>
<p>symbol type, default of 21 for circles, will work with other
filled symbol types e.g. 22=square, 23=diamond, 24=triangle</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>symbolSize</code></td>
<td>
<p>multiplier of default symbol size</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxZVal</code></td>
<td>
<p>the attribute value corresponding to the maximum symbol size,
this can be used to set the scaling the same between multiple plots</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main</code></td>
<td>
<p>title for the map, set to nameZSize by default</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>numCats</code></td>
<td>
<p>number of categories to put the data in, may be modified if
this number is incompatible with the catMethod chosen</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>catMethod</code></td>
<td>
<p>method for categorisation of data "pretty", "fixedWidth",
"diverging", "logFixedWidth", "quantiles", "categorical", or a numeric
vector defining breaks</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colourPalette</code></td>
<td>
<p>a string describing the colour palette to use, choice
of : </p>
 <ol>
<li>
<p> ="palette" for the current palette </p>
</li>
<li>
<p> a vector of
valid colours, e.g. =c('red','white','blue') or output from RColourBrewer
</p>
</li>
<li>
<p> = one of "heat", "diverging", "white2Black", "black2White", "topo",
"rainbow", "terrain", "negpos8", "negpos9" </p>
</li>
</ol>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlim</code></td>
<td>
<p>map extents c(west,east), can be overidden by mapRegion</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylim</code></td>
<td>
<p>map extents c(south,north), can be overidden by mapRegion</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mapRegion</code></td>
<td>
<p>a country name from getMap()$NAME or
'world','africa','oceania','eurasia','uk' sets map extents, overrides
xlim,ylim</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>borderCol</code></td>
<td>
<p>the colour for country borders</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>oceanCol</code></td>
<td>
<p>a colour for the ocean</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>landCol</code></td>
<td>
<p>a colour to fill countries</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>addLegend</code></td>
<td>
<p>whether to add a legend for symbol sizes</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legendBg</code></td>
<td>
<p>background colour for the legend, NA=transparent</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legendVals</code></td>
<td>
<p>allows user to set values and hence symbol sizing in legend</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legendPos</code></td>
<td>
<p>positioning of legend e.g. 'bottomleft', 'topright'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legendHoriz</code></td>
<td>
<p>whether to arrange legend elements horizontally
TRUE/FALSE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legendTitle</code></td>
<td>
<p>title for the symbol size legend</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>addColourLegend</code></td>
<td>
<p>whether to add a legend for symbol colour</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colourLegendPos</code></td>
<td>
<p>positioning of colour legend e.g. 'bottomleft',
'topright'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colourLegendTitle</code></td>
<td>
<p>title for the colour size legend</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add</code></td>
<td>
<p>whether to add the symbols to an existing map, TRUE/FALSE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plotZeroVals</code></td>
<td>
<p>whether to plot zero values as a cross, TRUE/FALSE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lwd</code></td>
<td>
<p>line width for country borders</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lwdSymbols</code></td>
<td>
<p>line width for symbols</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>any extra arguments to points()</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>By default separate legends are added fro symbol size and colouring on
either side of the plot, these can be modified by altering legend
parameters.
</p>


<h3>Value</h3>

<p>currently doesn't return anything
</p>


<h3>Author(s)</h3>

<p>andy south
</p>


<h3>Examples</h3>

<pre><code class="language-R">
mapBubbles()
#square symbols
mapBubbles(pch=22)

mapBubbles(dF=getMap(), nameZSize="POP_EST", nameZColour="GEO3")

#change colour
mapBubbles(dF=getMap(), nameZSize="POP_EST", nameZColour="GEO3"
          ,colourPalette='rainbow', oceanCol='lightblue', landCol='wheat') 


data("countryExData",envir=environment(),package="rworldmap")
sPDF &lt;- joinCountryData2Map(countryExData,joinCode = "ISO3"
                           ,nameJoinColumn = "ISO3V10")
                           
mapBubbles(sPDF, nameZSize="POP_EST",nameZColour="BIODIVERSITY"
          ,colourPalette='topo',numCats=5,catMethod="quantiles")

#filled bubbles with set transparency
mapBubbles(fill=TRUE,colourPalette=adjustcolor(palette(), alpha.f = 0.5))
#add bubble edge of a single colour (also with option to set transparency
mapBubbles(nameZColour = adjustcolor('black', alpha.f = 0.7), fill=FALSE, add=TRUE)

</code></pre>


</div>