<div class="container">

<table style="width: 100%;"><tr>
<td>heartbeat</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Heartbeat Loop</h2>

<h3>Description</h3>

<p>The heartbeat loop updates the heartbeat key if the worker is still alive.
If the kill key is set, the worker is killed.
This function is called in a callr session.
</p>


<h3>Usage</h3>

<pre><code class="language-R">heartbeat(
  network_id,
  config,
  worker_id,
  heartbeat_period,
  heartbeat_expire,
  pid
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>network_id</code></td>
<td>
<p>(<code>character(1)</code>)<br>
Identifier of the rush network.
Controller and workers must have the same instance id.
Keys in Redis are prefixed with the instance id.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>config</code></td>
<td>
<p>(redux::redis_config)<br>
Redis configuration options.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>worker_id</code></td>
<td>
<p>(<code>character(1)</code>)<br>
Identifier of the worker.
Keys in redis specific to the worker are prefixed with the worker id.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>heartbeat_period</code></td>
<td>
<p>(<code>integer(1)</code>)<br>
Period of the heartbeat in seconds.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>heartbeat_expire</code></td>
<td>
<p>(<code>integer(1)</code>)<br>
Time to live of the heartbeat in seconds.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pid</code></td>
<td>
<p>(<code>integer(1)</code>)<br>
Process ID of the worker.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>NULL</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># This example is not executed since Redis must be installed

   config_local = redux::redis_config()

   rush_plan(
     config = config_local,
     n_workers = 2,
     lgr_thresholds = c(rush = "info"))

   rush = rsh(network_id = "test_network")

   fun = function(x1, x2, ...) list(y = x1 + x2)
   rush$start_local_workers(
     fun = fun,
     heartbeat_period = 3,
     heartbeat_expire = 9)

   rush$stop_workers()

</code></pre>


</div>