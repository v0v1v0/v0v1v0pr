<div class="container">

<table style="width: 100%;"><tr>
<td>imp.rfemp</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Perform multiple imputation using the empirical error distributions and
predicted probabilities of random forests</h2>

<h3>Description</h3>

<p><code>RfEmp</code> multiple imputation method is for mixed types of variables,
and calls corresponding functions based on variable types.
Categorical variables should be of type <code>factor</code> or <code>logical</code>, etc.
</p>
<p><code>RfPred.Emp</code> is used for continuous variables, and <code>RfPred.Cate</code>
is used for categorical variables.
</p>


<h3>Usage</h3>

<pre><code class="language-R">imp.rfemp(
  data,
  num.imp = 5,
  max.iter = 5,
  num.trees = 10,
  alpha.emp = 0,
  sym.dist = TRUE,
  pre.boot = TRUE,
  num.trees.cont = NULL,
  num.trees.cate = NULL,
  num.threads = NULL,
  print.flag = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data frame or a matrix containing the incomplete data. Missing
values should be coded as <code>NA</code>s.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num.imp</code></td>
<td>
<p>Number of multiple imputations. The default is
<code>num.imp = 5</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max.iter</code></td>
<td>
<p>Number of iterations. The default is <code>max.iter = 5</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num.trees</code></td>
<td>
<p>Number of trees to build. The default is
<code>num.trees = 10</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha.emp</code></td>
<td>
<p>The "significance level" for the empirical distribution of
out-of-bag prediction errors, can be used for prevention for outliers
(helpful for highly skewed variables).
For example, set alpha = 0.05 to use 95% confidence level.
The default is <code>alpha.emp = 0.0</code>, and the empirical distribution of
out-of-bag prediction errors will be kept intact.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sym.dist</code></td>
<td>
<p>If <code>TRUE</code>, the empirical distribution of out-of-bag
prediction errors will be assumed to be symmetric; if <code>FALSE</code>, the
empirical distribution will be kept intact. The default is
<code>sym.dist = TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pre.boot</code></td>
<td>
<p>If <code>TRUE</code>, bootstrapping prior to imputation will be
performed to perform 'proper' multiple imputation, for accommodating sampling
variation in estimating population regression parameters
(refer to Shah et al. 2014).
It should be noted that if <code>TRUE</code>, this option is valid even if the
number of trees is set to one.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num.trees.cont</code></td>
<td>
<p>Number of trees to build for continuous variables.
The default is <code>num.trees.cont = NULL</code> and the value of <code>num.trees</code>
will be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num.trees.cate</code></td>
<td>
<p>Number of trees to build for categorical variables,
The default is <code>num.trees.cate = NULL</code> and the value of <code>num.trees</code>
will be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num.threads</code></td>
<td>
<p>Number of threads for parallel computing. The default is
<code>num.threads = NULL</code> and all the processors available can be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>print.flag</code></td>
<td>
<p>If <code>TRUE</code>, details will be sent to console. The
default is <code>print.flag = FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Other arguments to pass down.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>For continuous variables, <code>mice.impute.rfpred.emp</code> is called, performing
imputation based on the empirical distribution of out-of-bag
prediction errors of random forests.
</p>
<p>For categorical variables, <code>mice.impute.rfpred.cate</code> is called,
performing imputation based on predicted probabilities.
</p>


<h3>Value</h3>

<p>An object of S3 class <code>mids</code>.
</p>


<h3>Author(s)</h3>

<p>Shangzhi Hong
</p>


<h3>References</h3>

<p>Hong, Shangzhi, et al. "Multiple imputation using chained random forests."
Preprint, submitted April 30, 2020. https://arxiv.org/abs/2004.14823.
</p>
<p>Zhang, Haozhe, et al. "Random Forest Prediction Intervals."
The American Statistician (2019): 1-20.
</p>
<p>Shah, Anoop D., et al. "Comparison of random forest and parametric
imputation models for imputing missing data using MICE: a CALIBER study."
American journal of epidemiology 179.6 (2014): 764-774.
</p>
<p>Malley, James D., et al. "Probability machines." Methods of information
in medicine 51.01 (2012): 74-81.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Prepare data: convert categorical variables to factors
nhanes.fix &lt;- nhanes
nhanes.fix[, c("age", "hyp")] &lt;- lapply(nhanes[, c("age", "hyp")], as.factor)
# Perform imputation using imp.rfemp
imp &lt;- imp.rfemp(nhanes.fix)
# Do repeated analyses
anl &lt;- with(imp, lm(chl ~ bmi + hyp))
# Pool the results
pool &lt;- pool(anl)
# Get pooled estimates
reg.ests(pool)

</code></pre>


</div>