<div class="container">

<table style="width: 100%;"><tr>
<td>output</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Exporting Factorization Matrices</h2>

<h3>Description</h3>

<p>This method is a member function of class "<code>RecoSys</code>"
that exports the user score matrix <code class="reqn">P</code> and the item score matrix <code class="reqn">Q</code>.
</p>
<p>Prior to calling this method, model needs to be trained using member function
<code>$train()</code>.
</p>
<p>The common usage of this method is
</p>
<pre>r = Reco()
r$train(...)
r$output(out_P = out_file("mat_P.txt"), out_Q = out_file("mat_Q.txt"))</pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>r</code></td>
<td>
<p>Object returned by <code>Reco()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>out_P</code></td>
<td>
<p>An object of class <code>Output</code> that specifies the
output format of the user matrix, typically returned by function
<code>out_file()</code>, <code>out_memory()</code> or
<code>out_nothing()</code>.
<code>out_file()</code> writes the matrix into a file, with
each row representing a user and each column representing a
latent factor.
<code>out_memory()</code> exports the matrix
into the return value of <code>$output()</code>.
<code>out_nothing()</code> means the matrix will not be exported.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>out_Q</code></td>
<td>
<p>Ditto, but for the item matrix.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list with components <code>P</code> and <code>Q</code>. They will be filled
with user or item matrix if <code>out_memory()</code> is used
in the function argument, otherwise <code>NULL</code> will be returned.
</p>


<h3>Author(s)</h3>

<p>Yixuan Qiu &lt;<a href="https://statr.me">https://statr.me</a>&gt;
</p>


<h3>References</h3>

<p>W.-S. Chin, Y. Zhuang, Y.-C. Juan, and C.-J. Lin.
A Fast Parallel Stochastic Gradient Method for Matrix Factorization in Shared Memory Systems.
ACM TIST, 2015.
</p>
<p>W.-S. Chin, Y. Zhuang, Y.-C. Juan, and C.-J. Lin.
A Learning-rate Schedule for Stochastic Gradient Methods to Matrix Factorization.
PAKDD, 2015.
</p>
<p>W.-S. Chin, B.-W. Yuan, M.-Y. Yang, Y. Zhuang, Y.-C. Juan, and C.-J. Lin.
LIBMF: A Library for Parallel Matrix Factorization in Shared-memory Systems.
Technical report, 2015.
</p>


<h3>See Also</h3>

<p><code>$train()</code>, <code>$predict()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">train_set = system.file("dat", "smalltrain.txt", package = "recosystem")
r = Reco()
set.seed(123) # This is a randomized algorithm
r$train(data_file(train_set), out_model = file.path(tempdir(), "model.txt"),
        opts = list(dim = 10, nmf = TRUE))

## Write P and Q matrices to files
P_file = out_file(tempfile())
Q_file = out_file(tempfile())
r$output(P_file, Q_file)
head(read.table(P_file@dest, header = FALSE, sep = " "))
head(read.table(Q_file@dest, header = FALSE, sep = " "))

## Skip P and only export Q
r$output(out_nothing(), Q_file)

## Return P and Q in memory
res = r$output(out_memory(), out_memory())
head(res$P)
head(res$Q)

</code></pre>


</div>