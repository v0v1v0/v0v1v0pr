<div class="container">

<table style="width: 100%;"><tr>
<td>rule</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>General creator of an instance of the S3 <code>rmake.rule</code> class</h2>

<h3>Description</h3>

<p>Rule is an atomic element of the build process. It defines a set of <code>target</code> file names,
which are to be built with a given <code>build</code> command from a given set <code>depends</code> of files
that targets depend on, and which can be removed by a given <code>clean</code> command.
</p>


<h3>Usage</h3>

<pre><code class="language-R">rule(target, depends = NULL, build = NULL, clean = NULL,
  task = "all", phony = FALSE, type = "")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>target</code></td>
<td>
<p>A character vector of target file names that are created by the given build command</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>depends</code></td>
<td>
<p>A character vector of file names the build command depends on</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>build</code></td>
<td>
<p>A shell command that runs the build of the given target</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>clean</code></td>
<td>
<p>A shell command that erases all files produced by the build command</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>task</code></td>
<td>
<p>A character vector of parent task names. The mechanism of tasks allows to
group rules. Anything different from <code>'all'</code> will
cause creation of a new task depending on the given rule. Executing <code>make taskname</code>
will then force building of this rule.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>phony</code></td>
<td>
<p>Whether the rule has a <code>PHONY</code> (i.e. non-file) target. A rule should be marked with
<code>phony</code> if the target is not a file name that would be generated by the <code>build</code> commands.
E.g. <code>all</code> or <code>clean</code> are phony targets. Also all targets representing tasks (see <code>task</code> above) are phony.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>A string representing a type of a rule used e.g. while printing a rule in easily readable format.
For instance, <code>rRule()</code> uses <code>R</code>, <code>markdownRule()</code> uses <code>markdown</code> etc.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If there is a need to group some rules together, one can assign them the same task identifier in
the <code>task</code> argument. Each rule may get assigned one or more tasks. Tasks may be then built
by executing <code>make task_name</code> on the command line, which forces to rebuild all rules assigned to the
task <code>'task_name'</code>. By default, all rules are assigned to task <code>all</code>,
which causes <code>make all</code> command to build everything.
</p>


<h3>Value</h3>

<p>Instance of S3 class <code>rmake.rule</code>
</p>


<h3>Author(s)</h3>

<p>Michal Burda
</p>


<h3>See Also</h3>

<p><code>makefile()</code>, <code>inShell()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">r &lt;- rule(target='something.abc',
          depends=c('file.a', 'file.b', 'file.c'),
          build='myCompiler file.a file.b file.c -o something.abc',
          clean='$(RM) something.abc')

# generate the content of a makefile (as character vector)
makefile(list(r))

# generate to file
tmp &lt;- tempdir()
makefile(list(r), file.path(tmp, "Makefile"))
</code></pre>


</div>