<div class="container">

<table style="width: 100%;"><tr>
<td>plot_prism</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plot prism diagram of frequencies and probabilities.</h2>

<h3>Description</h3>

<p><code>plot_prism</code> plots a network diagram of
from a sufficient and valid set of 3 essential probabilities
(<code>prev</code>, and
<code>sens</code> or its complement <code>mirt</code>, and
<code>spec</code> or its complement <code>fart</code>)
or existing frequency information <code>freq</code>
and a population size of <code>N</code> individuals.
</p>


<h3>Usage</h3>

<pre><code class="language-R">plot_prism(
  prev = num$prev,
  sens = num$sens,
  mirt = NA,
  spec = num$spec,
  fart = NA,
  N = num$N,
  by = "cddc",
  area = "no",
  scale = "p",
  round = TRUE,
  sample = FALSE,
  f_lbl = "num",
  f_lbl_sep = NA,
  f_lwd = 0,
  p_lwd = 1,
  p_scale = FALSE,
  p_lbl = "mix",
  arr_c = NA,
  lbl_txt = txt,
  main = txt$scen_lbl,
  sub = "type",
  title_lbl = NULL,
  cex_lbl = 0.9,
  cex_p_lbl = NA,
  col_pal = pal,
  mar_notes = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>prev</code></td>
<td>
<p>The condition's prevalence <code>prev</code>
(i.e., the probability of condition being <code>TRUE</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sens</code></td>
<td>
<p>The decision's sensitivity <code>sens</code>
(i.e., the conditional probability of a positive decision
provided that the condition is <code>TRUE</code>).
<code>sens</code> is optional when its complement <code>mirt</code> is provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mirt</code></td>
<td>
<p>The decision's miss rate <code>mirt</code>
(i.e., the conditional probability of a negative decision
provided that the condition is <code>TRUE</code>).
<code>mirt</code> is optional when its complement <code>sens</code> is provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>spec</code></td>
<td>
<p>The decision's specificity value <code>spec</code>
(i.e., the conditional probability
of a negative decision provided that the condition is <code>FALSE</code>).
<code>spec</code> is optional when its complement <code>fart</code> is provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fart</code></td>
<td>
<p>The decision's false alarm rate <code>fart</code>
(i.e., the conditional probability
of a positive decision provided that the condition is <code>FALSE</code>).
<code>fart</code> is optional when its complement <code>spec</code> is provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N</code></td>
<td>
<p>The number of individuals in the population.
A suitable value of <code>N</code> is computed, if not provided.
Note that a population size <code>N</code> is not needed
for computing current probability information <code>prob</code>,
but is needed for computing frequency information
<code>freq</code> from current probabilities <code>prob</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by</code></td>
<td>
<p>A character code specifying 1 or 2 perspective(s)
that split(s) the population into 2 subsets.
Specifying 1 perspective plots a frequency tree (single tree)
with 3 options:
</p>

<ol>
<li> <p><code>"cd"</code>: by condition only;
</p>
</li>
<li> <p><code>"dc"</code>: by decision only;
</p>
</li>
<li> <p><code>"ac"</code>: by accuracy only.
</p>
</li>
</ol>
<p>Specifying 2 perspectives plots a frequency prism (double tree)
with 6 options:
</p>

<ol>
<li> <p><code>"cddc"</code>: by condition (cd) and by decision (dc) (default);
</p>
</li>
<li> <p><code>"cdac"</code>: by condition (cd) and by accuracy (ac);
</p>
</li>
<li> <p><code>"dccd"</code>: by decision (dc) and by condition (cd);
</p>
</li>
<li> <p><code>"dcac"</code>: by decision (dc) and by accuracy (ac);
</p>
</li>
<li> <p><code>"accd"</code>: by accuracy (ac) and by condition (cd);
</p>
</li>
<li> <p><code>"acdc"</code>: by accuracy (ac) and by decision (dc).
</p>
</li>
</ol>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>area</code></td>
<td>
<p>A character code specifying the shapes of the frequency boxes,
with 3 options:
</p>

<ol>
<li> <p><code>"no"</code>: rectangular frequency boxes, not scaled (default);
</p>
</li>
<li> <p><code>"hr"</code>: frequency boxes are horizontal rectangles (scaled relative to N).
</p>
</li>
<li> <p><code>"sq"</code>: frequency boxes are squares (scaled relative to N).
</p>
</li>
</ol>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scale</code></td>
<td>
<p>Scale probabilities and corresponding node dimensions either by
exact probability or by (rounded or non-rounded) frequency, with 2 options:
</p>

<ol>
<li> <p><code>"p"</code>: scale node dimensions by exact probability (default);
</p>
</li>
<li> <p><code>"f"</code>: re-compute probabilities from (rounded or non-rounded) frequencies
and scale node dimensions by their frequency.
</p>
</li>
</ol>
<p>Note: <code>scale</code> setting matters for the display of probability values and for
area plots with small population sizes <code>N</code> when <code>round = TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>round</code></td>
<td>
<p>Boolean option specifying whether computed frequencies
are rounded to integers. Default: <code>round = TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sample</code></td>
<td>
<p>Boolean value that determines whether frequency values
are sampled from <code>N</code>, given the probability values of
<code>prev</code>, <code>sens</code>, and <code>spec</code>.
Default: <code>sample = FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>f_lbl</code></td>
<td>
<p>Type of label for showing frequency values in nodes,
with 6 options:
</p>

<ol>
<li> <p><code>"def"</code>: abbreviated names and frequency values;
</p>
</li>
<li> <p><code>"abb"</code>: abbreviated frequency names only (as specified in code);
</p>
</li>
<li> <p><code>"nam"</code>: names only (as specified in <code>lbl_txt = txt</code>);
</p>
</li>
<li> <p><code>"num"</code>: numeric frequency values only (default);
</p>
</li>
<li> <p><code>"namnum"</code>: names (as specified in <code>lbl_txt = txt</code>) and numeric values;
</p>
</li>
<li> <p><code>"no"</code>: no frequency labels (same for <code>f_lbl = NA</code> or <code>NULL</code>).
</p>
</li>
</ol>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>f_lbl_sep</code></td>
<td>
<p>Separator for frequency labels
(used for <code>f_lbl = "def" OR "namnum"</code>).
Use <code>f_lbl_sep = ":\n"</code> to add a line break between name and numeric value.
Default: <code>f_lbl_sep = NA</code> (set to <code>" = "</code> or <code>":\n"</code> based on <code>f_lbl</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>f_lwd</code></td>
<td>
<p>Line width of areas.
Default: <code>f_lwd = 0</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p_lwd</code></td>
<td>
<p>Line width of probability links.
Default: <code>p_lwd = 1</code>, but consider increasing when setting <code>p_scale = TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p_scale</code></td>
<td>
<p>Boolean option for scaling current widths of probability links
(as set by <code>p_lwd</code>) by the current probability values.
Default: <code>p_scale = FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p_lbl</code></td>
<td>
<p>Type of label for showing 3 key probability links and values,
with many options:
</p>

<ol>
<li> <p><code>"abb"</code>: show links and abbreviated probability names;
</p>
</li>
<li> <p><code>"def"</code>: show links and abbreviated probability names and values;
</p>
</li>
<li> <p><code>"min"</code>: show links and minimum (prominent) probability names;
</p>
</li>
<li> <p><code>"mix"</code>: show links and prominent probability names and all values (default);
</p>
</li>
<li> <p><code>"nam"</code>: show links and probability names (as specified in code);
</p>
</li>
<li> <p><code>"num"</code>: show links and numeric probability values;
</p>
</li>
<li> <p><code>"namnum"</code>: show links with names and numeric probability values;
</p>
</li>
<li> <p><code>"no"</code>: show links with no labels (same for <code>p_lbl = NA</code> or <code>NULL</code>).
</p>
</li>
</ol>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>arr_c</code></td>
<td>
<p>Arrow code for symbols at ends of probability links
(as a numeric value <code>-3 &lt;= arr_c &lt;= +6</code>),
with the following options:
</p>

<ul>
<li> <p><code>-1</code> to <code>-3</code>: points at one/other/both end/s;
</p>
</li>
<li> <p><code>0</code>: no symbols;
</p>
</li>
<li> <p><code>+1</code> to <code>+3</code>: V-arrow at one/other/both end/s;
</p>
</li>
<li> <p><code>+4</code> to <code>+6</code>: T-arrow at one/other/both end/s.
</p>
</li>
</ul>
<p>Default: <code>arr_c = NA</code>, but adjusted by <code>area</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lbl_txt</code></td>
<td>
<p>Default label set for text elements.
Default: <code>lbl_txt = txt</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main</code></td>
<td>
<p>Text label for main plot title.
Default: <code>main = txt$scen_lbl</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sub</code></td>
<td>
<p>Text label for plot subtitle (on 2nd line).
Default: <code>sub = "type"</code> shows information on current plot type.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title_lbl</code></td>
<td>
<p><strong>Deprecated</strong> text label for current plot title.
Replaced by <code>main</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex_lbl</code></td>
<td>
<p>Scaling factor for text labels (frequencies and headers).
Default: <code>cex_lbl = .90</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex_p_lbl</code></td>
<td>
<p>Scaling factor for text labels (probabilities).
Default: <code>cex_p_lbl = cex_lbl - .05</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_pal</code></td>
<td>
<p>Color palette.
Default: <code>col_pal = pal</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mar_notes</code></td>
<td>
<p>Boolean option for showing margin notes.
Default: <code>mar_notes = FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Other (graphical) parameters.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>plot_prism</code> generalizes and replaces <code>plot_fnet</code>
by removing the dependency on the R package <code>diagram</code>
and providing many additional options.
</p>


<h3>Value</h3>

<p>Nothing (NULL).
</p>


<h3>See Also</h3>

<p><code>plot_fnet</code> for older (obsolete) version;
<code>plot_area</code> for plotting mosaic plot (scaling area dimensions);
<code>plot_bar</code> for plotting frequencies as vertical bars;
<code>plot_tab</code> for plotting table (without scaling area dimensions);
<code>pal</code> contains current color settings;
<code>txt</code> contains current text settings.
</p>
<p>Other visualization functions: 
<code>plot.riskyr()</code>,
<code>plot_area()</code>,
<code>plot_bar()</code>,
<code>plot_crisk()</code>,
<code>plot_curve()</code>,
<code>plot_fnet()</code>,
<code>plot_icons()</code>,
<code>plot_mosaic()</code>,
<code>plot_plane()</code>,
<code>plot_tab()</code>,
<code>plot_tree()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Basics:
# (1) Using global prob and freq values:
plot_prism()  # default prism plot,
# same as:
# plot_prism(by = "cddc", area = "no", scale = "p",
#            f_lbl = "num", f_lwd = 0, cex_lbl = .90,
#            p_lbl = "mix", arr_c = -2, cex_p_lbl = NA)

# (2) Providing values:
plot_prism(N = 10, prev = 1/3, sens = 3/5, spec = 4/5, area = "hr")
plot_prism(N = 10, prev = 1/4, sens = 3/5, spec = 2/5, area = "sq", mar_notes = TRUE)

# (3) Rounding and sampling:
plot_prism(N = 100, prev = 1/3, sens = 2/3, spec = 6/7, area = "hr", round = FALSE)
plot_prism(N = 100, prev = 1/3, sens = 2/3, spec = 6/7, area = "hr", sample = TRUE, scale = "freq")

# (4) Custom colors and text:
plot_prism(col_pal = pal_bw, f_lwd = .5, p_lwd = .5, lty = 2, # custom fbox color, prob links,
           font = 3, cex_p_lbl = .75)                         # and text labels

my_txt &lt;- init_txt(cond_lbl = "The Truth", cond_true_lbl = "so true", cond_false_lbl = "so false",
                   hi_lbl = "TP", mi_lbl = "FN", fa_lbl = "FP", cr_lbl = "TN")
my_col &lt;- init_pal(N_col = rgb(0, 169, 224, max = 255),  # seeblau
                   hi_col = "gold", mi_col = "firebrick1", fa_col = "firebrick2", cr_col = "orange")
plot_prism(f_lbl = "nam", lbl_txt = my_txt,
           col_pal = my_col, f_lwd = .5)

## Local values and custom color/txt settings:
plot_prism(N = 7, prev = 1/2, sens = 3/5, spec = 4/5, round = FALSE,
           by = "cdac", lbl_txt = txt_org, f_lbl = "namnum", f_lbl_sep = ":\n",
           f_lwd = 1, col_pal = pal_rgb)  # custom colors

plot_prism(N = 5, prev = 1/2, sens = .8, spec = .5, scale = "p",  # note scale!
           by = "cddc", area = "hr", col_pal = pal_bw, f_lwd = 1) # custom colors

plot_prism(N = 3, prev = .50, sens = .50, spec = .50, scale = "p",              # note scale!
           area = "sq", lbl_txt = txt_org, f_lbl = "namnum", f_lbl_sep = ":\n", # custom text
           col_pal = pal_kn, f_lwd = .5)                                        # custom colors

## Plot versions:
# (A) tree/single tree (nchar(by) == 2):
#     3 versions:
plot_prism(by = "cd", f_lbl = "def", col_pal = pal_mod) # by condition (freq boxes: hi mi fa cr)
plot_prism(by = "dc", f_lbl = "def", col_pal = pal_mod) # by decision  (freq boxes: hi fa mi cr)
plot_prism(by = "ac", f_lbl = "def", col_pal = pal_mod) # by accuracy  (freq boxes: hi cr mi fa)

# (B) prism/double tree (nchar(by) == 4):
#     6 (3 x 2) versions (+ 3 redundant ones):
plot_prism(by = "cddc")    # v01 (default)
plot_prism(by = "cdac")    # v02
# plot_prism(by = "cdcd")  # (+) Message

plot_prism(by = "dccd")    # v03
plot_prism(by = "dcac")    # v04
# plot_prism(by = "dcdc")  # (+) Message

plot_prism(by = "accd")    # v05
plot_prism(by = "acdc")    # v06
# plot_prism(by = "acac")  # (+) Message

## Other options:

# area:
# plot_prism(area = "no")  # rectangular boxes (default): (same if area = NA/NULL)
plot_prism(area = "hr")  # horizontal rectangles (widths on each level sum to N)
plot_prism(area = "sq")  # squares (areas on each level sum to N)

# scale (matters for scaled areas and small N):
plot_prism(N = 5, prev = .3, sens = .8, spec = .6,
           area = "hr", scale = "p")  # widths scaled by prob
plot_prism(N = 5, prev = .3, sens = .8, spec = .6,
           area = "hr", scale = "f")  # widths scaled by (rounded or non-rounded) freq
plot_prism(N = 4, prev = .2, sens = .7, spec = .8,
           area = "sq", scale = "p")  # areas scaled by prob
plot_prism(N = 4, prev = .2, sens = .7, spec = .8,
           area = "sq", scale = "f")  # areas scaled by (rounded or non-rounded) freq

## Frequency boxes:
# f_lbl:
plot_prism(f_lbl = "abb")      # abbreviated freq names (variable names)
plot_prism(f_lbl = "nam")      # only freq names
plot_prism(f_lbl = "num")      # only numeric freq values (default)
plot_prism(f_lbl = "namnum")   # names and numeric freq values
# plot_prism(f_lbl = "namnum", cex_lbl = .75)  # smaller freq labels
# plot_prism(f_lbl = NA)       # no freq labels
# plot_prism(f_lbl = "def")    # informative default: short name and numeric value (abb = num)

# f_lwd:
# plot_prism(f_lwd =  0)  # no lines (default), set to tiny_lwd = .001, lty = 0 (same if NA/NULL)
plot_prism(f_lwd =  1)  # basic lines
plot_prism(f_lwd =  3)  # thicker lines
# plot_prism(f_lwd = .5)  # thinner lines

## Probability links:
# Scale link widths (p_lwd &amp; p_scale):
plot_prism(p_lwd = 6, p_scale = TRUE)
plot_prism(area = "sq", f_lbl = "num", p_lbl = NA, col_pal = pal_bw, p_lwd = 6, p_scale = TRUE)

# p_lbl:
plot_prism(p_lbl = "mix")     # abbreviated names with numeric values (abb = num)
plot_prism(p_lbl = "min")     # minimal names (of key probabilities)
# plot_prism(p_lbl = NA)      # no prob labels (NA/NULL/"none")
plot_prism(p_lbl = "nam")     # only prob names
plot_prism(p_lbl = "num")     # only numeric prob values
plot_prism(p_lbl = "namnum")  # names and numeric prob values
# plot_prism(p_lbl = "namnum", cex_p_lbl = .70)  # smaller prob labels
# plot_prism(by = "cddc", p_lbl = "min")  # minimal labels
# plot_prism(by = "cdac", p_lbl = "min")
# plot_prism(by = "cddc", p_lbl = "mix")  # mix abbreviated names and numeric values
# plot_prism(by = "cdac", p_lbl = "mix")
# plot_prism(by = "cddc", p_lbl = "abb")  # abbreviated names
# plot_prism(by = "cdac", p_lbl = "abb")
# plot_prism(p_lbl = "any") # short name and value (abb = num)

# arr_c:
plot_prism(arr_c =  0)  # acc_c = 0: no arrows
plot_prism(arr_c = -3)  # arr_c = -1 to -3: points at both ends
plot_prism(arr_c = -2)  # point at far end
plot_prism(arr_c = +2)  # crr_c = 1-3: V-shape arrows at far end
# plot_prism(arr_c = +3)  # V-shape arrows at both ends
# plot_prism(arr_c = +6)  # arr_c = 4-6: T-shape arrows

## Plain plot versions:
plot_prism(area = "no", f_lbl = "def", p_lbl = "num", col_pal = pal_mod, f_lwd = 1,
           main = NA, sub = NA, mar_notes = FALSE)  # remove titles and margin notes
plot_prism(area = "no", f_lbl = "nam", p_lbl = "min",
           main = NA, sub = "My subtitle", col_pal = pal_rgb)  # only subtitle
plot_prism(area = "no", f_lbl = "num", p_lbl = "num", col_pal = pal_kn)  # default title &amp; subtitle

plot_prism(area = "hr", f_lbl = "nam", f_lwd = .5, p_lwd = .5, col_pal = pal_bwp)
plot_prism(area = "hr", f_lbl = "nam", f_lwd = .5, p_lbl = "num", main = NA, sub = NA)

# plot_prism(area = "sq", f_lbl = "nam", p_lbl = NA, col_pal = pal_rgb)
plot_prism(area = "sq", f_lbl = "def", f_lbl_sep = ":\n", p_lbl = NA, f_lwd = 1, col_pal = pal_kn)

## Suggested combinations:
plot_prism(f_lbl = "nam", p_lbl = "mix", col_pal = pal_mod)  # basic plot
plot_prism(f_lbl = "namnum", p_lbl = "num", cex_lbl = .80, cex_p_lbl = .75)
# plot_prism(area = "no", f_lbl = "def", p_lbl = "abb",           # def/abb labels
#            f_lwd = .8, p_lwd = .8, lty = 3, col_pal = pal_bwp)  # black-&amp;-white

plot_prism(area = "hr", f_lbl = "num", p_lbl = "mix", f_lwd = 1, cex_p_lbl = .75)
plot_prism(area = "hr", f_lbl = "nam", p_lbl = "num", p_lwd = 6, p_scale = TRUE)
plot_prism(area = "hr", f_lbl = "abb", p_lbl = "abb", f_lwd = 1, col_pal = pal_kn)

# plot_prism(area = "sq", f_lbl = "nam", p_lbl = "abb", lbl_txt = txt_TF)
plot_prism(area = "sq", f_lbl = "num", p_lbl = "num", f_lwd = 1, col_pal = pal_rgb)
plot_prism(area = "sq", f_lbl = "namnum", p_lbl = "mix", f_lwd = .5, col_pal = pal_kn)

</code></pre>


</div>