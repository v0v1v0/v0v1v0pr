<div class="container">

<table style="width: 100%;"><tr>
<td>apply_3d</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>apply function for 3d array</h2>

<h3>Description</h3>

<p>NA values will be removed automatically
</p>


<h3>Usage</h3>

<pre><code class="language-R">apply_3d(
  array,
  dim = 3,
  FUN = rowMeans2,
  by = NULL,
  scale = 1,
  na.rm = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>array</code></td>
<td>
<p>A 3d array</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dim</code></td>
<td>
<p>giving the subscripts to split up data by.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>FUN</code></td>
<td>
<p>function, should only be row applied function, e.g. <code>matrixStats::rowMeans2</code>,
<code>matrixStats::rowMins</code>, <code>matrixStats::rowRanges</code>.
Because 3d array will be convert to matrix first, with the aggregated dim in
the last dimension.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by</code></td>
<td>

<ul>
<li>
<p> If not provided (<code>NULL</code>), the aggregated dim will be disappear.
For example, daily precipitation <code style="white-space: pre;">⁠[nrow, ncol, 31-days]⁠</code> aggregate into
monthly <code style="white-space: pre;">⁠[nrow, ncol]⁠</code>.
</p>
</li>
<li>
<p> If provided, <code>by</code> should be equal to the aggregated <code>dim</code>.
For example, daily precipitation <code style="white-space: pre;">⁠[nrow, ncol, 365-days]⁠</code> aggregate into
monthly <code style="white-space: pre;">⁠[nrow, ncol, 12-months]⁠</code>. In that situation, <code>by</code> should be equal
to 365, and be <code>format(date, '%Y%m')</code>.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scale</code></td>
<td>
<p>in the same length of <code>by</code>, or a const value,
<code>value_returned</code> = <code>FUN(x)*scale</code>. This parameter is designed for converting
monthly to yearly, meanwhile multiply days in month.
Currently, same group should have the same scale factor. Otherwise, only the
first is used.</p>
</td>
</tr>
</table>
<h3>See Also</h3>

<p>apply_row matrixStats::rowRanges
</p>


<h3>Examples</h3>

<pre><code class="language-R">set.seed(1)
size &lt;- c(10, 8, 31)
arr &lt;- array(rnorm(10 * 8 * 31), dim = size)

by &lt;- c(rep(1, 10), rep(2, 21))
r2 &lt;- apply_3d(arr, 3, by = by, FUN = rowMeans)

## Not run: 
arr_yearly &lt;- apply_3d(arr, by = year(dates), scale = days_in_month(dates))

## End(Not run)
</code></pre>


</div>