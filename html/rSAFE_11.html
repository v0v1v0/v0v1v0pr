<div class="container">

<table style="width: 100%;"><tr>
<td>safely_transform_categorical</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculating a Transformation of Categorical Feature Using Hierarchical Clustering</h2>

<h3>Description</h3>

<p>The safely_transform_categorical() function calculates a transformation function
for the categorical variable using predictions obtained from black box model and hierarchical clustering.
The gap statistic criterion is used to determine the optimal number of clusters.
</p>


<h3>Usage</h3>

<pre><code class="language-R">safely_transform_categorical(
  explainer,
  variable,
  method = "complete",
  B = 500,
  collapse = "_"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>explainer</code></td>
<td>
<p>DALEX explainer created with explain() function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>variable</code></td>
<td>
<p>a feature for which the transformation function is to be computed</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>the agglomeration method to be used in hierarchical clustering, one of:
"ward.D", "ward.D2", "single", "complete", "average", "mcquitty", "median", "centroid"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>B</code></td>
<td>
<p>number of reference datasets used to calculate gap statistics</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>collapse</code></td>
<td>
<p>a character string to separate original levels while combining them to the new one</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>list of information on the transformation of given variable
</p>


<h3>See Also</h3>

<p><code>safe_extraction</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(DALEX)
library(randomForest)
library(rSAFE)

data &lt;- apartments[1:500,]
set.seed(111)
model_rf &lt;- randomForest(m2.price ~ construction.year + surface + floor +
                           no.rooms + district, data = data)
explainer_rf &lt;- explain(model_rf, data = data[,2:6], y = data[,1])
safely_transform_categorical(explainer_rf, "district")

</code></pre>


</div>