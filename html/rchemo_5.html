<div class="container">

<table style="width: 100%;"><tr>
<td>blockscal</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Block autoscaling</h2>

<h3>Description</h3>

<p>Functions managing blocks of data.
</p>
<p>- <code>blockscal</code>: Autoscales a list of blocks (i.e. sets of columns) of a training X-data, and eventually the blocks of new X-data. The scaling factor (computed on the training) is the "norm" of the block, i.e. the square root of the sum of the variances of each column of the block. 
</p>
<p>- <code>mblocks</code>: Makes a list of blocks from X-data.
</p>
<p>- <code>hconcat</code>: Concatenates horizontally the blocks of a list. 
</p>


<h3>Usage</h3>

<pre><code class="language-R">
blockscal(Xtrain, X = NULL, weights = NULL)

mblocks(X, blocks)

hconcat(X)

</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Xtrain</code></td>
<td>
<p>A list of blocks of training X-data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>
<p>For <code>blockscal</code>: A list of blocks of new X-data. For <code>mblocks</code>: X-data. For <code>hconcat</code>: a list of blocks of X-data.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>blocks</code></td>
<td>
<p>A list (of same length as the number of blocks) giving the column numbers in <code>X</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>Weights (<code class="reqn">n, 1</code>) to apply to the training observations. Internally, weights are "normalized" to sum to 1. Default to <code>NULL</code> (weights are set to <code class="reqn">1 / n</code>).</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>For <code>mblocks</code>: a list of blocks of X-data.
</p>
<p>For <code>hconcat</code>: a matrix concatenating a list of data blocks.
</p>
<p>For <code>blockscal</code>: 
</p>
<table>
<tr style="vertical-align: top;">
<td><code>Xtrain</code></td>
<td>
<p>A list of blocks of training X-data, after block autoscaling.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>
<p>A list of blocks of new X-data, after block autoscaling.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>disp</code></td>
<td>
<p>The scaling factor (computed on the training).</p>
</td>
</tr>
</table>
<h3>Note</h3>

<p>The second example is equivalent to MB-PLSR
</p>


<h3>Examples</h3>

<pre><code class="language-R">
n &lt;- 10 ; p &lt;- 10
Xtrain &lt;- matrix(rnorm(n * p), ncol = p)
ytrain &lt;- rnorm(n)
m &lt;- 2

Xtest &lt;- matrix(rnorm(m * p), ncol = p)
colnames(Xtest) &lt;- paste("v", 1:p, sep = "")
Xtrain
Xtest

blocks &lt;- list(1:2, 4, 6:8)
zXtrain &lt;- mblocks(Xtrain, blocks = blocks)
zXtest &lt;- mblocks(Xtest, blocks = blocks)

zXtrain
blockscal(zXtrain, zXtest)

res &lt;- blockscal(zXtrain, zXtest)
hconcat(res$Xtrain)
hconcat(res$X)

## example of equivalence with MB-PLSR

n &lt;- 10 ; p &lt;- 10
Xtrain &lt;- matrix(rnorm(n * p), ncol = p)
ytrain &lt;- rnorm(n)
m &lt;- 2

Xtest &lt;- matrix(rnorm(m * p), ncol = p)
colnames(Xtest) &lt;- paste("v", 1:p, sep = "")
Xtrain
Xtest

blocks &lt;- list(1:2, 4, 6:8)
X1 &lt;- mblocks(Xtrain, blocks = blocks)
X1 &lt;- lapply(1:length(X1), function(x) scale(X1[[x]]))
res &lt;- blockscal(X1)
zXtrain &lt;- hconcat(res$Xtrain)

nlv &lt;- 3
fm &lt;- plskern(zXtrain, ytrain, nlv = nlv)

</code></pre>


</div>