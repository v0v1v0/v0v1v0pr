<div class="container">

<table style="width: 100%;"><tr>
<td>ipw.log.rank</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Log-Rank Test for Adjusted Survival Curves.
</h2>

<h3>Description</h3>

<p>The user enters individual survival data and the weights previously calculated (by using logistic regression for instance). The usual log-rank test is adapted to the corresponding adjusted survival curves.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ipw.log.rank(times, failures, variable, weights)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>times</code></td>
<td>
<p>A numeric vector with the follow up times.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>failures</code></td>
<td>
<p>A numeric vector with the event indicator (0=right censored, 1=event).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>variable</code></td>
<td>
<p>A numeric vector with the binary variable under interest (only two groups).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>The weights for correcting the contribution of each individual. By default, the weights are all equaled to 1 and the survival curves correspond to the usual Kaplan-Meier estimator.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>For instance, the <code>weights</code> may be equal to 1/<code>p</code>, where <code>p</code> is the estimated probability of the individual to be in its group. The probabilities <code>p</code> are often estimated by a logistic regression in which the dependent binary variable is the group. The possible confounding factors are the explanatory variables of this model. 
</p>


<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>statistic</code></td>
<td>
<p>The value of the log-rank statistic.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p.value</code></td>
<td>
<p>The p-value associated to the previous log-rank statistic.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Yohann Foucher &lt;Yohann.Foucher@univ-poitiers.fr&gt;
</p>
<p>Jun Xie &lt;junxie@purdue.edu&gt;
</p>
<p>Florant Le Borgne &lt;fleborgne@idbc.fr&gt;
</p>


<h3>References</h3>

<p>Le Borgne et al. Comparisons of the performances of different statistical tests for time-to-event analysis with confounding factors: practical illustrations in kidney transplantation. Statistics in medicine. 30;35(7):1103-16, 2016. &lt;doi:10.1002/ sim.6777&gt;
</p>
<p>Jun Xie and Chaofeng Liu. Adjusted Kaplan-Meier estimator and log-rank test with inverse probability of treatment weighting for survival data. Statistics in medicine, 24(20):3089-3110, 2005. &lt;doi:10.1002/sim.2174&gt;
</p>


<h3>Examples</h3>

<pre><code class="language-R">
data(dataDIVAT2)

# adjusted log-rank test
Pr0 &lt;- glm(ecd ~ 1, family = binomial(link="logit"), data=dataDIVAT2)$fitted.values[1]
Pr1 &lt;- glm(ecd ~ age + hla + retransplant, data=dataDIVAT2,
 family=binomial(link = "logit"))$fitted.values
W &lt;- (dataDIVAT2$ecd==1) * (1/Pr1) + (dataDIVAT2$ecd==0) * (1)/(1-Pr1)

ipw.log.rank(dataDIVAT2$times, dataDIVAT2$failures, dataDIVAT2$ecd, W)

</code></pre>


</div>