<div class="container">

<table style="width: 100%;"><tr>
<td>rvn_met_recordplot</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>EC Climate Gauge Record Overlap Visualization</h2>

<h3>Description</h3>

<p>This function plots the length of Environment Canada climate station records,
accessed via the <span class="pkg">weathercan</span> package, to identify periods in which multiple
station records overlap.
</p>


<h3>Usage</h3>

<pre><code class="language-R">rvn_met_recordplot(
  metadata = NULL,
  stndata = NULL,
  variables = NULL,
  colorby = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>metadata</code></td>
<td>
<p>tibble of the station meta-data from <code>weathercan::stations_search()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stndata</code></td>
<td>
<p>tibble of the station data from <code>weathercan::weather_dl()</code>. Used in conjunction with <code>variables</code> argument.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>variables</code></td>
<td>
<p>if using <code>weathercan::weather_dl()</code>, column names for variables of interest (currently only accepts 1 per call)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colorby</code></td>
<td>
<p>column name by which to color station records. Set to 'elev' (elevation) by default. Can be set to
"dist" (distance from coordinates of interest) if supplying <code>weathercan::stations_search</code> results.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Accepts outputs from either the <code>stations_search()</code> or <code>weather_dl()</code> functions
from the <span class="pkg">weathercan</span> package and extracts the start and end dates of the record
from each station for plotting.
</p>
<p>Outputs from <code>stations_search()</code> indicate when data collection at a station generally
began but do not contain information for specific climate variables and thus should
only be used for a "first look". Plots created with station metadata do not refer to
specific climate variables.
</p>
<p>Station records are plotted chronologically on a timeline, and can be colored
according to either the station's elevation (default, works for both types of inputs)
or the station's distance from a point of interest (works only when supplying
<code>stations_search()</code> results as metadata input).
</p>
<p>The timeline plot is accompanied by a bar plot counting the number of stations with
available data year by year.
</p>
<p>Large differences in elevation between stations may point towards consideration for
the effect of lapse rates on climate forcings driving a model response.
</p>


<h3>Value</h3>

<p>returns a 2x1 plot object containing 2 ggplot objects
</p>
<table>
<tr style="vertical-align: top;">
<td><code>top:</code></td>
<td>
<p>A chronological horizontal bar plot depicting each station's record period</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bottom:</code></td>
<td>
<p>A vertical bar plot depicting the number of station records available each year</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R"># load metadata from RavenR sample data
data(rvn_weathercan_metadata_sample)

## code that would be used to download metadata using weathercan
# library(weathercan)
#
# metadata = stations_search(coords=c(50.109,-120.787),
#    dist=150, # EC stations 150 km of Merritt, BC
#   interval='day'
# )
# metadata = metadata[metadata$start&gt;=2000,] # subset stations with recent data
# metadata = metadata[1:3,] # take only the first 3 stations for brevity

# plot line colours by station elevation
rvn_met_recordplot(metadata=rvn_weathercan_metadata_sample, colorby='elev')

# plot line colours by distance to specified co-ordinates
rvn_met_recordplot(metadata=rvn_weathercan_metadata_sample, colorby='distance')

## load sample weathercan::weather_dl() with single station
data(rvn_weathercan_sample)

# compare records for a specific variable
rvn_met_recordplot(stndata=rvn_weathercan_sample, variables = "total_precip")

</code></pre>


</div>