<div class="container">

<table style="width: 100%;"><tr>
<td>cdb_build_cdb</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create a CompadreDB object from user-specified data</h2>

<h3>Description</h3>

<p>Creates a CompadreDB object from data provided by the user in the form of
matrices and metadata. Users can provide either a list of A matrices (i.e.
the whole matrix population model) or lists of process-based submatrices
<code>matU</code>, <code>matF</code>and <code>matC</code>. In this latter case, we assume that
<code>matA = matU + matF + matC</code>. If only one type of the submatrices are
provided, the others are assumed to be 0. If only the A matrices are
provided, the submatrices are recorded as 'NA'.
</p>


<h3>Usage</h3>

<pre><code class="language-R">cdb_build_cdb(
  mat_a = NULL,
  mat_u = NULL,
  mat_f = NULL,
  mat_c = NULL,
  stages = NULL,
  version = NULL,
  metadata = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>mat_a</code></td>
<td>
<p>A 'list' of A matrices</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mat_u</code></td>
<td>
<p>A 'list' of U matrices (representing survival and growth)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mat_f</code></td>
<td>
<p>A 'list' of F matrices (representing sexual reproduction)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mat_c</code></td>
<td>
<p>A 'list' of C matrices (representing clonal reproduction)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stages</code></td>
<td>
<p>A 'list' of stage definitions provided as 'data.frame's that
include two columns: 'MatrixClassOrganized' and 'MatrixClassAuthor'. If
this argument is not provided, numeric stage names are generated
automatically</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>version</code></td>
<td>
<p>An optional string allowing users to add version information
to their output object. If this argument is not provided the current date
and time is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>metadata</code></td>
<td>
<p>A 'data.frame' of metadata associated with each matrix.
Metadata should be provided by row in the same order as the matrices are
placed in the lists.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A valid CompadreDB object
</p>


<h3>Author(s)</h3>

<p>Owen R. Jones &lt;jones@biology.sdu.dk&gt;
</p>


<h3>See Also</h3>

<p>Other data acquisition: 
<code>cdb_fetch()</code>,
<code>cdb_metadata()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># If you only have A matrices

mat_a1 &lt;- rbind(
  c(0.1, 1.9),
  c(0.5, 0.7)
)

mat_a2 &lt;- rbind(
  c(0.2, 1.4, 2.3),
  c(0.6, 0.3, 1.1),
  c(0.2, 0.2, 1.5)
)

mat_a3 &lt;- rbind(
  c(0.1, 2.1),
  c(0.3, 0.4)
)

# Place the matrices into a list
mat_a_list &lt;- mget(ls(pattern = "mat_a[0-9]"))

my_compadre &lt;- cdb_build_cdb(mat_a = mat_a_list, version = "testrun")
my_compadre


mat_u1 &lt;- rbind(
  c(0.1, 0.0),
  c(0.5, 0.7)
)

mat_u2 &lt;- rbind(
  c(0.2, 0.0, 0.0),
  c(0.6, 0.3, 1.1),
  c(0.2, 0.2, 1.5)
)

mat_f1 &lt;- rbind(
  c(0.0, 1.9),
  c(0.0, 0.0)
)

mat_f2 &lt;- rbind(
  c(0.0, 1.4, 2.3),
  c(0.0, 0.0, 0.0),
  c(0.0, 0.0, 0.0)
)

mat_u_list &lt;- mget(ls(pattern = "mat_u[0-9]"))
mat_f_list &lt;- mget(ls(pattern = "mat_f[0-9]"))

meta &lt;- data.frame(idNum = 1:2, SpeciesAccepted = c("A", "B"), x = 4:5)

stageInfo &lt;- list(
  data.frame(
    MatrixClassOrganized = rep("active", 2),
    MatrixClassAuthor = c("small", "large")
  ),
  data.frame(
    MatrixClassOrganized = rep("active", 3),
    MatrixClassAuthor = c("small", "medium", "large")
  )
)


my_compadre &lt;- cdb_build_cdb(
  mat_u = mat_u_list, mat_f = mat_f_list,
  metadata = meta, stages = stageInfo
)
my_compadre

my_compadre &lt;- cdb_build_cdb(
  mat_u = mat_u_list, mat_f = mat_f_list,
  metadata = meta
)
my_compadre
</code></pre>


</div>