<div class="container">

<table style="width: 100%;"><tr>
<td>labkey.saveBatch</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Save an assay batch object to a labkey database</h2>

<h3>Description</h3>

<p>Save an assay batch object to a labkey database
</p>


<h3>Usage</h3>

<pre><code class="language-R">labkey.saveBatch(baseUrl, folderPath, assayName, resultDataFrame,
    batchPropertyList=NULL, runPropertyList=NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>baseUrl</code></td>
<td>
<p>a string specifying the <code>baseUrl</code>for the labkey server</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>folderPath</code></td>
<td>
<p>a string specifying the <code>folderPath</code> </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>assayName</code></td>
<td>
<p>a string specifying the  name of the assay instance</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>resultDataFrame</code></td>
<td>
<p>a data frame containing rows of data to be inserted</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>batchPropertyList</code></td>
<td>
<p>a list of batch Properties </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>runPropertyList</code></td>
<td>
<p>a list of run Properties </p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function has been deprecated and will be removed in a future release, please use labkey.experiment.saveBatch instead as
it supports the newer options for saving batch objects.
</p>
<p>To save an R data.frame an assay results sets, you must create a named assay using the "General" assay provider.
Note that saveBatch currently supports only a single run with one result set per batch.
</p>


<h3>Value</h3>

<p>Returns the object representation of the Assay batch.
</p>


<h3>Author(s)</h3>

<p>Peter Hussey</p>


<h3>References</h3>

<p>https://www.labkey.org/Documentation/wiki-page.view?name=createDatasetViaAssay</p>


<h3>See Also</h3>

<p><code>labkey.selectRows</code>, <code>labkey.executeSql</code>, <code>makeFilter</code>, 
<code>labkey.updateRows</code>, <br><code>labkey.deleteRows</code>,
<code>labkey.experiment.saveBatch</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 

## Very simple example of an analysis flow:  query some data, calculate
## some stats, then save the calculations as an assay result set in
## LabKey Server
##  Note this example expects to find an assay named "SimpleMeans" in
##  the apisamples project
# library(Rlabkey)

simpledf &lt;- labkey.selectRows(
	baseUrl="http://localhost:8080/labkey",
	folderPath="/apisamples",
	schemaName="lists", 
	queryName="AllTypes")

## some dummy calculations to produce and example analysis result
testtable &lt;- simpledf[,3:4]
colnames(testtable) &lt;- c("IntFld", "DoubleFld")
row &lt;- c(list("Measure"="colMeans"), colMeans(testtable, na.rm=TRUE))
results &lt;- data.frame(row, row.names=NULL, stringsAsFactors=FALSE)
row &lt;- c(list("Measure"="colSums"), colSums(testtable, na.rm=TRUE))
results &lt;- rbind(results, as.vector(row))

bprops &lt;- list(LabNotes="this is a simple demo")
bpl &lt;- list(name=paste("Batch ", as.character(date())),properties=bprops) 
rpl &lt;- list(name=paste("Assay Run ", as.character(date())))

assayInfo&lt;- labkey.saveBatch(
	baseUrl="http://localhost:8080/labkey",
	folderPath="/apisamples",
	"SimpleMeans", 
	results, 
	batchPropertyList=bpl,
	runPropertyList=rpl
)


## End(Not run)
</code></pre>


</div>