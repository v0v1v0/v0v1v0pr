<div class="container">

<table style="width: 100%;"><tr>
<td>stack</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Run a stack of <code>TROLL</code> simulations</h2>

<h3>Description</h3>

<p><code>stack()</code> run a stack of <code>TROLL</code> simulation. The minimal set of input files
required for a <code>TROLL</code> run include (i) climate data for the focal location
(<code>climate</code> and <code>daily</code>), (ii) functional traits for the list of species at
the focal location (<code>species</code>), and (iii) global parameters (<code>global</code>), i.e.
parameters that do not depend on species identity.
</p>


<h3>Usage</h3>

<pre><code class="language-R">stack(
  name = NULL,
  simulations,
  path = NULL,
  global,
  species,
  climate,
  daily,
  lidar = NULL,
  forest = NULL,
  load = TRUE,
  cores = NULL,
  verbose = TRUE,
  overwrite = TRUE,
  thin = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p>char. Stack name (if NULL the timestamp will be used).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>simulations</code></td>
<td>
<p>char. Simulation names (corrsponding to simulation indexes
in orresponding tables, see example below).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>path</code></td>
<td>
<p>char. Path to save the stack of simulation outputs (parent
folder), the default is null corresponding to a simulation in memory
without saved intermediary files (based on temporary files from
option.rcontroll).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>global</code></td>
<td>
<p>df. Global parameters (e.g. TROLLv3_input or using
<code>generate_parameters()</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>species</code></td>
<td>
<p>df. Species parameters (e.g. TROLLv3_species).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>climate</code></td>
<td>
<p>df. Climate parameters (e.g. TROLLv3_climatedaytime12).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>daily</code></td>
<td>
<p>df. Daily variation parameters (e.g. TROLLv3_daytimevar).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lidar</code></td>
<td>
<p>df. Lidar simulation parameters (e.g. using <code>generate_lidar()</code>),
if null not computed (default NULL).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>forest</code></td>
<td>
<p>df. TROLL with forest input, if null starts from an empty grid
(default NULL) (e.g. using TROLLv3_output with <code>get_forest()</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>load</code></td>
<td>
<p>bool. TROLL outputs are loaded in R memory, if not only the path
and name of the stack of simulations is kept in the resulting
<code>trollstack()</code> object but the content can be accessed later using the
<code>load_sim()</code> method.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cores</code></td>
<td>
<p>int. Number of cores for parallelization, if NULL available
cores - 1 (default NULL). You can use <code>parallel::detectCores()</code> to know
available cores on your machine.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>bool. Show TROLL log in the console.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>overwrite</code></td>
<td>
<p>bool. Overwrite previous outputs folder and files.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>thin</code></td>
<td>
<p>int. Vector of integers corresponding to the iterations to be
kept to reduce output size, default is NULL and corresponds to no thinning.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A <code>trollstack()</code> object.
</p>


<h3>See Also</h3>

<p><code>troll()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
data("TROLLv3_species")
data("TROLLv3_climatedaytime12")
data("TROLLv3_daytimevar")
data("TROLLv3_output")
TROLLv3_input_stack &lt;- generate_parameters(
  cols = 100, rows = 100,
  iterperyear = 12, nbiter = 12 * 1
) %&gt;%
  mutate(simulation = list(c("seed50000", "seed500"))) %&gt;%
  unnest(simulation)
TROLLv3_input_stack[62, 2] &lt;- 500 # Cseedrain
stack(
  name = "teststack",
  simulations = c("seed50000", "seed500"),
  global = TROLLv3_input_stack,
  species = TROLLv3_species,
  climate = TROLLv3_climatedaytime12,
  daily = TROLLv3_daytimevar,
  load = TRUE,
  cores = 2,
  verbose = FALSE,
  thin = c(1, 5, 10)
)

## End(Not run)

</code></pre>


</div>