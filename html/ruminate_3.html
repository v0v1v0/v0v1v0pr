<div class="container">

<table style="width: 100%;"><tr>
<td>dose_records_builder</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Builds Dose Records Dataframe</h2>

<h3>Description</h3>

<p>Takes information about columns in dataset and constructs the
dosing records.
</p>


<h3>Usage</h3>

<pre><code class="language-R">dose_records_builder(
  NCA_DS = NULL,
  dose_from = NULL,
  col_id = NULL,
  col_time = NULL,
  col_ntime = NULL,
  col_route = NULL,
  col_dose = NULL,
  col_cycle = NULL,
  col_dur = NULL,
  col_evid = NULL,
  col_analyte = NULL,
  col_group = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>NCA_DS</code></td>
<td>
<p>Dataset containing dosing records.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dose_from</code></td>
<td>
<p>Method of dose extraction either "cols" or "rows".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_id</code></td>
<td>
<p>Name of column with subject ID.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_time</code></td>
<td>
<p>Name of column with time since first dose.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_ntime</code></td>
<td>
<p>Name of column with time since the last dose (required with <code>dose_from="cols"</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_route</code></td>
<td>
<p>Name of column with route information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_dose</code></td>
<td>
<p>Name of column with last dose given.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_cycle</code></td>
<td>
<p>Name of column with dose cycle (required with <code>dose_from="cols"</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_dur</code></td>
<td>
<p>Name of column with dose duration.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_evid</code></td>
<td>
<p>Name of column with event ID (required with <code>dose_from="rows"</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_analyte</code></td>
<td>
<p>Name of column with analyte (optional).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_group</code></td>
<td>
<p>Names of columns with grouping information (optionl).</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>list containing the following elements
</p>

<ul>
<li>
<p>isgood:           Return status of the function.
</p>
</li>
<li>
<p>msgs:             Messages to be passed back to the user.
</p>
</li>
<li>
<p>dose_rec:
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">
if(system.file(package="readxl") !=""){
library(dplyr)
library(readxl)
library(stringr)

# Example data file:
data_file =  system.file(package="formods","test_data","TEST_DATA.xlsx")

# Dataset formatted to extract dosing from columns
DS_cols = readxl::read_excel(path=data_file, sheet="DATA")        |&gt;
 dplyr::filter(EVID == 0)                                |&gt;
 dplyr::filter(DOSE %in% c(3))                           |&gt;
 dplyr::filter(str_detect(string=Cohort, "^MD"))         |&gt;
 dplyr::filter(CMT == "C_ng_ml")

drb_res = dose_records_builder(
 NCA_DS     = DS_cols,
 dose_from  = "cols",
 col_id     = "ID",
 col_time   = "TIME_DY",
 col_ntime  = "NTIME_DY",
 col_route  = "ROUTE",
 col_cycle  = "DOSE_NUM",
 col_dose   = "DOSE",
 col_group  = "Cohort")

utils::head(drb_res$dose_rec)

# Dataset formatted to extract dosing from rows (records)
DS_rows = readxl::read_excel(path=data_file, sheet="DATA")        |&gt;
 dplyr::filter(DOSE %in% c(3))                                   |&gt;
 dplyr::filter(str_detect(string=Cohort, "^MD"))                 |&gt;
 dplyr::filter(CMT %in% c("Ac", "C_ng_ml"))

drb_res = dose_records_builder(
 NCA_DS     = DS_rows,
 dose_from  = "rows",
 col_id     = "ID",
 col_time   = "TIME_DY",
 col_ntime  = "NTIME_DY",
 col_route  = "ROUTE",
 col_dose   = "AMT",
 col_evid   = "EVID",
 col_group  = "Cohort")

utils::head(drb_res$dose_rec)
}
</code></pre>


</div>