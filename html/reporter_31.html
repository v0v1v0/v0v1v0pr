<div class="container">

<table style="width: 100%;"><tr>
<td>stub</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Defines a report stub</h2>

<h3>Description</h3>

<p>Combine columns into a nested report stub.  The report stub
is a common feature of statistical reports.  The stub is created with
the <code>stub</code> function, and frequently appears in combination with the 
<code>label_row</code> and <code>indent</code> parameters from the 
<code>define</code> function.  These elements work together to define
the appearance of the stub.
</p>


<h3>Usage</h3>

<pre><code class="language-R">stub(
  x,
  vars,
  label = "",
  label_align = NULL,
  align = "left",
  width = NULL,
  standard_eval = FALSE,
  style = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>The table spec.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vars</code></td>
<td>
<p>A vector of quoted or unquoted variable names from 
which to create the stub. If you want to pass an R variable of names,
escape the values with double curly braces, i.e. <code>vars = {{myvar}}</code>.
The curly brace escape is useful when writing functions that construct
reports dynamically.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label</code></td>
<td>
<p>The label for the report stub.  The default label is an empty
string.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label_align</code></td>
<td>
<p>The alignment for the stub column label.
Valid values are 'left', 'right', 'center', and 'centre'.  Default follows
the <code>align</code> parameter.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>align</code></td>
<td>
<p>How to align the stub column.  Valid values are 'left', 
'right', 'center', and 'centre'.  Default is 'left'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width</code></td>
<td>
<p>The width of the stub, in report units of measure.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>standard_eval</code></td>
<td>
<p>A TRUE or FALSE value that indicates whether to
use standard or non-standard evaluation of the <code>vars</code>, <code>from</code>,
and <code>to</code> parameters.  Set <code>standard_eval</code> to TRUE if you want
to pass the column names as variables. Default is FALSE, meaning it
will use non-standard (unquoted) evaluation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>style</code></td>
<td>
<p>A <code>cell_style</code> object that contains the style
specifications for the stub.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The table stub is a nested set of labels that identify rows 
on the table. The stub is created by combining two or more columns into 
a single stub column.  The relationship between the columns is typically 
visualized as a hierarchy, with lower level concepts indented under 
higher level concepts.  
</p>
<p>A typical stub is created with the following steps:
</p>

<ul>
<li>
<p> Prepare the data. 
</p>
</li>
<li>
<p> Create the table object.
</p>
</li>
<li>
<p> Define the stub on the table using the <code>stub</code> function, 
and identify the variables to be combined.
</p>
</li>
<li>
<p> Identify higher level concepts with the <code>label_row</code> parameter
on the <code>define</code> function. 
</p>
</li>
<li>
<p> Identify lower level concepts using the <code>indent</code> parameter 
on the <code>define</code> function.
</p>
</li>
</ul>
<p>The stub will be automatically added as an identity variable on the report, 
and will always appear as the leftmost column.  There can only be one stub 
defined on a report.
</p>
<p>If you wish to create multiple levels of nested labels, use
an NA value to prevent lower level labels from overwriting
higher level labels. 
</p>
<p>For example, the following data:
</p>
<pre>
continent          country   state_province    
"North America"    NA        NA   
"North America"    "Canada"  NA   
"North America"    "Canada"  "Ontario"   
"North America"    "USA"     NA   
"North America"    "USA"     "New York"   
"South America"    NA        NA   
"South America"    "Brazil"  NA   
"South America"    "Brazil"  "Amazonas"   
"South America"    "Brazil"  "Bahia"   
</pre>
<p>Will produce the following stub:   
</p>
<pre>
North America   
  Canada   
    Ontario   
  USA   
    New York   
South America  
  Brazil 
    Amazonas   
    Bahia   
</pre>
<p>With the following code:
</p>
<pre>
tbl &lt;- create_table(dat) %&gt;% 
  stub(c(continent, country, state_province)) %&gt;% 
  define(country, indent = .25) %&gt;% 
  define(state_province, indent = .5)
</pre>


<h3>Value</h3>

<p>The modified table spec.
</p>


<h3>See Also</h3>

<p>Other table: 
<code>column_defaults()</code>,
<code>create_table()</code>,
<code>define()</code>,
<code>print.table_spec()</code>,
<code>spanning_header()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(reporter)
library(magrittr)

# Create temporary path
tmp &lt;- file.path(tempdir(), "stub.txt")

# Read in prepared data
df &lt;- read.table(header = TRUE, text = '
      var      label        A             B          
      "ampg"   "N"          "19"          "13"         
      "ampg"   "Mean"       "18.8 (6.5)"  "22.0 (4.9)" 
      "ampg"   "Median"     "16.4"        "21.4"       
      "ampg"   "Q1 - Q3"    "15.1 - 21.2" "19.2 - 22.8"
      "ampg"   "Range"      "10.4 - 33.9" "14.7 - 32.4"
      "cyl"    "8 Cylinder" "10 ( 52.6%)" "4 ( 30.8%)" 
      "cyl"    "6 Cylinder" "4 ( 21.1%)"  "3 ( 23.1%)" 
      "cyl"    "4 Cylinder" "5 ( 26.3%)"  "6 ( 46.2%)"')

# Create table
tbl &lt;- create_table(df, first_row_blank = TRUE) %&gt;% 
  stub(c(var, label)) %&gt;% 
  define(var, blank_after = TRUE, label_row = TRUE, 
         format = c(ampg = "Miles Per Gallon", cyl = "Cylinders")) %&gt;% 
  define(label, indent = .25) %&gt;% 
  define(A, label = "Group A", align = "center", n = 19) %&gt;% 
  define(B, label = "Group B", align = "center", n = 13)


# Create report and add content
rpt &lt;- create_report(tmp, orientation = "portrait") %&gt;% 
  page_header(left = "Client: Motor Trend", right = "Study: Cars") %&gt;% 
  titles("Table 1.0", "MTCARS Summary Table") %&gt;% 
  add_content(tbl) %&gt;% 
  footnotes("* Motor Trend, 1974") %&gt;%
  page_footer(left = Sys.time(), 
              center = "Confidential", 
              right = "Page [pg] of [tpg]")

# Write out report
write_report(rpt)

# View report in console
writeLines(readLines(tmp, encoding = "UTF-8"))

# Client: Motor Trend                                                Study: Cars
#                                   Table 1.0
#                              MTCARS Summary Table
# 
#                                     Group A      Group B
#                                      (N=19)       (N=13)
#                 -------------------------------------------
# 
#                 Miles Per Gallon
#                    N                   19           13
#                    Mean            18.8 (6.5)   22.0 (4.9)
#                    Median             16.4         21.4
#                    Q1 - Q3        15.1 - 21.2  19.2 - 22.8
#                    Range          10.4 - 33.9  14.7 - 32.4
#
#                 Cylinders
#                    8 Cylinder     10 ( 52.6%)   4 ( 30.8%)
#                    6 Cylinder      4 ( 21.1%)   3 ( 23.1%)
#                    4 Cylinder      5 ( 26.3%)   6 ( 46.2%)
# 
# ...
# 
# 
# * Motor Trend, 1974
# 
# 2020-08-30 03:50:02              Confidential                      Page 1 of 1
#
</code></pre>


</div>