<div class="container">

<table style="width: 100%;"><tr>
<td>rsi_query_api</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Query a STAC API using a specific spatiotemporal area of interest</h2>

<h3>Description</h3>

<p>This function is the default method used to retrieve lists of items to
download for all the collections and endpoints supported by rsi. It will
likely work for any other STAC APIs of interest.
</p>


<h3>Usage</h3>

<pre><code class="language-R">rsi_query_api(bbox, stac_source, collection, start_date, end_date, limit, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>bbox</code></td>
<td>
<p>A <code>bbox</code> or <code>sfc</code> object, from the sf package, representing the
spatial bounding box of your area of interest. This must be in EPSG:4326
coordinates (and, if this function is called from within <code>get_stac_data()</code>,
it will be) or else it will be automatically reprojected.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stac_source</code></td>
<td>
<p>Character of length 1: the STAC URL to download
imagery from.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>collection</code></td>
<td>
<p>Character of length 1: the STAC collection to download
images from.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start_date, end_date</code></td>
<td>
<p>Character strings of length 1 representing the
boundaries of your temporal range of interest, in RFC-3339 format. Set either
argument to <code>..</code> to use an open interval; set <code>start_date</code> to <code>NULL</code> to not
pass a temporal range of interest (which may cause errors with some APIs). If
this function is called from within <code>get_stac_data()</code>, the inputs to
<code>start_date</code> and <code>end_date</code> will have already been processed to try and force
RFC-3339 compliance.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>limit</code></td>
<td>
<p>an <code>integer</code> defining the maximum number of results
to return. If not informed, it defaults to the service implementation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Ignored by this function. Arguments passed to <code>get_stac_data()</code>
via <code>...</code> will be available (unchanged) in this function</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>You can pass your own query functions to <code>get_stac_data()</code> and its variants.
This is the best way to perform more complex queries, for instance if you
need to provide authentication to get the list of items (not just the assets)
available for your AOI, or to perform cloud filtering prior to downloading
assets.
</p>


<h3>Value</h3>

<p>A StacItemCollection object.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
aoi &lt;- sf::st_point(c(-74.912131, 44.080410))
aoi &lt;- sf::st_set_crs(sf::st_sfc(aoi), 4326)
aoi &lt;- sf::st_buffer(sf::st_transform(aoi, 5070), 100)

landsat_image &lt;- get_landsat_imagery(
  aoi,
  start_date = "2022-06-01",
  end_date = "2022-08-30",
  query_function = rsi_query_api
)

</code></pre>


</div>