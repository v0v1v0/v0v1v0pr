<div class="container">

<table style="width: 100%;"><tr>
<td>form_present_value_grid</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Use a model to estimate the present value of financial derivatives on a grid of initial underlying values</h2>

<h3>Description</h3>

<p>Use a finite difference scheme to form estimates of present values for a variety
of stock prices on a grid of initial underlying prices, determined by constructing
a logarithmic equivalent conforming to the grid parameters <code>structure_constant</code>
and <code>structure_constant</code>
</p>


<h3>Usage</h3>

<pre><code class="language-R">form_present_value_grid(
  S0,
  num_time_steps,
  instruments,
  const_volatility = 0.5,
  const_short_rate = 0,
  const_default_intensity = 0,
  override_Tmax = NA,
  discount_factor_fcn = function(T, t, ...) {     exp(-const_short_rate * (T - t)) },
  default_intensity_fcn = function(t, S, ...) {     const_default_intensity + 0 * S },
  variance_cumulation_fcn = function(T, t) {     const_volatility^2 * (T - t) },
  dividends = NULL,
  borrow_cost = 0,
  dividend_rate = 0,
  structure_constant = 2,
  std_devs_width = 3,
  grid_center = NA
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>S0</code></td>
<td>
<p>An initial stock price, for setting grid scale</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num_time_steps</code></td>
<td>
<p>Minimum number of time steps in the grid</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>instruments</code></td>
<td>
<p>A list of instruments to be priced.  Each
one must have a <code>strike</code> and a <code>optionality_fcn</code>, as
with <code>GridPricedInstrument</code> and its subclasses.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>const_volatility</code></td>
<td>
<p>A constant to use for volatility in case <code>variance_cumulation_fcn</code>
is not given</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>const_short_rate</code></td>
<td>
<p>A constant to use for the instantaneous interest rate in case <code>discount_factor_fcn</code>
is not given</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>const_default_intensity</code></td>
<td>
<p>A constant to use for the instantaneous default intensity in case <code>default_intensity_fcn</code>
is not given</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>override_Tmax</code></td>
<td>
<p>A different maximum time on the grid to enforce</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>discount_factor_fcn</code></td>
<td>
<p>A function for computing present values to
time <code>t</code> of various cashflows occurring during this timestep, with
arguments <code>T</code>, <code>t</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>default_intensity_fcn</code></td>
<td>
<p>A function for computing default intensity
occurring during this timestep, dependent on time and stock price, with
arguments <code>t</code>, <code>S</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>variance_cumulation_fcn</code></td>
<td>
<p>A function for computing total stock variance
occurring during this timestep, with arguments <code>T</code>, <code>t</code>.  E.g. with
a constant volatility <code class="reqn">s</code> this takes the form <code class="reqn">(T-t)s^2</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dividends</code></td>
<td>
<p>A <code>data.frame</code> with columns <code>time</code>, <code>fixed</code>,
and <code>proportional</code>.  Dividend size at the given <code>time</code> is
then expected to be equal to <code>fixed + proportional * S / S0</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>borrow_cost</code></td>
<td>
<p>Stock borrow cost, affecting the drift rate</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dividend_rate</code></td>
<td>
<p>Continuous dividend rate, affecting the drift rate</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>structure_constant</code></td>
<td>
<p>The maximum ratio between time intervals <code>dt</code>
and the square of space intervals <code>dz^2</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>std_devs_width</code></td>
<td>
<p>The number of standard deviations, in <code>sigma * sqrt(T)</code>
units, to incorporate into the grid</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grid_center</code></td>
<td>
<p>A reasonable central value for the grid, defaults to S0 or an instrument strike</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If any instrument in the <code>instruments</code> has a strike, then the grid will be
normalized to the last such instrument's strike.
</p>


<h3>See Also</h3>

<p>Other Equity Dependent Default Intensity: 
<code>find_present_value()</code>,
<code>fit_to_option_market_df()</code>,
<code>fit_variance_cumulation()</code>,
<code>implied_jump_process_volatility()</code>
</p>
<p>Other Implicit Grid Solver: 
<code>construct_implicit_grid_structure()</code>,
<code>find_present_value()</code>,
<code>infer_conforming_time_grid()</code>,
<code>integrate_pde()</code>,
<code>iterate_grid_from_timestep()</code>,
<code>take_implicit_timestep()</code>,
<code>timestep_instruments()</code>
</p>


</div>