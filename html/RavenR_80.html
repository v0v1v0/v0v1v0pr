<div class="container">

<table style="width: 100%;"><tr>
<td>rvn_rvt_write</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Write Raven rvt file from Time Series</h2>

<h3>Description</h3>

<p>Generates a Raven rvt file of the specified type from an xts time series.
</p>


<h3>Usage</h3>

<pre><code class="language-R">rvn_rvt_write(
  x,
  filename = NULL,
  rvt_type = "ObservationData",
  data_type = "HYDROGRAPH",
  basin_ID = NULL,
  NA_value = -1.2345
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>time series in xts format to write to file</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filename</code></td>
<td>
<p>name of output file (with rvt extension)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rvt_type</code></td>
<td>
<p>type of rvt file to write (e.g. ObservationData)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data_type</code></td>
<td>
<p>type of data in x (e.g. HYDROGRAPH)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>basin_ID</code></td>
<td>
<p>subbasin (or HRU) ID corresponding to the time series</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>NA_value</code></td>
<td>
<p>value to use for NA values in rvt file (default -1.2345 for Raven format)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Writes the rvt file for a given time series dataset. The type of rvt file to write is
determined by the rvt_type argument, which must match one of the supported Raven types.
Note that this function does not support the writing of meteorological data, this is handled
by the <code>rvn_rvt_write_met</code> function.
</p>
<p>The format of the rvt file, including required fields to write to file, are determined from
the supplied rvt_type parameter and from the mapping provided by <code>data("rvn_rvt_mappings_data")</code>. The
data_type is also checked against the provided mappings to check for valid state variables and
accompanying units.
</p>
<p>If the data is found to have an inconsistent timestep, the function will attempt to correct it
by infilling missing time steps with <code>rvn_ts_infill</code>. If successful, a warning is issued
to the user and the function will proceed, else an error will be raised.
</p>
<p>The timezone of the xts object is used as supplied to write to file, no assumption on changing the
time zone is done in this function.
</p>
<p>No other quality control of the data is performed here. Some rvt types, such as ObservationWeights,
cannot have missing values in the data; it is the responsibility of the user to supply <code>x</code> with
no missing values if required. Any missing values in <code>x</code> are written to file with the
missing value code provided by <code>NA_value</code>.
</p>
<p><code>x</code> should be an xts time series object with multiple rows of data and a single column.
</p>


<h3>Value</h3>

<p><code>TRUE</code> if the function executed successfully
</p>


<h3>See Also</h3>

<p><code>rvn_rvt_read</code> to read in rvt data files,
and <code>rvn_rvt_write_met</code> to write meteorological rvt files.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# load sample flow data
system.file('extdata','run1_Hydrographs.csv', package = "RavenR") %&gt;%
rvn_hyd_read() -&gt; mydata

# temporary filename
tf &lt;- file.path(tempdir(), 'mydata.rvt')

# write time series to rvt file using data from subbasin 36 as observed data
rvn_rvt_write(x=mydata$hyd$Sub36,
  rvt_type = "ObservationData",
  data_type = "HYDROGRAPH",
  basin_ID = 36,
  filename = tf)

</code></pre>


</div>