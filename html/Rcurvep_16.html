<div class="container">

<table style="width: 100%;"><tr>
<td>summarize_fit_output</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Summarize the results from the parametric fitting using types of models</h2>

<h3>Description</h3>

<p>The function first extracts the activity data based on the fit the supplied input parameters.
In addition, summary of activity data (e.g., confidence interval, hit confidence) can be produced.
</p>


<h3>Usage</h3>

<pre><code class="language-R">summarize_fit_output(
  d,
  thr_resp = 20,
  perc_resp = 10,
  ci_level = 0.95,
  extract_only = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>d</code></td>
<td>
<p>The output from the <code>run_fit()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>thr_resp</code></td>
<td>
<p>The response cutoff to calculate the potency. Default = 20 (POD20)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>perc_resp</code></td>
<td>
<p>The percentage cutoff to calculate the potency. Default = 10 (EC10).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ci_level</code></td>
<td>
<p>The confidence level for the activity metrics. Default is = 0.95.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>extract_only</code></td>
<td>
<p>Whether act_summary data should be produced. Default = FALSE.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>A tibble, act_set is generated. When (extract_only = FALSE), a tibble, act_summary is generated with confidence intervals of the activity metrics.
The quantile approach is used to calculate the confidence interval.
Currently only bootstrap calculations from hill (3-parameter) can generate confidence interval
For potency activity metrics, if value is NA, highest tested concentration is used in the summary.
For other activity metrics, if value is NA, 0 is used in the summary.
</p>


<h3>Value</h3>

<p>A list of named components: result and result_nested (and act_summary).
The result and result_nested are the copy from the output of <code>run_fit()</code>.
An act_set is added under the result component.
If (extract_only = FALSE), an act_summary is added.
</p>


<h3>Hit definition</h3>



<h4>cnst</h4>

<p>If the cnst is the winning model and the median of responses larger than the thr_resp, it is considered as an hit.
The median of responses is reported as Emax and the lowest tested concentration is reported as EC50, POD, ECxx.
</p>



<h4>hill</h4>

<p>The hit (=1) is considered having POD &lt; max tested concentration.
</p>



<h4>cc2</h4>

<p>The hit value is from the cc2 value
</p>



<h3>Output structure</h3>

<p>output
|- result (list)
|   |- fit_set (tibble, all output from the respective fit model included)
|   |- resp_set (tibble)
|   |- act_set (tibble, EC50, ECxx, Emax, POD, slope, hit)
|
|- result_nested (tibble)
|- act_summary (tibble, confidence interval)
</p>


<h3>activity metrics</h3>


<dl>
<dt>hit</dt>
<dd>
<p>hit call, see above definition</p>
</dd>
<dt>EC50</dt>
<dd>
<p>half maximal effect concentration</p>
</dd>
<dt>ECxx</dt>
<dd>
<p>effect concentration at XX percent, depending on the perc_resp </p>
</dd>
<dt>POD</dt>
<dd>
<p>point-of-departure, depending on the thr_resp</p>
</dd>
<dt>Emax</dt>
<dd>
<p>max effect - min effect from the fit</p>
</dd>
<dt>slope</dt>
<dd>
<p>slope factor from the fit</p>
</dd>
</dl>
<h3>See Also</h3>

<p><code>run_fit()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# generate some fit outputs


## fit only
fitd1 &lt;- run_fit(zfishbeh, modls = "cc2")

## fit + bootstrap samples
fitd2 &lt;- run_fit(zfishbeh, n_samples = 3, modls = "hill")

## fit using hill + cnst
fitd3 &lt;- run_fit(zfishbeh, modls = c("hill", "cnst"))


# only to extract the activity data
sumd1 &lt;- summarize_fit_output(fitd1, extract_only = TRUE)
sumd3 &lt;- summarize_fit_output(fitd3, extract_only = TRUE)

# calculate EC20 instead of default EC10
sumd1 &lt;- summarize_fit_output(fitd1, extract_only = TRUE, perc_resp  = 20)

# calculate POD using a higher noise level (e.g., 40)
## this number depends on the response unit
sumd1 &lt;- summarize_fit_output(fitd1, extract_only = TRUE, thr_resp  = 40)

# calculate confidence intervals based on the bootstrap samples
sumd2 &lt;- summarize_fit_output(fitd2)



</code></pre>


</div>