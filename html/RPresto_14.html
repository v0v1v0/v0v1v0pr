<div class="container">

<table style="width: 100%;"><tr>
<td>add_chunk</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Add a chunk field to a data frame</h2>

<h3>Description</h3>

<p>This auxiliary function adds a field, if necessary, to a data frame so that
each compartment of the data frame that corresponds to a unique combination
of the chunk fields has a size below a certain threshold. This resulting
data frame can then be safely used in dbAppendTable() becauase Presto has a
size limit on any discrete INSERT INTO statement.
</p>


<h3>Usage</h3>

<pre><code class="language-R">add_chunk(
  value,
  base_chunk_fields = NULL,
  chunk_size = 1e+06,
  new_chunk_field_name = "aux_chunk_idx"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>
<p>The original data frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>base_chunk_fields</code></td>
<td>
<p>A character vector of existing field names that are
used to split the data frame before checking the chunk size.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>chunk_size</code></td>
<td>
<p>Maximum size (in bytes) of the VALUES statement encoding
each unique chunk. Default to 1,000,000 bytes (i.e. 1Mb).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>new_chunk_field_name</code></td>
<td>
<p>A string indicating the new chunk field name.
Default to "aux_chunk_idx".</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# returns the original data frame because it's within size
add_chunk(iris)
# add a new aux_chunk_idx field
add_chunk(iris, chunk_size = 2000)
# the new aux_chunk_idx field is added on top of Species
add_chunk(iris, chunk_size = 2000, base_chunk_fields = c("Species"))

## End(Not run)
</code></pre>


</div>