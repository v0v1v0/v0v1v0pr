<div class="container">

<table style="width: 100%;"><tr>
<td>splitForm</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Split formula containing special random effect terms</h2>

<h3>Description</h3>

<p>Parse a formula into fixed formula and random effect terms,
treating 'special' terms (of the form foo(x|g[,m])) appropriately
</p>


<h3>Usage</h3>

<pre><code class="language-R">splitForm(
  formula,
  defaultTerm = "us",
  allowFixedOnly = TRUE,
  allowNoSpecials = TRUE,
  debug = FALSE,
  specials = findReTrmClasses()
)

noSpecials(term, delete = TRUE, debug = FALSE, specials = findReTrmClasses())
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>a formula containing special random effect terms</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>defaultTerm</code></td>
<td>
<p>default type for non-special RE terms</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>allowFixedOnly</code></td>
<td>
<p>(logical) are formulas with no RE terms OK?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>allowNoSpecials</code></td>
<td>
<p>(logical) are formulas with only standard RE terms OK?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>debug</code></td>
<td>
<p>debugging mode (print stuff)?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>term</code></td>
<td>
<p>language object</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Taken from Steve Walker's lme4ord,
ultimately from the flexLambda branch of lme4
<a href="https://github.com/stevencarlislewalker/lme4ord/blob/master/R/formulaParsing.R">https://github.com/stevencarlislewalker/lme4ord/blob/master/R/formulaParsing.R</a>.  Mostly for internal use.
</p>


<h3>Value</h3>

<p>a list containing elements <code>fixedFormula</code>;
<code>reTrmFormulas</code> list of <code>x | g</code> formulas for each term;
<code>reTrmAddArgs</code> list of function+additional arguments, i.e. <code>list()</code> (non-special), <code>foo()</code> (no additional arguments), <code>foo(addArgs)</code> (additional arguments); <code>reTrmClasses</code> (vector of special functions/classes, as character)
</p>


<h3>Author(s)</h3>

<p>Steve Walker
</p>


<h3>Examples</h3>

<pre><code class="language-R">splitForm(~x+y)                     ## no specials or RE
splitForm(~x+y+(f|g))               ## no specials
splitForm(~x+y+diag(f|g))           ## one special
splitForm(~x+y+(diag(f|g)))         ## 'hidden' special
splitForm(~x+y+(f|g)+cs(1|g))       ## combination
splitForm(~x+y+(1|f/g))             ## 'slash'; term
splitForm(~x+y+(1|f/g/h))             ## 'slash'; term
splitForm(~x+y+(1|(f/g)/h))             ## 'slash'; term
splitForm(~x+y+(f|g)+cs(1|g)+cs(a|b,stuff))  ## complex special
splitForm(~(((x+y))))               ## lots of parentheses
splitForm(~1+rr(f|g,n=2))
splitForm(~1+s(x, bs = "tp"))

noSpecials(y~1+us(1|f))
noSpecials(y~1+us(1|f),delete=FALSE)
noSpecials(y~us(1|f))
noSpecials(y~us(1|f), delete=FALSE)
noSpecials(y~us(1|f), debug=TRUE)
noSpecials(y~us+1)  ## should *not* delete unless head of a function
noSpecials(~us(1|f)+1)   ## should work on a one-sided formula!
noSpecials(~s(stuff) + a + b, specials = "s")
</code></pre>


</div>