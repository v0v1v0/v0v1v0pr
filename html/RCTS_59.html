<div class="container">

<table style="width: 100%;"><tr>
<td>get_final_estimation</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Function that returns the final clustering, based on the estimated number of groups and common and group specific factors.</h2>

<h3>Description</h3>

<p>Function that returns the final clustering, based on the estimated number of groups and common and group specific factors.
</p>


<h3>Usage</h3>

<pre><code class="language-R">get_final_estimation(df, opt_groups, k, kg, type, limit_est_groups = 20)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>input dataframe (this will be df_results_full)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>opt_groups</code></td>
<td>
<p>the optimal number of groups</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k</code></td>
<td>
<p>the optimal number of common factors</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>kg</code></td>
<td>
<p>vector with the optimal number of group specific factors</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>defines which estimation to return: options are "clustering", "beta", "fg" (group specific factors), "lg" (loadings corresponding to fg), "f" (common factors), "l" (loadings corresponding to f),</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>limit_est_groups</code></td>
<td>
<p>maximum allowed number of groups that can be estimated</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>This function returns the estimations of the chosen configuration.
If type is "clustering" it returns a numeric vector with the estimated group membership for all time series.
If type is "beta", "lg" the function returns a data.frame.
If type is "f" or "l" the function also returns a data.frame. If no common factors were estimated in the optimized configuration, then NA is returned.
If type is "fg" the function returns a list.
</p>


<h3>Examples</h3>

<pre><code class="language-R">get_final_estimation(df_results_example, 3, 0, c(3, 3, 3), "clustering")
get_final_estimation(df_results_example, 3, 0, c(3, 3, 3), "beta")
get_final_estimation(df_results_example, 3, 0, c(3, 3, 3), "fg")
get_final_estimation(df_results_example, 3, 0, c(3, 3, 3), "lg")
</code></pre>


</div>