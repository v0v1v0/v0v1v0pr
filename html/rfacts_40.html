<div class="container">

<table style="width: 100%;"><tr>
<td>facts_engines</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Engine-specific trial simulation functions</h2>

<h3>Description</h3>

<p>These functions are the inner functions called by
<code>run_engine()</code>. In this help file, only the most common engine functions
are listed. To identify the appropriate engine function
for your FACTS file, call <code>get_facts_engine()</code>.
</p>

<ul>
<li> <p><code>run_engine_aipf_contin()</code>: Enrichment continuous.
</p>
</li>
<li> <p><code>run_engine_aipf_dichot()</code>: Enrichment dichotomous.
</p>
</li>
<li> <p><code>run_engine_aipf_tte()</code>: Enrichment time to event.
</p>
</li>
<li> <p><code>run_engine_contin()</code>: Core continuous.
</p>
</li>
<li> <p><code>run_engine_crm()</code>: continual reassessment method (CRM).
</p>
</li>
<li> <p><code>run_engine_dichot()</code>: Core dichotomous.
</p>
</li>
<li> <p><code>run_engine_multep()</code>: Multiple endpoint.
</p>
</li>
<li> <p><code>run_engine_tte()</code>: Time to event.
</p>
</li>
</ul>
<h3>Usage</h3>

<pre><code class="language-R">run_engine_aipf_contin(
  param_files,
  n_sims = 1L,
  mode = c("", "r"),
  seed = NULL,
  analysis_data = NULL,
  analysis_mode = NULL,
  current_week = NULL,
  execdata = NULL,
  final = NULL,
  interim = NULL,
  mcmc_num = NULL,
  verbose = FALSE,
  version = NULL
)

run_engine_aipf_dichot(
  param_files,
  n_sims = 1L,
  mode = c("", "r"),
  seed = NULL,
  analysis_data = NULL,
  analysis_mode = NULL,
  current_week = NULL,
  execdata = NULL,
  final = NULL,
  interim = NULL,
  mcmc_num = NULL,
  verbose = FALSE,
  version = NULL
)

run_engine_aipf_tte(
  param_files,
  n_sims = 1L,
  mode = c("", "r"),
  seed = NULL,
  analysis_data = NULL,
  analysis_mode = NULL,
  current_week = NULL,
  execdata = NULL,
  final = NULL,
  interim = NULL,
  mcmc_num = NULL,
  verbose = FALSE,
  version = NULL
)

run_engine_contin(
  param_files,
  n_sims = 1L,
  mode = c("s", "r", "p"),
  seed = NULL,
  analysis_data = NULL,
  analysis_mode = NULL,
  arm_selection = NULL,
  armsdropped = NULL,
  complete_data_analysis = NULL,
  current_week = NULL,
  execdata = NULL,
  final = NULL,
  fsimdata = NULL,
  fsimexp = NULL,
  fsimparam = NULL,
  interim = NULL,
  keepfiles = NULL,
  mcmc_num = NULL,
  noadapt = NULL,
  s2_aux_paramfile = NULL,
  stage = NULL,
  verbose = FALSE,
  version = NULL
)

run_engine_crm(
  param_files,
  n_sims = 1L,
  mode = c("s", ""),
  directory = ".",
  allocator = NULL,
  charting_info = NULL,
  estimator = NULL,
  force_cohort = NULL,
  reduced_priority = NULL,
  version = NULL,
  verbose = FALSE
)

run_engine_dichot(
  param_files,
  n_sims = 1L,
  mode = c("s", "r", "p"),
  seed = NULL,
  analysis_data = NULL,
  analysis_mode = NULL,
  arm_selection = NULL,
  armsdropped = NULL,
  complete_data_analysis = NULL,
  current_week = NULL,
  execdata = NULL,
  final = NULL,
  fsimdata = NULL,
  fsimexp = NULL,
  fsimparam = NULL,
  interim = NULL,
  keepfiles = NULL,
  mcmc_num = NULL,
  noadapt = NULL,
  s2_aux_paramfile = NULL,
  stage = NULL,
  verbose = FALSE,
  version = NULL
)

run_engine_multep(
  param_files,
  n_sims = 1L,
  mode = c("s", "r", "p"),
  seed = NULL,
  analysis_data = NULL,
  analysis_mode = NULL,
  arm_selection = NULL,
  armsdropped = NULL,
  complete_data_analysis = NULL,
  current_week = NULL,
  execdata = NULL,
  final = NULL,
  fsimdata = NULL,
  fsimexp = NULL,
  fsimparam = NULL,
  interim = NULL,
  keepfiles = NULL,
  mcmc_num = NULL,
  noadapt = NULL,
  s2_aux_paramfile = NULL,
  stage = NULL,
  verbose = FALSE,
  version = NULL
)

run_engine_tte(
  param_files,
  n_sims = 1L,
  mode = c("s", "r", "p"),
  seed = NULL,
  analysis_data = NULL,
  analysis_mode = NULL,
  arm_selection = NULL,
  armsdropped = NULL,
  complete_data_analysis = NULL,
  current_week = NULL,
  execdata = NULL,
  final = NULL,
  fsimdata = NULL,
  fsimexp = NULL,
  fsimparam = NULL,
  interim = NULL,
  keepfiles = NULL,
  mcmc_num = NULL,
  noadapt = NULL,
  s2_aux_paramfile = NULL,
  stage = NULL,
  verbose = FALSE,
  version = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>param_files</code></td>
<td>
<p>Character vector of file paths or the output
of <code>prep_param_files()</code>. If a character vector, the elements
can be directories containing <code style="white-space: pre;">⁠*.param⁠</code> files or the paths to the
<code style="white-space: pre;">⁠*.param⁠</code> files themselves.
Such a directory is returned by <code>run_flfll()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_sims</code></td>
<td>
<p>Positive integer, number of simulations per param file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mode</code></td>
<td>
<p>Character scalar: <code>"s"</code> for simulation mode in non-enrichment
designs, <code>""</code> for simulation mode in enrichment designs,
<code>"r"</code> for execution mode, and <code>"p"</code> for prediction mode.
For the CRM engine, <code>mode</code> needs to be <code>"s"</code> or <code>""</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>Positive integer, random number generator seed for the
actual trial simulations. Use this <code>seed</code> argument instead of
<code>flfll_seed</code> (<code>run_facts()</code>, <code>run_flfll()</code>) to control
pseudo-randomness in the actual trial simulations. <code>flfll_seed</code>
only controls how the <code style="white-space: pre;">⁠*.param⁠</code> files are generated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>analysis_data</code></td>
<td>
<p>Character, analysis mode patient data file name.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>analysis_mode</code></td>
<td>
<p>Logical, whether to activate analysis mode.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>current_week</code></td>
<td>
<p>Numeric, current time in weeks.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>execdata</code></td>
<td>
<p>Character, name of the execution mode patient file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>final</code></td>
<td>
<p>Logical, whether to do the final analysis.
For execution mode only.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>interim</code></td>
<td>
<p>Integer, interim number.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mcmc_num</code></td>
<td>
<p>Integer, MCMC file number. For analysis mode only.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Logical, whether to print progress information to the R
console.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>version</code></td>
<td>
<p>Character scalar, version of FACTS corresponding to the
FACTS file. Get by calling <code>get_facts_version()</code> on your FACTS file.
See possible versions with <code>get_facts_versions()</code>.
Do not supply <code>version</code> to <code>run_engine()</code>. <code>run_engine()</code>
detects the version automatically from the FACTS file and
passes it to the appropriate engine function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>arm_selection</code></td>
<td>
<p>Logical, whether to activate arm selection.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>armsdropped</code></td>
<td>
<p>Character, a comma-separated collection of integers
indicating dropped arms.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>complete_data_analysis</code></td>
<td>
<p>Logical, whether to do a complete
data analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fsimdata</code></td>
<td>
<p>Character, prediction mode patient data file name.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fsimexp</code></td>
<td>
<p>Logical. For expert use only.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fsimparam</code></td>
<td>
<p>Character, name of the prediction mode <code style="white-space: pre;">⁠*.param⁠</code> file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keepfiles</code></td>
<td>
<p>Logical, whether to deactivate cleanup of
extraneous staged design files.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>noadapt</code></td>
<td>
<p>Logical, whether to deactivate adaptive actions
in prediction mode.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>s2_aux_paramfile</code></td>
<td>
<p>Character, name of the stage 2 execution
auxiliary <code style="white-space: pre;">⁠*.param⁠</code> file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stage</code></td>
<td>
<p>Integer, trial design stage. For staged designs only.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>directory</code></td>
<td>
<p>Character, working directory. CRM only.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>allocator</code></td>
<td>
<p>Logical, allocator/execution/recommender mode. CRM only.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>charting_info</code></td>
<td>
<p>Logical, unused.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>estimator</code></td>
<td>
<p>Logical, use estimator. CRM only.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>force_cohort</code></td>
<td>
<p>Logical, whether to force small cohort run-in to end.
CRM only.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reduced_priority</code></td>
<td>
<p>Logical, whether to run at reduced priority.
CRM only.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If you need to repeatedly invoke an engine, as with most
trial execution mode workflows, these engine functions may be slow
on their own. To avoid the most severe sources of slowness,
consider running <code>prep_param_files()</code>
and then passing the result to one of the individual engine
functions (such as <code>run_engine_contin()</code>).
</p>


<h3>Value</h3>

<p>Nothing.
</p>


<h3>See Also</h3>

<p><code>run_engine()</code>, <code>get_facts_file_example()</code>,
<code>get_facts_engine()</code>, <code>run_facts()</code>, <code>run_flfll()</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">facts_file &lt;- get_facts_file_example("contin.facts")
# Can only run if system dependencies are configured:
if (file.exists(Sys.getenv("RFACTS_PATHS"))) {
out &lt;- run_flfll(facts_file, verbose = FALSE) # Generate param files.
# Identify which engine you need.
get_facts_engine(facts_file)
# Run the sims with the engine function or `run_engine()`.
run_engine_contin(out, n_sims = 1, verbose = FALSE, version = "6.2.5")
read_patients(out)
}
</code></pre>


</div>