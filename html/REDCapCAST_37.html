<div class="container">

<table style="width: 100%;"><tr>
<td>REDCap_split</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Split REDCap repeating instruments table into multiple tables</h2>

<h3>Description</h3>

<p>This will take output from a REDCap export and split it into a base table
and child tables for each repeating instrument. Metadata
is used to determine which fields should be included in each resultant table.
</p>


<h3>Usage</h3>

<pre><code class="language-R">REDCap_split(
  records,
  metadata,
  primary_table_name = "",
  forms = c("repeating", "all")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>records</code></td>
<td>
<p>Exported project records. May be a <code>data.frame</code>,
<code>response</code>, or <code>character</code> vector containing JSON from an API
call.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>metadata</code></td>
<td>
<p>Project metadata (the data dictionary). May be a
<code>data.frame</code>, <code>response</code>, or <code>character</code> vector containing
JSON from an API call.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>primary_table_name</code></td>
<td>
<p>Name given to the list element for the primary
output table (as described in <em>README.md</em>). Ignored if
<code>forms = 'all'</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>forms</code></td>
<td>
<p>Indicate whether to create separate tables for repeating
instruments only or for all forms.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list of <code>"data.frame"</code>s. The number of tables will differ
depending on the <code>forms</code> option selected.
</p>

<ul>
<li> <p><code>'repeating'</code>: one base table and one or more
tables for each repeating instrument.
</p>
</li>
<li> <p><code>'all'</code>: a data.frame for each instrument, regardless of
whether it is a repeating instrument or not.
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>Paul W. Egeler, M.S., GStat
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# Using an API call -------------------------------------------------------

library(RCurl)

# Get the records
records &lt;- postForm(
  uri = api_url, # Supply your site-specific URI
  token = api_token, # Supply your own API token
  content = "record",
  format = "json",
  returnFormat = "json"
)

# Get the metadata
metadata &lt;- postForm(
  uri = api_url, # Supply your site-specific URI
  token = api_token, # Supply your own API token
  content = "metadata",
  format = "json"
)

# Convert exported JSON strings into a list of data.frames
REDCapRITS::REDCap_split(records, metadata)

# Using a raw data export -------------------------------------------------

# Get the records
records &lt;- read.csv("/path/to/data/ExampleProject_DATA_2018-06-03_1700.csv")

# Get the metadata
metadata &lt;- read.csv(
  "/path/to/data/ExampleProject_DataDictionary_2018-06-03.csv"
)

# Split the tables
REDCapRITS::REDCap_split(records, metadata)

# In conjunction with the R export script ---------------------------------

# You must set the working directory first since the REDCap data export
# script contains relative file references.
old &lt;- getwd()
setwd("/path/to/data/")

# Run the data export script supplied by REDCap.
# This will create a data.frame of your records called 'data'
source("ExampleProject_R_2018-06-03_1700.r")

# Get the metadatan
metadata &lt;- read.csv("ExampleProject_DataDictionary_2018-06-03.csv")

# Split the tables
REDCapRITS::REDCap_split(data, metadata)
setwd(old)

## End(Not run)
</code></pre>


</div>