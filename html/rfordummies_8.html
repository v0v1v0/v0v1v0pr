<div class="container">

<table style="width: 100%;"><tr>
<td>ch08</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Print examples of chapter 8 of 'R for Dummies'.</h2>

<h3>Description</h3>

<p>To print a listing of all examples of a chapter, use <code>ch8()</code>.
To run all the examples of <code>ch8()</code>, use <code>example(ch8)</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ch08()

ch8()
</code></pre>


<h3>See Also</h3>

<p><code>toc</code>
</p>
<p>Other Chapters: 
<code>ch01()</code>,
<code>ch02()</code>,
<code>ch03()</code>,
<code>ch04()</code>,
<code>ch05()</code>,
<code>ch06()</code>,
<code>ch07()</code>,
<code>ch09()</code>,
<code>ch10()</code>,
<code>ch11()</code>,
<code>ch12()</code>,
<code>ch13()</code>,
<code>ch14()</code>,
<code>ch15()</code>,
<code>ch16()</code>,
<code>ch17()</code>,
<code>ch18()</code>,
<code>ch19()</code>,
<code>ch20()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">if (interactive()) {
# Chapter 8
# Putting the Fun in Functions

# Moving from Scripts to Functions

## Making the script

x &lt;- c(0.458, 1.6653, 0.83112)
percent &lt;- round(x * 100, digits = 1)
result &lt;- paste(percent, "%", sep = "")
print(result)

## Not run: 
# source('pastePercent.R') # Only after saving

## End(Not run)

## Transforming the script

addPercent &lt;- function(x){
  percent &lt;- round(x * 100, digits = 1)
  result &lt;- paste(percent, "%", sep = "")
  return(result)
}

## Using the function

ls()

### Formatting the numbers

new.numbers &lt;- c(0.8223, 0.02487, 1.62, 0.4)
addPercent(new.numbers)

### Playing with function objects

ppaste &lt;- addPercent
ppaste

## Reducing the number of lines

### Returning values by default

# AddPercent function without last return - not written in book
addPercent &lt;- function(x){
  percent &lt;- round(x * 100, digits = 1)
  result &lt;- paste(percent, "%", sep = "")
}

print( addPercent(new.numbers) )

addPercent &lt;- function(x){
  percent &lt;- round(x * 100, digits = 1)
  paste(percent, "%", sep = "")
}

addPercent &lt;- function(x){
  if( !is.numeric(x) ) return(NULL)
  percent &lt;- round(x * 100, digits = 1)
  paste(percent, "%", sep = "")
}

### Breaking the walls

odds &lt;- function(x) x / (1-x)

odds(0.8)

addPercent &lt;- function(x) paste(round(x * 100, digits = 1), "%", sep = "")

# Using Arguments the Smart Way

## Adding more arguments

percentages &lt;- c(58.23, 120.4, 33)
addPercent(percentages/100)

### Adding the mult argument

addPercent &lt;- function(x, mult){
  percent &lt;- round(x * mult, digits = 1)
  paste(percent, "%", sep = "")
}

addPercent(percentages, mult = 1)

### Adding a default value

# addPercent(new.numbers) # Gives error for illustrative purposes
# Error in x * mult : 'mult' is missing

addPercent &lt;- function(x, mult = 100){
  percent &lt;- round(x * mult, digits = 1)
  paste(percent, "%", sep = "")
}

addPercent(new.numbers)

addPercent(percentages, 1)

## Conjuring tricks with dots

addPercent &lt;- function(x, mult = 100, ...){
  percent &lt;- round(x * mult, ...)
  paste(percent, "%", sep = "")
}

addPercent(new.numbers, digits = 2)
addPercent(new.numbers)


addPercent &lt;- function(x, mult = 100, digits = 1){
  percent &lt;- round(x * mult, digits = digits)
  paste(percent, "%", sep = "")
}

## Using functions as arguments

### Applying different ways of rounding

addPercent &lt;- function(x, mult = 100, FUN = round, ...){
  percent &lt;- FUN(x * mult, ...)
  paste(percent, "%", sep = "")
}

addPercent(new.numbers, FUN = signif, digits = 3)

### Using anonymous functions

profits &lt;- c(2100, 1430, 3580, 5230)
rel.profit &lt;- function(x) round(x / sum(x) * 100)
addPercent(profits,
                FUN = function(x) round(x / sum(x) * 100) )

addPercent(profits / sum(profits))

# Coping with Scoping



## Crossing the borders

### Creating a test case

x &lt;- 1:5
test &lt;- function(x){
  cat("This is x:", x, "\n")
  rm(x)
  cat("This is x after removing it:",x,"\n")
}

test(5:1)

### Searching the path

## Using internal functions

calculate.eff &lt;- function(x, y, control){
  min.base &lt;- function(z) z - mean(control)
  min.base(x) / min.base(y)
}


half &lt;- c(2.23, 3.23, 1.48)
full &lt;- c(4.85, 4.95, 4.12)
nothing &lt;- c(0.14, 0.18, 0.56, 0.23)
calculate.eff(half, full, nothing)

# Dispatching to a Method

## Finding the methods behind the function

print

### Using methods with UseMethod

small.one &lt;- data.frame(a = 1:2, b = 2:1)
print.data.frame(small.one)

### Using default methods

print.default(small.one)

## Doing it yourself

### Adapting the addPercent function

addPercent.character &lt;- function(x){
  paste(x,"%",sep="")
}

# Not written out in the book - needed for rest code # 
addPercent.numeric &lt;- function(x, mult = 100, FUN = round, ...){
  percent &lt;- FUN(x * mult, ...)
  paste(percent, "%", sep = "")
}

addPercent &lt;- function(x,...){
  UseMethod("addPercent")
}

addPercent(new.numbers, FUN = floor)

addPercent(letters[1:6])

# Adding a default function

# addPercent(small.one) # Gives error on purpose
# Error in UseMethod("addPercent") :
#  no applicable method for 'addPercent' applied to an object of class "data.frame"

addPercent.default &lt;- function(x){
  cat('You should try a numeric or character vector.\n')
}
}
</code></pre>


</div>