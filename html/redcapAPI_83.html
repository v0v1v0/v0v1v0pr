<div class="container">

<table style="width: 100%;"><tr>
<td>exportFilesMultiple</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Export Multiple Files From a Project</h2>

<h3>Description</h3>

<p>This method enables the user to export multiple files from
a REDCap project with a single call. The REDCap API only allows for one
file to be exported per call, and the <code>exportFiles()</code> methods are written
to mirror that limitation. This extension allows the user to pass
vectors of arguments for records, fields, events, or repeat instances.
Files that can be matched to any combination of these values will
be exported.
</p>


<h3>Usage</h3>

<pre><code class="language-R">exportFilesMultiple(
  rcon,
  record,
  field,
  event = NULL,
  dir,
  file_prefix = TRUE,
  ...
)

## S3 method for class 'redcapApiConnection'
exportFilesMultiple(
  rcon,
  record,
  field,
  event = NULL,
  dir,
  file_prefix = TRUE,
  repeat_instance = NULL,
  ...,
  quiet = TRUE,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>record</code></td>
<td>
<p><code>character</code> or <code>integerish</code>. The record ID in
which the desired file is stored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>field</code></td>
<td>
<p><code>character</code>. The field name in which the file is stored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>event</code></td>
<td>
<p><code>character</code> or <code>NULL</code>. The event name for the file.
This applies only to longitudinal projects.  If the event is not
supplied for a longitudinal project, the API will return an error message</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dir</code></td>
<td>
<p><code>character(1)</code>. A directory/folder to which the file
will be saved. By default, the working directory is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file_prefix</code></td>
<td>
<p><code>logical(1)</code>.  Determines if a prefix is appended
to the file name.  The prefix takes the form <code style="white-space: pre;">⁠[record_id]-[event_name]-[file_name]⁠</code>.
The file name is always the same name of the file as it exists in REDCap.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>repeat_instance</code></td>
<td>
<p><code>integerish</code> or <code>NULL</code>. The repeat instance number of
the repeating event or the repeating instrument. When available in your
instance of REDCap, and passed as <code>NULL</code>, the API will assume a value of 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quiet</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code>, any errors encountered while
exporting files will be converted to messages.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>error_handling</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("error", "null")</code>.
An option for how to handle errors returned by the API.
see <code>redcapError()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>config</code></td>
<td>
<p>A named <code>list</code>. Additional configuration parameters to pass to
<code>httr::POST()</code>. These are appended to any parameters in
<code>rcon$config</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>api_param</code></td>
<td>
<p>A named <code>list</code>. Additional API parameters to pass into the
body of the API call. This provides users to execute calls with options
that may not otherwise be supported by <code>redcapAPI</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>exportFilesMultiple</code> will construct all combinations of
the <code>record</code>, <code>field</code>, <code>event</code>, and <code>repeat_instance</code> arguments and
attempt to export the file associated with each combination. Should any
of these combinations produce an error (for example, if a record does not
have a third repeat instance), the error is captured and returned
with the output.
</p>


<h3>Value</h3>

<p>Invisibly returns a <code>data.frame</code> with the following columns:</p>

<table>
<tr>
<td style="text-align: left;">
   Column </td>
<td style="text-align: left;"> Description </td>
</tr>
<tr>
<td style="text-align: left;">
   <code>record</code> </td>
<td style="text-align: left;"> The record ID </td>
</tr>
<tr>
<td style="text-align: left;">
   <code>field</code> </td>
<td style="text-align: left;"> The name of the field in which the file is stored. </td>
</tr>
<tr>
<td style="text-align: left;">
   <code>event</code> </td>
<td style="text-align: left;"> The name of the event associated with the file. </td>
</tr>
<tr>
<td style="text-align: left;">
   <code>repeat_instance</code> </td>
<td style="text-align: left;"> For repeat instances, the instance associated with the file. </td>
</tr>
<tr>
<td style="text-align: left;">
   <code>is_exported</code> </td>
<td style="text-align: left;"> <code>logical</code> indicating if the file was successfully exported. </td>
</tr>
<tr>
<td style="text-align: left;">
   <code>saved_to</code> </td>
<td style="text-align: left;"> The file path to which the file was saved. </td>
</tr>
<tr>
<td style="text-align: left;">
   <code>error</code> </td>
<td style="text-align: left;"> If an error was encountered, the text of the error. </td>
</tr>
<tr>
<td style="text-align: left;">
</td>
</tr>
</table>
<h3>See Also</h3>

<p><code>exportFiles()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())
             
save_to_dir &lt;- tempdir() 

# Export files for multiple records
# Results are returned invisibly - saving to an object is
#   helpful to be able to view the results

Export &lt;- 
  exportFilesMultiple(rcon, 
                      record = 1:4, 
                      field = "file_upload_field", 
                      event = "event_1_arm_1", 
                      dir = save_to_dir)
Export 
                    
# Export files for multiple instances

Export &lt;- 
  exportFilesMultiple(rcon, 
                      record = 1, 
                      field = "file_upload_field", 
                      event = "event_1_arm_1", 
                      repeat_instance = 1:4, 
                      dir = save_to_dir)
Export
                    
# Export files for multiple records, fields, events, and instances

Export &lt;- 
  exportFilesMultiple(rcon, 
                      record = 1:10, 
                      field = c("registration", "waiver"), 
                      events = c("event_1_arm_1", "event_2_arm_1"), 
                      repeat_instance = 1:3, 
                      dir = save_to_dir)
Export

## End(Not run)


</code></pre>


</div>