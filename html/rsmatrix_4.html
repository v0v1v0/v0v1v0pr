<div class="container">

<table style="width: 100%;"><tr>
<td>rs_pairs</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Sales pairs</h2>

<h3>Description</h3>

<p>Turn repeat-sales data into sales pairs that are suitable for making
repeat-sales matrices.
</p>


<h3>Usage</h3>

<pre><code class="language-R">rs_pairs(period, product)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>period</code></td>
<td>
<p>A vector that gives the time period for each sale. Usually a
date vector, or a factor with the levels in chronological order, but other
values are possible if they can be sorted in chronological order (i.e., with
<code>order()</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>product</code></td>
<td>
<p>A vector that gives the product identifier for each sale.
Usually a factor or vector of integer codes for each product.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A numeric vector of indices giving the position of the previous sale
for each <code>product</code>, with the convention that the previous sale for the
first sale is itself. Ties are resolved according to the order they
appear in <code>period</code>.
</p>


<h3>Note</h3>

<p><code>order()</code> is the workhorse of <code>rs_pairs()</code>, so performance can be
sensitive to the types of <code>period</code> and <code>product</code>, and can be slow for large
character vectors.
</p>


<h3>See Also</h3>

<p><code>rs_matrix()</code> for using sales pairs to make a repeat-sales index.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Make sales pairs
x &lt;- data.frame(
  id = c(1, 1, 1, 3, 2, 2, 3, 3),
  date = c(1, 2, 3, 2, 1, 3, 4, 1),
  price = c(1, 3, 2, 3, 1, 1, 1, 2)
)

pairs &lt;- rs_pairs(x$date, x$id)

x[c("date_prev", "price_prev")] &lt;- x[c("date", "price")][pairs, ]

x

</code></pre>


</div>