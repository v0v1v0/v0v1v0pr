<div class="container">

<table style="width: 100%;"><tr>
<td>eb2</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Function for Generating Minimum Entropy Weights Subject to a Set of Balancing
Constraints</h2>

<h3>Description</h3>

<p><code>eb2</code> is an adaptation of <code>eb</code> that generates
minimum entropy weights subject to a set of balancing constraints. Using
the method of Lagrange multipliers, the dual problem is an unconstrained
optimization problem that can be solved using Newton's method. When a full
Newton step is excessive, an exact line search is used to find the best step
size.
</p>


<h3>Usage</h3>

<pre><code class="language-R">eb2(C, M, Q, Z = rep(0, ncol(C)), max_iter = 200, tol = 1e-04, print_level = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>C</code></td>
<td>
<p>A constraint matrix where each column corresponds to a balancing constraint.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>M</code></td>
<td>
<p>A vector of moment conditions to be met in the reweighted sample. Specifically,
in the reweighted sample, we should have <code class="reqn">C'W=M</code>, where <code class="reqn">W</code> is a column vector representing
the new weights. When called internally, it is a vector of zeros with length equal to the number of
columns in <code>C</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Q</code></td>
<td>
<p>A vector of base weights.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Z</code></td>
<td>
<p>A vector of Lagrange multipliers to be initialized.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_iter</code></td>
<td>
<p>Maximum number of iterations for Newton's method in entropy minimization.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tol</code></td>
<td>
<p>Tolerance parameter used to determine convergence. Specifically, convergence is achieved if
<code>tol</code> is greater than the maximum absolute value of the deviations between the moments of the
reweighted data and the target moments (i.e., <code>M</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>print_level</code></td>
<td>
<p>The level of printing: </p>

<dl>
<dt>1</dt>
<dd>
<p>normal: print whether the algorithm converges or not.</p>
</dd>
<dt>2</dt>
<dd>
<p>detailed: print also the maximum absolute value of the deviations between the moments
of the reweighted data and the target moments in each iteration.</p>
</dd>
<dt>3</dt>
<dd>
<p>very detailed: print also the step length of the line searcher in iterations where
a full Newton step is excessive.</p>
</dd>
</dl>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list containing the results from the algorithm.
</p>
<table>
<tr style="vertical-align: top;">
<td><code>W</code></td>
<td>
<p>A vector of normalized minimum entropy weights.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Z</code></td>
<td>
<p>A vector of Lagrange multipliers.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>converged</code></td>
<td>
<p>A logical indicator for convergence.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxdiff</code></td>
<td>
<p>A scalar indicating the maximum deviation between the
moments of the reweighted data and the target moments.</p>
</td>
</tr>
</table>
</div>