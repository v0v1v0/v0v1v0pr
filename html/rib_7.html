<div class="container">

<table style="width: 100%;"><tr>
<td>IBClient</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Client Connection Class</h2>

<h3>Description</h3>

<p>This is the main class that manages the connection with the
'Trader Workstation', sends requests and handles responses.
</p>


<h3>Methods</h3>


<ul>
<li> <p><code>IBClient$new()</code>: creates a new instance.
</p>
</li>
<li> <p><code>$connect(host="localhost", port, clientId, connectOptions="")</code>:
connects to <code>host:port</code> and performs the initial
handshake using client identifier <code>clientId</code> and additional
options <code>connectOptions</code>.
</p>
</li>
<li> <p><code>$checkMsg(wrap, timeout=0.2)</code>: waits for and process server messages.
When available, messages are decoded and handed over to the appropriate
callback defined in <code>wrap</code>, which must be an instance of a child of
<code>IBWrap</code>.
If <code>wrap</code> is missing, messages are read and immediately discarded.
Returns the number of messages processed.
</p>
<p>This methods <b>blocks</b> up to <code>timeout</code> seconds.
<b>Needs to be called regularly</b>.
</p>
</li>
<li> <p><code>$disconnect()</code>: terminates the connection.
</p>
</li>
</ul>
<p>This class is modeled after the class <code>EClient</code> from the official IB API
implementations.
In addition to the methods shown above, several others exist that are used to send
requests to the server.
</p>
<p>Refer to the official documentation for a comprehensive list of the possible
requests, including their signatures and descriptions.
</p>


<h3>See Also</h3>

<p><code>IBWrap</code>.
</p>
<p><a href="https://interactivebrokers.github.io/tws-api/classIBApi_1_1EClient.html"><code>EClient</code></a>
definition from the official documentation.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# Instantiate a wrapper
wrap &lt;- IBWrapSimple$new()

# Create a client and connect to a server
ic &lt;- IBClient$new()
ic$connect(port=4002, clientId=1)

# Make a request
stock &lt;- IBContract(symbol="GOOG", secType="STK", exchange="SMART", currency="USD")
ic$reqContractDetails(11, stock)

# Process responses
ic$checkMsg(wrap)

# Disconnect
ic$disconnect()

## End(Not run)
</code></pre>


</div>