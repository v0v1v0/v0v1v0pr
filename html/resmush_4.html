<div class="container">

<table style="width: 100%;"><tr>
<td>resmush_dir</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Optimize files of several directories</h2>

<h3>Description</h3>

<p>Optimize all the local files of a directory (or list of directories) using
the  <a href="https://resmush.it/">reSmush.it API</a>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">resmush_dir(
  dir,
  ext = "\\.(png|jpe?g|bmp|gif|tif)$",
  suffix = "_resmush",
  overwrite = FALSE,
  progress = TRUE,
  report = TRUE,
  recursive = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dir</code></td>
<td>
<p>Character or vector of characters representing paths of local
directories.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ext</code></td>
<td>
<p><code>regex</code> indicating the extensions of the files to
be optimized. The default value would capture all the extensions admitted
by the API.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>suffix</code></td>
<td>
<p>Character, defaults to <code>"_resmush"</code>. By default, a new file
with the suffix is created in the same directory (i.e.,
optimized <code>example.png</code> would be <code>example_resmush.png</code>). Values <code>""</code>, <code>NA</code>
and <code>NULL</code> would be the same than <code>overwrite = TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>overwrite</code></td>
<td>
<p>Logical. Should the files in <code>dir</code> be overwritten? If <code>TRUE</code>
<code>suffix</code> would be ignored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>progress</code></td>
<td>
<p>Logical. Display a progress bar when needed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>report</code></td>
<td>
<p>Logical. Display a summary report of the process in the
console. See also <strong>Value</strong>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>recursive</code></td>
<td>
<p>Logical. Should the <code>dir</code> file search recursive? See also
<code>list.files()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>

<p>Arguments passed on to <code>resmush_file</code>
</p>

<dl>
<dt><code>qlty</code></dt>
<dd>
<p>Only affects <code>jpg</code> files. Integer between 0 and 100 indicating
the optimization level. For optimal results use vales above 90.</p>
</dd>
<dt><code>exif_preserve</code></dt>
<dd>
<p>Logical. Should the
<a href="https://en.wikipedia.org/wiki/Exif">Exif</a> information (if any) deleted?
Default is to remove it (i.e. <code>exif_preserve = FALSE</code>).</p>
</dd>
</dl>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Writes on disk the optimized file if the API call is successful in the
directories specified in <code>dir</code>.
</p>
<p>In all cases, a (invisible) data frame with a summary of the process is
returned as well.
</p>


<h3>See Also</h3>

<p><a href="https://resmush.it/api/">reSmush.it API</a> docs.
</p>
<p>See <code>resmush_clean_dir()</code> to clean a directory of previous runs.
</p>
<p>Other functions for optimizing:
<code>resmush_file()</code>,
<code>resmush_url()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">

# Get example dir and copy
example_dir &lt;- system.file("extimg", package = "resmush")
temp_dir &lt;- tempdir()
file.copy(example_dir, temp_dir, recursive = TRUE)

# Dest folder

dest_folder &lt;- file.path(tempdir(), "extimg")


# Non-recursive
resmush_dir(dest_folder)
resmush_clean_dir(dest_folder)

# Recursive
summary &lt;- resmush_dir(dest_folder, recursive = TRUE)

# Same info in the invisible df
summary[, -c(1, 2)]

# Display with png
if (require("png", quietly = TRUE)) {
  a_png &lt;- grepl("png$", summary$dest_img)
  my_png &lt;- png::readPNG(summary[a_png, ]$dest_img[2])
  grid::grid.raster(my_png)
}

# Clean up example
unlink(dest_folder, force = TRUE, recursive = TRUE)


</code></pre>


</div>