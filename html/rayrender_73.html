<div class="container">

<table style="width: 100%;"><tr>
<td>obj_model</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>'obj' File Object</h2>

<h3>Description</h3>

<p>Load an obj file via a filepath. Currently only supports the diffuse texture with the 'texture' argument. 
Note: light importance sampling currently not supported for this shape.
</p>


<h3>Usage</h3>

<pre><code class="language-R">obj_model(
  filename,
  x = 0,
  y = 0,
  z = 0,
  scale_obj = 1,
  load_material = TRUE,
  load_textures = TRUE,
  load_normals = TRUE,
  vertex_colors = FALSE,
  calculate_consistent_normals = TRUE,
  subdivision_levels = 1,
  displacement_texture = NA,
  displacement_intensity = 1,
  displacement_vector = FALSE,
  recalculate_normals = FALSE,
  importance_sample_lights = TRUE,
  material = diffuse(),
  angle = c(0, 0, 0),
  order_rotation = c(1, 2, 3),
  flipped = FALSE,
  scale = c(1, 1, 1)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>filename</code></td>
<td>
<p>Filename and path to the ‘obj' file. Can also be a 'txt' file, if it’s in the correct 'obj' internally.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Default '0'. x-coordinate to offset the model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>Default '0'. y-coordinate to offset the model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>z</code></td>
<td>
<p>Default '0'. z-coordinate to offset the model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scale_obj</code></td>
<td>
<p>Default '1'. Amount to scale the model. Use this to scale the object up or down on all axes, as it is
more robust to numerical precision errors than the generic scale option.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>load_material</code></td>
<td>
<p>Default 'TRUE'. Whether to load the obj file material (MTL file). If material for faces
aren't specified, the default material will be used (specified by the user in 'material').</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>load_textures</code></td>
<td>
<p>Default 'TRUE'. If 'load_material = TRUE', whether to load textures in the MTL file (versus
just using the colors specified for each material).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>load_normals</code></td>
<td>
<p>Default 'TRUE'. Whether to load the vertex normals if they exist in the OBJ file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vertex_colors</code></td>
<td>
<p>Default 'FALSE'. Set to 'TRUE' if the OBJ file has vertex colors to apply them
to the model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>calculate_consistent_normals</code></td>
<td>
<p>Default 'TRUE'. Whether to calculate consistent vertex normals to prevent energy 
loss at edges.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subdivision_levels</code></td>
<td>
<p>Default '1'. Number of Loop subdivisions to be applied to the mesh.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>displacement_texture</code></td>
<td>
<p>Default 'NA'. File path to the displacement texture. 
This texture is used to displace the vertices of the mesh based on the texture's pixel values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>displacement_intensity</code></td>
<td>
<p>Default '1'. Intensity of the displacement effect. 
Higher values result in greater displacement.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>displacement_vector</code></td>
<td>
<p>Default 'FALSE'. Whether to use vector displacement. 
If 'TRUE', the displacement texture is interpreted as providing a 3D displacement vector. 
Otherwise, the texture is interpreted as providing a scalar displacement.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>recalculate_normals</code></td>
<td>
<p>Default 'FALSE'. Whether to recalculate vertex normals based on the 
connecting face orientations. This can be used to compute normals for meshes lacking them or
to calculate new normals after a displacement map has been applied to the mesh.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>importance_sample_lights</code></td>
<td>
<p>Default 'TRUE'. Whether to importance sample lights specified in the OBJ material
(objects with a non-zero Ke MTL material).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>material</code></td>
<td>
<p>Default  <code>diffuse</code>.The material, called from one of the material 
functions <code>diffuse</code>, <code>metal</code>, or <code>dielectric</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>angle</code></td>
<td>
<p>Default 'c(0, 0, 0)'. Angle of rotation around the x, y, and z axes, applied in the order specified in 'order_rotation'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>order_rotation</code></td>
<td>
<p>Default 'c(1, 2, 3)'. The order to apply the rotations, referring to "x", "y", and "z".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>flipped</code></td>
<td>
<p>Default 'FALSE'. Whether to flip the normals.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scale</code></td>
<td>
<p>Default 'c(1, 1, 1)'. Scale transformation in the x, y, and z directions. If this is a single value,
number, the object will be scaled uniformly.
Note: emissive objects may not currently function correctly when scaled.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Single row of a tibble describing the obj model in the scene.
</p>


<h3>Examples</h3>

<pre><code class="language-R">#Load the included example R object file, by calling the r_obj() function. This
#returns the local file path to the `r.txt` obj file. The file extension is "txt" 
#due to package constraints, but the file contents are identical and it does not 
#affect the function.

if(run_documentation()) {
#Load the basic 3D R logo with the included materials
generate_ground(material = diffuse(checkercolor = "grey50")) %&gt;%
  add_object(obj_model(y = 0.2, filename = rayrender::r_obj(),
                       scale_obj=3)) %&gt;%
   add_object(sphere(z = 20, x = 20, y = 20, radius = 10,
                     material = light(intensity = 10))) %&gt;%
  render_scene(parallel = TRUE, samples = 256, aperture = 0.05, 
               sample_method="sobol_blue",
               fov = 20, lookfrom = c(0, 2, 10))
}

if(run_documentation()) {
# Smooth a mesh by setting the number of subdivision levels 
generate_ground(material = diffuse(checkercolor = "grey50")) %&gt;%
  add_object(obj_model(y = 0.2, filename = rayrender::r_obj(),
                       scale_obj=3, subdivision_levels = 3)) %&gt;%
   add_object(sphere(z = 20, x = 20, y = 20, radius = 10,
                     material = light(intensity = 10))) %&gt;%
  render_scene(parallel = TRUE, samples = 256, aperture = 0.05,
               sample_method="sobol_blue", 
               fov = 20, lookfrom = c(0, 2, 10))
}

if(run_documentation()) {
#Override the materials for each object
generate_ground(material = diffuse(checkercolor = "grey50")) %&gt;%
  add_object(obj_model(y = 1.4, filename = rayrender::r_obj(), load_material = FALSE,
                       scale_obj = 1.8, angle=c(10,0,0),
                       material = microfacet(color = "gold", roughness = 0.05))) %&gt;%
  add_object(obj_model(x = 0.9, y = 0, filename = rayrender::r_obj(), load_material = FALSE,
                       scale_obj = 1.8, angle=c(0,-20,0),
                       material = diffuse(color = "dodgerblue"))) %&gt;%
  add_object(obj_model(x = -0.9, y = 0, filename = rayrender::r_obj() , load_material = FALSE,
                       scale_obj = 1.8, angle=c(0,20,0),
                       material = dielectric(attenuation = c(1,0.3,1), priority = 1,
                                             attenuation_intensity = 20))) %&gt;%
  add_object(sphere(z = 20, x = 20, y = 20, radius = 10,
                    material = light(intensity = 10))) %&gt;%
  render_scene(parallel = TRUE, samples = 256, aperture = 0.05, 
               sample_method="sobol_blue", lookat=c(0,0.5,0),
               fov = 22, lookfrom = c(0, 2, 10))

}
</code></pre>


</div>