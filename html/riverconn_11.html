<div class="container">

<table style="width: 100%;"><tr>
<td>t_index_calculation</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculates time-dependent index when nodes weights or barriers passability are changing</h2>

<h3>Description</h3>

<p>Calculates time-dependent index when nodes weights or barriers passability are changing
</p>


<h3>Usage</h3>

<pre><code class="language-R">t_index_calculation(
  graph = graph,
  ...,
  barriers_metadata,
  id_barrier = "id_barrier",
  year = "year",
  pass_u = "pass_u",
  pass_d = "pass_d",
  weights_metadata,
  weight = "length",
  nodes_id = "name",
  parallel = TRUE,
  ncores
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>graph</code></td>
<td>
<p>an object of class igraph. Can be both directed or undirected.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other arguments passed to the function index_calculation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>barriers_metadata</code></td>
<td>
<p>data.frame that must contain a column having the same name as the 'id_barrier' attribute of the graph,
and two columns with the corresponding upstream and downstream improved passabilities (see pass_u and pass_d), and a column with the year
passability was changed. This data frame can be obtained from easily-formatted data with the function <code>t_passability_sequencer</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id_barrier</code></td>
<td>
<p>graph edges attribute used to label barriers. Default is <code>"id_barrier"</code>. It should be present in the 'barriers metadata' input as well.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>year</code></td>
<td>
<p>field of the 'barriers metadata' where temporal information on the changes in passability is stored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pass_u</code></td>
<td>
<p>field of the 'barriers metadata' where temporal-dependent upstream passability is stored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pass_d</code></td>
<td>
<p>field of the 'barriers metadata' where temporal-dependent downstream passability is stored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights_metadata</code></td>
<td>
<p>data.frame that must contain a column having the same name as the 'nodes_id' attribute of the graph,
a column with he corresponding weight information (see 'weight' parameter), and a column with the year
weight was changed. This data frame can be obtained from easily-formatted data with the function <code>t_weight_sequencer</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weight</code></td>
<td>
<p>param weight graph vertex attribute used to assign weights to the reaches (nodes). Default is <code>"length"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nodes_id</code></td>
<td>
<p>graph vertex attribute used to uniquely label reaches (nodes). Default is <code>"name"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parallel</code></td>
<td>
<p>logical value to flag if parallel option is to be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ncores</code></td>
<td>
<p>define how many cores are used in parallel processing. Active only when <code>parallel = TRUE</code></p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>a data.frame with a 'year' field and related connectivity index.
If <code>index_type = "reach"</code>, the data.frame is organized by 'year' and 'name'.
</p>


<h3>References</h3>

<p>Baldan, D., Cunillera-Montcusí, D., Funk, A., &amp; Hein, T. (2022). Introducing ‘riverconn’: an R package to assess river connectivity indices. Environmental Modelling &amp; Software, 156, 105470.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(igraph)
g &lt;- igraph::graph_from_literal(1-+2, 2-+4, 3-+2, 4-+6, 6-+5)
E(g)$id_barrier &lt;- c(NA, NA, "1", NA, NA)
E(g)$type &lt;- ifelse(is.na(E(g)$id_barrier), "joint", "dam")
V(g)$length &lt;- c(1, 1, 2, 3, 4,5)
V(g)$Id &lt;- V(g)$name
E(g)$pass_u &lt;- E(g)$pass_d &lt;- ifelse(!is.na(E(g)$id_barrier),0.1,NA)
barriers_data &lt;- data.frame("id_barrier" = c("1"),
   "year_c" = 2000, "pass_c_u" = 0.1, "pass_c_d" = 0.4)
seq_ops &lt;- c("c")
barriers_metadata &lt;- t_passability_sequencer(barriers_data, seq_ops)
weights_dataframe &lt;- data.frame("name" = seq(1,6) %&gt;% as.character,
    "length_1999" = c(1, 1, 2, 3, 4,5))
weights_metadata &lt;- t_weights_sequencer(weights_dataframe, weight = "length")
t_index &lt;- t_index_calculation(g, barriers_metadata = barriers_metadata,
 weights_metadata = weights_metadata, weight = "length", parallel = FALSE, B_ij_flag = FALSE)




</code></pre>


</div>