<div class="container">

<table style="width: 100%;"><tr>
<td>read_caim_raw</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Read a canopy image from a raw file</h2>

<h3>Description</h3>

<p>Function that complements <code>read_caim()</code>
</p>


<h3>Usage</h3>

<pre><code class="language-R">read_caim_raw(
  path = NULL,
  z = NULL,
  a = NULL,
  zenith_colrow = NULL,
  radius = 700,
  rmax = 100,
  k = 1,
  p = 1,
  only_blue = FALSE,
  offset_value = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>path</code></td>
<td>
<p>Character vector of length one.Path to a raw file, including file
extension.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>z</code></td>
<td>
<p>SpatRaster built with <code>zenith_image()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>a</code></td>
<td>
<p>SpatRaster built with <code>azimuth_image()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zenith_colrow</code></td>
<td>
<p>Numeric vector of length two. Raster coordinates of the
zenith. See <code>calc_zenith_colrow()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>radius</code></td>
<td>
<p>Numeric integer of length one. Radius of the reprojected
hemispherical image (i.e., the output).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rmax</code></td>
<td>
<p>Numeric vector of length one. Maximum radius where to search for
<em>knn</em>. Increase this value if pixels with value <code>0</code> or
<code>FALSE</code> appears where other values are expected.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k</code></td>
<td>
<p>Numeric vector of length one. Number of k-nearest neighbors.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p</code></td>
<td>
<p>Numeric vector of length one. Power for inverse-distance weighting.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>only_blue</code></td>
<td>
<p>Logical vector of length one. If <code>TRUE</code>, only values from
the blue or cyan wavelength will be processed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>offset_value</code></td>
<td>
<p>numeric vector. This values will replace the
<code>black_level_per_channel</code> metadata obtained with <code>rawpy</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function facilitates the integration of the <code>rawpy</code> Python package into
the R environment via the <code>reticulate</code> package. This integration allows
<code>rcaiman</code> to access and pre-process raw data.
</p>
<p>Here is a step-by-step guide to assist users in setting up the environment
for efficient processing:
</p>


<h4>Check Python Accessibility:</h4>

<p>To ensure that R can access a Python installation, run the following test:
</p>
<div class="sourceCode"><pre>reticulate::py_eval("1+1")

</pre></div>
<p>If R can access Python successfully, you will see <code>2</code> in the console. If not,
you will receive instructions on how to install Python.
</p>



<h4>Create a Virtual Environment:</h4>

<p>After passing the Python accessibility test, create a virtual environment
using the following command:
</p>
<div class="sourceCode"><pre>reticulate::virtualenv_create()

</pre></div>



<h4>Install <code>rawpy</code>:</h4>

<p>Install the rawpy package within the virtual environment:
</p>
<div class="sourceCode"><pre>reticulate::py_install("rawpy")

</pre></div>



<h4>For RStudio Users:</h4>

<p>If you are an RStudio user who works with projects, you will need a
<em>.Renviron</em> file in the root of each project. To create a <em>.Renviron</em> file,
follow these steps:
</p>

<ul>
<li>
<p> Create a "New Blank File" named ".Renviron" (without an extension) in the
project's root directory.
</p>
</li>
<li>
<p> Run bellow code:
</p>
</li>
</ul>
<div class="sourceCode"><pre>path &lt;- file.path(reticulate::virtualenv_root(),
reticulate::virtualenv_list(), "Scripts", "python.exe")
paste("RETICULATE_PYTHON =", path)

</pre></div>

<ul>
<li>
<p> Copy/paste the line from the console (the string between the quotes) into
the .Renviron file. This is an example <code style="white-space: pre;">⁠RETICULATE_PYTHON = ~/.virtualenvs/r-reticulate/Scripts/python.exe⁠</code>
</p>
</li>
<li>
<p> Do not forget to save the changes
</p>
</li>
</ul>
<p>By following these steps, users can easily set up their environment to access
raw data efficiently, but it is not the only way of doing it.
</p>



<h3>Value</h3>

<p>An object from class SpatRaster. Single-layer raster if
<code>only_blue</code> is equal to <code>TRUE</code>. Otherwise, a raster with as many layers as
there are distinct colors in the Color Filter Array. Layer names are taken
from the color description metadata.
</p>


<h3>See Also</h3>

<p>Other Tool Functions: 
<code>colorfulness()</code>,
<code>correct_vignetting()</code>,
<code>defuzzify()</code>,
<code>extract_dn()</code>,
<code>extract_feature()</code>,
<code>extract_rl()</code>,
<code>extract_sky_points_simple()</code>,
<code>extract_sky_points()</code>,
<code>extract_sun_coord()</code>,
<code>find_sky_pixels_nonnull()</code>,
<code>find_sky_pixels()</code>,
<code>masking()</code>,
<code>optim_normalize()</code>,
<code>percentage_of_clipped_highlights()</code>,
<code>read_bin()</code>,
<code>read_caim()</code>,
<code>write_bin()</code>,
<code>write_caim()</code>
</p>


</div>