<div class="container">

<table style="width: 100%;"><tr>
<td>djoin</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Join designs together into a blocked design</h2>

<h3>Description</h3>

<p>This implements the <span class="pkg">rsm</span> package's building-block provisions for handling
sequences of experiments. We often want to join two or more designs into one blocked design for purposes of analysis.
</p>


<h3>Usage</h3>

<pre><code class="language-R">djoin(design1, design2, ..., blkname = "Block", blocklev)
stdorder(design)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>design1</code></td>
<td>
<p>A <code>coded.data</code> object (must have been created by <span class="pkg">rsm</span> 2.00 or higher).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>design2</code></td>
<td>
<p>A <code>data.frame</code> (or <code>coded.data</code>) to be appended; 
or a call to a function that will create a design</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional designs to be appended</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>blkname</code></td>
<td>
<p>Name to give to the blocking variable that distinguishes the designs that are joined</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>blocklev</code></td>
<td>
<p>Label to use in the blocking variable for the added design</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>design</code></td>
<td>
<p>A <code>coded.data</code> object to be displayed.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>djoin</code> may be used to augment a design with all manner of other designs, including regular designs generated by <code>cube</code> and its relatives, <code>data.frames</code>, and other <code>coded.data</code> objects. The underlying paradigm is that each design joined is a separate block, and the order in which they are joined could matter. 
</p>
<p>It tries to do this in a smart way: The first design, <code>design1</code>, is required to be a <code>coded.data</code> object. If <code>design2</code> is a <code>data.frame</code>, and variables with the coded names are not present, it is automatically coded according to <code>design1</code>'s coding formulas. If <code>design2</code> is a <code>coded.data</code> object, and its coding formulas differ from those of <code>design1</code>, then <code>design1</code> is recoded with <code>design2</code>'s codings before the designs are joined. In both cases, any variables in <code>design2</code> not matched in <code>design1</code> are excluded, and any <code>design1</code> variables absent in <code>design2</code> are added with values of <code>NA</code>.
</p>


<h3>Value</h3>

<p><code>djoin</code> returns a <code>coded.data</code> object with the combined designs, and coding formulas from the last <code>coded.data</code> object added. The generated blocking variable will be a <code>factor</code>. The designs are sorted by blocks and <code>run.order</code> within blocks; and its <code>row.names</code> will be integers corresponding to this ordering. 
</p>
<p>The function <code>stdorder</code> sorts such data by block and <code>std.order</code> within block to display the designs in their pre-randomized order.
</p>


<h3>Author(s)</h3>

<p>Russell V. Lenth</p>


<h3>See Also</h3>

<p><code>cube</code>, <code>coded.data</code>, <code>bbd</code></p>


<h3>Examples</h3>

<pre><code class="language-R"># Some existing data
CR1 &lt;- coded.data(ChemReact1, x1 ~ (Time - 85)/5, x2 ~ (Temp - 175)/5)
# add the second part of the experiment; it gets coded automagically
djoin(CR1, ChemReact2)

# A new experiment in a different part of the design space
newdes &lt;- cube(Yield ~ x1 + x2,  n0 = 3, 
    coding = c(x1 ~ (Time - 70)/10, x2 ~ (Temp - 180)/5))
# Time passes ... we do the experiment and plug-in the observed Yield values
newdes$Yield &lt;- rnorm(7, 75, 3) # these are our pretend results
combined &lt;- djoin(CR1, newdes)
# Observe that the combined dataset is recoded to the new formulas
print(combined, decode = FALSE)

# List the new design in standard order
stdorder(newdes)
</code></pre>


</div>