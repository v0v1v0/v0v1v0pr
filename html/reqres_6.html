<div class="container">

<table style="width: 100%;"><tr>
<td>formatters</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Pre-supplied formatting generators</h2>

<h3>Description</h3>

<p>This set of functions can be used to construct formatting functions adhering
to the Response$format() requirements.
</p>


<h3>Usage</h3>

<pre><code class="language-R">format_json(
  dataframe = "rows",
  matrix = "rowmajor",
  Date = "ISO8601",
  POSIXt = "string",
  factor = "string",
  complex = "string",
  raw = "base64",
  null = "list",
  na = "null",
  auto_unbox = FALSE,
  digits = 4,
  pretty = FALSE,
  force = FALSE
)

format_plain(sep = "\n")

format_xml(encoding = "UTF-8", options = "as_xml")

format_html(encoding = "UTF-8", options = "as_html")

format_table(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dataframe</code></td>
<td>
<p>how to encode data.frame objects: must be one of 'rows', 'columns' or 'values'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>matrix</code></td>
<td>
<p>how to encode matrices and higher dimensional arrays: must be one of 'rowmajor' or 'columnmajor'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Date</code></td>
<td>
<p>how to encode Date objects: must be one of 'ISO8601' or 'epoch'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>POSIXt</code></td>
<td>
<p>how to encode POSIXt (datetime) objects: must be one of 'string', 'ISO8601', 'epoch' or 'mongo'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>factor</code></td>
<td>
<p>how to encode factor objects: must be one of 'string' or 'integer'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>complex</code></td>
<td>
<p>how to encode complex numbers: must be one of 'string' or 'list'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>raw</code></td>
<td>
<p>how to encode raw objects: must be one of 'base64', 'hex' or 'mongo'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>null</code></td>
<td>
<p>how to encode NULL values within a list: must be one of 'null' or 'list'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na</code></td>
<td>
<p>how to print NA values: must be one of 'null' or 'string'. Defaults are class specific</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>auto_unbox</code></td>
<td>
<p>automatically <code>unbox()</code> all atomic vectors of length 1. It is usually safer to avoid this and instead use the <code>unbox()</code> function to unbox individual elements.
An exception is that objects of class <code>AsIs</code> (i.e. wrapped in <code>I()</code>) are not automatically unboxed. This is a way to mark single values as length-1 arrays.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>max number of decimal digits to print for numeric values. Use <code>I()</code> to specify significant digits. Use <code>NA</code> for max precision.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pretty</code></td>
<td>
<p>adds indentation whitespace to JSON output. Can be TRUE/FALSE or a number specifying the number of spaces to indent. See <code>prettify()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>force</code></td>
<td>
<p>unclass/skip objects of classes with no defined JSON mapping</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sep</code></td>
<td>
<p>The line separator. Plain text will be split into multiple strings
based on this.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>encoding</code></td>
<td>
<p>The character encoding to use in the document. The default
encoding is ‘UTF-8’. Available encodings are specified at
<a href="http://xmlsoft.org/html/libxml-encoding.html#xmlCharEncoding">http://xmlsoft.org/html/libxml-encoding.html#xmlCharEncoding</a>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>options</code></td>
<td>
<p>default: ‘format’. Zero or more of
</p>

<dl>
<dt>format</dt>
<dd>
<p>Format output</p>
</dd>
<dt>no_declaration</dt>
<dd>
<p>Drop the XML declaration</p>
</dd>
<dt>no_empty_tags</dt>
<dd>
<p>Remove empty tags</p>
</dd>
<dt>no_xhtml</dt>
<dd>
<p>Disable XHTML1 rules</p>
</dd>
<dt>require_xhtml</dt>
<dd>
<p>Force XHTML rules</p>
</dd>
<dt>as_xml</dt>
<dd>
<p>Force XML output</p>
</dd>
<dt>as_html</dt>
<dd>
<p>Force HTML output</p>
</dd>
<dt>format_whitespace</dt>
<dd>
<p>Format with non-significant whitespace</p>
</dd>
</dl>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>parameters passed on to <code>write.table()</code></p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A function accepting an R object
</p>


<h3>See Also</h3>

<p>parsers for converting <code>Request</code> bodies into R objects
</p>
<p>default_formatters for a list that maps the most common mime types
to their respective formatters
</p>


<h3>Examples</h3>

<pre><code class="language-R">fake_rook &lt;- fiery::fake_request(
  'http://example.com/test',
  content = '',
  headers = list(
    Content_Type = 'text/plain',
    Accept = 'application/json, text/csv'
  )
)

req &lt;- Request$new(fake_rook)
res &lt;- req$respond()
res$body &lt;- mtcars
res$format(json = format_json(), csv = format_table(sep=','))
res$body

# Cleaning up connections
rm(fake_rook, req, res)
gc()

</code></pre>


</div>