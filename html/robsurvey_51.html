<div class="container">

<table style="width: 100%;"><tr>
<td>svyratio_huber</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Robust Survey Ratio M-Estimator</h2>

<h3>Description</h3>

<p><code>svyratio_huber</code> and <code>svyratio_tukey</code> compute the robust
<code class="reqn">M</code>-estimator of the ratio of two variables with, respectively,
Huber and Tukey biweight (bisquare) psi-function.
</p>


<h3>Usage</h3>

<pre><code class="language-R">svyratio_huber(numerator, denominator, design, k, var = denominator,
               na.rm = FALSE, asym = FALSE, verbose = TRUE, ...)
svyratio_tukey(numerator, denominator, design, k, var = denominator,
               na.rm = FALSE, verbose = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>numerator</code></td>
<td>
<p>a one-sided <code>[formula]</code> object (i.e., symbolic
description, e.g., <code>~payroll</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>denominator</code></td>
<td>
<p>a one-sided <code>[formula]</code> object (i.e., symbolic
description, e.g., <code>~employment</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>design</code></td>
<td>
<p>an object of class <code>survey.design</code>; see
<code>svydesign</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k</code></td>
<td>
<p><code>[double]</code> robustness tuning constant
(<code class="reqn">0 &lt; k \leq \infty</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var</code></td>
<td>
<p>a <code>[formula]</code> object that defines the heteroscedastic
variance (default: <code>numerator</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm</code></td>
<td>
<p><code>[logical]</code> indicating whether <code>NA</code> values should
be removed before the computation proceeds (default: <code>FALSE</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>asym</code></td>
<td>
<p><code>[logical]</code> toggle for asymmetric Huber psi-function
(default: <code>FALSE</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p><code>[logical]</code> indicating whether additional information
is printed to the console (default: <code>TRUE</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments passed to the method (e.g., <code>maxit</code>:
maxit number of iterations, etc.).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Package <span class="pkg">survey</span> must be attached to the search path in order to use
the functions (see <code>library</code> or <code>require</code>).
</p>
<p>The functions <code>svyratio_huber</code> and <code>svyratio_tukey</code> are
implemented as wrapper functions of the regression estimators
<code>svyreg_huberM</code> and <code>svyreg_tukeyM</code>. See
the help files of these functions (e.g., on how additional
parameters can be passed via <code>...</code> or on the usage of the
<code>var</code> argument).
</p>


<h3>Value</h3>

<p>Object of class <code>svyreg.rob</code> and <code>ratio</code>
</p>


<h3>See Also</h3>

<p>Overview (of all implemented functions)
</p>
<p><code>summary</code>, <code>coef</code>,
<code>residuals</code>, <code>fitted</code>,
<code>SE</code> and <code>vcov</code>
</p>
<p><code>plot</code> for regression diagnostic plot methods
</p>
<p><code>svyreg_huberM</code>, <code>svyreg_huberGM</code>,
<code>svyreg_tukeyM</code> and <code>svyreg_tukeyGM</code> for robust
regression estimators
</p>


<h3>Examples</h3>

<pre><code class="language-R">head(workplace)

library(survey)
# Survey design for stratified simple random sampling without replacement
dn &lt;- if (packageVersion("survey") &gt;= "4.2") {
        # survey design with pre-calibrated weights
        svydesign(ids = ~ID, strata = ~strat, fpc = ~fpc, weights = ~weight,
                  data = workplace, calibrate.formula = ~-1 + strat)
    } else {
        # legacy mode
        svydesign(ids = ~ID, strata = ~strat, fpc = ~fpc, weights = ~weight,
                  data = workplace)
    }

# Compute regression M-estimate with Huber psi-function
m &lt;- svyratio_huber(~payroll, ~employment, dn, k = 8)

# Regression inference
summary(m)

# Extract the coefficients
coef(m)

# Extract estimated standard error
SE(m)

# Extract variance/ covariance matrix
vcov(m)

# Diagnostic plots (e.g., standardized residuals against fitted values)
plot(m, which = 1L)

# Plot of the robustness weights of the M-estimate against its residuals
plot(residuals(m), robweights(m))
</code></pre>


</div>