<div class="container">

<table style="width: 100%;"><tr>
<td>readDWD.nc</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>read dwd netcdf data</h2>

<h3>Description</h3>

<p>Read netcdf data.
Intended to be called via <code>readDWD()</code>.<br>
Note that <code>R.utils</code> and <code>ncdf4</code> must be installed to unzip and read the .nc.gz files.
</p>


<h3>Usage</h3>

<pre><code class="language-R">readDWD.nc(
  file,
  gargs = NULL,
  var = "",
  toraster = TRUE,
  quiet = rdwdquiet(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>Name of file on harddrive, like e.g.
DWDdata/grids_germany/daily/Project_TRY/humidity/RH_199509_daymean.nc.gz</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gargs</code></td>
<td>
<p>Named list of arguments passed to
<code>R.utils::gunzip()</code>, see <code>readDWD.raster()</code>. DEFAULT: NULL</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var</code></td>
<td>
<p>if toraster=FALSE: Charstring with name of variable to be read with
<code>ncdf4::ncvar_get()</code>. If not available,
an interactive selection is presented.
DEFAULT: "" (last variable)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>toraster</code></td>
<td>
<p>Read file with <code>terra::rast()</code>?
All further arguments will be ignored. Specify e.g. <code>var</code>
through ... as <code>varname</code>. DEFAULT: TRUE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quiet</code></td>
<td>
<p>Logical: Suppress time conversion failure warning?
DEFAULT: FALSE through <code>rdwdquiet()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments passed to <code>terra::rast()</code> or <code>ncdf4::nc_open()</code></p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>terra::rast()</code> object. Alternatively,
if toraster=FALSE, a list with time, lat, lon, var, varname, file and cdf.
<strong>cdf</strong> is the output of <code>ncdf4::nc_open()</code>.
</p>


<h3>Author(s)</h3>

<p>Berry Boessenkool, <a href="mailto:berry-b@gmx.de">berry-b@gmx.de</a>, Aug 2019
</p>


<h3>See Also</h3>

<p><code>readDWD()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run:  # Excluded from CRAN checks, but run in localtests

library(berryFunctions) # for seqPal and colPointsLegend

url &lt;- "daily/Project_TRY/pressure/PRED_199606_daymean.nc.gz"  #  5 MB
url &lt;- "daily/Project_TRY/humidity/RH_199509_daymean.nc.gz"    # 25 MB
file &lt;- dataDWD(url, base=gridbase, joinbf=TRUE, dir=locdir(), read=FALSE)
nc &lt;- readDWD(file)
ncp &lt;- plotRadar(nc, main=paste(terra::longnames(nc), terra::time(nc)), layer=1:3,
                 col=seqPal(), proj="nc", extent="nc")

str(terra::values(nc[[1]])) # obtain actual values into memory

terra::plot(nc[[1]]) # axes 0:938 / 0:720, the number of grid cells
terra::plot(ncp[[1]])# properly projected, per default onto latlon

rng &lt;- range(terra::global(nc[[1:6]], "range", na.rm=TRUE))
terra::plot(nc, col=seqPal(), zlim=rng, maxnl=6)

# Array instead of terra rast:
nc &lt;- readDWD(file, toraster=FALSE)
image(nc$var[,,1], col=seqPal(), asp=1.1)
colPointsLegend(nc$var[,,1], title=paste(nc$varname, nc$time[1]))

# interactive selection of variable:
# nc &lt;- readDWD(file, toraster=FALSE, var="-") # commented out to not block automated tests
str(nc$var)

## End(Not run)
</code></pre>


</div>