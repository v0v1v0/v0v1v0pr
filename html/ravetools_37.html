<div class="container">

<table style="width: 100%;"><tr>
<td>diagnose_filter</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Diagnose digital filter</h2>

<h3>Description</h3>

<p>Generate frequency response plot with sample-data simulation
</p>


<h3>Usage</h3>

<pre><code class="language-R">diagnose_filter(
  b,
  a,
  fs,
  n = 512,
  whole = FALSE,
  sample = stats::rnorm(n, mean = sample_signal(n), sd = 0.2),
  vlines = NULL,
  xlim = "auto",
  cutoffs = c(-3, -6, -12)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>b</code></td>
<td>
<p>the moving-average coefficients of an <code>ARMA</code> model</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>a</code></td>
<td>
<p>the auto-regressive coefficients of an <code>ARMA</code> filter; default
is <code>1</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fs</code></td>
<td>
<p>sampling frequency in <code>Hz</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>number of points at which to evaluate the frequency response;
default is <code>512</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>whole</code></td>
<td>
<p>whether to evaluate beyond <code>Nyquist</code> frequency; default
is false</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sample</code></td>
<td>
<p>sample signal of length <code>n</code> for simulation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vlines</code></td>
<td>
<p>additional vertical lines (frequencies) to plot</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlim</code></td>
<td>
<p>frequency limit of frequency response plot; default is
<code>"auto"</code>, can be <code>"full"</code> or a numeric of length 2</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cutoffs</code></td>
<td>
<p>cutoff decibel powers to draw on the frequency plot, also used
to calculate the frequency limit when <code>xlim</code> is <code>"auto"</code></p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Nothing
</p>


<h3>Examples</h3>

<pre><code class="language-R">


library(ravetools)

# sample rate
srate &lt;- 500

# signal length
npts &lt;- 1000

# band-pass
bpass &lt;- c(1, 50)

# Nyquist
fn &lt;- srate / 2
w &lt;- bpass / fn

# ---- FIR filter ------------------------------------------------
order &lt;- 160

# FIR1 is MA filter, a = 1
filter &lt;- fir1(order, w, "pass")

diagnose_filter(
  b = filter$b, a = filter$a, n = npts,
  fs = srate, vlines = bpass
)

# ---- Butter filter --------------------------------------------
filter &lt;- butter(3, w, "pass")

diagnose_filter(
  b = filter$b, a = filter$a, n = npts,
  fs = srate, vlines = bpass
)



</code></pre>


</div>