<div class="container">

<table style="width: 100%;"><tr>
<td>bibentryExtra</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Work with 'bibentryExtra' objects</h2>

<h3>Description</h3>

<p>Objects from class <code>"bibentryExtra"</code> represent a collection of
bibliographic references. This page documents functions to create such
objects or convert other compatible objects to <code>"bibentryExtra"</code>,
as well as methods for subsetting and replacing parts of them.
</p>


<h3>Usage</h3>

<pre><code class="language-R">bibentryExtra(bibtype = NULL, ...)

as.bibentryExtra(x, ...)

## S3 method for class 'bibentryExtra'
x[[i, j, drop = TRUE]]

## S3 replacement method for class 'bibentryExtra'
x[[i]] &lt;- value

## S3 method for class 'bibentryExtra'
x[i, j, drop = TRUE]

## S3 replacement method for class 'bibentryExtra'
x$name &lt;- value
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>bibtype</code></td>
<td>

<p>a character string specifying the type of the bib entry. Can also be
a character vector to create an object containing more than one
entry, see <code>bibentry</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>

<p>for <code>bibentryExtra</code>, an object to be converted; otherwise an
object from class <code>"bibentryExtra"</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>i</code></td>
<td>

<p>the bib entry to extract or assign to, a character string (the key),
a singe integer number (position), or a list of length 2.  For the
extractor, <code>"[["</code>, <code>i</code> can also be of length more than 1
(character or integer) when <code>j</code> is missing completely. See
section ‘Details’ for complete details.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>j</code></td>
<td>

<p>field(s) to extract, a character vector or missing, see section
‘Details’.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>

<p>field to extract.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drop</code></td>
<td>

<p>if <code>TRUE</code>, each entry in the returned list will contain the
attributes (e.g., <code>"bibtype"</code> and <code>"key"</code>).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>

<p>value(s) to use for replacement, a list.
For <code>"[&lt;-"</code>, an object inheriting from <code>"bibentry"</code> (so,
including <code>"bibentryExtra"</code>), containing exactly one bib
item. Alternatively, a character vector or a list, see section
‘Details’.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>

<p>for <code>bibentryExtra</code>, any arguments that
<code>bibentry</code> accepts.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>bibentryExtra</code> creates a <code>"bibentryExtra"</code> object.  It has
the same arguments as <code>bibentry</code>, see its help page for
full details. The main difference is that for <code>bibentryExtra</code>, the
bibentry type, is not restricted to have values from the list of
standard Bibtex types (which is the case for <code>bibtype</code>).
</p>
<p><code>bibentryExtra</code> sets the <code>"names"</code> attribute to the keys of
the bib entries in it. However, further changes in the names and/or
the keys can make them different. If you want to keep the names always
consistent with the keys, set <code>names(bee) &lt;- NULL</code>. This will
cause <code>names</code> to dynamically create collect the keys when called.
</p>
<p><code>as.bibentryExtra</code> is a generic function for conversion of
objects to class <code>"bibentryExtra"</code>, most notably from class
<code>"bibentry"</code>.
</p>
<p>Details on the subsetting methods are given below. The main think that
needs to be pointed out is that the bracket operators take as first
argument the values of one or more keys, while for the dollar
operators the argument is the name of a field (e.g., <code>journal</code>).
This is convenient but can cause confusion, since usually <code>$</code> and
<code>[[</code> are (mostly) equivalent. This can be avoided by using
argument <code>j</code>, since in the (i,j) pair <code>i</code> is always a key
(or keys) and <code>j</code> the names of fields.
</p>
<p>The subsetting methods aim to provide convenient access to components
of <code>"bibentryExtra"</code> objects.  In comparison to the corresponding
methods for <code>"bibenry"</code> objects, the methods for
<code>"bibentryExtra"</code> provide some additional features. Most notably,
some of them include argument <code>j</code>, see the details below.  If you
want similar access for <code>"bibenry"</code> objects, just convert them to
<code>"bibentryExtra"</code> using <code>as.bibentryExtra</code>.
</p>
<p>It is convenient to think of the <code>"bibentryExtra"</code> as a ragged
array with ‘rows’ (the bib entries) and ‘columns’ (the
fields in the items). This is a peculiar ragged array, where each bib
item (row) may have a different collection of fields.
</p>
<p>Additional functionality for the subscript operators that admit
argument <code>j</code> is provided for <code>"bibentryExtra"</code> objects.  We
will say that argument <code>j</code> <em>is missing completely</em> if it is
missing and there is no placeholder for it in the call. For example
<code>be[i]</code> and <code>be[i, drop = FALSE]</code> are examples when <code>j</code>
is missing completely. On the other hand, <code>be[i, ]</code> and
<code>be[i, , drop = FALSE]</code> are examples when <code>j</code> is missing,
but not completely.
</p>
<p>When <code>j</code> is completely missing, the subscript operations for
<code>"bibentryExtra"</code> objects work exactly as for <code>bibentry</code>
objects (they don't have methods that use <code>j</code>).
Alternatively, rather than use both <code>i</code> and <code>j</code>, one can set
<code>i</code> to be a list of length 2, whose two components stand for
<code>i</code> and <code>j</code>, respectively. The latter syntax can be used also
for the methods that don't have <code>j</code> as an argument
(but do have <code>i</code>).
</p>


<h4>The methods for the dollar operator</h4>

<p><code>"$"</code> extracts the specified field. <code>"bibentryExtra"</code>
inherits the <code>"bibentry"</code> method for <code>"$"</code>.  The result is
a list with one component for each bib entry.
</p>
<p>Note that the result is a list for several reasons. First, some
fields may have more than one element. Second, some values are
likely to be <code>NULL</code>. Third, some fields may be compound
objects, e.g. ‘Author’, which is from class <code>"person"</code>.
However, if the the returned list has one element, the enlosing list
is removed (similarly to matrices with one row).
</p>
<p>The <code>"bibentryExtra"</code> method for subset-assigment,
<code>"$&lt;-"</code>, assigns a new value to the specified field.  In most
cases, <code>value</code> should be a list of the same length as <code>x</code>.
Otherwise, it will be wrapped in a list If it is not a list, the
result may be unexpected. For example, a character vector will
replace the specified field in all bib entries.
</p>
<p>To change the values of the keys, specify field <code>"key"</code>. Again,
remember that you get a list of all keys, unless there is only one
bib entry in <code>x</code>. So, <code>value</code> should be a list of the same
length.
</p>



<h4>The double bracket extractor method</h4>

<p>The method for <code>"[["</code> accepts, unusually, two indices, <code>i</code>
and <code>j</code>, reflecting the above interpretation.
</p>
<p><code>i</code> is typically a character string or a positive integer
number identifying the bib item to extract, while <code>j</code> is a
character vector specifying the required fields of that bib
item. The result is a list. If <code>drop</code> is <code>FALSE</code>, then
the attributes of this list are set to those of the bib item
(e.g., <code>bibtype</code> and <code>key</code>).
</p>
<p>If <code>j</code> is missing, all fields of the item are included in the
result. However it depends on how <code>j</code> is missing. If it is
missing as in <code>x[[i, ]]</code> or <code>x[[i, , drop = FALSE]]</code>, the
result is as above and includes all entries in bib item <code>i</code>.
</p>
<p>Alternatively, <code>i</code> can be a list of length 2 and <code>j</code>
omitted. This is equivalent to a call with <code>i = i[[1]]</code> and
<code>j = i[[2]]</code>.
</p>
<p>If there is no redundant comma in the call, as in <code>x[[i]]</code> or
<code>x[[i, drop = FALSE]]</code>, then <code>i</code> must be a single index
value (positive integer number or character string).  The result is
a <code>"bibentryExtra"</code> object. This case is compatible with the
method for <code>"bibentry"</code> objects, which does not have argument
<code>j</code>. Note though that for the <code>"bibentry"</code> method <code>i</code>
can be of length more than 1.
</p>



<h4>The double bracket assignment method</h4>

<p>The assignment version of <code>"[["</code> does not have argument
<code>j</code>, so the two-element list form for <code>i</code> is used when
fields are needed, see above.
</p>
<p>If <code>value</code> inherits from <code>"bibentry"</code> (in particular, it can
be a <code>"bibentryExtra"</code> object), then <code>i</code> must be a single
character string or a positive integer specifying the bibitem to
replace with <code>value</code>. Notice that the new item may have a
different key.
</p>
<p>Otherwise, <code>value</code> should be a named list and <code>i</code> a list
of length 2.      
In this case, <code>i[[1]]</code> should be a character string of a
positive integer identifyng the bib item on which replacement will
take place, while <code>i[[2]]</code> is a character vector specifying the
fields to replace.  As a special case, <code>i[[2]]</code> can be the
character string <code>"*"</code>, which specifies that all elements of
<code>value</code> should be used.
</p>
<p>Usually <code>value</code> has names and these are interpreted as names of
fields.  In this case, the fields specified by <code>i[[2]]</code> are
replaced by the corresponding fields in <code>value</code>.
</p>
<p>If <code>value</code> has no names and <code>i[[2]]</code> is not equal to
<code>"*"</code> (see above), <code>value</code> must have the same length as
<code>i[[2]]</code> and its names are set to <code>i[[2]]</code>.
</p>



<h4>The single bracket extractor method</h4>

<p>For <code>"["</code>, <code>i</code> is an index vector specifying which bib
entries to extract. If <code>j</code> is missing completely, the bib
entries are extracted and returned as a <code>"bibentryExtra"</code>
object.
</p>
<p>If <code>j</code> is used, it is a character vector specifying which
fields to keep. For example, this could be a list of all standard
bibtex fields. Only fields from this list are kept. Note that this
may leave some bib entries invalid (i.e., missing compulsory
fields).
</p>
<p>Note that in any case the returned object has class
<code>"bibentryExtra"</code>.
</p>



<h3>Value</h3>

<p>for <code>as.bibentryExtra</code> and <code>bibentryExtra</code>,
a <code>"bibentryExtra"</code> object;
</p>
<p>for <code>"$"</code>, a list containing the requested fields with one list
component for each key.  If only one key was specified, the outer list
is dropped;
</p>
<p>for <code>"[["</code>, typically a list, but if argument <code>x</code> is
missing completely, the result is a <code>"bibentryExtra"</code> object,
as described in section ‘The double bracket extractor
method’;
</p>
<p>for <code>"["</code>, a <code>"bibentryExtra"</code> object;
</p>
<p>for the assignment operators (<code>"[[&lt;-"</code>, <code>"[&lt;-"</code> and <code>"$&lt;-"</code>),
the modified object <code>x</code>.
</p>
<p>for <code>names</code>, always a character vector. If attribute <code>names</code>
is <code>NULL</code>, the keys are put in a character vector and returned.
</p>


<h3>Note</h3>

<p>This is somewhat experimental but incompatible changes are unlikely.
</p>


<h3>Author(s)</h3>

<p>Georgi N. Boshnakov</p>


<h3>See Also</h3>

<p>the vignette,
</p>
<p><code>readBib</code> for importing bibtex files,
</p>
<p><code>readBibentry</code> for importing from R source files
containing <code>bibentry</code> expressions,
</p>
<p><code>charToBib</code> for converting character vectors containing
<code>bibentry</code> expressions.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## example bib from ?bibentry
bref &lt;- c(
    bibentry(
        bibtype = "Manual",
        title = "boot: Bootstrap R (S-PLUS) Functions",
        author = c(
            person("Angelo", "Canty", role = "aut",
                   comment = "S original"),
            person(c("Brian", "D."), "Ripley", role = c("aut", "trl", "cre"),
                   comment = "R port, author of parallel support",
                   email = "ripley@stats.ox.ac.uk")
        ),
        year = "2012",
        note = "R package version 1.3-4",
        url = "https://CRAN.R-project.org/package=boot",
        key = "boot-package"
    ),
 
    bibentry(
        bibtype = "Book",
        title = "Bootstrap Methods and Their Applications",
        author = as.person("Anthony C. Davison [aut], David V. Hinkley [aut]"),
        year = "1997",
        publisher = "Cambridge University Press",
        address = "Cambridge",
        isbn = "0-521-57391-2",
        url = "http://statwww.epfl.ch/davison/BMA/",
        key = "boot-book"
    )
  )

brefExtra &lt;- as.bibentryExtra(bref)

## error: j is present, so i must have length 1:
## brefExtra[[1:2, "title"]]

## the returned list doesn't have attributes:
                                  brefExtra[[1, c("title", "author")]] # drop = TRUE by default

## now it does:
brefExtra[[1, "title", drop = FALSE]]
brefExtra[["boot-package", "title", drop = FALSE]]

brefExtra[["boot-book", ]]
brefExtra[["boot-book"]]


## assignment "[[&lt;-"
b2 &lt;- brefExtra
b2

## use all elements of 'value'
b2[[list(1, "*")]] &lt;- list(title = "New title", note = "a new note")

## replace title
b2[[list(1, "title")]] &lt;- list(title = "New title A")
b2

## no change,'year' is not in 'value'
b2[[list(1, "year")]] &lt;- list(title = "New title A2") 
b2

## remove 'year'
b2[[list(1, "year")]] &lt;- list(title = "New title A", year = NULL) ## removes 'year'
b2

## a bibentry 'value'
b2[[2]] &lt;- bibentry(bibtype = "Misc", title = "Dummy title",
                    author = "A A Dummy", organization = "none")
b2
</code></pre>


</div>