<div class="container">

<table style="width: 100%;"><tr>
<td>csu_trendCohortPeriod</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>csu_trendCohortPeriod</h2>

<h3>Description</h3>

<p><code>csu_trendCohortPeriod</code>  plot cohort period age specific graph.
</p>


<h3>Usage</h3>

<pre><code class="language-R">csu_trendCohortPeriod(
  df_data,
  var_age = "age",
  var_cases="cases",
  var_py="py",
  var_year = "year",
  type = "Cohort",
  missing_age = NULL,
  logscale = TRUE,
  db_rate = 100000,
  first_age = 6,
  last_age = 16,
  year_group = 5,
  age_dropped=FALSE,
  plot_title = "csu_title",
  format_export = NULL,
  graph_dev =FALSE) 
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df_data</code></td>
<td>

<p>Data (need to be R <code>data.frame</code> format, see example to import csv file).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var_age</code></td>
<td>

<p>Age variable. Several format are accepted 
</p>

<table>
<tr>
<td style="text-align: left;">
			1 </td>
<td style="text-align: left;"> "0-4" </td>
<td style="text-align: left;"> 0 </td>
</tr>
<tr>
<td style="text-align: left;">
			2 </td>
<td style="text-align: left;"> "5-9" </td>
<td style="text-align: left;"> 5 </td>
</tr>
<tr>
<td style="text-align: left;">
			3 </td>
<td style="text-align: left;"> "10-14" </td>
<td style="text-align: left;"> 10 </td>
</tr>
<tr>
<td style="text-align: left;">
			... </td>
<td style="text-align: left;"> ... </td>
<td style="text-align: left;"> ... </td>
</tr>
<tr>
<td style="text-align: left;">
			17 </td>
<td style="text-align: left;"> "80-84" </td>
<td style="text-align: left;"> 80 </td>
</tr>
<tr>
<td style="text-align: left;">
			18 </td>
<td style="text-align: left;"> "85+" </td>
<td style="text-align: left;"> 85 </td>
</tr>
<tr>
<td style="text-align: left;">
		</td>
</tr>
</table>
<p>Missing age value must be precise in the option <code>missing_age</code>.<br>
Last age group will always be considere without size (ie: 80+,85+, etc..). 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var_cases</code></td>
<td>

<p>Number of event (cases, deaths, ...) variable.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var_py</code></td>
<td>

<p>Population year variable.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var_year</code></td>
<td>

<p>Time variable.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>

<p>Type of the plot:<br></p>

<table>
<tr>
<td style="text-align: left;">
		"Cohort" </td>
<td style="text-align: left;"> Cohort graph.</td>
</tr>
<tr>
<td style="text-align: left;">
		"Period" </td>
<td style="text-align: left;"> Period graph.</td>
</tr>
<tr>
<td style="text-align: left;">
		"Both" </td>
<td style="text-align: left;"> Cohort Period graph.</td>
</tr>
<tr>
<td style="text-align: left;">
		</td>
</tr>
</table>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>missing_age</code></td>
<td>

<p>Age value representing the missing age cases.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>logscale</code></td>
<td>

<p>Logical value: if <code>TRUE</code> Y-axis use logscale.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>db_rate</code></td>
<td>

<p>The denominator population. Default is 100000.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>first_age</code></td>
<td>

<p>First age group included, <b>must</b> be between 1 and 17. 1 represents 0-4, 2 represents 5-9, ... 5 represents 20-24 etc.<br>
Default is 6 (25-29 years).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>last_age</code></td>
<td>

<p>Last age group included, <b>must</b> be between 2 and 18. 2 represents 5-9, ... 5 represents 20-24, ... 18 represents 85+ etc.<br>
Default is 16 (75-79 years).<br>
To plot the age group from 15-19 years until 65-69 years, use: <code>first_age(4), last_age(14)</code>
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>year_group</code></td>
<td>

<p>Usually, data are regrouped in 5 years period. <br>.
The numerical parameter controls the size of the group.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>age_dropped</code></td>
<td>

<p>Only if some age grouped are missing in the data.
Logical value: if <code>TRUE</code>, assume the age group not used are already dropped from the data.<br>
First_age and last_age option <b>must</b> still be filled.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot_title</code></td>
<td>

<p>Title of the plot.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>format_export</code></td>
<td>

<p>export the graph in different format:<br></p>

<table>
<tr>
<td style="text-align: left;">
		<code>NULL</code> </td>
<td style="text-align: left;"> Plot in R studio windows.</td>
</tr>
<tr>
<td style="text-align: left;">
		<code>"pdf"</code> </td>
<td style="text-align: left;"> Export in PDF format.</td>
</tr>
<tr>
<td style="text-align: left;">
		<code>"tiff"</code> </td>
<td style="text-align: left;"> Export in TIFF 300dpi format.</td>
</tr>
<tr>
<td style="text-align: left;">
		<code>"png"</code> </td>
<td style="text-align: left;"> Export in PNG 200dpi format.</td>
</tr>
<tr>
<td style="text-align: left;">
		<code>"svg"</code> </td>
<td style="text-align: left;"> Export in SVG format. Can be edit with <a href="https://inkscape.org/fr/">https://inkscape.org/fr/</a>.</td>
</tr>
<tr>
<td style="text-align: left;">
		</td>
</tr>
</table>
<p>The filename is the <code>plot_title</code> option.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>graph_dev</code></td>
<td>

<p>If the plot is embedded in a graphics Device function (such as pdf()), the graph_dev option should be set to TRUE for the first graph to avoid a blank page.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function is design the plot a the age-specific cohort and period plot. 
The <code>type</code> option allow to choose between the 3 different graphics: "Cohort", "Period", or "Both".
Please note than the cohort plot and the period plot can be superimposed if the <code>first_age</code> is too low.
</p>


<h3>Value</h3>

<p>Return a plot.
</p>


<h3>Author(s)</h3>

<p>Mathieu Laversanne
</p>


<h3>See Also</h3>

<p><code>csu_group_cases</code>
<code>csu_merge_cases_pop</code>
<code>csu_asr</code>
<code>csu_cumrisk</code>
<code>csu_eapc</code>
<code>csu_ageSpecific</code>
<code>csu_ageSpecific_top</code>
<code>csu_bar_top</code>
<code>csu_time_trend</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
	data(csu_registry_data_2)

	# you can import your data from csv file using read.csv:
	# mydata &lt;-  read.csv("mydata.csv", sep=",")
	
	# to select only 1 population 
	test &lt;- subset(csu_registry_data_2,registry == 84020 &amp; sex == 1)


	
	# plot cohort graph from 25-29 years until 75-79 years.
	csu_trendCohortPeriod(df_data=test,
                        missing_age =99,
                        plot_title = "USA, Liver, males")
						
	# plot Period graph from 0-5 until 85+.
	csu_trendCohortPeriod(df_data=test,
                        missing_age =99,
                        plot_title = "USA, Liver, males",
						type="Period",
						first_age=1,
						last_age=18)
						
	# plot Cohort-Period graph from 30-34 years until 70-74 years.
	csu_trendCohortPeriod(df_data=test,
                        missing_age =99,
                        plot_title = "USA, Liver, males",
						type="Both",
						first_age=7,
						last_age=15)

	# plot Cohort-Period graph from 30-34 years until 70-74 years with Y axis normal scale.
	csu_trendCohortPeriod(df_data=test,
                        missing_age =99,
                        plot_title = "USA, Liver, males",
						type="Both",
						first_age=7,
						last_age=15,
						logscale=FALSE)

					
	# plot Cohort graph from 25-29 years until 75-79 years, with data grouped in 2 years period.
	csu_trendCohortPeriod(df_data=test,
						  missing_age =99,
						  plot_title = "USA, Liver, males",
						  type="Cohort",
						  year_group = 2)
						  
	# Plot embedded in a graphic device
	pdf(paste0(tempdir(),"/example_test.pdf"))
	csu_trendCohortPeriod(df_data=test,
                        missing_age =99,
                        plot_title = "USA, Liver, males",
						type="Both",
						first_age=7,
						last_age=15,
						graph_dev=TRUE)
			  
	csu_trendCohortPeriod(df_data=test,
                        missing_age =99,
                        plot_title = "USA, Liver, males",
						type="Both",
						first_age=7,
						last_age=15,
						logscale=FALSE)
				
	dev.off()
		
</code></pre>


</div>