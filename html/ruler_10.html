<div class="container">

<table style="width: 100%;"><tr>
<td>column-pack</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Column rule pack</h2>

<h3>Description</h3>

<p>Column rule pack is a rule pack which defines a set of rules
for columns as a whole, i.e. functions which convert columns of interest to
logical values. It should return a data frame with the following properties:
</p>

<ul>
<li>
<p> Number of rows equals to <strong>one</strong>.
</p>
</li>
<li>
<p> Column names should be treated as concatenation of
<b>'check column name' + 'separator' + 'rule name'</b>.
</p>
</li>
<li>
<p> Values indicate whether the <strong>column as a whole</strong> follows the rule.
</p>
</li>
</ul>
<h3>Details</h3>

<p>This format is inspired by <code>dplyr</code>'s
scoped variants of summarise() applied to non-grouped
data.
</p>
<p>The most common way to define column pack is by creating a
functional sequence with no grouping and ending with
one of:
</p>

<ul>
<li> <p><code>summarise_all(.funs = rules(...))</code>.
</p>
</li>
<li> <p><code>summarise_if(.predicate, .funs = rules(...))</code>.
</p>
</li>
<li> <p><code>summarise_at(.vars, .funs = rules(...))</code>.
</p>
</li>
</ul>
<p><strong>Note</strong> that (as of <code>dplyr</code> version 0.7.4) when only one column is
summarised, names of the output don't have a necessary structure. The 'check
column name' is missing which results (after exposure) into empty
string in <code>var</code> column of validation report. The current way
of dealing with this is to name the input column (see examples).
</p>


<h3>Using rules()</h3>

<p>Using <code>rules()</code> to create list of functions for scoped <code>dplyr</code> "mutating"
verbs (such as summarise_all() and
transmute_all()) is recommended because:
</p>

<ul>
<li>
<p> It is a convenient way to ensure consistent naming of rules without manual
name.
</p>
</li>
<li>
<p> It adds a common prefix to all rule names. This helps in defining
separator as prefix surrounded by any number of non-alphanumeric values.
</p>
</li>
</ul>
<h3>See Also</h3>

<p>Data pack, group pack, row pack, cell pack.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Validating present columns
numeric_column_rules &lt;- . %&gt;% dplyr::summarise_if(
  is.numeric,
  rules(mean(.) &gt; 5, sd(.) &lt; 10)
)
character_column_rules &lt;- . %&gt;% dplyr::summarise_if(
  is.character,
  rules(. %in% letters[1:4])
)

col_packs(
  num_col = numeric_column_rules,
  chr_col = character_column_rules
)

# Dealing with one column edge case
improper_pack &lt;- . %&gt;% dplyr::summarise_at(
  dplyr::vars(vs),
  rules(improper_is_chr = is.character)
)

proper_pack &lt;- . %&gt;% dplyr::summarise_at(
  dplyr::vars(vs = vs),
  rules(proper_is_chr = is.character)
)

mtcars %&gt;%
  expose(col_packs(improper_pack, proper_pack)) %&gt;%
  get_report()
</code></pre>


</div>