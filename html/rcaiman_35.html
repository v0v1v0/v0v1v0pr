<div class="container">

<table style="width: 100%;"><tr>
<td>lens</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Access the lens database</h2>

<h3>Description</h3>

<p>Database of lens projection functions and field of views.
</p>


<h3>Usage</h3>

<pre><code class="language-R">lens(type = "equidistant", max_fov = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>Character vector of length one. The name of the lens.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_fov</code></td>
<td>
<p>Logical vector of length one. Use <code>TRUE</code> to return the maximum
field of view in degrees.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>In upward-looking leveled hemispherical photography, the zenith is the center
of a circle whose perimeter is the horizon. This is true only if the lens
field of view is 180º. The relative radius is the radius of concentric
circles expressed as a fraction of the radius that belongs to the circle that
has the horizon as perimeter. The equidistant model, also called polar, is
the most widely used as a standard reference. Real lenses can approximate the
projection models, but they always have some kind of distortion. In the
equidistant model, the relation between zenith angle and relative radius is
modeled with a straight line. Following <a href="https://www.schleppi.ch/patrick/hemisfer/">Hemisfer software</a>, this package uses a
polynomial curve to model lens distortion. A third-order polynomial is
sufficient in most cases (Frazer et al. 2001). Equations should
be fitted with angles in radians.
</p>
<p>Eventually, this will be a large database, but only the following lenses are
available at the moment:
</p>

<ul>
<li>
<p> equidistant: standard equidistant projection
(Schneider et al. 2009).
</p>
</li>
<li>
<p> Nikkor_10.5mm: AF DX Fisheye Nikkor 10.5mm f/2.8G ED
(Pekin and Macfarlane 2009)
</p>
</li>
<li>
<p> Nikon_FCE9: Nikon FC-E9 converter
(Díaz and et al. 2024)
</p>
</li>
<li>
<p> Olloclip: Auxiliary lens for mobile devices made by Olloclip
(Díaz and et al. 2024)
</p>
</li>
<li>
<p> Nikkor_8mm: AF–S Fisheye Nikkor 8–15mm f/3.5–4.5E ED
(Díaz and et al. 2024)
</p>
</li>
</ul>
<h3>Value</h3>

<p>If <code>max_fov</code> is set to <code>TRUE</code>, it returns a numeric vector of length
one, which is the lens maximum field of view in degrees. Otherwise, it
returns a numeric vector with the coefficients of the lens function.
</p>


<h3>References</h3>

<p>Díaz GM, et al. (2024).
“Simple calibration of fisheye lenses for hemipherical photography of the forest canopy.”
<em>Manuscript in preparation</em>.<br><br> Frazer GW, Fournier RA, Trofymow JA, Hall RJ (2001).
“A comparison of digital and film fisheye photography for analysis of forest canopy structure and gap light transmission.”
<em>Agricultural and Forest Meteorology</em>, <b>109</b>(4), 249–263.
<a href="https://doi.org/10.1016/s0168-1923%2801%2900274-x">doi:10.1016/s0168-1923(01)00274-x</a>.<br><br> Pekin B, Macfarlane C (2009).
“Measurement of crown cover and leaf area index using digital cover photography and its application to remote sensing.”
<em>Remote Sensing</em>, <b>1</b>(4), 1298–1320.
<a href="https://doi.org/10.3390/rs1041298">doi:10.3390/rs1041298</a>.<br><br> Schneider D, Schwalbe E, Maas H (2009).
“Validation of geometric models for fisheye lenses.”
<em>ISPRS Journal of Photogrammetry and Remote Sensing</em>, <b>64</b>(3), 259–266.
<a href="https://doi.org/10.1016/j.isprsjprs.2009.01.001">doi:10.1016/j.isprsjprs.2009.01.001</a>.
</p>


<h3>See Also</h3>

<p>Other Lens Functions: 
<code>azimuth_image()</code>,
<code>calc_diameter()</code>,
<code>calc_relative_radius()</code>,
<code>calc_zenith_colrow()</code>,
<code>calibrate_lens()</code>,
<code>crosscalibrate_lens()</code>,
<code>expand_noncircular()</code>,
<code>extract_radiometry()</code>,
<code>fisheye_to_equidistant()</code>,
<code>fisheye_to_pano()</code>,
<code>test_lens_coef()</code>,
<code>zenith_image()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">lens("Nikon_FCE9")
lens("Nikon_FCE9", max_fov = TRUE)

.fp &lt;- function(theta, lens_coef) {
  x &lt;- lens_coef[1:5]
  x[is.na(x)] &lt;- 0
  for (i in 1:5) assign(letters[i], x[i])
  a * theta + b * theta^2 + c * theta^3 + d * theta^4 + e * theta^5
}

theta &lt;- seq(0, pi/2, pi/180)
plot(theta, .fp(theta, lens()), type = "l", lty = 2,
      ylab = "relative radius")
lines(theta, .fp(theta, lens("Nikon_FCE9")))

</code></pre>


</div>