<div class="container">

<table style="width: 100%;"><tr>
<td>expand_attributes</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Expand categorical attribute variables to a series of dichotomous variables</h2>

<h3>Description</h3>

<p>Expand categorical attribute variables to a series of dichotomous variables
</p>


<h3>Usage</h3>

<pre><code class="language-R">expand_attributes(
  data,
  attributes,
  valueLabels = NULL,
  prefix = "",
  glue = "__",
  suffix = "",
  falseValue = 0,
  trueValue = 1,
  valueFirst = TRUE,
  append = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>The data frame, normally the <code style="white-space: pre;">⁠$qdt⁠</code> data frame that
exists in the object returned by a call to <code>parse_sources()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>attributes</code></td>
<td>
<p>The name of the attribute(s) to expand.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>valueLabels</code></td>
<td>
<p>It's possible to use different names for the created
variables than the values of the attributes. This can be set with the
<code>valueLabels</code> argument. If only one attribute is specified, pass a named
vector for <code>valueLabels</code>, and if multiple attributes are specified, pass
a named list of named vectors, where the name of each vector corresponds to
an attribute passed in <code>attributes</code>. The names of the vector elements
must correspond to the values of the attributes (see the example).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prefix, suffix</code></td>
<td>
<p>The prefix and suffix to add to the variables names
that are returned.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>glue</code></td>
<td>
<p>The glue to paste the first part ad the second part of the
composite variable name together.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>falseValue, trueValue</code></td>
<td>
<p>The values to set for rows that, respectively,
do not match and do match an attribute value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>valueFirst</code></td>
<td>
<p>Whether to insert the attribute value first, or the
attribute name, in the composite variable names.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>append</code></td>
<td>
<p>Whether to append the columns to the supplied data
frame or not.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A data.frame
</p>


<h3>Examples</h3>

<pre><code class="language-R">### Get path to example source
examplePath &lt;-
  system.file("extdata", package="rock");

### Get a path to one example file
exampleFile &lt;-
  file.path(examplePath, "example-1.rock");

### Parse single example source
parsedExample &lt;- rock::parse_source(exampleFile);

### Create a categorical attribute column
parsedExample$qdt$age_group &lt;-
  c(rep(c("&lt;18", "18-30", "31-60", "&gt;60"),
        each=19),
    rep(c("&lt;18", "&gt;60"),
        time = c(3, 4)));

### Expand to four logical columns
parsedExample$qdt &lt;-
  rock::expand_attributes(
    parsedExample$qdt,
    "age_group",
    valueLabels =
      c(
        "&lt;18" = "youngest",
        "18-30" = "youngish",
        "31-60" = "oldish",
        "&gt;60" = "oldest"
       ),
    valueFirst = FALSE
);

### Show some of the result
table(parsedExample$qdt$age_group,
      parsedExample$qdt$age_group__youngest);
table(parsedExample$qdt$age_group,
      parsedExample$qdt$age_group__oldish);
</code></pre>


</div>