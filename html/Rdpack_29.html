<div class="container">

<table style="width: 100%;"><tr>
<td>rebib</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Work with bibtex references in Rd documentation</h2>

<h3>Description</h3>

<p>Work with bibtex references in Rd documentation.</p>


<h3>Usage</h3>

<pre><code class="language-R">rebib(infile, outfile, ...)

inspect_Rdbib(rdo, force = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>infile</code></td>
<td>
<p>name of the Rd file to update, a character string.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outfile</code></td>
<td>
<p>a filename for the updated Rd object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>further arguments to be passed to
<code>get_bibentries</code>, see ‘Details’.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rdo</code></td>
<td>
<p>an Rd object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>force</code></td>
<td>
<p>if TRUE, re-insert previously imported
references. Otherwise do not change such references.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>inspect_Rdbib</code> takes an Rd object and processes the references
as specified below.
</p>
<p>The user level function is <code>rebib</code>. It parses the Rd file
<code>infile</code>, calls <code>inspect_Rdbib</code> to process the references,
and writes the modified Rd object to file <code>outfile</code>.
If   <code>outfile</code> is missing it is set to the basename of
<code>infile</code>.  If <code>outfile</code> is the empty string, <code>""</code>, then
<code>outfile</code> is set to <code>infile</code>.
</p>
<p>The default Bibtex file is "REFERENCES.bib" in the current working
directory. Arguments "..." can be used to change the name of the bib
file and its location.  Argument <code>bibfile</code> can be used to
overwrite the default name of the bib file.  Argument <code>package</code>
can be used to specify that the bib file should be taken from the root
of the installation directory of package <code>package</code>, see
<code>get_bibentries</code> for details.
</p>
<p>The following scheme can be used for incorporation of bibliographic
references from BibTeX files. Note however, that usually it is more
convenient to use the approach based on Rd macros like
<code>\insertRef</code>, see <code>insert_ref</code> and the vignette(s).
</p>
<p>The Bibtex key for each reference is put in a comment line in the
references section, as in
</p>
<pre>
    \references{
        % bibentry: key1

        % bibentry: key2

        ...
    }
</pre>
<p>At least one space after the colon, ':', is required, spaces before
"bibentry:" are ignored.
</p>
<p>Then run <code>rebib()</code> on the file, see the example section for a way
to run <code>rebib()</code> on all files in one go.
</p>
<p>Each reference is inserted immediately after the comment line
specifying it and a matching comment line marking its end is
inserted.
</p>
<p>Before inserting a reference, a check for the matching ending line is
made, and if such a line is found, the reference is not inserted.
This means that to add new references it is sufficient to give their
keys, as described above and run the function again. References that
are already there will not be duplicated.
</p>
<p>The inserted reference may also be edited, if necessary. As long as
the two comment lines enclosing it are not removed, the reference will
not be overwritten by subsequent calls of the functions described
here.  Any text outside the markers delineating references inserted by
this mechanism is left unchanged, including references inserted by
other means.
</p>
<p>To include all references from the bib file, the following line can be
used:
</p>
<pre>
    % bibentry:all
</pre>
<p>Notice that there is no space after the colon in this case.
In this case a marker is put after the last reference and the whole
thing is considered one block.  So, if the end marker is present and
<code>force</code> is FALSE, none will will be changed. Otherwise, if
<code>force</code> is TRUE, the whole block of references will be removed
and all references currently in the bib file will be inserted.
</p>
<p>The main purpose of <code style="white-space: pre;">⁠bibentry:all⁠</code> is for use in a package
overview file. The reference section in the file "package-package"
generated by <code>promptPackageSexpr</code> uses this feature (but
the user still needs to call <code>rebib</code> to insert the references).
</p>


<h3>Value</h3>

<p>for <code>inspect_Rdbib</code>, the modified Rd object.
</p>
<p><code>rebib</code> is used mainly for the side effect of creating a file
with the references updated. It returns the Rd object created by
parsing and modifying the Rd file.
</p>


<h3>Author(s)</h3>

<p>Georgi N. Boshnakov</p>


<h3>See Also</h3>

<p><code>insert_ref</code> and the vignette(s) for the recommended way
to import BibTeX references and citations.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# update references in all Rd files in the package's 'man' directory
#
rdnames &lt;- dir(path = "./man", pattern=".*[.]Rd$", full.names=TRUE)
lapply(rdnames, function(x) rebib(x, package="Rdpack"))

## End(Not run)
</code></pre>


</div>