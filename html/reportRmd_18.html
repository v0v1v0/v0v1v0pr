<div class="container">

<table style="width: 100%;"><tr>
<td>ggkmcif2</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plot KM and CIF curves with ggplot</h2>

<h3>Description</h3>

<p>This function will plot a KM or CIF curve with option to add the number at
risk. You can specify if you want confidence bands, the hazard ratio, and
pvalues, as well as the units of time used.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ggkmcif2(
  response,
  cov = NULL,
  data,
  pval = TRUE,
  conf.curves = FALSE,
  table = TRUE,
  xlab = "Time",
  ylab = NULL,
  col = NULL,
  times = NULL,
  type = NULL,
  plot.event = 1,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>response</code></td>
<td>
<p>character vector with names of columns to use for response</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cov</code></td>
<td>
<p>String specifying the column name of stratification variable</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>dataframe containing your data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pval</code></td>
<td>
<p>boolean to specify if you want p-values in the plot (Log Rank
test for KM and Gray's test for CIF)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf.curves</code></td>
<td>
<p>boolean to specify if you want confidence interval bands</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>table</code></td>
<td>
<p>Logical value. If TRUE, includes the number at risk table</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlab</code></td>
<td>
<p>String corresponding to xlabel. By default is "Time"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab</code></td>
<td>
<p>String corresponding to ylabel. When NULL uses "Survival</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col</code></td>
<td>
<p>vector of colours</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>times</code></td>
<td>
<p>Numeric vector of times for the x-axis
probability" for KM cuves, and "Probability of an event" for CIF</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>string indicating he type of univariate model to fit. The
function will try and guess what type you want based on your response. If
you want to override this you can manually specify the type. Options
include "KM", and ,"CIF"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot.event</code></td>
<td>
<p>Which event(s) to plot (1,2, or c(1,2))</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional plotting arguments see <code>ggkmcif2Parameters</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Note that for proper pdf output of special characters the following code
needs to be included in the first chunk of the rmd
knitr::opts_chunk$set(dev="cairo_pdf")
</p>


<h3>Value</h3>

<p>ggplot object; if table = F then only curves are output;
if table = T then curves and risk table are output together
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Simple plot without confidence intervals
data("pembrolizumab")
ggkmcif2(response = c('os_time','os_status'),
cov='cohort',
data=pembrolizumab)

# Plot with median survival time
ggkmcif2(response = c('os_time','os_status'),
cov='sex',
data=pembrolizumab,
median.text = TRUE,median.lines=TRUE,conf.curves=TRUE)

# Plot with specified survival times and log-log CI
ggkmcif2(response = c('os_time','os_status'),
cov='sex',
data=pembrolizumab,
median.text = FALSE,set.time.text = 'mo OS',
set.time = c(12,24),conf.type = 'log-log',conf.curves=TRUE)

# KM plot with 95% CI and censor marks
ggkmcif2(c('os_time','os_status'),'sex',data = pembrolizumab, type = 'KM',
HR=TRUE, HR_pval = TRUE, conf.curves = TRUE,conf.type='log-log',
set.time.CI = TRUE, censor.marks=TRUE)
</code></pre>


</div>