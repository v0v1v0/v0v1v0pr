<div class="container">

<table style="width: 100%;"><tr>
<td>align</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Data alignment</h2>

<h3>Description</h3>

<p>Provides a re-aligned <code>is.raptor</code> file, where new x- and y-coordinates (XCAL and YCAL values, respectively) are calculated according to a specified rotation. Appropriate alignment is achieved when the first row of earlywood cells are positioned along an approximately horizontal axis and the radial files of tracheids are positioned along a vertical axis.
</p>


<h3>Usage</h3>

<pre><code class="language-R">align(input, year = FALSE, list = FALSE, interact = TRUE, make.plot = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>input</code></td>
<td>
<p>an <code>is.raptor</code> file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>year</code></td>
<td>
<p>a numeric vector specifying the year of interest. The default (<code>FALSE</code>) applies the function on all years present in the input.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>list</code></td>
<td>
<p>a <code>vector</code> of numeric values indicating the rotation slope for each year.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>interact</code></td>
<td>
<p>a logical flag. If <code>TRUE</code>, the user can manually assign the degree of rotation for each annual ring in an interactive session. The user will have to select among the options (along the horizontal axis, along the vertical axis, manually define the degree of reorientation based on a set of slopes overlaid on the plot). If <code>FALSE</code>, the rotation is optimized automatically using a simple linear regression through all points along the horizontal axis (default = <code>FALSE</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>make.plot</code></td>
<td>
<p>logical flag indicating whether to make a plot (default =  <code>FALSE</code>).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Correct alignment of cells/tracheids is important for detecting the first cells and assigning cells to a radial file. This function provides the option to align your cell data (XCAL and YCAL). This function provides and interactive procedure to improve the alignment by presenting a crosshair with slopes with which the sample should be rotated. Proper alignment is obtain when the first cells are approximately aligned on a horizontal line and the upward cells are propagated vertically. Either interactively or with predefined slopes, the user can rotate the sample orientation. An automatic option is also available where a simple linear regression is fitted through all points to adjust the rotation. The plot shows the original position of the cells (black dots) and lines that can be selected to rotate the sample. After correction the new position of the cells is presented (red dots).
</p>


<h3>Value</h3>

<p>An aligned <code>is.raptor</code> file.
</p>


<h3>Examples</h3>

<pre><code class="language-R">#rotating example data
input&lt;-is.raptor(example.data(species="LOT_PICEA"), str=FALSE)
input&lt;-align(input, year=2007, list=FALSE,interact=FALSE, make.plot=TRUE)
</code></pre>


</div>