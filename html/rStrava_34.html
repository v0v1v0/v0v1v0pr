<div class="container">

<table style="width: 100%;"><tr>
<td>get_heat_map</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Makes a heat map from your activity data</h2>

<h3>Description</h3>

<p>Makes a heat map from your activity data
</p>


<h3>Usage</h3>

<pre><code class="language-R">get_heat_map(act_data, ...)

## S3 method for class 'list'
get_heat_map(
  act_data,
  key,
  acts = 1,
  id = NULL,
  alpha = NULL,
  add_elev = FALSE,
  as_grad = FALSE,
  distlab = TRUE,
  distval = 0,
  size = 0.5,
  col = "red",
  expand = 10,
  maptype = "CartoDB.Positron",
  zoom = 14,
  units = "metric",
  ...
)

## S3 method for class 'actframe'
get_heat_map(
  act_data,
  key,
  alpha = NULL,
  add_elev = FALSE,
  as_grad = FALSE,
  distlab = TRUE,
  distval = 0,
  size = 0.5,
  col = "red",
  expand = 10,
  maptype = "CartoDB.Positron",
  zoom = 14,
  ...
)

## S3 method for class 'strframe'
get_heat_map(
  act_data,
  alpha = NULL,
  filltype = "elevation",
  distlab = TRUE,
  distval = 0,
  size = 0.5,
  col = "red",
  expand = 10,
  maptype = "CartoDB.Positron",
  zoom = 14,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>act_data</code></td>
<td>
<p>an activities list object returned by <code>get_activity_list</code>, an <code>actframe</code> returned by <code>compile_activities</code>, or a <code>strfame</code> returned by <code>get_activity_streams</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>arguments passed to or from other methods</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>key</code></td>
<td>
<p>chr string of Google API key for elevation data, passed to <code>google_elevation</code> for polyline decoding, see details</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>acts</code></td>
<td>
<p>numeric indicating which activities to plot based on index in the activities list, defaults to most recent</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>optional numeric vector to specify the id(s) of the activity/activities to plot, <code>acts</code> is ignored if provided</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>the opacity of the line desired. A single activity should be 1. Defaults to 0.5</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add_elev</code></td>
<td>
<p>logical indicating if elevation is shown by color shading on the activity lines</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>as_grad</code></td>
<td>
<p>logical indicating if elevation is plotted as percent gradient, applies only if <code>add_elev = TRUE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>distlab</code></td>
<td>
<p>logical if distance labels are plotted along the route</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>distval</code></td>
<td>
<p>numeric indicating rounding factor for distance labels which has direct control on label density, see details</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>size</code></td>
<td>
<p>numeric indicating width of activity lines</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col</code></td>
<td>
<p>chr string indicating either a single color of the activity lines if <code>add_grad = FALSE</code> or a color palette passed to <code>scale_fill_distiller</code> if <code>add_grad = TRUE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>expand</code></td>
<td>
<p>a numeric multiplier for expanding the number of lat/lon points on straight lines.  This can create a smoother elevation gradient if <code>add_grad = TRUE</code>.  Set <code>expand = 1</code> to suppress this behavior.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maptype</code></td>
<td>
<p>chr string indicating the provider for the basemap, see details</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zoom</code></td>
<td>
<p>numeric indicating zoom factor for map tiles, higher numbers increase resolution</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>units</code></td>
<td>
<p>chr string indicating plot units as either metric or imperial, this has no effect if input data are already compiled with <code>compile_activities</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filltype</code></td>
<td>
<p>chr string specifying which stream variable to use for filling line segments, applies only to <code>strframe</code> objects, acceptable values are <code>"elevation"</code>, <code>"distance"</code>, <code>"slope"</code>, or <code>"speed"</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>uses <code>get_latlon</code> to produce a dataframe of latitudes and longitudes to use in the map. Uses ggspatial to produce the map and ggplot2 to plot the route.
</p>
<p>A Google API key is needed for the elevation data and must be included with function execution.  The API key can be obtained following the instructions here: https://developers.google.com/maps/documentation/elevation/#api_key
</p>
<p>The <code>distval</code> argument is passed to the <code>digits</code> argument of <code>round</code>. This controls the density of the distance labels, e.g., 1 will plot all distances in sequence of 0.1, 0 will plot all distances in sequence of one, -1 will plot all distances in sequence of 10, etc. 
</p>
<p>The base map type is selected with the <code>maptype</code> argument.  The <code>zoom</code> value specifies the resolution of the map.  Use higher values to download map tiles with greater resolution, although this increases the download time.  Acceptable options for <code>maptype</code> include <code>"OpenStreetMap"</code>, <code>"OpenStreetMap.DE"</code>, <code>"OpenStreetMap.France"</code>, <code>"OpenStreetMap.HOT"</code>, <code>"OpenTopoMap"</code>, <code>"Esri.WorldStreetMap"</code>, <code>"Esri.DeLorme"</code>, <code>"Esri.WorldTopoMap"</code>, <code>"Esri.WorldImagery"</code>, <code>"Esri.WorldTerrain"</code>, <code>"Esri.WorldShadedRelief"</code>, <code>"Esri.OceanBasemap"</code>, <code>"Esri.NatGeoWorldMap"</code>, <code>"Esri.WorldGrayCanvas"</code>, <code>"CartoDB.Positron"</code>, <code>"CartoDB.PositronNoLabels"</code>, <code>"CartoDB.PositronOnlyLabels"</code>, <code>"CartoDB.DarkMatter"</code>, <code>"CartoDB.DarkMatterNoLabels"</code>, <code>"CartoDB.DarkMatterOnlyLabels"</code>, <code>"CartoDB.Voyager"</code>, <code>"CartoDB.VoyagerNoLabels"</code>, or <code>"CartoDB.VoyagerOnlyLabels"</code>.
</p>


<h3>Value</h3>

<p>A <code>ggplot</code> object showing a map with activity locations.
</p>


<h3>Author(s)</h3>

<p>Daniel Padfield, Marcus Beck
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# get my activities
stoken &lt;- httr::config(token = strava_oauth(app_name, app_client_id, app_secret, cache = TRUE))
my_acts &lt;- get_activity_list(stoken)

# default, requires Google key
mykey &lt;- 'Get Google API key'
get_heat_map(my_acts, acts = 1, alpha = 1, key = mykey)

# plot elevation on locations, requires key
get_heat_map(my_acts, acts = 1, alpha = 1, key = mykey, add_elev = TRUE, col = 'Spectral', size = 2)

# compile first, change units
my_acts &lt;- compile_activities(my_acts, acts = 156, units = 'imperial')
get_heat_map(my_acts, key = mykey, alpha = 1, add_elev = T, col = 'Spectral', size = 2)

## End(Not run)
</code></pre>


</div>