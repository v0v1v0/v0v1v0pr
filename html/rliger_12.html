<div class="container">

<table style="width: 100%;"><tr>
<td>as.liger.dgCMatrix</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Converting other classes of data to a liger object</h2>

<h3>Description</h3>

<p>This function converts data stored in SingleCellExperiment (SCE), Seurat
object or a merged sparse matrix (dgCMatrix) into a liger object. This is
designed for a container object or matrix that already contains multiple
datasets to be integerated with LIGER. For individual datasets, please use
<code>createLiger</code> instead.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'dgCMatrix'
as.liger(object, datasetVar = NULL, modal = NULL, ...)

## S3 method for class 'SingleCellExperiment'
as.liger(object, datasetVar = NULL, modal = NULL, ...)

## S3 method for class 'Seurat'
as.liger(object, datasetVar = NULL, modal = NULL, assay = NULL, ...)

seuratToLiger(object, datasetVar = NULL, modal = NULL, assay = NULL, ...)

as.liger(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>Object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>datasetVar</code></td>
<td>
<p>Specify the dataset belonging by: 1. Select a variable from
existing metadata in the object (e.g. colData column); 2. Specify a
vector/factor that assign the dataset belonging. 3. Give a single character
string which means that all data is from one dataset (must not be a metadata
variable, otherwise it is understood as 1.). Default <code>NULL</code> gathers
things into one dataset and names it "sample" for dgCMatrix, attempts
to find variable "sample" from SCE or "orig.ident" from Seurat.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>modal</code></td>
<td>
<p>Modality setting for each dataset. See
<code>createLiger</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments passed to <code>createLiger</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>assay</code></td>
<td>
<p>Name of assay to use. Default <code>NULL</code> uses current active
assay.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>For Seurat V5 structure, it is highly recommended that users make use of its
split layer feature, where things like "counts", "data", and "scale.data"
can be held for each dataset in the same Seurat object, e.g. with
"count.ctrl", "count.stim", not merged. If a Seurat object with split layers
is given, <code>datasetVar</code> will be ignored and the layers will be directly
used.
</p>


<h3>Value</h3>

<p>a liger object.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># dgCMatrix (common sparse matrix class), usually obtained from other
# container object, and contains multiple samples merged in one.
matList &lt;- rawData(pbmc)
multiSampleMatrix &lt;- mergeSparseAll(matList)
# The `datasetVar` argument expects the variable assigning the sample source
pbmc2 &lt;- as.liger(multiSampleMatrix, datasetVar = pbmc$dataset)
pbmc2


if (requireNamespace("SingleCellExperiment", quietly = TRUE)) {
    sce &lt;- SingleCellExperiment::SingleCellExperiment(
        assays = list(counts = multiSampleMatrix)
    )
    sce$sample &lt;- pbmc$dataset
    pbmc3 &lt;- as.liger(sce, datasetVar = "sample")
    pbmc3
}

if (requireNamespace("Seurat", quietly = TRUE)) {
    seu &lt;- SeuratObject::CreateSeuratObject(multiSampleMatrix)
    # Seurat creates variable "orig.ident" by identifying the cell barcode
    # prefixes, which is indeed what we need in this case. Users might need
    # to be careful and have it confirmed first.
    pbmc4 &lt;- as.liger(seu, datasetVar = "orig.ident")
    pbmc4

    # As per Seurat V5 updates with layered data, specifically helpful udner the
    # scenario of dataset integration. "counts" and etc for each datasets can be
    # split into layers.
    seu5 &lt;- seu
    seu5[["RNA"]] &lt;- split(seu5[["RNA"]], pbmc$dataset)
    print(SeuratObject::Layers(seu5))
    pbmc5 &lt;- as.liger(seu5)
    pbmc5
}

</code></pre>


</div>