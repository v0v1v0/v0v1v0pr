<div class="container">

<table style="width: 100%;"><tr>
<td>devEval</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Opens a new graphics device, evaluate (graphing) code, and closes device</h2>

<h3>Description</h3>

<p>Opens a new graphics device, evaluate (graphing) code, and closes device.
</p>


<h3>Usage</h3>

<pre><code class="language-R">devEval(type=getOption("device"), expr, initially=NULL, finally=NULL,
  envir=parent.frame(), name=NULL, tags=NULL, sep=getDevOption(type, "sep",
  default = ","), ..., ext=NULL, filename=NULL, path=getDevOption(type, "path",
  default = "figures"), field=getDevOption(type, name = "field"),
  onIncomplete=c("remove", "rename", "keep"), force=getDevOption(type, "force",
  default = TRUE), which=dev.cur(), .exprAsIs=FALSE, .allowUnknownArgs=FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>Specifies the type of graphics device to be used.
The device is created and opened using <code>devNew</code>().
Multiple types may be specified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>expr</code></td>
<td>
<p>The <code>expression</code> of graphing commands to be evaluated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>initially, finally</code></td>
<td>
<p>Optional <code>expression</code>:s to be evaluated
before and after <code>expr</code>. If <code>type</code> specifies multiple
devices, these optional <code>expression</code>:s are only evaluated ones.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>envir</code></td>
<td>
<p>The <code>environment</code> where <code>expr</code> should be evaluated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name, tags, sep</code></td>
<td>
<p>The fullname name of the image is specified
as the name with optional <code>sep</code>-separated tags appended.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ext</code></td>
<td>
<p>The filename extension of the image file generated, if any.
By default, it is inferred from argument <code>type</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments passed to <code>devNew</code>().</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filename</code></td>
<td>
<p>The filename of the image saved, if any.
By default, it is composed of arguments <code>name</code>, <code>tags</code>,
<code>sep</code>, and <code>ext</code>.  See also below.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>path</code></td>
<td>
<p>The directory where then image should be saved, if any.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>field</code></td>
<td>
<p>An optional <code>character</code> string specifying a specific
field of the named result <code>list</code> to be returned.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>onIncomplete</code></td>
<td>
<p>A <code>character</code> string specifying what to do with
an image file that was incompletely generated due to an interrupt
or an error.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>force</code></td>
<td>
<p>If <code>TRUE</code>, and the image file already exists, then it is
overwritten, otherwise not.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>which</code></td>
<td>
<p>A <code>vector</code> of devices to be copied.  Only applied if
argument <code>expr</code> is missing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.exprAsIs, .allowUnknownArgs</code></td>
<td>
<p>(Internal use only).</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns a <code>DevEvalFileProduct</code> if the device generated an
image file, otherwise an <code>DevEvalProduct</code>.
If argument <code>field</code> is given, then the field of the
<code>DevEvalProduct</code> is returned instead.
<em>Note that the default return value may be changed in future releases.</em>
</p>


<h3>Generated image file</h3>

<p>If created, the generated image file is saved in the directory
specified by argument <code>path</code> with a filename consisting of
the <code>name</code> followed by optional comma-separated <code>tags</code>
and a filename extension given by argument <code>ext</code>.
</p>
<p>By default, the image file is only created if the <code>expr</code>
is evaluated completely.  If it is, for instance, interrupted
by the user or due to an error, then any incomplete/blank image
file that was created will be removed.  This behavior can be
turned of using argument <code>onIncomplete</code>.
</p>


<h3>Author(s)</h3>

<p>Henrik Bengtsson</p>


<h3>See Also</h3>

<p>To change default device parameters such as the width or the height,
<code>devOptions</code>().
<code>devNew</code>().
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Plot to PNG using one whatever PNG device driver is available
res &lt;- devEval("{png}", name="MyPlot", tags=c("10", "rnd"), aspectRatio=0.7, {
  plot(1:10)
})
print(res$pathname)
# [1] "figures/MyPlot,10,rnd.png"

str(res$dataURI)
# chr "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAeAA..."

## Plot to PDF using grDevices::pdf()
res &lt;- devEval("pdf", name="MyPlot", tags=c("10", "rnd"), aspectRatio=0.7, {
  plot(1:10)
})
print(res$pathname)
# [1] "figures/MyPlot,10,rnd.pdf"


## Plot to EPS using R.devices::eps()
res &lt;- devEval("eps", name="MyPlot", tags=c("10", "rnd"), aspectRatio=0.7, {
  plot(1:10)
})
print(res$pathname)
# [1] "figures/MyPlot,10,rnd.eps"
</code></pre>


</div>