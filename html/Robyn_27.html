<div class="container">

<table style="width: 100%;"><tr>
<td>robyn_clusters</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Clustering to Reduce Number of Models based on ROI and Errors</h2>

<h3>Description</h3>

<p><code>robyn_clusters()</code> uses output from <code>robyn_run()</code>,
to reduce the number of models and create bootstrapped confidence
interval and help the user pick up the best (lowest combined error)
of the most different kinds (clusters) of models.
</p>


<h3>Usage</h3>

<pre><code class="language-R">robyn_clusters(
  input,
  dep_var_type,
  cluster_by = "hyperparameters",
  all_media = NULL,
  k = "auto",
  wss_var = 0.06,
  max_clusters = 10,
  limit = 1,
  weights = rep(1, 3),
  dim_red = "PCA",
  quiet = FALSE,
  export = FALSE,
  seed = 123,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>input</code></td>
<td>
<p><code>robyn_export()</code>'s output or <code>pareto_aggregated.csv</code> results.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dep_var_type</code></td>
<td>
<p>Character. For dep_var_type 'revenue', ROI is used for clustering.
For conversion', CPA is used for clustering.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cluster_by</code></td>
<td>
<p>Character. Any of: "performance" or "hyperparameters".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>all_media</code></td>
<td>
<p>Character vector. Default to <code>InputCollect$all_media</code>.
Includes <code>InputCollect$paid_media_spends</code> and <code>InputCollect$organic_vars</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k</code></td>
<td>
<p>Integer. Number of clusters</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wss_var</code></td>
<td>
<p>Numeric. Used to pick automatic <code>k</code> value,
when <code>k</code> is <code>NULL</code> based on WSS variance while considering
<code>limit</code> clusters. Values between (0, 1). Default value could be
0.05 to consider convergence.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_clusters</code></td>
<td>
<p>Integer. Maximum number of clusters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>limit</code></td>
<td>
<p>Integer. Top N results per cluster. If kept in "auto", will select k
as the cluster in which the WSS variance was less than 5%.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>Vector, size 3. How much should each error weight?
Order: nrmse, decomp.rssd, mape. The highest the value, the closer it will be scaled
to origin. Each value will be normalized so they all sum 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dim_red</code></td>
<td>
<p>Character. Select dimensionality reduction technique.
Pass any of: <code>c("PCA", "tSNE", "all", "none")</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quiet</code></td>
<td>
<p>Boolean. Keep quiet? If not, print messages.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>export</code></td>
<td>
<p>Export plots into local files?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>Numeric. Seed for reproducibility</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional parameters passed to <code>lares::clusterKmeans()</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>List. Clustering results as labeled data.frames and plots.
</p>


<h3>Author(s)</h3>

<p>Bernardo Lares (bernardolares@meta.com)
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# Having InputCollect and OutputCollect results
cls &lt;- robyn_clusters(
  input = OutputCollect,
  all_media = InputCollect$all_media,
  k = 3, limit = 2,
  weights = c(1, 1, 1.5)
)

## End(Not run)
</code></pre>


</div>