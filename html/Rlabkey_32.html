<div class="container">

<table style="width: 100%;"><tr>
<td>labkey.getLookupDetails</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Retrieve detailed information on a LabKey query</h2>

<h3>Description</h3>

<p>Fetch a list of output columns and their attributes from the query referenced by a lookup field</p>


<h3>Usage</h3>

<pre><code class="language-R">labkey.getLookupDetails(baseUrl, folderPath,
    schemaName, queryName, lookupKey)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>baseUrl</code></td>
<td>
<p>a string specifying the address of the LabKey Server, including the context root</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>folderPath</code></td>
<td>
<p>a string specifying the hierarchy of folders to the current folder (container) for the operation, starting with the project folder </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>schemaName</code></td>
<td>
<p>a string specifying the schema name in which the query object is defined</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>queryName</code></td>
<td>
<p>a string specifying the name the query</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lookupKey</code></td>
<td>
<p>a string specifying the qualified name of a lookup field (foreign key) relative to the query specified by queryName </p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>When <code>getQueryDetails</code> returns non-NA values for the lookupQueryName, the <code>getLookupDetails</code> function can be called
to enumerate the fields from the query referenced by the lookup.  These lookup fields can be added to the <code>colSelect</code> list of <code>selectRows</code>.
</p>


<h3>Value</h3>

<p>The available schemas are returned as a data frame, with the same columns
as detailed in <code>labkey.getQueryDetails</code>
</p>


<h3>Author(s)</h3>

<p>Peter Hussey, peter@labkey.com</p>


<h3>See Also</h3>

<p><code>labkey.selectRows</code>,
<code>makeFilter</code>,
<code>labkey.executeSql</code>,
<code>labkey.updateRows</code>,
<code>labkey.insertRows</code>,
<code>labkey.importRows</code>,
<code>labkey.deleteRows</code>,
<code>labkey.getSchemas</code>,
<code>labkey.getQueries</code>,
<code>labkey.getQueryViews</code>,
<code>labkey.getQueryDetails</code>,
<code>labkey.getDefaultViewDetails</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 

## Details  of fields of a query referenced by a lookup field
# library(Rlabkey)

lu1  &lt;- labkey.getLookupDetails(
	baseUrl="http://localhost:8080/labkey",
	folderPath="/apisamples",
	schemaName="lists",
	queryName="AllTypes",
	lookupKey="Category"
)
lu1

## When a lookup field points to a query object that itself has a lookup
## field, use a compound fieldkey consisting of the lookup fields from
## the base query object to the target lookupDetails, separated by
## forward slashes
lu2&lt;- labkey.getLookupDetails(
	baseUrl="http://localhost:8080/labkey",
	folderPath="/apisamples",
	schemaName="lists",
	queryName="AllTypes",
	lookupKey="Category/Group"
)
lu2

## Now select a result set containing a field from the base query, a
## field from the 1st level of lookup, and one from the 2nd
rows&lt;- labkey.selectRows(
	baseUrl="http://localhost:8080/labkey",
	folderPath="/apisamples",
	schemaName="lists",
	queryName="AllTypes",
	colSelect=c("DisplayFld","Category/Category","Category/Group/GroupName"), 
	colFilter = makeFilter(c("Category/Group/GroupName",
	   "NOT_EQUALS","TypeRange")), maxRows=20
 )
 rows


## End(Not run)
</code></pre>


</div>