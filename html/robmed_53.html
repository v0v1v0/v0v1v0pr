<div class="container">

<table style="width: 100%;"><tr>
<td>setup_ci_plot</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Set up information for a dot plot with confidence intervals</h2>

<h3>Description</h3>

<p>Extract the relevant information for a dot plot with confidence intervals of
selected effects from (robust) mediation analysis.  Information on p-values
of the selected effects can be included in addition to confidence intervals.
</p>


<h3>Usage</h3>

<pre><code class="language-R">setup_ci_plot(object, ...)

## S3 method for class 'boot_test_mediation'
setup_ci_plot(
  object,
  parm = c("direct", "indirect"),
  type = c("boot", "data"),
  p_value = FALSE,
  digits = 4L,
  ...
)

## S3 method for class 'sobel_test_mediation'
setup_ci_plot(
  object,
  parm = c("direct", "indirect"),
  level = 0.95,
  p_value = FALSE,
  ...
)

## S3 method for class 'list'
setup_ci_plot(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>an object inheriting from class
<code>"test_mediation"</code> containing results from
(robust) mediation analysis, or a list of such objects.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments to be passed down.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parm</code></td>
<td>
<p>an integer, character or logical vector specifying which
effects to include in the plot.  In case of a character vector, possible
values are <code>"a"</code>, <code>"b"</code>, <code>"d"</code> (only serial multiple mediator
models), <code>"total"</code>, <code>"direct"</code>, and <code>"indirect"</code>.  The
default is to include the direct and the indirect effect(s).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>a character string specifying which point estiamates and
confidence intervals to plot: those based on the bootstrap distribution
(<code>"boot"</code>; the default), or those based on the original data
(<code>"data"</code>).  If <code>"boot"</code>, the confidence intervals of effects
other than the indirect effect(s) are computed using a normal approximation
(i.e., assuming a normal distribution of the corresponding effect with the
standard deviation computed from the bootstrap replicates).  If
<code>"data"</code>, the confidence intervals of effects other than the indirect
effect(s) are computed via statistical theory based on the original data
(e.g., based on a t-distribution if the coefficients are estimated via
regression).  Note that this is only relevant for mediation analysis via a
bootstrap test, where the confidence interval of the indirect effect is
always computed via a percentile-based method due to the asymmetry of its
distribution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p_value</code></td>
<td>
<p>a logical indicating whether to include information on the
p-values in addition to the confidence intervals.  The default is
<code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>an integer determining how many digits to compute for
bootstrap p-values of the indirect effects (see <code>p_value()</code>).
The default is to compute 4 digits after the comma.  This is only relevant
if <code>p_value = TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>level</code></td>
<td>
<p>numeric;  the confidence level of the confidence intervals
from Sobel's test.  The default is to include 95% confidence intervals.
Note that this is not used for bootstrap tests, as those require to specify
the confidence level already in <code>test_mediation()</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function is used internally by <code>ci_plot()</code>.  It may also
be useful for users who want to produce a similar plot, but who want more
control over what information to display or how to display that information.
</p>


<h3>Value</h3>

<p>An object of class <code>"setup_ci_plot"</code> with the following
components:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>ci</code></td>
<td>
<p>a data frame consisting of column <code>Effect</code> indicating the
different effects, column <code>Estimate</code> containing the point estimates,
column <code>Lower</code> for the lower confidence limit, and column <code>Upper</code>
for the upper confidence limit.  If argument <code>p_value = TRUE</code>, there is
an additional column <code>Label</code> which gives the default facet label for
the confidence intervals. If a list of <code>"test_mediation"</code>
objects has been supplied, there is also a column <code>Method</code>, which takes
the names or indices of the list elements to indicate the different methods.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p_value</code></td>
<td>
<p>a data frame consisting of column <code>Label</code> which gives
the default facet label for the p-values, column <code>Effect</code> indicating
the different effects, and column <code>Value</code> containing the p-values.  If
a list of <code>"test_mediation"</code> objects has been supplied, there is
also a column <code>Method</code>, which takes the names or indices of the list
elements to indicate the different methods.  This is only returned if
argument <code>p_value = TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>level</code></td>
<td>
<p>numeric; the confidence level used for the confidence intervals
of the indirect effect(s).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>have_methods</code></td>
<td>
<p>a logical indicating whether a list of
<code>"test_mediation"</code> objects has been supplied.  If <code>TRUE</code>,
the data frame in the <code>ci</code> component contains a column <code>Method</code>.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Andreas Alfons
</p>


<h3>References</h3>

<p>Alfons, A., Ates, N.Y. and Groenen, P.J.F. (2022) Robust Mediation Analysis:
The <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> Package <span class="pkg">robmed</span>.  <em>Journal of Statistical Software</em>,
<b>103</b>(13), 1â€“45.  doi:10.18637/jss.v103.i13.
</p>


<h3>See Also</h3>

<p><code>test_mediation()</code>, <code>ci_plot()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data("BSG2014")

# run fast-and-robust bootstrap test
boot &lt;- test_mediation(BSG2014,
                       x = "ValueDiversity",
                       y = "TeamCommitment",
                       m = "TaskConflict")

# set up information for plot
setup &lt;- setup_ci_plot(boot, parm = "Indirect")

# plot only density and confidence interval
ggplot() +
  geom_hline(yintercept = 0, color = "darkgrey") +
  geom_pointrange(aes(x = "Robust bootstrap", y = Estimate,
                      ymin = Lower, ymax = Upper),
                  data = setup$ci) +
  labs(x = NULL, y = "Indirect effect")

</code></pre>


</div>