<div class="container">

<table style="width: 100%;"><tr>
<td>dfp_auth</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Authorize <code>rdfp</code>
</h2>

<h3>Description</h3>

<p>Authorize <code>rdfp</code> to access your Google user data. You will be
directed to a web browser, asked to sign in to your Google account, and to
grant <code>rdfp</code> access to user data for Double Click for Publishers. 
These user credentials are cached in a file named <code>.httr-oauth</code> in 
the current working directory, from where they can be automatically refreshed, 
as necessary.
</p>


<h3>Usage</h3>

<pre><code class="language-R">dfp_auth(token = NULL, new_user = FALSE,
  addtl_scopes = c("https://spreadsheets.google.com/feeds",
  "https://www.googleapis.com/auth/drive",
  "https://www.googleapis.com/auth/spreadsheets",
  "https://www.googleapis.com/auth/presentations",
  "https://www.googleapis.com/auth/analytics",
  "https://www.googleapis.com/auth/yt-analytics.readonly",
  "https://www.googleapis.com/auth/gmail.readonly",
  "https://www.googleapis.com/auth/gmail.compose",
  "https://www.googleapis.com/auth/gmail.send"),
  key = getOption("rdfp.client_id"),
  secret = getOption("rdfp.client_secret"),
  cache = getOption("rdfp.httr_oauth_cache"), verbose = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>token</code></td>
<td>
<p>an actual token object or the path to a valid token stored as an
<code>.rds</code> file</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>new_user</code></td>
<td>
<p>logical, defaults to <code>FALSE</code>. Set to <code>TRUE</code> if you
want to wipe the slate clean and re-authenticate with the same or different
Google account. This deletes the <code>.httr-oauth-rdfp</code> file in current working
directory.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>addtl_scopes</code></td>
<td>
<p>character, strings that indicate additional Google services 
the client should authorize. Use this when trying to generate a token that will 
work to authenticate to other packages using Google services, such as the googlesheets 
package or RGoogleAnalytics package.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>key, secret</code></td>
<td>
<p>the "Client ID" and "Client secret" for the application</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cache</code></td>
<td>
<p>logical indicating if <code>rdfp</code> should cache
credentials in the default cache file <code>.httr-oauth-rdfp</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>a logical indicating if messages should be printed</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Most users, most of the time, do not need to call this function
explicitly – it will be triggered by the first action that
requires authorization. Even when called, the default arguments will often
suffice. However, when necessary, this function allows the user to
</p>

<ul>
<li>
<p> store a token – the token is invisibly returned and can be assigned
to an object or written to an <code>.rds</code> file
</p>
</li>
<li>
<p> read the token from an <code>.rds</code> file or pre-existing object in the
workspace
</p>
</li>
<li>
<p> provide your own app key and secret – this requires setting up a new
project in
<a href="https://console.developers.google.com">Google Developers Console</a>
</p>
</li>
<li>
<p> prevent caching of credentials in <code>.httr-oauth-rdfp</code>
</p>
</li>
</ul>
<p>In a call to <code>dfp_auth</code>, the user can provide the token, app key and
secret explicitly and can dictate whether credentials will be cached in
<code>.httr-oauth-rdfp</code>. They must be specified.
</p>
<p>To set options in a more persistent way, predefine one or more of
them with lines like this in a <code>.Rprofile</code> file:
</p>
<pre>
options(rdfp.network_code = "12345678",
        rdfp.application_name = "MyApp",
        rdfp.client_id = "012345678901-99thisisatest99.apps.googleusercontent.com",
        rdfp.client_secret = "Th1s1sMyC1ientS3cr3t",
        rdfp.httr_oauth_cache = FALSE)
</pre>
<p>See <code>Startup</code> for possible locations for this file and the
implications thereof.
</p>
<p>More detail is available from
<a href="https://developers.google.com/identity/protocols/OAuth2">Using OAuth
2.0 to Access Google APIs</a>.
</p>


<h3>Value</h3>

<p>an OAuth token object, specifically a
<code>Token2.0</code>, invisibly
</p>


</div>