<div class="container">

<table style="width: 100%;"><tr>
<td>data_source</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Specifying Data Source</h2>

<h3>Description</h3>

<p>Functions in this page are used to specify the source of data in the recommender system.
They are intended to provide the input argument of functions such as
<code>$tune()</code>, <code>$train()</code>, and <code>$predict()</code>.
Currently three data formats are supported: data file (via function <code>data_file()</code>),
data in memory as R objects (via function <code>data_memory()</code>), and data stored as a
sparse matrix (via function <code>data_matrix()</code>).
</p>


<h3>Usage</h3>

<pre><code class="language-R">data_file(path, index1 = FALSE, ...)

data_memory(user_index, item_index, rating = NULL, index1 = FALSE, ...)

data_matrix(mat, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>path</code></td>
<td>
<p>Path to the data file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>index1</code></td>
<td>
<p>Whether the user indices and item indices start with 1
(<code>index1 = TRUE</code>) or 0 (<code>index1 = FALSE</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Currently unused.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>user_index</code></td>
<td>
<p>An integer vector giving the user indices of rating scores.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>item_index</code></td>
<td>
<p>An integer vector giving the item indices of rating scores.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rating</code></td>
<td>
<p>A numeric vector of the observed entries in the rating matrix.
Can be specified as <code>NULL</code> for testing data, in which case
it is ignored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mat</code></td>
<td>
<p>A <code>dgTMatrix</code> (if it has ratings/values) or <code>ngTMatrix</code>
(if it is binary) sparse matrix, with users corresponding to rows
and items corresponding to columns.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>In <code>$tune()</code> and <code>$train()</code>, functions in this page
are used to specify the source of training data.
</p>
<p><code>data_file()</code> expects a text file that describes a sparse matrix
in triplet form, i.e., each line in the file contains three numbers
</p>
<pre>row col value</pre>
<p>representing a number in the rating matrix
with its location. In real applications, it typically looks like
</p>
<pre>user_index item_index rating</pre>
<p>The ‘<span class="file">smalltrain.txt</span>’ file in the ‘<span class="file">dat</span>’ directory of this package
shows an example of training data file.
</p>
<p>If the sparse matrix is given as a <code>dgTMatrix</code> or <code>ngTMatrix</code> object
(triplets/COO format defined in the <span class="pkg">Matrix</span> package), then the function
<code>data_matrix()</code> can be used to specify the data source.
</p>
<p>If user index, item index, and ratings are stored as R vectors in memory,
they can be passed to <code>data_memory()</code> to form the training data source.
</p>
<p>By default the user index and item index start with zeros, and the option
<code>index1 = TRUE</code> can be set if they start with ones.
</p>
<p>From version 0.4 <span class="pkg">recosystem</span> supports two special types of matrix
factorization: the binary matrix factorization (BMF), and the one-class
matrix factorization (OCMF). BMF requires ratings to take value from
<code class="reqn">{-1, 1}</code>, and OCMF requires all the ratings to be positive.
</p>
<p>In <code>$predict()</code>, functions in this page provide the source of
testing data. The testing data have the same format as training data, except
that the value (rating) column is not required, and will be ignored if it is
provided. The ‘<span class="file">smalltest.txt</span>’ file in the ‘<span class="file">dat</span>’ directory of this
package shows an example of testing data file.
</p>


<h3>Value</h3>

<p>An object of class "DataSource" as required by
<code>$tune()</code>, <code>$train()</code>, and <code>$predict()</code>.
</p>


<h3>Author(s)</h3>

<p>Yixuan Qiu &lt;<a href="https://statr.me">https://statr.me</a>&gt;
</p>


<h3>See Also</h3>

<p><code>$tune()</code>, <code>$train()</code>, <code>$predict()</code>
</p>


</div>