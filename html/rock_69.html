<div class="container">

<table style="width: 100%;"><tr>
<td>mask_source</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Masking sources</h2>

<h3>Description</h3>

<p>These functions can be used to mask a set of utterances or one or more sources.
</p>


<h3>Usage</h3>

<pre><code class="language-R">mask_source(
  input,
  output = NULL,
  proportionToMask = 1,
  preventOverwriting = rock::opts$get(preventOverwriting),
  encoding = rock::opts$get(encoding),
  rlWarn = rock::opts$get(rlWarn),
  maskRegex = "[[:alnum:]]",
  maskChar = "X",
  perl = TRUE,
  silent = rock::opts$get(silent)
)

mask_sources(
  input,
  output,
  proportionToMask = 1,
  outputPrefix = "",
  outputSuffix = "_masked",
  maskRegex = "[[:alnum:]]",
  maskChar = "X",
  perl = TRUE,
  recursive = TRUE,
  filenameRegex = ".*",
  filenameReplacement = c("_PRIVATE_", "_public_"),
  preventOverwriting = rock::opts$get(preventOverwriting),
  encoding = rock::opts$get(encoding),
  silent = rock::opts$get(silent)
)

mask_utterances(
  input,
  proportionToMask = 1,
  maskRegex = "[[:alnum:]]",
  maskChar = "X",
  perl = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>input</code></td>
<td>
<p>For <code>mask_utterance</code>, a character vector where each element is one
utterance; for <code>mask_source</code>, either a character vector containing the text of the
relevant source <em>or</em> a path to a file that contains the source text; for <code>mask_sources</code>,
a path to a directory that contains the sources to mask.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output</code></td>
<td>
<p>For <code>mask_source</code>, if not <code>NULL</code>, this is the name (and path) of the
file in which to save the processed source (if it <em>is</em> <code>NULL</code>, the result will be
returned visibly). For <code>mask_sources</code>, <code>output</code> is mandatory and is the path to the
directory where to store the processed sources. This path will be created with a
warning if it does not exist. An exception is if "<code>same</code>" is specified - in that
case, every file will be written to the same directory it was read from.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>proportionToMask</code></td>
<td>
<p>The proportion of utterances to mask, from 0 (none) to
1 (all).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>preventOverwriting</code></td>
<td>
<p>Whether to prevent overwriting of output files.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>encoding</code></td>
<td>
<p>The encoding of the source(s).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rlWarn</code></td>
<td>
<p>Whether to let <code>readLines()</code> warn, e.g. if files do not end
with a newline character.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maskRegex</code></td>
<td>
<p>A regular expresssion (regex) specifying the characters to
mask (i.e. replace with the masking character).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maskChar</code></td>
<td>
<p>The character to replace the character to mask with.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>perl</code></td>
<td>
<p>Whether the regular expression is a perl regex or not.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>silent</code></td>
<td>
<p>Whether to suppress the warning about not editing the cleaned source.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outputPrefix, outputSuffix</code></td>
<td>
<p>The prefix and suffix to add to the
filenames when writing the processed files to disk.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>recursive</code></td>
<td>
<p>Whether to search all subdirectories (<code>TRUE</code>) as well or not.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filenameRegex</code></td>
<td>
<p>A regular expression to match against located files; only
files matching this regular expression are processed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filenameReplacement</code></td>
<td>
<p>A character vector with two elements that represent,
respectively, the <code>pattern</code> and <code>replacement</code> arguments of the <code>gsub()</code> function.
In other words, the first argument specifies a regular expression to search for
in every processed filename, and the second argument specifies a regular
expression that replaces any matches with the first argument. Set to <code>NULL</code> to
not perform any replacement on the output file name.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A character vector for <code>mask_utterance</code> and <code>mask_source</code>, or a list of
character vectors, for <code>mask_sources</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">### Mask text but not the codes
rock::mask_utterances(
  paste0(
    "Lorem ipsum dolor sit amet, consectetur adipiscing ",
    "elit. [[expAttitude_expectation_73dnt5z1&gt;earplugsFeelUnpleasant]]"
  )
)

</code></pre>


</div>