<div class="container">

<table style="width: 100%;"><tr>
<td>subset_data</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Subset a <code>data.frame</code>, <code>inspect</code>, or <code>inspect.ft</code> object</h2>

<h3>Description</h3>

<p><code>subset_data</code> subsets a <code>data.frame</code>, <code>inspect</code>, or <code>inspect.ft</code> object based
on a given set of criteria. The function is ideal for passing only selected
regions of data to other functions such as <code>calc_rate()</code> and
<code>auto_rate()</code>, either by saving the output as a new object or via the use
of pipes (<code style="white-space: pre;">⁠%&gt;%⁠</code> or <code style="white-space: pre;">⁠%&gt;%⁠</code>). It is also very useful in analysis of
intermittent-flow data, where in a loop each replicate can be extracted and
passed to an analytical function such as <code>calc_rate</code> or <code>auto_rate</code>. See
examples and vignettes.
</p>


<h3>Usage</h3>

<pre><code class="language-R">subset_data(x, from = NULL, to = NULL, by = "time", quiet = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p><code>data.frame</code>, <code>inspect</code>, or <code>inspect.ft</code> object. The data from which
to produce a subset.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>from</code></td>
<td>
<p>numeric. The lower bounds of the subset based on the <code>by</code> input.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>to</code></td>
<td>
<p>numeric. The upper bounds of the subset based on the <code>by</code> input.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by</code></td>
<td>
<p>string. <code>"time"</code>, <code>"row"</code>, or <code>"oxygen"</code>. Method by which to apply
the <code>from</code> and <code>to</code> inputs.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quiet</code></td>
<td>
<p>logical. Controls if a summary of the output is printed to the
console. Default is <code>TRUE</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function can subset data based on ranges of <code>"time"</code>, <code>"oxygen"</code>, or
<code>"row"</code>. For data frames, to subset by <code>"time"</code> or <code>"oxygen"</code> the time data
is assumed to be in the first column, and oxygen data in the second column.
For <code>inspect()</code> and <code>inspect.ft()</code> objects, the data will have been
coerced to this structure already. In these cases the <code style="white-space: pre;">⁠$dataframe⁠</code> element in
the output is replaced by the subset, and in <code>inspect.ft</code> the <code style="white-space: pre;">⁠$data⁠</code> element
is also subset and replaced. Note for <code>inspect.ft</code> objects, the oxygen data
in column 2 will be either <code>out.oxy</code> data or <code>delta.oxy</code> data depending on
what was inspected. The function can subset <em>any</em> data frame by <code>row</code>.
</p>
<p>When multiple columns are present, for example time in column 1, and multiple
columns of oxygen data, the subset object will include <em>all</em> columns. In the
case of subsetting <code>by = "oxygen"</code>, subsetting is based on the <em>first</em> column
of oxygen data only (i.e. column 2), and all subsequent columns are subset
between the same rows regardless of oxygen values.
</p>
<p>For all methods, if exact matching values of <code>from</code> and <code>to</code> are not present
in the data, the closest values are used. For <code>"time"</code> and <code>"row"</code>
subsetting, <code>from</code> and <code>to</code> should be in the correct order. No warning or
messages are given if the input values are outside those in the data frame.
For instance, if <code>to = 100</code> and there are only 50 rows in the data, the last
row (50) will be used instead. The same for <code>from</code> and <code>to</code> time values
outside those in the data frame.
</p>
<p>For <code>"oxygen"</code> subsetting, <code>from</code> and <code>to</code> are generally interchangeable, and
the function will subset data <em>between</em> the first and last occurrences (or
closest occurrences) of these values. It works best with generally increasing
or decreasing oxygen data, and results may vary with other data such as
intermittent flow data or those in <code>inspect.ft</code> objects.
</p>
<p><strong>Note for <code>inspect</code> and <code>inspect.ft</code> object inputs:</strong> after subsetting the
locations of any data issues highlighted when the object was originally
inspected will no longer be accurate. If these are important, best practice
is to subset the original dataframe, and then process the subset through
<code>inspect</code> or <code>inspect.ft</code>.
</p>
<p>A summary of the subset can be printed to the console if the default <code>quiet = FALSE</code> is changed to <code>TRUE</code>.
</p>


<h4>More</h4>

<p>For additional help, documentation, vignettes, and more visit the <code>respR</code>
website at <a href="https://januarharianto.github.io/respR/">https://januarharianto.github.io/respR/</a>
</p>



<h3>Value</h3>

<p><strong>Output</strong>: If the input is an <code>inspect</code>, or <code>inspect.ft</code> object, the
output is an object of the same class containing the subset data. For
<code>data.frame</code> inputs the output is a <code>data.table</code> of the subset.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Subset by time:
x &lt;- subset_data(squid.rd, from = 2000, to = 4000, by = "time")

# Subset by oxygen:
subset_data(sardine.rd, from = 94, to = 91, by = "oxygen")

# Subset by row:
subset_data(flowthrough.rd, from = 10, to = 750, by = "row")

# Subset multiple columns:
# In this case subsetting is based on the first two columns
subset_data(flowthrough.rd, from = 50, to = 600, by = "time")

# Pass (via piping) only a subset of a dataset to inspect() and auto_rate()
subset_data(sardine.rd, from = 94, to = 91, by = "oxygen") %&gt;%
   inspect(time = 1, oxygen = 2) %&gt;%
   auto_rate()
   
</code></pre>


</div>