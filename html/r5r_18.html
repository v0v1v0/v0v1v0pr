<div class="container">

<table style="width: 100%;"><tr>
<td>find_snap</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Find snapped locations of input points on street network</h2>

<h3>Description</h3>

<p>Finds the snapped location of points on <code>R5</code> network. Snapping is a very
important step of the routing process, which is when the origins and
destinations specified by the user are actually positioned on the network
created by <code>R5</code>. The snapping process in <code>R5</code> is composed of two rounds.
First, it tries to snap the points within a radius of 300 meters from
themselves. If the first round is unsuccessful, then <code>R5</code> expands the search
radius to 1.6 km. If yet again it is unsuccessful, then the unsnapped points
won't be used during the routing process. The snapped location of each point
depends on the transport mode set by the user, because some network edges
are not available to specific modes (e.g. a pedestrian-only street cannot be
used to snap car trips).
</p>


<h3>Usage</h3>

<pre><code class="language-R">find_snap(r5r_core, points, mode = "WALK")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>r5r_core</code></td>
<td>
<p>An object to connect with the R5 routing engine, created with
<code>setup_r5()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>points</code></td>
<td>
<p>Either a <code style="white-space: pre;">⁠POINT sf⁠</code> object with WGS84 CRS, or a <code>data.frame</code>
containing the columns <code>id</code>, <code>lon</code> and <code>lat</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mode</code></td>
<td>
<p>A string. Which mode to consider when trying to snap the points
to the network. Defaults to <code>WALK</code>, also allows <code>BICYCLE</code> and <code>CAR</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A <code>data.table</code> with the original points, their respective
snapped coordinates on the street network and the Euclidean distance ( in
meters) between the original points and their snapped location. Points that
could not be snapped show <code>NA</code> coordinates and <code>found = FALSE</code>.
</p>


<h3>See Also</h3>

<p>Other network functions: 
<code>street_network_to_sf()</code>,
<code>transit_network_to_sf()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(r5r)

path &lt;- system.file("extdata/poa", package = "r5r")
r5r_core &lt;- setup_r5(data_path = path)
points &lt;- read.csv(file.path(path, "poa_hexgrid.csv"))

snap_df &lt;- find_snap(r5r_core, points, mode = "WALK")

stop_r5(r5r_core)

</code></pre>


</div>