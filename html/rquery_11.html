<div class="container">

<table style="width: 100%;"><tr>
<td>assign_slice</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Assign a value to a slice of data (set of rows meeting a condition, and specified set of columns).</h2>

<h3>Description</h3>

<p>Uses <code>if_else_block</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">assign_slice(source, testexpr, columns, value, env = parent.frame())
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>source</code></td>
<td>
<p>optree relop node or data.frame.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>testexpr</code></td>
<td>
<p>character containing the test expression.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>columns</code></td>
<td>
<p>character vector of column names to alter.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>
<p>value to set in matching rows and columns (scalar).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>env</code></td>
<td>
<p>environment to look to.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Note: <code>ifebtest_*</code>
is a reserved column name for this procedure.
</p>


<h3>Value</h3>

<p>optree or data.frame.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
if (requireNamespace("DBI", quietly = TRUE) &amp;&amp; requireNamespace("RSQLite", quietly = TRUE)) {
  my_db &lt;- DBI::dbConnect(RSQLite::SQLite(), ":memory:")
  d &lt;- rq_copy_to(
    my_db,
    'd',
    data.frame(i = c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10),
               a = c(0, 0, 1, 1, 1, 1, 1, 1, 1, 1),
               b = c(0, 1, 0, 1, 1, 1, 1, 1, 1, 1),
               r = runif(10)),
    temporary=TRUE, overwrite=TRUE)

  optree &lt;- d %.&gt;%
    assign_slice(.,
                 testexpr = qe(r&lt;0.5),
                 columns = qc(a, b),
                 value = 2)
  cat(format(optree))

  sql &lt;- to_sql(optree, my_db)
  cat(sql)

  print(DBI::dbGetQuery(my_db, sql))

  DBI::dbDisconnect(my_db)
}

</code></pre>


</div>