<div class="container">

<table style="width: 100%;"><tr>
<td>autoplot.ate</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plot Average Risks</h2>

<h3>Description</h3>

<p>Plot average risks.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'ate'
autoplot(
  object,
  type = "meanRisk",
  first.derivative = FALSE,
  estimator = object$estimator[1],
  ci = object$inference$ci,
  band = object$inference$band,
  plot.type = "1",
  plot = TRUE,
  smooth = FALSE,
  digits = 2,
  alpha = NA,
  ylab = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>Object obtained with the function <code>ate</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>[character vector] what to displayed.
Can be <code>"meanRisk"</code> to display the risks specific to each treatment group,
<code>"diffRisk"</code> to display the difference in risks between treatment groups,
or <code>"ratioRisk"</code> to display the ratio of risks between treatment groups,.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>first.derivative</code></td>
<td>
<p>[logical] If <code>TRUE</code>, display the first derivative over time of the risks/risk differences/risk ratios.
(confidence intervals are obtained via simulation).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>estimator</code></td>
<td>
<p>[character] The type of estimator relative to which the risks should be displayed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ci</code></td>
<td>
<p>[logical] If <code>TRUE</code> display the confidence intervals for the average risks.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>band</code></td>
<td>
<p>[logical] If <code>TRUE</code> display the confidence bands for the average risks.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot.type</code></td>
<td>
<p>[character] Type of plot to be used.
<code>plot.type="2"</code> is useful when looking simulateneous at all eventtimes.
Otherwise use <code>plot.type="1"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>[logical] Should the graphic be plotted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>smooth</code></td>
<td>
<p>[logical] Should a smooth version of the risk function be plotted instead of a simple function?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>[integer, &gt;0] Number of decimal places.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>[numeric, 0-1] Transparency of the confidence bands. Argument passed to <code>ggplot2::geom_ribbon</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylab</code></td>
<td>
<p>[character] Label for the y axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional parameters to cutomize the display.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Invisible. A list containing:
</p>

<ul>
<li>
<p> plot: the ggplot object.
</p>
</li>
<li>
<p> data: the data used to create the plot.
</p>
</li>
</ul>
<h3>See Also</h3>

<p><code>ate</code> to compute average risks.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(survival)
library(rms)
library(ggplot2)

#### simulate data ####
n &lt;- 1e2
set.seed(10)
dtS &lt;- sampleData(n,outcome="survival")
seqTimes &lt;- c(0,sort(dtS$time[dtS$event==1]),max(dtS$time))

#### Cox model ####
fit &lt;- cph(formula = Surv(time,event)~ X1+X2,data=dtS,y=TRUE,x=TRUE)

#### plot.type = 1: for few timepoints ####
ateFit &lt;- ate(fit, data = dtS, treatment = "X1",
              times = c(1,2,5,10), se = TRUE, band = TRUE)
ggplot2::autoplot(ateFit)
## Not run: 
ggplot2::autoplot(ateFit, band = FALSE)
ggplot2::autoplot(ateFit, type = "diffRisk")
ggplot2::autoplot(ateFit, type = "ratioRisk")

## End(Not run)

#### plot.type = 2: when looking at all jump times ####
## Not run: 
ateFit &lt;- ate(fit, data = dtS, treatment = "X1",
              times = seqTimes, se = TRUE, band = TRUE)

ggplot2::autoplot(ateFit, plot.type = "2")

## customize plot
outGG &lt;- ggplot2::autoplot(ateFit, plot.type = "2", alpha = 0.25)
outGG$plot + facet_wrap(~X1, labeller = label_both)


## Looking at the difference after smoothing
outGGS &lt;- ggplot2::autoplot(ateFit, plot.type = "2", alpha = NA, smooth = TRUE)
outGGS$plot + facet_wrap(~X1, labeller = label_both)

## first derivative
## (computation of the confidence intervals takes time)
## (based on simulation - n.sim parameter)
ggplot2::autoplot(ateFit, plot.type = "2", smooth = TRUE,
                  band = FALSE, type = "diffRisk")
ggplot2::autoplot(ateFit, plot.type = "2", smooth = TRUE, first.derivative = TRUE,
                  band = FALSE, type = "diffRisk")

## End(Not run)
</code></pre>


</div>