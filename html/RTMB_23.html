<div class="container">

<table style="width: 100%;"><tr>
<td>ADvector</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>The AD vector and its methods</h2>

<h3>Description</h3>

<p>An <code>advector</code> is a class used behind the scenes to replace
normal R numeric objects during automatic differentiation. An
<code>advector</code> has a 'temporary lifetime' and therefore you do not
<em>see</em> / <em>need to know</em> it as a normal user.
</p>


<h3>Usage</h3>

<pre><code class="language-R">advector(x)

## S3 method for class 'advector'
Ops(e1, e2)

## S3 method for class 'advector'
Math(x, ...)

## S3 method for class 'advector'
as.vector(x, mode = "any")

## S3 method for class 'advector'
as.complex(x, ...)

## S3 method for class 'advector'
aperm(a, perm, ...)

## S3 method for class 'advector'
c(...)

## S3 method for class 'advector'
x[...]

## S3 replacement method for class 'advector'
x[...] &lt;- value

## S3 method for class 'advector'
x[[...]]

## S3 method for class 'advector'
rep(x, ...)

## S3 method for class 'advector'
is.nan(x)

## S3 method for class 'advector'
is.finite(x)

## S3 method for class 'advector'
is.infinite(x)

## S3 method for class 'advector'
is.na(x)

## S3 method for class 'advector'
sum(x, ..., na.rm = FALSE)

## S3 method for class 'advector'
mean(x, ...)

## S3 method for class 'advector'
prod(x, ..., na.rm)

## S3 method for class 'advector'
is.numeric(x)

## S3 method for class 'advector'
as.double(x, ...)

## S3 method for class 'advector'
Complex(z)

## S3 method for class 'advector'
Summary(..., na.rm = FALSE)

## S3 method for class 'advector'
diff(x, lag = 1L, differences = 1L, ...)

## S3 method for class 'advector'
print(x, ...)

## S4 method for signature 'num,ad,ad'
ifelse(test, yes, no)

## S4 method for signature 'num,num,num'
ifelse(test, yes, no)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>numeric or advector</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>e1</code></td>
<td>
<p>advector</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>e2</code></td>
<td>
<p>advector</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mode</code></td>
<td>
<p>FIXME might not be handled correctly by <code>as.vector</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>a</code></td>
<td>
<p>advector with dimension attribute</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>perm</code></td>
<td>
<p>Permutation as in <code>aperm</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>
<p>Replacement value implicitly converted to AD</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm</code></td>
<td>
<p>Must be FALSE (default)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>z</code></td>
<td>
<p>Complex (not allowed)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lag</code></td>
<td>
<p>As diff</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>differences</code></td>
<td>
<p>As diff</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>test</code></td>
<td>
<p><code>logical</code> vector</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yes</code></td>
<td>
<p><code>advector</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>no</code></td>
<td>
<p><code>advector</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>An AD vector (class='advector') is an atomic R vector of 'codes'
that are internally interpretable as 'AD scalars'. A substantial
part of R's existing S3 matrix and array functionality can be
re-used for AD vectors.
</p>


<h3>Value</h3>

<p>Object of class <code>"advector"</code>.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>advector()</code>: Construct a new advector
</p>
</li>
<li> <p><code>Ops(advector)</code>: Binary operations
</p>
</li>
<li> <p><code>Math(advector)</code>: Unary operations
</p>
</li>
<li> <p><code>as.vector(advector)</code>: Makes <code>array(x)</code> work.
</p>
</li>
<li> <p><code>as.complex(advector)</code>: Convert to ADcomplex. Note that dimensions are dropped for consistency with base R.
</p>
</li>
<li> <p><code>aperm(advector)</code>: Equivalent of aperm
</p>
</li>
<li> <p><code>c(advector)</code>: Equivalent of c. However note the limitation for mixed types: If <code>x</code> is an AD type, <code>c(x,1)</code> works while <code>c(1,x)</code> does not!
</p>
</li>
<li> <p><code>[</code>: Equivalent of [
</p>
</li>
<li> <p><code>`[`(advector) &lt;- value</code>: Equivalent of [&lt;-
</p>
</li>
<li> <p><code>[[</code>: Equivalent of [[
</p>
</li>
<li> <p><code>rep(advector)</code>: Equivalent of rep. Makes <code>outer(x,x,...)</code> work.
</p>
</li>
<li> <p><code>is.nan(advector)</code>: Equivalent of is.nan. Check NaN status of a <em>constant</em> <code>advector</code> expression. If not constant throw an error.
</p>
</li>
<li> <p><code>is.finite(advector)</code>: Equivalent of is.finite. Check finite status of a <em>constant</em> <code>advector</code> expression. If not constant throw an error.
</p>
</li>
<li> <p><code>is.infinite(advector)</code>: Equivalent of is.infinite. Check infinity status of a <em>constant</em> <code>advector</code> expression. If not constant throw an error.
</p>
</li>
<li> <p><code>is.na(advector)</code>: Equivalent of is.na. Check NA status of an <code>advector</code>. NAs can only occur directly (as constants) or indirectly as the result of an operation with NA operands. For a tape built with non-NA parameters the NA status of any expression is constant and can therefore safely be used as part of the calculations. (assuming correct propagation of NAs via C-level arithmetic).
</p>
</li>
<li> <p><code>sum(advector)</code>: Equivalent of sum. <code>na.rm=TRUE</code> is allowed, but note that this feature assumes correct propagation of NAs via C-level arithmetic.
</p>
</li>
<li> <p><code>mean(advector)</code>: Equivalent of mean except no arguments beyond <code>x</code> are supported.
</p>
</li>
<li> <p><code>prod(advector)</code>: Equivalent of prod except <code>na.rm</code> not allowed.
</p>
</li>
<li> <p><code>is.numeric(advector)</code>: Makes <code>cov2cor()</code> work. FIXME: Any unwanted side-effects with this?
</p>
</li>
<li> <p><code>as.double(advector)</code>: Makes <code>as.numeric()</code> work.
</p>
</li>
<li> <p><code>Complex(advector)</code>: Complex operations are redirected to adcomplex.
</p>
</li>
<li> <p><code>Summary(advector)</code>: Non differentiable Summary operations (e.g. <code>min</code> <code>max</code>) are not allowed and will throw an error.
</p>
</li>
<li> <p><code>diff(advector)</code>: Equivalent of diff
</p>
</li>
<li> <p><code>print(advector)</code>: Print method
</p>
</li>
<li> <p><code>ifelse(test = num, yes = ad, no = ad)</code>: Equivalent of ifelse
</p>
</li>
<li> <p><code>ifelse(test = num, yes = num, no = num)</code>: Default method
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">x &lt;- advector(1:9)
a &lt;- array(x, c(3,3))  ## as an array
outer(x, x, "+") ## Implicit via 'rep'
rev(x)           ## Implicit via '['
</code></pre>


</div>