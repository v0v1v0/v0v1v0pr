<div class="container">

<table style="width: 100%;"><tr>
<td>sampcla</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Within-class sampling</h2>

<h3>Description</h3>

<p>The function divides a datset in two sets, "train" vs "test", using a stratified sampling on defined classes.
</p>
<p>If argument <code>y = NULL</code> (default), the sampling is random within each class. If not, the sampling is systematic (regular grid) within each class over the quantitative variable <code class="reqn">y</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">
sampcla(x, y = NULL, m)

</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A vector (length <code class="reqn">m</code>) defining the class membership of the observations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>A vector (length <code class="reqn">m</code>) defining the quantitative variable for the systematic sampling. If <code>NULL</code> (default), the sampling is random within each class.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>m</code></td>
<td>
<p>Either an integer defining the equal number of test observation(s) to select per class, or a vector of integers defining the numbers to select for each class. In the last case, vector <code>m</code> must have a length equal to the number of classes present in <code>x</code>, and be ordered in the same way as the ordered class membership.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>train</code></td>
<td>
<p>Indexes (i.e. position in <code class="reqn">x</code>) of the selected observations, for the training set.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>test</code></td>
<td>
<p>Indexes (i.e. position in <code class="reqn">x</code>) of the selected observations, for the test set.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lev</code></td>
<td>
<p>classes</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ni</code></td>
<td>
<p>number of observations in each class</p>
</td>
</tr>
</table>
<h3>Note</h3>

<p>The second example is a representative stratified sampling from an unsupervised clustering.
</p>


<h3>References</h3>

<p>Naes, T., 1987. The design of calibration in near infra-red reflectance analysis by clustering. Journal of Chemometrics 1, 121-134.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## EXAMPLE 1

x &lt;- sample(c(1, 3, 4), size = 20, replace = TRUE)
table(x)

sampcla(x, m = 2)
s &lt;- sampcla(x, m = 2)$test
x[s]

sampcla(x, m = c(1, 2, 1))
s &lt;- sampcla(x, m = c(1, 2, 1))$test
x[s]

y &lt;- rnorm(length(x))
sampcla(x, y, m = 2)
s &lt;- sampcla(x, y, m = 2)$test
x[s]

## EXAMPLE 2

data(cassav)
X &lt;- cassav$Xtrain
y &lt;- cassav$ytrain
N &lt;- nrow(X)

fm &lt;- pcaeigenk(X, nlv = 10)
z &lt;- stats::kmeans(x = fm$T, centers = 3, nstart = 25, iter.max = 50)
x &lt;- z$cluster
z &lt;- table(x)
z
p &lt;- c(z) / N
p

psamp &lt;- .20
m &lt;- round(psamp * N * p)
m

random_sampling &lt;- sampcla(x, m = m)
s &lt;- random_sampling$test
table(x[s])

Systematic_sampling_for_y &lt;- sampcla(x, y, m = m)
s &lt;- Systematic_sampling_for_y$test
table(x[s])

</code></pre>


</div>