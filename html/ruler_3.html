<div class="container">

<table style="width: 100%;"><tr>
<td>act_after_exposure</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Act after exposure</h2>

<h3>Description</h3>

<p>A wrapper for consistent application of some actions based on the data after
exposure.
</p>


<h3>Usage</h3>

<pre><code class="language-R">act_after_exposure(.tbl, .trigger, .actor)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>.tbl</code></td>
<td>
<p>Result of exposure, i.e. data frame with exposure
attribute.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.trigger</code></td>
<td>
<p>Function which takes <code>.tbl</code> as argument and returns <code>TRUE</code> if
some action needs to be performed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.actor</code></td>
<td>
<p>Function which takes <code>.tbl</code> as argument and performs the
action.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Basically <code>act_after_exposure()</code> is doing the following:
</p>

<ul>
<li>
<p> Check that <code>.tbl</code> has a proper exposure attribute.
</p>
</li>
<li>
<p> Compute whether to perform intended action by computing <code>.trigger(.tbl)</code>.
</p>
</li>
<li>
<p> If trigger results in <code>TRUE</code> then <code>.actor(.tbl)</code> <strong>is returned</strong>. In other
case <code>.tbl</code> is returned.
</p>
</li>
</ul>
<p>It is a good idea that <code>.actor</code> should be doing one of two things:
</p>

<ul>
<li>
<p> Making side effects. For example throwing an error (if condition in
<code>.trigger</code> is met), printing some information and so on. In this case it
should return <code>.tbl</code> to be used properly inside a pipe.
</p>
</li>
<li>
<p> Changing <code>.tbl</code> based on exposure information. In this case it should
return the imputed version of <code>.tbl</code>.
</p>
</li>
</ul>
<h3>See Also</h3>

<p>any_breaker for trigger which returns <code>TRUE</code> in case any rule
breaker is found in exposure.
</p>
<p>assert_any_breaker for usage of <code>act_after_exposure()</code> in building data
validation pipelines.
</p>


<h3>Examples</h3>

<pre><code class="language-R">exposure_printer &lt;- function(.tbl) {
  print(get_exposure(.tbl))
  .tbl
}
mtcars_exposed &lt;- mtcars %&gt;%
  expose(data_packs(. %&gt;% dplyr::summarise(nrow_low = nrow(.) &gt; 50))) %&gt;%
  act_after_exposure(any_breaker, exposure_printer)
</code></pre>


</div>