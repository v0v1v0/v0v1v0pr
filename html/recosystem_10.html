<div class="container">

<table style="width: 100%;"><tr>
<td>predict</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Recommender Model Predictions</h2>

<h3>Description</h3>

<p>This method is a member function of class "<code>RecoSys</code>"
that predicts unknown entries in the rating matrix.
</p>
<p>Prior to calling this method, model needs to be trained using member function
<code>$train()</code>.
</p>
<p>The common usage of this method is
</p>
<pre>r = Reco()
r$train(...)
r$predict(test_data, out_pred = out_file("predict.txt")</pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>r</code></td>
<td>
<p>Object returned by <code>Reco()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>test_data</code></td>
<td>
<p>An object of class "DataSource" that describes the source
of testing data, typically returned by function
<code>data_file()</code>, <code>data_memory()</code>,
or <code>data_matrix()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>out_pred</code></td>
<td>
<p>An object of class <code>Output</code> that specifies the
output format of prediction, typically returned by function
<code>out_file()</code>, <code>out_memory()</code> or
<code>out_nothing()</code>.
<code>out_file()</code> writes the result into a
file, <code>out_memory()</code> exports the vector of
predicted values into the return value of <code>$predict()</code>,
and <code>out_nothing()</code> means the result will be
neither returned nor written into a file (but computation will
still be conducted).</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Yixuan Qiu &lt;<a href="https://statr.me">https://statr.me</a>&gt;
</p>


<h3>References</h3>

<p>W.-S. Chin, Y. Zhuang, Y.-C. Juan, and C.-J. Lin.
A Fast Parallel Stochastic Gradient Method for Matrix Factorization in Shared Memory Systems.
ACM TIST, 2015.
</p>
<p>W.-S. Chin, Y. Zhuang, Y.-C. Juan, and C.-J. Lin.
A Learning-rate Schedule for Stochastic Gradient Methods to Matrix Factorization.
PAKDD, 2015.
</p>
<p>W.-S. Chin, B.-W. Yuan, M.-Y. Yang, Y. Zhuang, Y.-C. Juan, and C.-J. Lin.
LIBMF: A Library for Parallel Matrix Factorization in Shared-memory Systems.
Technical report, 2015.
</p>


<h3>See Also</h3>

<p><code>$train()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
train_file = data_file(system.file("dat", "smalltrain.txt", package = "recosystem"))
test_file = data_file(system.file("dat", "smalltest.txt", package = "recosystem"))
r = Reco()
set.seed(123) # This is a randomized algorithm
opts_tune = r$tune(train_file)$min
r$train(train_file, out_model = NULL, opts = opts_tune)

## Write predicted values into file
out_pred = out_file(tempfile())
r$predict(test_file, out_pred)

## Return predicted values in memory
pred = r$predict(test_file, out_memory())

## If testing data are stored in memory
test_df = read.table(test_file@source, sep = " ", header = FALSE)
test_data = data_memory(test_df[, 1], test_df[, 2])
pred2 = r$predict(test_data, out_memory())

## Compare results
print(scan(out_pred@dest, n = 10))
head(pred, 10)
head(pred2, 10)

## If testing data are stored as a sparse matrix
if(require(Matrix))
{
    mat = Matrix::sparseMatrix(i = test_df[, 1], j = test_df[, 2], x = -1,
                               repr = "T", index1 = FALSE)
    test_data = data_matrix(mat)
    pred3 = r$predict(test_data, out_memory())
    print(head(pred3, 10))
}

## End(Not run)

</code></pre>


</div>