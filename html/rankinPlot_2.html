<div class="container">

<table style="width: 100%;"><tr>
<td>grottaBar</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>grottaBar</h2>

<h3>Description</h3>

<p>Automates the production of a Grotta Bar using <code>ggplot()</code>
</p>


<h3>Usage</h3>

<pre><code class="language-R">grottaBar(x,groupName,scoreName,strataName = NULL,
          colorScheme="lowGreen",
          printNumbers = "count",
          nCol = 1, dir = "v",
          width = 0.9,
          textSize = 15, numberSize = 5,
          textFace = "plain",
          textColor = "black", textCut = 0,
          lineSize = 0.5,
          returnData = FALSE,
          ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a 2- or 3- dimensional table, returned by the table() function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>groupName</code></td>
<td>
<p>a character string giving the name of the group varialble</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scoreName</code></td>
<td>
<p>a character string giving outcome (mRS) labels</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>strataName</code></td>
<td>
<p>a character string giving the strata variable name</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colorScheme</code></td>
<td>
<p>a character string indicating the colors that should be used by the plot</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>printNumbers</code></td>
<td>
<p>a character string indicating if numbers should be printed for each category.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nCol</code></td>
<td>
<p>an integer indicating the number of columns to use for displaying stratified results. Has no effect if no stratification is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dir</code></td>
<td>
<p>a character indicating if stratified results should be laid out vertically (<code>"v"</code>) or horizontally <code>"h"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width</code></td>
<td>
<p>a number adjusting the width of the lines between bars</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>textSize</code></td>
<td>
<p>a number indicating the size of text labels</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>numberSize</code></td>
<td>
<p>a number indicating the size of printed numbers</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>textFace</code></td>
<td>
<p>a character string indicating font face of printed numbers. Can be "plain", "bold", "italic" or "bold.italic".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>textColor</code></td>
<td>
<p>vector of two colors for text labels</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>textCut</code></td>
<td>
<p>Controls when the color of the text changes. The first <code>textCut</code> categories will use the first color</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lineSize</code></td>
<td>
<p>a number indicating the thickness of lines in the plot</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>returnData</code></td>
<td>
<p>a boolean indicating if the data used to create the plot should be returned. For expert users only.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments. Ignored except for <code>colourScheme</code> and <code>textColour</code> which will override their counterpart arguments.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This tool produces a "Grotta" bar chart based on a table of count data.
A Grotta bar chart is a common data visualisation tool in stroke research, and is in essence a horizontally stacked proportional bar
chart showing the distribution of ordinal outcome data (typically the modified Rankin Scale) across groups, with lines drawn connecting
categories across groups.
</p>
<p>The tool provides three default options for <code>colorScheme</code>:
</p>

<ul>
<li>
<p><code>"lowGreen"</code> A "traffic light" gradient from green to red, where low scores are colored green
</p>
</li>
<li>
<p><code>"lowRed"</code> A "traffic light" gradient from red to green, where low scores are colored red
</p>
</li>
<li>
<p><code>"grayscale"</code> A grayscale gradient for producing a black and white plot
</p>
</li>
</ul>
<p>In addition to these, setting <code>colorScheme="custom"</code> allows for a
user-specified color scheme by using the ggplot2 family of <code>scale_fill_</code> functions.
</p>
<p>The options for <code>printNumbers</code> are:
</p>

<ul>
<li>
<p><code>"count"</code> The raw counts in the table.
</p>
</li>
<li>
<p><code>"proportion"</code> The within-group proportion, rounded to 2 decimal places.
</p>
</li>
<li>
<p><code>"percentage"</code> The within-group percentage, rounded to 2 decimal places.
</p>
</li>
<li>
<p><code>"count.percentage"</code> The raw count with percentage in parentheses.
</p>
</li>
<li>
<p><code>"none"</code> Do not print any numbers.
</p>
</li>
</ul>
<p>These options may be abbreviated. <code>"p"</code> is not a valid abbreviation as it matches to multiple options.
The minimal abbreviation for <code>"count.percentage"</code> is <code>"c.p"</code>
</p>


<h3>Value</h3>

<p>A ggplot object, or a list containing a ggplot object and the data used to generate it.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
df &lt;- alteplase
df$mRS &lt;- df$mRS -1
x &lt;- table(mRS=df$mRS,
           Group=df$treat,
           Time=df$time)

grottaBar(x,groupName="Group",
          scoreName = "mRS",
          strataName="Time",
          colorScheme ="lowGreen"
 )

  grottaBar(x,groupName="Time",
          scoreName = "mRS",
          strataName="Group",
          colorScheme ="grayscale"
 )

x &lt;- table(mRS=df$mRS,
          Group=df$treat)

   grottaBar(x,groupName="Group",
             scoreName = "mRS",
             colorScheme ="custom"
   ) + ggplot2::scale_fill_brewer(palette = "Spectral", direction=-1)

  grottaBar(x,groupName="Group",
          scoreName = "mRS",
          colorScheme ="custom",
          textFace = "italic",
          printNumbers = "count.percentage"
 ) + viridis::scale_fill_viridis(discrete = TRUE,direction = -1)


grottaBar(
          x,
          groupName = "Group",
          scoreName = "mRS",
          colorScheme = "custom",
          textFace = "italic",
          printNumbers = "count.percentage"
) + viridis::scale_fill_viridis(discrete = TRUE, direction = -1)


grottaBar(x,groupName="Group",
           scoreName = "mRS",
           colorScheme ="custom",
           textFace = "italic",
           textColor = c("black","white"),
           textCut = 5,
           printNumbers = "count.percentage"
) + viridis::scale_fill_viridis(discrete = TRUE,direction = -1)


</code></pre>


</div>