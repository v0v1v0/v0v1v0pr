<div class="container">

<table style="width: 100%;"><tr>
<td>load_clean</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Load data then clean and format it</h2>

<h3>Description</h3>

<p>Function loads and cleans data for the nine functions
</p>


<h3>Usage</h3>

<pre><code class="language-R">load_clean(
  import = "yes",
  file.cont = "",
  file.cat = "",
  dir = "",
  file.name = "",
  pval_cont = "no",
  match = "no",
  cohort = "no",
  anova = "no",
  dir.cont = "",
  file.name.cont = "",
  sheet.name.cont = "Sheet1",
  range.name.cont = "",
  format.cont = "wide",
  cat = "no",
  sr = "no",
  cat_all = "no",
  pval_cat = "no",
  cat.names = c("n"),
  dir.cat = "",
  file.name.cat = "",
  sheet.name.cat = "Sheet1",
  range.name.cat = "",
  format.cat = "wide",
  generic = "",
  gen.vars.keep = "",
  gen.vars.del = "",
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>import</code></td>
<td>
<p>'yes' indicates import excel file. 'no' indicates takes dataset already loaded into R as data frame</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file.cont</code></td>
<td>
<p>If import = 'no', name of data frame containing continuous data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file.cat</code></td>
<td>
<p>If import = 'no', name of data frame containing categorical data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dir</code></td>
<td>
<p>If import = 'yes', path to location of excel file for continuous and categorical data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file.name</code></td>
<td>
<p>If import = 'yes', file name of excel file containing continuous and categorical data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pval_cont</code></td>
<td>
<p>'yes'/'no' indicating if data will be used for pval_cont_fn. Only data for 1 continuous data function can be loaded with each run of this function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>match</code></td>
<td>
<p>'yes'/'no' indicating if data will be used for match_fn. Only data for 1 continuous data function can be loaded with each run of this function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cohort</code></td>
<td>
<p>'yes'/'no' indicating if data will be used for cohort_fn. Only data for 1 continuous data function can be loaded with each run of this function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>anova</code></td>
<td>
<p>'yes'/'no' indicating if data will be used for anova_fn. Only data for 1 continuous data function can be loaded with each run of this function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dir.cont</code></td>
<td>
<p>If import = 'yes', path to location of excel file for continuous data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file.name.cont</code></td>
<td>
<p>If import = 'yes', file name of excel file containing continuous data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sheet.name.cont</code></td>
<td>
<p>Sheet name containing continuous data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>range.name.cont</code></td>
<td>
<p>Range of cells containing continuous data. Can be in format 'a1:b20' or 'a:b'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>format.cont</code></td>
<td>
<p>'wide'/'long' indicating continuous data is in wide or long format</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cat</code></td>
<td>
<p>'yes'/'no' indicating if data will be used for cat_fn. Only data for 1 categorical data function can be loaded with each run of this function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sr</code></td>
<td>
<p>'yes'/'no' indicating if data will be used for sr_fn. Only data for 1 categorical data function can be loaded with each run of this function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cat_all</code></td>
<td>
<p>'yes'/'no' indicating if data will be used for cat_all_fn. Only data for 1 categorical data function can be loaded with each run of this function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pval_cat</code></td>
<td>
<p>'yes'/'no' indicating if data will be used for cat_all_fn. Only data for 1 categorical data function can be loaded with each run of this function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cat.names</code></td>
<td>
<p>names of variables to be used in cat_fn and sr_fn</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dir.cat</code></td>
<td>
<p>If import = 'yes', path to location of excel file for categorical data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file.name.cat</code></td>
<td>
<p>If import = 'yes', file name of excel file containing categorical data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sheet.name.cat</code></td>
<td>
<p>Sheet name containing categorical data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>range.name.cat</code></td>
<td>
<p>Range of cells containing categorical. Can be in format 'a1:b20' or 'a:b'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>format.cat</code></td>
<td>
<p>'wide'/'long' indicating categorical data is in wide or long format</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>generic</code></td>
<td>
<p>'yes'/'no' indicating if data to be loaded for generic use</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gen.vars.keep</code></td>
<td>
<p>Vector of variables in data to keep</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gen.vars.del</code></td>
<td>
<p>Vector of variables in data to delete</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>TRUE/FALSE TRUE indicates comments will be printed during loading</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Function can load continuous or categorical data.
Continuous data can be used for comparison of baseline p-values (pval_cont_fn),
matching summary stats within a trial (match_fn), matching summary stats in different cohorts (cohort_fn),
or comparing means of baseline p-values (anova_fn).
Categorical data can be used for comparisons of observed with expected distributions for single variable (cat_fn),
for group numbers in trials using simple randomisation (sr_fn), for all variables (cat_all_fn), and for comparison
of baseline p-values (pval_cat_fn).<br></p>
<p>There is one function in development that allows assessment of proportion of final digits in summary statistics (final_digit_fn).
This function works using summary statistics but could be adapted to use on raw continuous or categorical data.
</p>
<p>Only 1 continuous and/or 1 categorical data set allowed per load to avoid clashes
</p>
<p>Data can be imported from a file (import = "yes") or taken from an existing data frame, import = "no"
</p>
<p>If loading from an existing data use file.cont and file.cat
</p>
<p>If loading from common directory or file, can use dir and file.name rather than more specific dir.cont, dir.cat,
file.name.cont, or file.name.cat.
</p>
<p><strong>Comments about each indicator:</strong>
<em>pval_cont</em><br>
loads continuous data for pval_cont_fn, outputs as list of 1 containing named data frame pval_cont_data.<br></p>
<p>format should be study, variable or var, n, m, s, p. Can be in any order. n = sample size, m = mean, s = standard deviation,
p = baseline p value (can omit if not reported)<br></p>
<p>can be in wide or long format<br>
wide: study, var, n1, n2, n3 ..., m1, m2, m3 ... s1, s2, s3..., p<br>
long: study, var, group, m , s,  n , p<br></p>
<p>group or g or grp required for long format<br>
separators (eg n1 n_1 n.1) are stripped and replaced<br></p>
<p><em>match</em><br>
loads continuous data for match_fn, outputs as list of 1 containing named data frame match_data<br></p>
<p>remainder is same as for pval_cont above.<br>
only difference between pval_cont and match is that match allows for missing mean or SD whereas pval_cont does not<br></p>
<p>format should be study, variable or var, n, m, s. Can be in any order. n = sample size, m = mean, s = standard deviation<br></p>
<p>can be in wide or long format<br>
wide: study, var, n1, n2, m1, m2, s1, s2, p<br>
long: study, var, group, m , s,  n <br></p>
<p>group or g or grp required for long format<br>
separators (eg n1 n_1 n.1) are stripped and replaced<br></p>
<p><em>cohort</em><br>
loads continuous data for cohort_fn, outputs as list of 1 containing named data frame cohort_data<br></p>
<p>same as pval_cont but allows a lookup variable for variable names<br></p>
<p>format should be study, variable or var, n, m, s, p. Can be in any order. n = sample size, m = mean, s = standard deviation<br></p>
<p>can be in wide or long format<br>
wide: study, var, n1, n2, n3 ..., m1, m2, m3 ... s1, s2, s3... <br>
long: study, var, group, m , s,  n <br></p>
<p>group or g or grp required for long format<br>
separators (eg n1 n_1 n.1) are stripped and replaced<br></p>
<p>lookup table is var_name_final, var_name_orig and allows you to specify a list of all variables names (var_name_orig)
from all studies and a lookup table of standardised names (var_name_final) allowing different names in different studies to
be standardised<br></p>
<p>has optional variable 'population' which can be used to subset the data if trials in different populations are reported<br></p>
<p><em>anova</em><br>
loads continuous data for anova_fn, outputs as list of 1 containing named data frame anova_data<br></p>
<p>same as for pval_cont above but allows for optional value for decimal place<br></p>
<p>format should be study, variable or var, n, m, s, p. Can be in any order. n = sample size, m = mean, s = standard deviation,
d= decimal place of mean (if omitted, this is calculated automatically in anova_fn)<br></p>
<p>can be in wide or long format<br>
wide: study, var, n1, n2, n3 ..., m1, m2, m3 ... s1, s2, s3..., d<br>
long: study, var, group, m , s,  n , d<br></p>
<p>group or g or grp required for long format<br>
separators (eg n1 n_1 n.1) are stripped and replaced<br></p>
<p><em>cat</em><br>
loads categorical data for cat_fn, outputs as list of 1 containing named data frame cat_data<br></p>
<p>format should be study, n, v. Can be in any order, n= group size, v= number with characteristic<br></p>
<p>can be in wide or long format<br>
wide: study, n1, n2, n3 ..., v1, v2, v3...<br>
long: study, group, n, v<br></p>
<p>group or g or grp required for long format<br>
use cat.names to name variable eg c("n", "v") , c("n", "g") ...<br>
separators (eg n1 n_1 n.1) are stripped and replaced<br></p>
<p><em>sr</em><br>
loads categorial data for sr_fn, outputs as list of 1 containing named data frame sr_data<br></p>
<p>as for cat but only requires study and n
</p>
<p>format should be study, n. n= group size<br></p>
<p>can be in wide or long format<br>
wide: study, n1, n2, n3 ...<br>
long: study, group, n<br></p>
<p>group or g or grp required for long format<br>
separators (eg n1 n_1 n.1) are stripped and replaced<br></p>
<p><em>cat_all</em><br>
loads categorical data for cat_all_fn, outputs as list of 1 containing named data frame cat_all_data<br></p>
<p>format should be study, var or variable, n, N, level, stat, recode, p. Can be in any order, n = number with characteristic, N = group size,
p = baseline p value (can omit if not reported), can use "ns" for not significant or "&lt;" or "&gt;" to indicate threshold (eg "&lt;0.05") <br></p>
<p>optional level - number for level of variable (eg y/n =1,2; high/med/low =1,2,3)<br>
optional recode- for variables with &gt;2 levels to tell how to recode into 2 groups<br>
optional stat: statistical test used for p-value : chisq - Chisquare, chisqc- Chisquare with correction,
fisher- Fisher's exact, midp - midp -calculated using two different methods, lr- likelihood ratio,
mh - Mantel-Haenszel test<br></p>
<p>can be in wide or long format<br>
wide study, var, n1, n2, n3, ... N1, N2, N3... p, stat, level, recode<br>
long study, var, group, n, N, p, stat, level, recode<br></p>
<p>group or g or grp required for long format<br></p>
<p>if variable has 2 levels, only 1 required, other will be calculated.<br></p>
<p>separators (eg n1 n_1 n.1) are stripped and replaced<br></p>
<p><em>pval_cat</em><br>
loads categorical data for pval_cat_fn, outputs as list of 1 containing named data frame pval_cat_data<br></p>
<p>as for cat_all but recode variable is not generated
</p>
<p>format should be study, var or variable, n, N, p. Can be in any order, n = number with characteristic, N = group size,
p = baseline p value (can omit if not reported), can use "ns" for not significant or "&lt;" or "&gt;" to indicate threshold (eg "&lt;0.05") <br></p>
<p>optional level - number for level of variable (eg y/n =1,2; high/med/low =1,2,3)<br>
optional stat: statistical test used for p-value : chisq - Chisquare, fisher- Fisher's exact<br></p>
<p>can be in wide or long format<br>
wide study, var, n1, n2, n3, ... N1, N2, N3... p, stat, level<br>
long study, var, group, n, N, p, stat, level<br></p>
<p>group or g or grp required for long format<br></p>
<p>if variable has 2 levels, only 1 required, other will be calculated.<br></p>
<p>separators (eg n1 n_1 n.1) are stripped and replaced<br></p>
<p><em>generic</em><br>
loads data for use generic use, outputs as list of 1 containing named data frame generic_data<br></p>
<p>use cont suffixes for file details: dir.cont (or dir), file.name.cont (or file.name), sheet.name,cont, range.name.cont)<br></p>
<p>format should be study, var or variable, variable names<br></p>
<p>optional gen.vars.keep = vector of variables to keep<br>
optional gen.vars.del = vector of variables to delete
</p>
<p>can be in wide or long format<br>
wide study, var, a1, a2..., b1, b2 ... <br>
long study, var, group, a, b, ....<br></p>
<p>group or g or grp required for long format<br></p>
<p>separators (eg n1 n_1 n.1) are stripped and replaced<br>
no data checking or other transformations take place<br></p>


<h3>Value</h3>

<p>list containing a named data frame containing data in suitable format for appropriate function as described in Details
</p>


<h3>Examples</h3>

<pre><code class="language-R"># examples of loading data for each function are given in the individual functions.
# Here is one- for pval_cont_fn():

pval_cont_data &lt;- load_clean(import= "no", file.cont = "SI_pvals_cont", pval_cont= "yes",
format.cont = "wide")$pval_cont_data


# to import an excel spreadsheet (modify using local path,
# file and sheet name, range, and format):

# get path for example files
path &lt;- system.file("extdata", "reappraised_examples.xlsx", package = "reappraised",
                    mustWork = TRUE)
# delete file name from path
path &lt;- sub("/[^/]+$", "", path)

# load data
pval_cont_data &lt;- load_clean(import= "yes", pval_cont = "yes", dir = path,
     file.name.cont = "reappraised_examples.xlsx", sheet.name.cont = "SI_pvals_cont",
     range.name.cont = "A1:O51", format.cont = "wide")$pval_cont_data

</code></pre>


</div>