<div class="container">

<table style="width: 100%;"><tr>
<td>shuffle_hierarchy</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Shuffle multi-column hierarchy of groups</h2>

<h3>Description</h3>

<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental"><img src="../help/figures/lifecycle-experimental.svg" alt="[Experimental]"></a>
</p>
<p>Shuffles a tree/hierarchy of groups, one column at a time.
The levels in the last ("leaf") column are shuffled first, then the second-last column, and so on.
Elements of the same group are ordered sequentially.
</p>


<h3>Usage</h3>

<pre><code class="language-R">shuffle_hierarchy(
  data,
  group_cols,
  cols_to_shuffle = group_cols,
  leaf_has_groups = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p><code>data.frame</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group_cols</code></td>
<td>
<p>Names of columns making up the group hierarchy.
The last column is the <em>leaf</em> and is shuffled first (if also in <code>`cols_to_shuffle`</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cols_to_shuffle</code></td>
<td>
<p>Names of columns to shuffle hierarchically.
By default, all the <code>`group_cols`</code> are shuffled.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>leaf_has_groups</code></td>
<td>
<p>Whether the leaf column contains groups or values. (Logical)
</p>
<p>When the elements are <em>group identifiers</em>, they are ordered sequentially and shuffled together.
</p>
<p>When the elements are <em>values</em>, they are simply shuffled.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The shuffled <code>data.frame</code> (<code>tibble</code>).
</p>


<h3>Author(s)</h3>

<p>Ludvig Renbo Olsen, <a href="mailto:r-pkgs@ludvigolsen.dk">r-pkgs@ludvigolsen.dk</a>
</p>


<h3>See Also</h3>

<p>Other rearrange functions: 
<code>center_max()</code>,
<code>center_min()</code>,
<code>closest_to()</code>,
<code>furthest_from()</code>,
<code>pair_extremes()</code>,
<code>position_max()</code>,
<code>position_min()</code>,
<code>rev_windows()</code>,
<code>roll_elements()</code>,
<code>triplet_extremes()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Attach packages
library(rearrr)
library(dplyr)

df &lt;- data.frame(
  'a' = rep(1:4, each = 4),
  'b' = rep(1:8, each = 2),
  'c' = 1:16
)

# Set seed for reproducibility
set.seed(2)

# Shuffle all columns
shuffle_hierarchy(df, group_cols = c('a', 'b', 'c'))

# Don't shuffle 'b' but keep grouping by it
# So 'c' will be shuffled within each group in 'b'
shuffle_hierarchy(
  data = df,
  group_cols = c('a', 'b', 'c'),
  cols_to_shuffle = c('a', 'c')
)

# Shuffle 'b' as if it's not a group column
# so elements are independent within their group
# (i.e. same-valued elements are not necessarily ordered sequentially)
shuffle_hierarchy(df, group_cols = c('a', 'b'), leaf_has_groups = FALSE)
</code></pre>


</div>