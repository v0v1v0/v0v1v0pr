<div class="container">

<table style="width: 100%;"><tr>
<td>transform</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Text transformation for OpenRefine project</h2>

<h3>Description</h3>

<p>The text transform functions allow users to pass arbitrary text transformations to a column in an existing OpenRefine project via an API query to <code style="white-space: pre;">⁠/command/core/apply-operations⁠</code> and the <code>core/text-transform</code> operation. Besides the generic <code>refine_transform()</code>, the package includes a series of transform functions that apply commonly used text operations. For more information on these functions see 'Details'.
</p>


<h3>Usage</h3>

<pre><code class="language-R">refine_transform(
  column_name,
  expression,
  mode = "row-based",
  on_error = "set-to-blank",
  project.name = NULL,
  project.id = NULL,
  verbose = FALSE,
  validate = TRUE,
  ...
)

refine_to_lower(
  column_name,
  mode = "row-based",
  on_error = "set-to-blank",
  project.name = NULL,
  project.id = NULL,
  verbose = FALSE,
  validate = TRUE,
  ...
)

refine_to_upper(
  column_name,
  mode = "row-based",
  on_error = "set-to-blank",
  project.name = NULL,
  project.id = NULL,
  verbose = FALSE,
  validate = TRUE,
  ...
)

refine_to_title(
  column_name,
  mode = "row-based",
  on_error = "set-to-blank",
  project.name = NULL,
  project.id = NULL,
  verbose = FALSE,
  validate = TRUE,
  ...
)

refine_to_null(
  column_name,
  mode = "row-based",
  on_error = "set-to-blank",
  project.name = NULL,
  project.id = NULL,
  verbose = FALSE,
  validate = TRUE,
  ...
)

refine_to_empty(
  column_name,
  mode = "row-based",
  on_error = "set-to-blank",
  project.name = NULL,
  project.id = NULL,
  verbose = FALSE,
  validate = TRUE,
  ...
)

refine_to_text(
  column_name,
  mode = "row-based",
  on_error = "set-to-blank",
  project.name = NULL,
  project.id = NULL,
  verbose = FALSE,
  validate = TRUE,
  ...
)

refine_to_number(
  column_name,
  mode = "row-based",
  on_error = "set-to-blank",
  project.name = NULL,
  project.id = NULL,
  verbose = FALSE,
  validate = TRUE,
  ...
)

refine_to_date(
  column_name,
  mode = "row-based",
  on_error = "set-to-blank",
  project.name = NULL,
  project.id = NULL,
  verbose = FALSE,
  validate = TRUE,
  ...
)

refine_trim_whitespace(
  column_name,
  mode = "row-based",
  on_error = "set-to-blank",
  project.name = NULL,
  project.id = NULL,
  verbose = FALSE,
  validate = TRUE,
  ...
)

refine_collapse_whitespace(
  column_name,
  mode = "row-based",
  on_error = "set-to-blank",
  project.name = NULL,
  project.id = NULL,
  verbose = FALSE,
  validate = TRUE,
  ...
)

refine_unescape_html(
  column_name,
  mode = "row-based",
  on_error = "set-to-blank",
  project.name = NULL,
  project.id = NULL,
  verbose = FALSE,
  validate = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>column_name</code></td>
<td>
<p>Name of the column on which text transformation should be performed</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>expression</code></td>
<td>
<p>Expression defining the text transformation to be performed</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mode</code></td>
<td>
<p>Mode of operation; must be one of <code>"row-based"</code> or <code>"record-based"</code>; default is <code>"row-based"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>on_error</code></td>
<td>
<p>Behavior if there is an error on new column creation; must be one of <code>"set-to-blank"</code>, <code>"keep-original"</code>, or <code>"store-error"</code>; default is <code>"set-to-blank"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>project.name</code></td>
<td>
<p>Name of project</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>project.id</code></td>
<td>
<p>Unique identifier for project</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Logical specifying whether or not query result should be printed; default is <code>FALSE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>validate</code></td>
<td>
<p>Logical as to whether or not the operation should validate parameters against existing data in project; default is <code>TRUE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional parameters to be inherited by <code>refine_path</code>; allows users to specify <code>host</code> and <code>port</code> arguments if the OpenRefine instance is running at a location other than <code style="white-space: pre;">⁠http://127.0.0.1:3333⁠</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>refine_transform()</code> function allows the user to pass arbitrary text transformations to a given column in an OpenRefine project. The package includes a set of functions that wrap <code>refine_transform()</code> to execute common transformations:
</p>

<ul>
<li> <p><code>refine_to_lower()</code>: Coerce text to lowercase
</p>
</li>
<li> <p><code>refine_to_upper()</code>: Coerce text to uppercase
</p>
</li>
<li> <p><code>refine_to_title()</code>: Coerce text to title case
</p>
</li>
<li> <p><code>refine_to_null()</code>: Set values to <code>NULL</code>
</p>
</li>
<li> <p><code>refine_to_empty()</code>: Set text values to empty string (<code>""</code>)
</p>
</li>
<li> <p><code>refine_to_text()</code>: Coerce value to string
</p>
</li>
<li> <p><code>refine_to_number()</code>: Coerce value to numeric
</p>
</li>
<li> <p><code>refine_to_date()</code>: Coerce value to date
</p>
</li>
<li> <p><code>refine_trim_whitespace()</code>: Remove leading and trailing whitespaces
</p>
</li>
<li> <p><code>refine_collapse_whitespace()</code>: Collapse consecutive whitespaces to single whitespace
</p>
</li>
<li> <p><code>refine_unescape_html()</code>: Unescape HTML in string
</p>
</li>
</ul>
<h3>Value</h3>

<p>Operates as a side-effect passing operations to the OpenRefine instance. However, if <code>verbose=TRUE</code> then the function will return an object of the class "response".
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
fp &lt;- system.file("extdata", "lateformeeting.csv", package = "rrefine")
refine_upload(fp, project.name = "lfm")

refine_add_column(new_column = "dotw",
                 base_column = "what day whas it",
                 value = "grel:value",
                 project.name = "lfm")

refine_export("lfm")$dotw
refine_to_lower("dotw", project.name = "lfm")
refine_export("lfm")$dotw
refine_to_upper("dotw", project.name = "lfm")
refine_export("lfm")$dotw
refine_to_title("dotw", project.name = "lfm")
refine_export("lfm")$dotw
refine_to_null("dotw", project.name = "lfm")
refine_export("lfm")$dotw
refine_remove_column("dotw", project.name = "lfm")

refine_add_column(new_column = "date",
                 base_column = "theDate",
                 value = "grel:value",
                 project.name = "lfm")

refine_export("lfm")$date
refine_to_date("date", project.name = "lfm")
refine_export("lfm")$date
refine_remove_column("date", project.name = "lfm")


## End(Not run)

</code></pre>


</div>