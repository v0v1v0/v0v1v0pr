<div class="container">

<table style="width: 100%;"><tr>
<td>rxtractogon</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Extract environmental data in a polygon using 'ERDDAP™' and 'rerddap'.</h2>

<h3>Description</h3>

<p><code>rxtractogon</code> uses the R program 'rerddap' to extract environmental data
from an 'ERDDAP™' server in a polygon through time.
</p>


<h3>Usage</h3>

<pre><code class="language-R">rxtractogon(
  dataInfo,
  parameter,
  xcoord = NULL,
  ycoord = NULL,
  zcoord = NULL,
  tcoord = NULL,
  xName = "longitude",
  yName = "latitude",
  zName = "altitude",
  tName = "time",
  verbose = FALSE,
  cache_remove = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dataInfo</code></td>
<td>
<p>- the return from an 'rerddap:info' call to an 'ERDDAP™' server</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parameter</code></td>
<td>
<p>- character string containing the name of the parameter to extract</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xcoord</code></td>
<td>
<p>- array giving longitudes (in decimal
degrees East, either 0-360 or -180 to 180) of polygon</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ycoord</code></td>
<td>
<p>-  array giving latitudes (in decimal
degrees N; -90 to 90)of polygon</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zcoord</code></td>
<td>
<p>-  a real number with the z-coordinate(usually altitude or depth)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tcoord</code></td>
<td>
<p>- 2-array of minimum and maximum times as 'YYYY-MM-DD'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xName</code></td>
<td>
<p>- character string with name of the xcoord in the 'ERDDAP™' dataset (default "longitude")</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yName</code></td>
<td>
<p>- character string with name of the ycoord in the 'ERDDAP™' dataset (default "latitude")</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zName</code></td>
<td>
<p>- character string with name of the zcoord in the 'ERDDAP™' dataset (default "altitude")</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tName</code></td>
<td>
<p>- character string with name of the tcoord in the 'ERDDAP™' dataset (default "time")</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>- logical variable (default FALSE) if the the URL request should be verbose</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cache_remove</code></td>
<td>
<p>- logical variable (default TRUE) whether to delete 'rerddap' cache</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>If successful a structure with data and dimensions
</p>

<ul>
<li>
<p> extract$data - the masked data array dimensioned (lon,lat,time)
</p>
</li>
<li>
<p> extract$varname - the name of the parameter extracted
</p>
</li>
<li>
<p> extract$datasetname - ERDDAP dataset name
</p>
</li>
<li>
<p> extract$longitude - the longitudes on some scale as request
</p>
</li>
<li>
<p> extract$latitude - the latitudes always going south to north
</p>
</li>
<li>
<p> extract$time - the times of the extracts
</p>
</li>
</ul>
<p>else an error string
</p>


<h3>Details</h3>

<p>rxtractogon extracts the data from the smallest bounding box that contains
the polygon, and then uses the function "point.in.polygon" from the "sp"
package to mask out the areas outside of the polygon.
rxtractogon only works with datasets defined
on a latitude and longitude grid.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## toy example to show use
## and keep execution time low
# dataInfo &lt;- rerddap::info('erdHadISST')
parameter &lt;- 'sst'
tcoord &lt;- c("2016-06-15")
xcoord &lt;- mbnms$Longitude[1:3]
ycoord &lt;- mbnms$Latitude[1:3]
# sanctSST &lt;- rxtractogon (dataInfo, parameter=parameter, xcoord = xcoord,
#                          ycoord = ycoord,  tcoord= tcoord)
#
## MBMS bathymetry example
xcoord &lt;- mbnms$Longitude
ycoord &lt;- mbnms$Latitude
dataInfo &lt;- rerddap::info('etopo180')
parameter = 'altitude'
xName &lt;- 'longitude'
yName &lt;- 'latitude'
# bathy &lt;- rxtractogon (dataInfo, parameter = parameter, xcoord = xcoord, ycoord = ycoord)
</code></pre>


</div>