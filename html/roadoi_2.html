<div class="container">

<table style="width: 100%;"><tr>
<td>oadoi_fetch</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Fetch open access status information and full-text links using Unpaywall</h2>

<h3>Description</h3>

<p>This is the main function to retrieve comprehensive open access status
information from Unpaywall data service. Please play nice with the API.
For each user, 100k calls per day are suggested. If you need to access
more data, there is also a data dump available.
For more info see <a href="https://unpaywall.org/products/snapshot">https://unpaywall.org/products/snapshot</a>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">oadoi_fetch(
  dois = NULL,
  email = Sys.getenv("roadoi_email"),
  .progress = "none",
  .flatten = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dois</code></td>
<td>
<p>character vector, search by a single DOI or many DOIs.
A rate limit of 100k requests per day is suggested. If you need to access
more data, request the data dump
<a href="https://unpaywall.org/dataset">https://unpaywall.org/dataset</a> instead.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>email</code></td>
<td>
<p>character vector, mandatory!
Unpaywall requires your email address,
so that they can track usage and notify you when something breaks.
Set email address in your '.Renviron' file with
the option
'roadoi_email' <code>options(roadoi_email = "najko.jahn@gmail.com")</code>.
You can open your '.Renviron' file calling 'file.edit("~/.Renviron")'.
Save the file and restart your R session. To stop sharing your email
when using rcrossref, delete it from your '.Renviron' file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.progress</code></td>
<td>
<p>Shows the <code>plyr</code>-style progress bar.
Options are "none", "text", "tk", "win", and "time".
See <code>create_progress_bar</code> for details
of each. By default, no progress bar is displayed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.flatten</code></td>
<td>
<p>Simplify open access evidence output. If 'TRUE' it
transforms the nested column oa_locations so that each open access
evidence variable has its own column and each row represents a
single full-text.
Following these basic principles of "Tidy Data" makes data analysis
and export as a spreadsheet more straightforward.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The result is a tibble with each row representing a publication.
Here are the returned columns and descriptions according to the API docu:
</p>

<table>
<tr>
<td style="text-align: left;">
 <code>doi</code>              </td>
<td style="text-align: left;"> DOI (always in lowercase). </td>
</tr>
<tr>
<td style="text-align: left;">
 <code>best_oa_location</code> </td>
<td style="text-align: left;"> list-column describing the best OA location.
 Algorithm prioritizes publisher hosted content (eg Hybrid or Gold),
 then prioritizes versions closer to the  version of record (PublishedVersion
 over AcceptedVersion), then more authoritative  repositories (PubMed Central
 over CiteSeerX). </td>
</tr>
<tr>
<td style="text-align: left;">
 <code>oa_locations</code>     </td>
<td style="text-align: left;"> list-column of all the OA locations. </td>
</tr>
<tr>
<td style="text-align: left;">
 <code>oa_locations_embargoed</code>  </td>
<td style="text-align: left;"> list-column of
 locations expected to be available in the future based on
  information like license metadata and journals'
  delayed OA policies </td>
</tr>
<tr>
<td style="text-align: left;">
 <code>data_standard</code>    </td>
<td style="text-align: left;"> Indicates the data collection approaches used
 for this resource. <code>1</code> mostly uses Crossref for hybrid detection.
 <code>2</code> uses a more comprehensive hybrid detection methods. </td>
</tr>
<tr>
<td style="text-align: left;">
 <code>is_oa</code>            </td>
<td style="text-align: left;"> Is there an OA copy (logical)? </td>
</tr>
<tr>
<td style="text-align: left;">
 <code>is_paratext</code>      </td>
<td style="text-align: left;"> Is the item an ancillary part of a journal,
 like a table of contents? See here for more information
 <a href="https://support.unpaywall.org/support/solutions/articles/44001894783">https://support.unpaywall.org/support/solutions/articles/44001894783</a>. </td>
</tr>
<tr>
<td style="text-align: left;">
 <code>genre</code>            </td>
<td style="text-align: left;"> Publication type </td>
</tr>
<tr>
<td style="text-align: left;">
 <code>oa_status</code>        </td>
<td style="text-align: left;"> Classifies OA resources by location
 and license terms as one of: gold, hybrid, bronze, green or closed.
 See here for more information
 <a href="https://support.unpaywall.org/support/solutions/articles/44001777288-what-do-the-types-of-oa-status-green-gold-hybrid-and-bronze-mean-">https://support.unpaywall.org/support/solutions/articles/44001777288-what-do-the-types-of-oa-status-green-gold-hybrid-and-bronze-mean-</a>. </td>
</tr>
<tr>
<td style="text-align: left;">
 <code>has_repository_copy</code> </td>
<td style="text-align: left;"> Is a full-text
 available in a repository? </td>
</tr>
<tr>
<td style="text-align: left;">
 <code>journal_is_oa</code>    </td>
<td style="text-align: left;"> Is the article published in a fully
 OA journal? </td>
</tr>
<tr>
<td style="text-align: left;">
 <code>journal_is_in_doaj</code> </td>
<td style="text-align: left;"> Is the journal listed in
  the Directory of Open Access Journals (DOAJ). </td>
</tr>
<tr>
<td style="text-align: left;">
 <code>journal_issns</code>    </td>
<td style="text-align: left;"> ISSNs, i.e. unique numbers to identify
 journals. </td>
</tr>
<tr>
<td style="text-align: left;">
 <code>journal_issn_l</code>    </td>
<td style="text-align: left;"> Linking ISSN. </td>
</tr>
<tr>
<td style="text-align: left;">
 <code>journal_name</code>     </td>
<td style="text-align: left;"> Journal title, not normalized. </td>
</tr>
<tr>
<td style="text-align: left;">
 <code>publisher</code>        </td>
<td style="text-align: left;"> Publisher, not normalized. </td>
</tr>
<tr>
<td style="text-align: left;">
 <code>published_date</code>   </td>
<td style="text-align: left;"> Date published </td>
</tr>
<tr>
<td style="text-align: left;">
 <code>year</code>             </td>
<td style="text-align: left;"> Year published. </td>
</tr>
<tr>
<td style="text-align: left;">
 <code>title</code>            </td>
<td style="text-align: left;"> Publication title. </td>
</tr>
<tr>
<td style="text-align: left;">
 <code>updated_resource</code> </td>
<td style="text-align: left;"> Time when the data for this resource was last updated. </td>
</tr>
<tr>
<td style="text-align: left;">
 <code>authors</code>          </td>
<td style="text-align: left;"> Lists author information (<code>family</code> name, <code>given</code>
 name and author role <code>sequence</code>), if available. </td>
</tr>
<tr>
<td style="text-align: left;">
</td>
</tr>
</table>
<p>The columns  <code>best_oa_location</code>. <code>oa_locations</code> and
<code>oa_locations_embargoed</code> are list-columns that contain
useful metadata about the OA sources found by Unpaywall.
</p>
<p>If <code>.flatten = TRUE</code> the list-column <code>oa_locations</code> will be
restructured in a long format where each OA fulltext is represented by
one row.
</p>
<p>These are:
</p>

<table>
<tr>
<td style="text-align: left;">
 <code>endpoint_id</code>     </td>
<td style="text-align: left;"> Unique repository identifier. </td>
</tr>
<tr>
<td style="text-align: left;">
 <code>evidence</code>        </td>
<td style="text-align: left;"> How the OA location was found and is characterized
  by Unpaywall? </td>
</tr>
<tr>
<td style="text-align: left;">
 <code>host_type</code>       </td>
<td style="text-align: left;"> OA full-text provided by <code>publisher</code> or
  <code>repository</code>. </td>
</tr>
<tr>
<td style="text-align: left;">
 <code>is_best</code>         </td>
<td style="text-align: left;"> Is this location the <code>best_oa_location</code> for its resource? </td>
</tr>
<tr>
<td style="text-align: left;">
 <code>license</code>         </td>
<td style="text-align: left;"> The license under which this copy is published,
  e.g. Creative Commons license. </td>
</tr>
<tr>
<td style="text-align: left;">
 <code>pmh_id</code>          </td>
<td style="text-align: left;"> OAI-PMH endpoint where we found this location. </td>
</tr>
<tr>
<td style="text-align: left;">
 <code>repository institution</code> </td>
<td style="text-align: left;"> Hosting institution of the repository. </td>
</tr>
<tr>
<td style="text-align: left;">
 <code>updated</code>         </td>
<td style="text-align: left;"> Time when the data for this location was last updated. </td>
</tr>
<tr>
<td style="text-align: left;">
 <code>url</code>             </td>
<td style="text-align: left;"> The <code>url_for_pdf</code> if there is one; otherwise landing page URL. </td>
</tr>
<tr>
<td style="text-align: left;">
 <code>url_for_landing_page</code> </td>
<td style="text-align: left;"> The URL for a landing page describing this OA copy. </td>
</tr>
<tr>
<td style="text-align: left;">
 <code>url_for_pdf</code>     </td>
<td style="text-align: left;"> The URL with a PDF version of this OA copy. </td>
</tr>
<tr>
<td style="text-align: left;">
 <code>version</code>        </td>
<td style="text-align: left;"> The content version accessible at this location
  following the DRIVER 2.0 Guidelines
 (<a href="https://wiki.surfnet.nl/display/DRIVERguidelines/DRIVER-VERSION+Mappings">https://wiki.surfnet.nl/display/DRIVERguidelines/DRIVER-VERSION+Mappings</a>
 </td>
</tr>
<tr>
<td style="text-align: left;">
</td>
</tr>
</table>
<p>Note that Unpaywall schema is only informally described.
Check also <a href="https://unpaywall.org/data-format">https://unpaywall.org/data-format</a>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
oadoi_fetch("10.1038/nature12373", email = "name@example.com")
oadoi_fetch(dois = c("10.1016/j.jbiotec.2010.07.030",
"10.1186/1471-2164-11-245"), email = "name@example.com")
# flatten OA evidence
roadoi::oadoi_fetch(dois = c("10.1186/s12864-016-2566-9",
                            "10.1103/physreve.88.012814",
                            "10.1093/reseval/rvaa038"),
                   email = "najko.jahn@gmail.com", .flatten = TRUE)


## End(Not run)

</code></pre>


</div>