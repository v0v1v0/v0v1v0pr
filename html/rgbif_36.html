<div class="container">

<table style="width: 100%;"><tr>
<td>downloads</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Downloads interface</h2>

<h3>Description</h3>

<p>GBIF provides two ways to get occurrence data: through the
<code style="white-space: pre;">⁠/occurrence/search⁠</code> route (see <code>occ_search()</code>),
or via the <code style="white-space: pre;">⁠/occurrence/download⁠</code> route (many functions, see below).
<code>occ_search()</code> is more appropriate for smaller data, while
<code style="white-space: pre;">⁠occ_download*()⁠</code> functions are more appropriate for larger data requests.
</p>


<h3>Settings</h3>

<p>You'll use <code>occ_download()</code> to kick off a download. You'll need to
give that function settings from your GBIF profile: your user name, your
password, and your email. These three settings are required to use the
function. You can specify them in one of three ways:
</p>

<ul>
<li>
<p> Pass them to <code>occ_download</code> as parameters
</p>
</li>
<li>
<p> Use R options: As options either in the current R session using
the <code>options()</code> function, or by setting them in your <code>.Rprofile</code> file, after
which point they'll be read in automatically
</p>
</li>
<li>
<p> Use environment variables: As env vars either in the current R session using
the <code>Sys.setenv()</code> function, or by setting them in your
<code>.Renviron</code>/<code>.bash_profile</code> or similar files, after which point they'll be read
in automatically
</p>
</li>
</ul>
<h3>BEWARE</h3>

<p>You can not perform that many downloads, so plan wisely.
See <em>Rate limiting</em> below.
</p>


<h3>Rate limiting</h3>

<p>If you try to launch too many downloads, you will receive an 420
"Enhance Your Calm" response. If there is less then 100 in total
across all GBIF users, then you can have 3 running at a time. If
there are more than that, then each user is limited to 1 only.
These numbers are subject to change.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>occ_download()</code> - Start a download
</p>
</li>
<li> <p><code>occ_download_prep()</code> - Prepare a download request
</p>
</li>
<li> <p><code>occ_download_queue()</code> - Start many downloads in a queue
</p>
</li>
<li> <p><code>occ_download_cached()</code> - Check for downloads already in your GBIF account
</p>
</li>
<li> <p><code>occ_download_wait()</code> - Re-run <code>occ_download_meta()</code> until ready
</p>
</li>
<li> <p><code>occ_download_meta()</code> - Get metadata progress on a single download
</p>
</li>
<li> <p><code>occ_download_list()</code> - List your downloads
</p>
</li>
<li> <p><code>occ_download_cancel()</code> - Cancel a download
</p>
</li>
<li> <p><code>occ_download_cancel_staged()</code> - Cancels any jobs with status <code>RUNNING</code>
or <code>PREPARING</code>
</p>
</li>
<li> <p><code>occ_download_get()</code> - Retrieve a download
</p>
</li>
<li> <p><code>occ_download_import()</code> - Import a download from local file system
</p>
</li>
<li> <p><code>occ_download_datasets()</code> - List datasets for a download
</p>
</li>
<li> <p><code>occ_download_dataset_activity()</code> - Lists the downloads activity
of a dataset
</p>
</li>
</ul>
<p>Download query composer methods:
</p>
<p>See download_predicate_dsl
</p>


<h3>Query length</h3>

<p>GBIF has a limit of 12,000 characters for a download query. This means
that you can have a pretty long query, but at some point it may lead to an
error on GBIF's side and you'll have to split your query into a few.
</p>


<h3>Download status</h3>

<p>The following statuses can be found with any download:
</p>

<ul>
<li>
<p> PREPARING: just submitted by user and awaiting processing (typically only
a few seconds)
</p>
</li>
<li>
<p> RUNNING: being created (takes typically 1-15 minutes)
</p>
</li>
<li>
<p> FAILED: something unexpected went wrong
</p>
</li>
<li>
<p> KILLED: user decided to abort the job while it was in PREPARING or RUNNING
phase
</p>
</li>
<li>
<p> SUCCEEDED: The download was created and the user was informed
</p>
</li>
<li>
<p> FILE_ERASED: The download was deleted according to the retention policy,
see https://www.gbif.org/faq?question=for-how-long-will-does-gbif-store-downloads
</p>
</li>
</ul>
</div>