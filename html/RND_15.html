<div class="container">

<table style="width: 100%;"><tr>
<td>extract.mln.density</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Extract Mixture of Lognormal Densities</h2>

<h3>Description</h3>

<p><code>mln.extraction</code> extracts the parameters of the mixture of two lognormals densities.
</p>


<h3>Usage</h3>

<pre><code class="language-R">extract.mln.density(initial.values = c(NA, NA, NA, NA, NA), r, y, te, s0, 
  market.calls, call.strikes, call.weights = 1, market.puts, put.strikes, 
  put.weights = 1, lambda = 1, hessian.flag = F, cl = list(maxit = 10000))
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>initial.values</code></td>
<td>
<p>initial values for the optimization</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>r</code></td>
<td>
<p>risk free rate</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>dividend yield</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>te</code></td>
<td>
<p>time to expiration</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>s0</code></td>
<td>
<p>current asset value</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>market.calls</code></td>
<td>
<p>market calls (most expensive to cheapest)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>call.strikes</code></td>
<td>
<p>strikes for the calls (smallest to largest)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>call.weights</code></td>
<td>
<p>weights to be used for calls</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>market.puts</code></td>
<td>
<p>market calls (cheapest to most expensive)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>put.strikes</code></td>
<td>
<p>strikes for the puts (smallest to largest)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>put.weights</code></td>
<td>
<p>weights to be used for puts</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambda</code></td>
<td>
<p>Penalty parameter to enforce the martingale condition</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hessian.flag</code></td>
<td>
<p>if F, no hessian is produced</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cl</code></td>
<td>
<p>list of parameter values to be passed to the optimization function</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>mln is the density f(x) = alpha.1 * g(x) + (1 - alpha.1) * h(x), where g and h are densities of two lognormals with
parameters (mean.log.1, sdlog.1) and (mean.log.2, sdlog.2) respectively.
</p>


<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>alpha.1</code></td>
<td>
<p>extracted proportion of the first lognormal.  Second one is 1 - <code>alpha.1</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>meanlog.1</code></td>
<td>
<p>extracted mean of the log of the first lognormal</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>meanlog.2</code></td>
<td>
<p>extracted mean of the log of the second lognormal</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sdlog.1</code></td>
<td>
<p>extracted standard deviation of the log of the first lognormal</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sdlog.2</code></td>
<td>
<p>extracted standard deviation of the log of the second lognormal</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>converge.result </code></td>
<td>
<p>Did the result converge?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hessian</code></td>
<td>
<p> Hessian matrix</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Kam Hamidieh</p>


<h3>References</h3>

<p>F. Gianluca and A. Roncoroni (2008)
<em>Implementing Models in Quantitative Finance: Methods and Cases</em>
</p>
<p>B. Bahra (1996):
Probability distribution of future asset prices implied by option prices.
<em>Bank of England Quarterly Bulletin</em>, August 1996, 299-311
</p>
<p>P. Soderlind and L.E.O. Svensson (1997)
New techniques to extract market expectations from financial instruments.
<em>Journal of Monetary Economics</em>, 40, 383-4
</p>
<p>E. Jondeau and S. Poon and M. Rockinger (2007):
<em>Financial Modeling Under Non-Gaussian Distributions</em> 
Springer-Verlag, London
</p>


<h3>Examples</h3>

<pre><code class="language-R">
#
# Create some calls and puts based on mln and 
# see if we can extract the correct values.
#


r         = 0.05
y         = 0.02
te        = 60/365
meanlog.1 = 6.8
meanlog.2 = 6.95
sdlog.1   = 0.065
sdlog.2   = 0.055
alpha.1   = 0.4


call.strikes = seq(from = 800, to = 1200, by = 10)
market.calls = price.mln.option(r = r, y = y, te = te, k = call.strikes, 
               alpha.1 = alpha.1, meanlog.1 = meanlog.1, meanlog.2 = meanlog.2, 
                                sdlog.1 = sdlog.1, sdlog.2 = sdlog.2)$call

s0 = price.mln.option(r = r, y = y, te = te, k = call.strikes, alpha.1 = alpha.1, 
                      meanlog.1 = meanlog.1, meanlog.2 = meanlog.2, 
                      sdlog.1 = sdlog.1, sdlog.2 = sdlog.2)$s0
s0
put.strikes  = seq(from = 805, to = 1200, by = 10)
market.puts  = price.mln.option(r = r, y = y, te = te, k = put.strikes, 
                                alpha.1 = alpha.1, meanlog.1 = meanlog.1, 
                                meanlog.2 = meanlog.2, sdlog.1 = sdlog.1, 
                                sdlog.2 = sdlog.2)$put

###
### The extracted values should be close to the actual values.
###

extract.mln.density(r = r, y = y, te = te, s0 = s0, market.calls = market.calls, 
               call.strikes = call.strikes, market.puts = market.puts, 
               put.strikes = put.strikes, lambda = 1, hessian.flag = FALSE)


</code></pre>


</div>