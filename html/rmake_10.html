<div class="container">

<table style="width: 100%;"><tr>
<td>makefile</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate Makefile from given list of rules (<code>job</code>).</h2>

<h3>Description</h3>

<p>In the (GNU) <code>make</code> jargon, <em>rule</em> is a sequence of commands to build a result. In this package, rule
should be understood similarly: It is a command or a sequence of command that optionally produces some
files and depends on some other files (such as data files, scripts) or other rules. Moreover, a rule
contain a command for cleanup, i.e. for removal of generated files.
</p>


<h3>Usage</h3>

<pre><code class="language-R">makefile(job = list(), fileName = NULL, makeScript = "Makefile.R",
  vars = NULL, all = TRUE, tasks = TRUE, clean = TRUE,
  makefile = TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>job</code></td>
<td>
<p>A list of rules (i.e. of instances of the S3 class <code>rmake.rule</code> - see <code>rule()</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fileName</code></td>
<td>
<p>A file to write to. If <code>NULL</code>, the result is returned as a character vector instead of
writing to a file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>makeScript</code></td>
<td>
<p>A name of the file that calls this function (in order to generate
the <code>makefile</code> rule)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vars</code></td>
<td>
<p>A named character vector of shell variables that will be declared in the resulting Makefile
(additionally to <code>[defaultVars]</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>all</code></td>
<td>
<p><code>TRUE</code> if the <code>all</code> rule should be automatically created and added: created <code>all</code> rule
has dependencies to all the other rules, which causes that everything is built if <code>make all</code> is executed
in shell's command line.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tasks</code></td>
<td>
<p><code>TRUE</code> if "task" rules should be automatically created and added â€“ see <code>rule()</code> for
more details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>clean</code></td>
<td>
<p><code>TRUE</code> if the <code>clean</code> rule should be automatically created and added</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>makefile</code></td>
<td>
<p><code>TRUE</code> if the <code>Makefile</code> rule should be automatically created and added: this rule
causes that any change in the R script - that generates the <code>Makefile</code> (i.e. that calls <code>makefile()</code>) -
issues the re-generation of the Makefile in the beginning of any build.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>makefile()</code> function takes a list of rules (see <code>rule()</code>) and generates a <code>Makefile</code> from them.
Additionally, <code>all</code> and <code>clean</code> rules are optionally generated too, which can be executed from shell
by issuing <code>make all</code> or <code>make clean</code> command, respectively, in order to build everything or erase all
generated files.
</p>
<p>If there is a need to group some rules into a group, it can be done either via dependencies or by using
the <code>task</code> mechanism. Each rule may get assigned one or more tasks (see <code>task</code> in <code>rule()</code>). Each
task is then created as a standalone rule depending on assigned rules. That way, executing <code>make task_name</code>
will build all rules with assigned task <code>task_name</code>. By default, all rules are assigned to task <code>all</code>,
which allows <code>make all</code> to build everything.
</p>


<h3>Value</h3>

<p>If <code>fileName</code> is <code>NULL</code>, the function returns a character vector with the contents of the
Makefile. Instead, the content is written to the given <code>fileName</code>.
</p>


<h3>Author(s)</h3>

<p>Michal Burda
</p>


<h3>See Also</h3>

<p><code>rule()</code>, <code>rmakeSkeleton()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># create some jobs
job &lt;- list(
    rRule('dataset.rds', 'preprocess.R', 'dataset.csv'),
    markdownRule('report.pdf', 'report.Rmd', 'dataset.rds'),
    markdownRule('details.pdf', 'details.Rmd', 'dataset.rds'))

# generate Makefile (output as a character vector)
makefile(job)

# generate to file
tmp &lt;- tempdir()
makefile(job, file.path(tmp, "Makefile"))
</code></pre>


</div>