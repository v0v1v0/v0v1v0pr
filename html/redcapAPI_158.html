<div class="container">

<table style="width: 100%;"><tr>
<td>importFileToRecord</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Import a File With Option to Create A Record to Receive the File</h2>

<h3>Description</h3>

<p>There are times when the user may desire to create a record
and import a file as part of a single action. For example, a study
consent form may have been collected and needs to be stored with the
data of the new study participant. <code>importFileToRecord</code> extends
<code>importFiles</code> to allow the concurrent creation of the record in which
the file will be stored.
</p>


<h3>Usage</h3>

<pre><code class="language-R">importFileToRecord(
  rcon,
  file,
  record = NULL,
  field,
  event,
  overwrite = TRUE,
  repeat_instance = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p><code>character(1)</code>. The file path to the file to be imported.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>record</code></td>
<td>
<p><code>character(1)</code> or <code>integerish(1)</code> or <code>NULL</code>. The record ID in
which the desired file is stored. When <code>NULL</code>, an attempt will be made to
create a new record for the file.  See 'Details'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>field</code></td>
<td>
<p><code>character(1)</code>. The field name in which the file is stored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>event</code></td>
<td>
<p><code>character(1)</code> or <code>NULL</code>. The event name for the file.
This applies only to longitudinal projects.  If the event is not
supplied for a longitudinal project, the API will return an error message</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>overwrite</code></td>
<td>
<p><code>logical(1)</code>.  When <code>FALSE</code>, the function checks
if a file already exists for that record.  If a file exists, the function
terminates to prevent overwriting.  When <code>TRUE</code>, no additional
check is performed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>repeat_instance</code></td>
<td>
<p><code>integerish(1)</code> or <code>NULL</code>. The repeat instance number of
the repeating event or the repeating instrument. When available in your
instance of REDCap, and passed as <code>NULL</code>, the API will assume a value of 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The behavior of <code>importFileToRecord</code> depends on
</p>

<ol>
<li>
<p> whether record auto numbering has been enabled in the project,
</p>
</li>
<li>
<p> if the record is specified by the user
</p>
</li>
<li>
<p> if the record specified by the user exists.
</p>
</li>
</ol>
<p>The following table details the actions taken based on these conditions.
(<code>force_auto_number</code> is an argument to <code>importRecords()</code>).</p>

<table>
<tr>
<td style="text-align: left;">
   Autonumbering enabled </td>
<td style="text-align: left;"> <code>record</code> </td>
<td style="text-align: left;"> Record Exists </td>
<td style="text-align: left;"> Action </td>
</tr>
<tr>
<td style="text-align: left;">
   Yes </td>
<td style="text-align: left;"> <code>NULL</code> </td>
<td style="text-align: left;"> No </td>
<td style="text-align: left;"> Create a new record (using <code>force_auto_number = TRUE</code>) and import the file to the new record </td>
</tr>
<tr>
<td style="text-align: left;">
   Yes </td>
<td style="text-align: left;"> Specified </td>
<td style="text-align: left;"> Yes </td>
<td style="text-align: left;"> Import the file to the existing record </td>
</tr>
<tr>
<td style="text-align: left;">
   Yes </td>
<td style="text-align: left;"> Specified </td>
<td style="text-align: left;"> No </td>
<td style="text-align: left;"> Create a new record (using <code>force_auto_number = TRUE</code>)and import the file to the new record </td>
</tr>
<tr>
<td style="text-align: left;">
   No </td>
<td style="text-align: left;"> <code>NULL</code> </td>
<td style="text-align: left;"> No </td>
<td style="text-align: left;"> Error: record must be provided when auto numbering is not enabled </td>
</tr>
<tr>
<td style="text-align: left;">
   No </td>
<td style="text-align: left;"> Specified </td>
<td style="text-align: left;"> Yes </td>
<td style="text-align: left;"> Import the file to the existing record </td>
</tr>
<tr>
<td style="text-align: left;">
   No </td>
<td style="text-align: left;"> Specified </td>
<td style="text-align: left;"> No </td>
<td style="text-align: left;"> Create the record (using <code>force_auto_number = FALSE</code>) and import the file to the new record. </td>
</tr>
<tr>
<td style="text-align: left;">
</td>
</tr>
</table>
<h3>See Also</h3>

<p><code>importFiles()</code>,<br><code>importRecords()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())

importFileToRecord(rcon,
                   file = "file_to_upload.txt" 
                   record = NULL, 
                   field = "file_upload_test")

## End(Not run)
  
</code></pre>


</div>