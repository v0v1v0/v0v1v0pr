<div class="container">

<table style="width: 100%;"><tr>
<td>getRtopParams</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2> Setting parameters for the intamap package</h2>

<h3>Description</h3>

<p> This function sets a range of the parameters for the intamap package, 
to be included in the object described in <code>rtop-package</code></p>


<h3>Usage</h3>

<pre><code class="language-R">getRtopParams(params,newPar, observations, formulaString, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>params</code></td>
<td>
<p>An existing set of parameters for the interpolation process, 
of class <br><code>intamapParams</code> or a list of parameters for modification
of the default parameters</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>newPar</code></td>
<td>
<p>A <code>list</code> of parameters for updating <code>params</code> or for
modification of the default parameters. 
Possible parameters with their defaults are given below</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>observations</code></td>
<td>
<p><code>SpatialPolygonsDataFrame</code> with observations,
used for setting some of the default parameters</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>formulaString</code></td>
<td>
<p>formula that defines the dependent variable as a linear model 
of independent variables, see e.g. <code>createRtopObject</code> for more details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Individual parameters for updating <code>params</code> or for
modification of the default parameters.
Possible parameters with their defaults are given below 
</p>

<dl>
<dt>model = "Ex1"</dt>
<dd>
<p> - variogram model type. Currently the following models are implemented:
</p>

<dl>
<dt>Exp</dt>
<dd>
<p> - Exponential model</p>
</dd>
<dt>Ex1</dt>
<dd>
<p> - Multiplication of a modified exponential and fractal model, 
the same model as used in Skoien et al(2006).</p>
</dd>
<dt>Gau</dt>
<dd>
<p> - Gaussian model</p>
</dd>
<dt>Ga1</dt>
<dd>
<p> - Multiplication of gaussian and fractal model</p>
</dd>
<dt>Sph</dt>
<dd>
<p> - Spherical model</p>
</dd>
<dt>Sp1</dt>
<dd>
<p> - Multiplication of spherical and fractal model</p>
</dd>
<dt>Fra</dt>
<dd>
<p> - Fractal model</p>
</dd>
</dl>
</dd>
<dt>parInit</dt>
<dd>
<p> - the initial parameters and the limits of the variogram model to be fitted,
given as a matrix with three columns, where the first column is the 
lower limit, the second column is the upper limit and the third column
are starting values.</p>
</dd>
<dt>nugget = FALSE</dt>
<dd>
<p> - logical; if TRUE, nugget effect should be estimated</p>
</dd>
<dt>unc = TRUE</dt>
<dd>
<p> - logical; if TRUE the variance of observations are in column <code>unc</code></p>
</dd>
<dt>rresol = 100</dt>
<dd>
<p> - minimum number of discretization points in each area</p>
</dd>  
<dt>hresol = 5</dt>
<dd>
<p> - number of discretization points in one direction for elements in binned variograms</p>
</dd>
<dt>cloud = FALSE</dt>
<dd>
<p> - logical; if TRUE use the cloud variogram for variogram fitting</p>
</dd>
<dt>amul = 1</dt>
<dd>
<p> - defines the number of areal bins within one order of magnitude. Numbers between 1 and 3 
are possible, as this parameter refers to the <code>axp</code> parameter of
<code>axTicks</code>.</p>
</dd>
<dt>dmul = 3</dt>
<dd>
<p> - defines the number of distance bins within one order of magnitude. Numbers between 1 and 3 
are possible, as this parameter refers to the <code>axp</code> parameter of
<code>axTicks</code>.</p>
</dd>
<dt>fit.method = 9</dt>
<dd>
<p> - defines the type of Least Square method for fitting of variogram. 
The methods 1-7 correspond to the similar methods in <code>fit.variogram</code> of <code>gstat</code>.
</p>

<dl>
<dt>1</dt>
<dd>
<p> - weighted least squares with number of pairs per bin: <br> 
err = n * (yobs-ymod)^2</p>
</dd>
<dt>2</dt>
<dd>
<p> - weighted least squares difference according to Cressie (1985): <br>
err2 = abs(yobs/ymod-1)</p>
</dd>
<dt>6</dt>
<dd>
<p> - ordinary least squares difference: err = (yobs-ymod)^2</p>
</dd>
<dt>7</dt>
<dd>
<p> - similar to default of gstat, where higher weights are given to shorter distances err = n/h^2 * (yobs-mod)^2</p>
</dd>
<dt>8</dt>
<dd>
<p> - Opposite of weighted least squares difference according to Cressie (1985): err3=abs(ymod/yobs-1)</p>
</dd>
<dt>9</dt>
<dd>
<p> - neutral WLS-method - err = min(err2,err3)</p>
</dd>
</dl>
</dd>
<dt>gDistEst = FALSE</dt>
<dd>
<p> - use geostatistical distance when fitting variograms</p>
</dd>
<dt>gDistPred = FALSE</dt>
<dd>
<p> - use geostatistical distance for semivariogram matrices</p>
</dd>
<dt>gDist</dt>
<dd>
<p> - parameter to set jointly <code>gDistEst = gDistPred = gDist</code></p>
</dd>
<dt>nmax = 10</dt>
<dd>
<p>for local kriging: the number of nearest observations that
should be used for a kriging prediction or simulation, where
nearest is defined in terms of the space of the spatial locations.
By default, 10 observations are used.</p>
</dd>
<dt>maxdist = Inf</dt>
<dd>
<p> - for local kriging: only observations within a distance 
of <code>maxdist</code> from the prediction location are used for prediction 
or simulation; if combined with nmax, both criteria apply </p>
</dd>
<dt>hstype = "regular"</dt>
<dd>
<p> - sampling type for binned variograms</p>
</dd>
<dt>rstype = "rtop"</dt>
<dd>
<p> - sampling type for the elements, see also <code>rtopDisc</code></p>
</dd>
<dt>nclus = 1</dt>
<dd>
<p>- number of CPUs to use if parallel processing is wanted; nclus = 1 means
no parallelization</p>
</dd>
<dt>cnAreas = 100</dt>
<dd>
<p>- limit whether parallel processing should be applied; the minimum number
of areas in <code>varMat</code>, and also controlling when to use parallel 
processing in
<code>rtopDisc</code>, when <br><code>nAreas*params$rresol/100 &gt; cnAreas</code> </p>
</dd>
<dt>clusType = NULL</dt>
<dd>
<p>- the cluster type to be started for parallel processing; uses the default 
type of the system when clusType = NULL</p>
</dd>
<dt>outfile = NULL</dt>
<dd>
<p>file where output can be printed during parallel execution</p>
</dd>
<dt>varClean = FALSE</dt>
<dd>
<p>logical; if TRUE it will remove highly correlated areas from the covariance matrix during simulation </p>
</dd>
<dt>wlim = 1.5</dt>
<dd>
<p> - an upper limit for the norm of the weights in kriging, see <code>rtopKrige</code></p>
</dd>
<dt>wlimMethod = "all"</dt>
<dd>
<p>which method to use for reducing the norm of the weights if necessary. Either "all", which modifies all weights equally or "neg" which reduces negative weights and large weights more than the smallest weights </p>
</dd>
<dt>singularSolve</dt>
<dd>
<p> - logical; When TRUE, the kriging function will attempt to solve singular kriging matrices by removing catchments that have the same correlations. This will usually happen when two catchments are almost overlapping, and they are discretized with the same points. See also <code>rtopKrige</code>.</p>
</dd>
<dt>cv = FALSE</dt>
<dd>
<p> - logical; for cross-validation of observations</p>
</dd>
<dt>debug.level = 1</dt>
<dd>
<p> - used in some functions for giving additional output. See 
individual functions for more information.</p>
</dd>
<dt>partialOverlap = FALSE</dt>
<dd>
<p>whether to work with partially overlapping areas</p>
</dd>
<dt>olim = 1e-4</dt>
<dd>
<p>smallest overlapping area to be used for partial overlap, relative to the smallest of the areas</p>
</dd>
<dt>nclus = 1</dt>
<dd>
<p>option to use parallel processing, nclus &gt; 1 defines the number of workers to be started</p>
</dd>
<dt>clusType = NA</dt>
<dd>
<p>which cluster type to start if nclus &gt; 1; the default is used if nclusType = NA </p>
</dd>
<dt>cnAreas = 200</dt>
<dd>
<p>The minimum number of observations or observations plus predictions allowing parallelization in
the creation of the covariance matrix</p>
</dd>
<dt>cDlim = 1e6</dt>
<dd>
<p>The minimum number of discretization points for allowing parallelization in the discretization process</p>
</dd>
<dt>observations</dt>
<dd>
<p> - used for initial values of parameters if supplied</p>
</dd>
<dt>formulaString</dt>
<dd>
<p> - used for initial values of parameters if supplied</p>
</dd>
</dl>
</td>
</tr>
</table>
<h3>Value</h3>

 
<p>A list of the parameters with class <code>rtopParams</code> to be included in the 
<code>object</code> described in rtop-package</p>


<h3>Note</h3>

<p>This function will mainly be called by <code>createRtopObject</code>, but 
can also be called by the user to create a parameter set or update an 
existing parameter set. If none of the arguments is a list of class
<code>rtopParams</code>, the function will assume that the argument(s) are
modifications to the default set of parameters. The function can also be called
by other functions in the rtop-package if the users chooses not to work with
an object of class <code>rtop</code>.
</p>
<p>If the function is called with two lists of parameters (but the first one is
not of class <code>rtopParams</code>) they are both seen as modifications to the 
default parameter set. If they share some parameters, the parameter values from
the second list will be applied.
</p>
<p>Parallel processing has been included for some of the functions. The default is no 
parallel procesing, and the package also attempts to decide whether it is sensible to 
start a set of clusters and distribute jobs to them based on the size of the job. 
The default limit might not be the best for every system.
</p>


<h3>Author(s)</h3>

<p> Jon Olav Skoien </p>


<h3>References</h3>

 
<p>Cressie, N. 1985. Fitting variogram models by weighted least squares. Mathematical Geology, 17 (5), 563-586
</p>
<p>Skoien J. O., R. Merz, and G. Bloschl. Top-kriging - geostatistics on stream networks.
Hydrology and Earth System Sciences, 10:277-287, 2006
</p>
<p>Skoien, J. O., Bloschl, G., Laaha, G., Pebesma, E., Parajka, J., Viglione, A., 2014. Rtop: An R package for interpolation of data with a variable spatial support, with an example from river networks. Computers &amp; Geosciences, 67.
</p>


<h3>See Also</h3>

<p><code>createRtopObject</code> and <code>rtop-package</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Create a new set of intamapParameters, with default parameters:
params = getRtopParams()
# Make modifications to the default list of parameters
params = getRtopParams(newPar = list(gDist = TRUE, nugget = FALSE))
# Make modifications to an existing list of parameters
params = getRtopParams(params = params, newPar = list(gDist = TRUE,
         nugget = FALSE))
</code></pre>


</div>