<div class="container">

<table style="width: 100%;"><tr>
<td>promptUsage</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Generate usage text for functions and methods

</h2>

<h3>Description</h3>

<p>Generates usage text for a function, S3 method or S4 method.  The text
is suitably formatted for inclusion in the usage section of Rd
documentation.
</p>


<h3>Usage</h3>

<pre><code class="language-R">get_usage(object, name = NULL, force.function = FALSE, ...,
          S3class = "", S4sig = "", infix = FALSE, fu = TRUE,
          out.format = "text")

promptUsage(..., usage)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>a function object or a character name of one, can be
anonymous function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p>the name of a function, a string.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>force.function</code></td>
<td>
<p>enforce looking for a function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>S3class</code></td>
<td>
<p>the S3 class of the function, a character vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>out.format</code></td>
<td>
<p>if "<code style="white-space: pre;">⁠text⁠</code>", return the result as a character
vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>S4sig</code></td>
<td>
<p>(the signature of an S4 method, as used in Rd macro
<code style="white-space: pre;">⁠\S4method⁠</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>infix</code></td>
<td>
<p>if TRUE the function is an infix operator.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fu</code></td>
<td>
<p>if TRUE the object is a function, otherwise it is something
else (e.g. a variable or a constant like <code>pi</code> and <code>Inf</code>).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>usage</code></td>
<td>
<p>an usage object, see Details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>

<p>for <code>promptUsage</code>, arguments to be passed on to
<code>get_usage</code>; for <code>get_usage</code>, currently not used.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>get_usage()</code> takes a function object, or the name of one, and
creates text suitable for inclusion in the usage section of Rd
documentation.  The usage is generated from the function object.  When
in interactive <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> session, use <code>cat()</code> to print the result for
copying and pasting into Rd documentation or saving to a file
(otherwise, if the usage text contains backslashes, they may appear
duplicated).  Long text is wrapped on two or more lines. For example,
</p>
<pre>cat(get_usage(lm))
##: lm(formula, data, subset, weights, na.action, method = "qr", 
##:    model = TRUE, x = FALSE, y = FALSE, qr = TRUE, singular.ok = TRUE, 
##:    contrasts = NULL, offset, \dots)
</pre>

<p>Argument <code>"name"</code> can be used to specify a print name for the function.
This is most often needed for S3 methods. Compare
</p>
<pre>cat(get_usage(summary.lm))
##: summary.lm(object, correlation = FALSE, symbolic.cor = FALSE, \dots)
</pre>

<p>and
</p>
<pre>cat(get_usage(summary.lm, name = "summary"))
##: summary(object, correlation = FALSE, symbolic.cor = FALSE, \dots)
</pre>

<p>The call is just <code>summary()</code> in the latter. This fairly reflects
the fact that S3 methods are normally called via the generic, but
adding some explanatory text around the command is usually a good
idea. For programmatically generated usage sections in help pages,
argument <code>S3class</code> can be used to get the standard Rd markup for
S3 methods.
</p>
<pre>cat(get_usage(summary.lm, "summary", S3class = "lm"))
##: \method{summary}{lm}(object, correlation = FALSE, symbolic.cor = FALSE, \dots)
</pre>

<p>(Note that <code style="white-space: pre;">⁠\method⁠</code> can only be used in Usage sections.)
</p>
<p>When <code>object</code> is an anonymous function, argument <code>name</code> is compulsory.
For example,


<code>cat( get_usage(function(x = 3, y = "a"){}, "f") )</code>
</p>



<p><code>get_usage()</code> can also be used to insert dynamically signatures
of functions located in other objects, such as environments and lists,
see the examples.
</p>
<p>If a function is used as an infix operator, set <code>infix = TRUE</code>.
</p>
<pre>get_usage("+", infix = TRUE)
##: [1] "e1 + e2"
get_usage("%in%", infix = TRUE)
##: [1] "x %in% table"
</pre>

<p>The name of the operator may be in a variable:
</p>
<pre>op &lt;- "+"
get_usage(op, infix = TRUE)
##: [1] "e1 + e2"
</pre>

<p>Backticks are ok, as well,
</p>
<pre>get_usage(`+`, infix = TRUE)
##: [1] "e1 + e2"
</pre>

<p>But if a backticked operator is in a variable, surprise springs: 
</p>
<pre>op &lt;- `+`
get_usage(op, infix = TRUE)
##: [1] "e1 op e2"
</pre>

<p>In this case, don't use backticks  or, if you must, evaluate the argument:
</p>
<pre>op &lt;- `+`
get_usage(eval(op), name = "+", infix = TRUE)
##: [1] "e1 + e2"
</pre>











<p><code>promptUsage()</code> is mostly for internal use. It is like
<code>get_usage()</code> with an additional argument, <code>usage</code>, used to
pass a specially parsed argument list of class <code style="white-space: pre;">⁠"f_usage"⁠</code>,
produced by other functions in <span class="pkg">Rdpack</span>. In particular it could
have been generated by a previous call to <code>get_usage()</code>.
</p>


<h3>Value</h3>

<p>a character string or an object of S3 class "<code style="white-space: pre;">⁠f_usage⁠</code>",
see <code>pairlist2f_usage1</code> for its format.
</p>


<h3>Note</h3>

<p>For an S3 or S4 generic, use the name of the function, not the object,
see the examples.
</p>
<p>These functions are for usage descriptions as they appear in the "usage"
section of Rd files. Descriptions of S4 methods for "Methods" sections
are dealt with by other functions.
</p>


<h3>Author(s)</h3>

<p>Georgi N. Boshnakov</p>


<h3>See Also</h3>

<p><code>parse_pairlist</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">u &lt;- get_usage(lm)    # a long usage text
cat(u)

# if there are additional arguments in S3 methods,
# use names of the functions, not the objects, e.g.
get_usage("droplevels", S3class = "data.frame")
get_usage(name = "droplevels", S3class = "data.frame")
# (both give "\method{droplevels}{data.frame}(x, except = NULL, \dots)")

# but this gives the args of the generic:  "\method{droplevels}{data.frame}(x, \dots)"
get_usage(droplevels, S3class = "data.frame")

## a list containing some functions
summaries &lt;- list(xbar = function(x) mean(x), rho = function(x, y) cor(x,y))
get_usage(summaries$xbar, name = "xbar")
get_usage(summaries$rho, name = "rho")

## functions in an environment
esummaries &lt;- list2env(summaries)
get_usage(esummaries$xbar, name = "xbar")
get_usage(esummaries$rho, name = "rho")
</code></pre>


</div>