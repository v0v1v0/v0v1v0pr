<div class="container">

<table style="width: 100%;"><tr>
<td>svymean_winsorized</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Weighted Winsorized Mean and Total</h2>

<h3>Description</h3>

<p>Weighted winsorized mean and total
</p>


<h3>Usage</h3>

<pre><code class="language-R">svymean_winsorized(x, design, LB = 0.05, UB = 1 - LB, na.rm = FALSE,
                   trim_var = FALSE, ...)
svymean_k_winsorized(x, design, k, na.rm = FALSE, trim_var = FALSE, ...)
svytotal_winsorized(x, design, LB = 0.05, UB = 1 - LB, na.rm = FALSE,
                    trim_var = FALSE, ...)
svytotal_k_winsorized(x, design, k, na.rm = FALSE, trim_var = FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a one-sided <code>[formula]</code>, e.g., <code>~myVariable</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>design</code></td>
<td>
<p>an object of class <code>survey.design</code>; see
<code>svydesign</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>LB</code></td>
<td>
<p><code>[double]</code> lower bound of winsorization such that
<code class="reqn">0 \leq</code> <code>LB</code> <code class="reqn">&lt;</code> <code>UB</code> <code class="reqn">\leq 1</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>UB</code></td>
<td>
<p><code>[double]</code> upper bound of winsorization such that
<code class="reqn">0 \leq</code> <code>LB</code> <code class="reqn">&lt;</code> <code>UB</code> <code class="reqn">\leq 1</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm</code></td>
<td>
<p><code>[logical]</code> indicating whether <code>NA</code> values should
be removed before the computation proceeds (default: <code>FALSE</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trim_var</code></td>
<td>
<p><code>[logical]</code> indicating whether the variance
should be approximated by the variance estimator of the trimmed mean/
total (default: <code>FALSE</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k</code></td>
<td>
<p><code>[integer]</code> number of observations to be winsorized at the
top of the distribution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments (currently not used).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Package <span class="pkg">survey</span> must be attached to the search path in order to use
the functions (see <code>library</code> or <code>require</code>).
</p>

<dl>
<dt>Characteristic.</dt>
<dd>
<p>Population mean or total. Let <code class="reqn">\mu</code>
denote the estimated winsorized population mean; then, the
estimated winsorized total is given by
<code class="reqn">\hat{N} \mu</code> with
<code class="reqn">\hat{N} =\sum w_i</code>, where summation
is over all observations in the sample.</p>
</dd>
<dt>Modes of winsorization.</dt>
<dd>
<p>The amount of winsorization can be
specified in relative or absolute terms:
</p>

<ul>
<li> <p><em>Relative:</em> By specifying <code>LB</code> and <code>UB</code>,
the method winsorizes the <code>LB</code><code class="reqn">~\cdot 100\%</code>
of the smallest observations and the
(1 - <code>UB</code>)<code class="reqn">~\cdot 100\%</code> of the largest
observations from the data.
</p>
</li>
<li> <p><em>Absolute:</em> By specifying argument <code>k</code> in the
functions with the "infix" <code>_k_</code> in their name (e.g.,
<code>svymean_k_winsorized</code>), the
largest <code class="reqn">k</code> observations are winsorized, <code class="reqn">0&lt;k&lt;n</code>,
where <code class="reqn">n</code> denotes the sample size. E.g., <code>k = 2</code>
implies that the largest and the second largest observation
are winsorized.
</p>
</li>
</ul>
</dd>
<dt>Variance estimation.</dt>
<dd>
<p>Large-sample approximation based on the
influence function; see Huber and Ronchetti (2009, Chap. 3.3)
and Shao (1994). Two estimators are available:
</p>

<dl>
<dt><code>simple_var = FALSE</code></dt>
<dd>
<p>Variance estimator of
the winsorized mean/ total. The estimator depends on
the estimated probability density function evaluated at
the winsorization thresholds, which can be – depending
on the context – numerically unstable. As a remedy,
a simplified variance estimator is available by
setting <code>simple_var = TRUE</code>.</p>
</dd>
<dt><code>simple_var = TRUE</code></dt>
<dd>
<p>Variance is approximated
using the variance estimator of the trimmed mean/ total.</p>
</dd>
</dl>
</dd>
<dt>Utility functions.</dt>
<dd>
<p><code>summary</code>,
<code>coef</code>, <code>SE</code>,
<code>vcov</code>,
<code>residuals</code>,
<code>fitted</code> and
<code>robweights</code>.</p>
</dd>
<dt>Bare-bone functions.</dt>
<dd>
<p>See:
</p>

<ul>
<li> <p><code>weighted_mean_winsorized</code>,
</p>
</li>
<li> <p><code>weighted_mean_k_winsorized</code>,
</p>
</li>
<li> <p><code>weighted_total_winsorized</code>,
</p>
</li>
<li> <p><code>weighted_total_k_winsorized</code>.</p>
</li>
</ul>
</dd>
</dl>
<h3>Value</h3>

<p>Object of class <code>svystat_rob</code>
</p>


<h3>References</h3>

<p>Huber, P. J. and Ronchetti, E. (2009). <em>Robust Statistics</em>,
New York: John Wiley and Sons, 2nd edition.
<a href="https://doi.org/10.1002/9780470434697">doi:10.1002/9780470434697</a>
</p>
<p>Shao, J. (1994). L-Statistics in Complex Survey Problems.
<em>The Annals of Statistics</em> <b>22</b>, 976–967.
<a href="https://doi.org/10.1214/aos/1176325505">doi:10.1214/aos/1176325505</a>
</p>


<h3>See Also</h3>

<p>Overview (of all implemented functions)
</p>
<p><code>weighted_mean_winsorized</code>,
<code>weighted_mean_k_winsorized</code>,
<code>weighted_total_winsorized</code> and
<code>weighted_total_k_winsorized</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">head(workplace)

library(survey)
# Survey design for stratified simple random sampling without replacement
dn &lt;- if (packageVersion("survey") &gt;= "4.2") {
        # survey design with pre-calibrated weights
        svydesign(ids = ~ID, strata = ~strat, fpc = ~fpc, weights = ~weight,
                  data = workplace, calibrate.formula = ~-1 + strat)
    } else {
        # legacy mode
        svydesign(ids = ~ID, strata = ~strat, fpc = ~fpc, weights = ~weight,
                  data = workplace)
    }

# Estimated winsorized population mean (5% symmetric winsorization)
svymean_winsorized(~employment, dn, LB = 0.05)

# Estimated one-sided k winsorized population total (2 observations are
# winsorized at the top of the distribution)
svytotal_k_winsorized(~employment, dn, k = 2)
</code></pre>


</div>