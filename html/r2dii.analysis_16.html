<div class="container">

<table style="width: 100%;"><tr>
<td>target_market_share</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Add targets for production, using the market share approach</h2>

<h3>Description</h3>

<p>This function calculates the portfolio-level production targets, as
calculated using the market share approach applied to each relevant climate
production forecast.
</p>


<h3>Usage</h3>

<pre><code class="language-R">target_market_share(
  data,
  abcd,
  scenario,
  region_isos = r2dii.data::region_isos,
  use_credit_limit = FALSE,
  by_company = FALSE,
  weight_production = TRUE,
  increasing_or_decreasing = r2dii.data::increasing_or_decreasing
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A "data.frame" like the output of <code>r2dii.match::prioritize</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>abcd</code></td>
<td>
<p>An asset level data frame like r2dii.data::abcd_demo.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scenario</code></td>
<td>
<p>A scenario data frame like r2dii.data::scenario_demo_2020.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>region_isos</code></td>
<td>
<p>A data frame like r2dii.data::region_isos (default).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use_credit_limit</code></td>
<td>
<p>Logical vector of length 1. <code>FALSE</code> defaults to using
the column <code>loan_size_outstanding</code>. Set to <code>TRUE</code> to use the column
<code>loan_size_credit_limit</code> instead.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by_company</code></td>
<td>
<p>Logical vector of length 1. <code>FALSE</code> defaults to outputting
<code>production_value</code> at the portfolio-level. Set to <code>TRUE</code> to output
<code>production_value</code> at the company-level.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weight_production</code></td>
<td>
<p>Logical vector of length 1. <code>TRUE</code> defaults to
outputting production, weighted by relative loan-size. Set to <code>FALSE</code> to
output the unweighted production values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>increasing_or_decreasing</code></td>
<td>
<p>A data frame like
r2dii.data::increasing_or_decreasing.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A tibble including the summarized columns <code>metric</code>, <code>production</code>,
<code>technology_share</code>, <code>percentage_of_initial_production_by_scope</code> and
<code>scope</code>. If <code>by_company = TRUE</code>, the output will also have the column
<code>name_abcd</code>.
</p>


<h3>Handling grouped data</h3>

<p>This function ignores existing groups and outputs ungrouped data.
</p>


<h3>See Also</h3>

<p>Other functions to calculate scenario targets: 
<code>target_sda()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">

library(r2dii.data)
library(r2dii.match)

loanbook &lt;- head(loanbook_demo, 100)
abcd &lt;- head(abcd_demo, 100)

matched &lt;- loanbook %&gt;%
  match_name(abcd) %&gt;%
  prioritize()

# Calculate targets at portfolio level
matched %&gt;%
  target_market_share(
    abcd = abcd,
    scenario = scenario_demo_2020,
    region_isos = region_isos_demo
    )

# Calculate targets at company level
matched %&gt;%
  target_market_share(
  abcd = abcd,
  scenario = scenario_demo_2020,
  region_isos = region_isos_demo,
  by_company = TRUE
  )

matched %&gt;%
  target_market_share(
    abcd = abcd,
    scenario = scenario_demo_2020,
    region_isos = region_isos_demo,
    # Calculate unweighted targets
    weight_production = FALSE
    )

</code></pre>


</div>