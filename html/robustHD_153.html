<div class="container">

<table style="width: 100%;"><tr>
<td>winsorize</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Data cleaning by winsorization</h2>

<h3>Description</h3>

<p>Clean data by means of winsorization, i.e., by shrinking outlying
observations to the border of the main part of the data.
</p>


<h3>Usage</h3>

<pre><code class="language-R">winsorize(x, ...)

## Default S3 method:
winsorize(
  x,
  standardized = FALSE,
  centerFun = median,
  scaleFun = mad,
  const = 2,
  return = c("data", "weights"),
  ...
)

## S3 method for class 'matrix'
winsorize(
  x,
  standardized = FALSE,
  centerFun = median,
  scaleFun = mad,
  const = 2,
  prob = 0.95,
  tol = .Machine$double.eps^0.5,
  return = c("data", "weights"),
  ...
)

## S3 method for class 'data.frame'
winsorize(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a numeric vector, matrix or data frame to be cleaned.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>for the generic function, additional arguments to be passed
down to methods.  For the <code>"data.frame"</code> method, additional arguments
to be passed down to the <code>"matrix"</code> method.  For the other methods,
additional arguments to be passed down to
<code>robStandardize</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>standardized</code></td>
<td>
<p>a logical indicating whether the data are already
robustly standardized.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>centerFun</code></td>
<td>
<p>a function to compute a robust estimate for the center to
be used for robust standardization (defaults to
<code>median</code>).  Ignored if <code>standardized</code> is <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scaleFun</code></td>
<td>
<p>a function to compute a robust estimate for the scale to
be used for robust standardization (defaults to <code>mad</code>).
Ignored if <code>standardized</code> is <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>const</code></td>
<td>
<p>numeric; tuning constant to be used in univariate
winsorization (defaults to 2).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return</code></td>
<td>
<p>character string; if <code>standardized</code> is <code>TRUE</code>,
this specifies the type of return value.  Possible values are <code>"data"</code>
for returning the cleaned data, or <code>"weights"</code> for returning data
cleaning weights.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prob</code></td>
<td>
<p>numeric; probability for the quantile of the
<code class="reqn">\chi^{2}</code> distribution to be used in multivariate
winsorization (defaults to 0.95).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tol</code></td>
<td>
<p>a small positive numeric value used to determine singularity
issues in the computation of correlation estimates based on bivariate
winsorization (see <code>corHuber</code>).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The borders of the main part of the data are defined on the scale of the
robustly standardized data.  In the univariate case, the borders are given
by <code class="reqn">+/-</code><code>const</code>, thus a symmetric distribution is assumed.  In the
multivariate case, a normal distribution is assumed and the data are
shrunken towards the boundary of a tolerance ellipse with coverage
probability <code>prob</code>.  The boundary of this ellipse is thereby given by
all points that have a squared Mahalanobis distance equal to the quantile of
the <code class="reqn">\chi^{2}</code> distribution given by <code>prob</code>.
</p>


<h3>Value</h3>

<p>If <code>standardize</code> is <code>TRUE</code> and <code>return</code> is <code>"weights"</code>,
a set of data cleaning weights.  Multiplying each observation of the
standardized data by the corresponding weight yields the cleaned
standardized data.
</p>
<p>Otherwise an object of the same type as the original data <code>x</code>
containing the cleaned data is returned.
</p>


<h3>Note</h3>

<p>Data cleaning weights are only meaningful for standardized data.  In
the general case, the data need to be standardized first, then the data
cleaning weights can be computed and applied to the standardized data, after
which the cleaned standardized data need to be backtransformed to the
original scale.
</p>


<h3>Author(s)</h3>

<p>Andreas Alfons, based on code by Jafar A. Khan, Stefan Van Aelst and
Ruben H. Zamar
</p>


<h3>References</h3>

<p>Khan, J.A., Van Aelst, S. and Zamar, R.H. (2007) Robust linear model
selection based on least angle regression. <em>Journal of the American
Statistical Association</em>, <b>102</b>(480), 1289â€“1299.
<a href="https://doi.org/10.1198/016214507000000950">doi:10.1198/016214507000000950</a>
</p>


<h3>See Also</h3>

<p><code>corHuber</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## generate data
set.seed(1234)     # for reproducibility
x &lt;- rnorm(10)     # standard normal
x[1] &lt;- x[1] * 10  # introduce outlier

## winsorize data
x
winsorize(x)

</code></pre>


</div>