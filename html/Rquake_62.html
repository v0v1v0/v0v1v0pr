<div class="container">

<table style="width: 100%;"><tr>
<td>UPdateEQLOC</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Update an Earthquake location
</h2>

<h3>Description</h3>

<p>Update an Earthquake location following
a relocation.
</p>


<h3>Usage</h3>

<pre><code class="language-R">UPdateEQLOC(PF, sol, vel, stas = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>PF</code></td>
<td>
<p>Pickfile List
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sol</code></td>
<td>
<p>solution vector (lat, lon, z, t0)
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vel</code></td>
<td>
<p> 1D velocity model
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stas</code></td>
<td>
<p>station list (name, lat, lon, z)
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>After re-picking or changing the model or the
station corrections, update the event location in
the pickfile.
</p>


<h3>Value</h3>

<p>Pickfile List
</p>


<h3>Author(s)</h3>

<p>Jonathan M. Lees&lt;jonathan.lees@unc.edu&gt;
</p>


<h3>See Also</h3>

<p>EQXYresid, NLSlocate,PFoutput
</p>


<h3>Examples</h3>

<pre><code class="language-R">
data(GH, package='RSEIS')

g1 = GH$pickfile
data(VELMOD1D, package='RSEIS')

vel= VELMOD1D

 w1 = which(!is.na(g1$STAS$lat))
         sec = g1$STAS$sec[w1]

         N = length(sec)
         Ldat =    list(
           name = g1$STAS$name[w1],
           sec = g1$STAS$sec[w1],
           phase = g1$STAS$phase[w1],
           lat=g1$STAS$lat[w1],
           lon = g1$STAS$lon[w1],
           z = g1$STAS$z[w1],
           err= g1$STAS$err[w1],
           yr = rep(g1$LOC$yr , times=N),
           jd = rep(g1$LOC$jd, times=N),
           mo = rep(g1$LOC$mo, times=N),
           dom = rep(g1$LOC$dom, times=N),
           hr =rep( g1$LOC$hr, times=N),
           mi = rep(g1$LOC$mi, times=N) )

  wstart = which.min(Ldat$sec)
  EQ = list(lat=Ldat$lat[wstart], lon=Ldat$lon[wstart], z=6, t=Ldat$sec[wstart] )
      

 AQ = Vlocate(Ldat,EQ,vel, 
      distwt = 10,
      lambdareg =100 ,
      REG = TRUE,
      WTS = TRUE,
      STOPPING = TRUE,
      tolx =   0.01,
      toly = 0.01 ,
      tolz = 0.05, maxITER = c(7,5,7,4) , RESMAX = c(0.1, 0.1),  PLOT=FALSE)

sol = c(AQ$EQ$lat, AQ$EQ$lon, AQ$EQ$z, AQ$EQ$t)

upf = UPdateEQLOC(g1, sol  , vel, stas=g1$STAS)

</code></pre>


</div>