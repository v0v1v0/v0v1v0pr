<div class="container">

<table style="width: 100%;"><tr>
<td>harmo_process</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate harmonized dataset(s) and associated metadata</h2>

<h3>Description</h3>

<p>Reads a DataSchema and Data Processing Elements to generate a
harmonized dossier from input dataset(s) in a dossier and associated
metadata. The function
has one argument that can optionally be declared by the user
(<code>unique_col_dataset</code>). It refers to the columns which contains name of
each harmonized dataset. These two columns are added to ensure that there
is always a unique entity identifier when datasets are pooled.
</p>


<h3>Usage</h3>

<pre><code class="language-R">harmo_process(
  object = NULL,
  dataschema = attributes(dossier)$`Rmonize::DataSchema`,
  data_proc_elem = attributes(dossier)$`Rmonize::Data Processing Elements`,
  harmonized_col_dataset = attributes(dossier)$`Rmonize::harmonized_col_dataset`,
  harmonized_col_id = attributes(dossier)$`Rmonize::harmonized_col_id`,
  .debug = FALSE,
  dossier = object
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>Data frame(s) or list of data frame(s) containing input
dataset(s).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dataschema</code></td>
<td>
<p>A DataSchema object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data_proc_elem</code></td>
<td>
<p>A Data Processing Elements object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>harmonized_col_dataset</code></td>
<td>
<p>A character string identifying the column
to use for dataset names. NULL by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>harmonized_col_id</code></td>
<td>
<p>A character string identifying the name of the
column present in every dataset to use as a dataset identifier.
NULL by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.debug</code></td>
<td>
<p>Allow user to test the inputs before processing harmonization.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dossier</code></td>
<td>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#deprecated"><img src="../help/figures/lifecycle-deprecated.svg" alt="[Deprecated]"></a></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>A dossier is a named list containing one or more data frames, which are
input datasets. The name of each data frame in the dossier will be used as
the name of the associated harmonized dataset produced by <code>harmo_process()</code>.
</p>
<p>A DataSchema is the list of core variables to generate across datasets and
related metadata. A DataSchema object is a list of data frames with elements
named 'Variables' (required) and 'Categories' (if any). The 'Variables'
element must contain at least the <code>name</code> column, and the 'Categories'
element must contain at least the <code>variable</code> and <code>name</code> columns to be usable
in any function. In 'Variables' the <code>name</code> column must also have unique
entries, and in 'Categories' the combination of <code>variable</code> and <code>name</code> columns
must also be unique.
</p>
<p>The Data Processing Elements specifies the algorithms used to process input
variables into harmonized variables in the DataSchema format. It is also
contains metadata used to generate documentation of the processing.
A Data Processing Elements object is a data frame with specific columns
used in data processing: <code>dataschema_variable</code>, <code>input_dataset</code>,
<code>input_variables</code>, <code>Mlstr_harmo::rule_category</code> and <code>Mlstr_harmo::algorithm</code>.
To initiate processing, the first entry must be the creation of a harmonized
primary identifier variable (e.g., participant unique ID).
</p>


<h3>Value</h3>

<p>A list of data frame(s), containing harmonized dataset(s). The DataSchema
and Data Processing Elements are preserved as attributes of the
output harmonized dossier.
</p>


<h3>Examples</h3>

<pre><code class="language-R">{

# Use Rmonize_DEMO to run examples.

library(dplyr)
library(madshapR) # data_dict_filter

dataset_MELBOURNE &lt;- Rmonize_DEMO$dataset_MELBOURNE[1]
dossier &lt;- dossier_create(list(dataset_MELBOURNE))

dataschema &lt;- 
  Rmonize_DEMO$`dataschema - final` %&gt;%
  data_dict_filter('name == "adm_unique_id"')

data_proc_elem &lt;- Rmonize_DEMO$`data_processing_elements - final` %&gt;%
  dplyr::filter(dataschema_variable == 'adm_unique_id',
         input_dataset == 'dataset_MELBOURNE')

# perform harmonization
harmonized_dossier &lt;- harmo_process(dossier,dataschema,data_proc_elem)
glimpse(harmonized_dossier)

}

</code></pre>


</div>