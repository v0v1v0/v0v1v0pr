<div class="container">

<table style="width: 100%;"><tr>
<td>H5Apply</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Apply function to chunks of H5 data in ligerDataset object</h2>

<h3>Description</h3>

<p>h5 calculation wrapper, that runs specified calculation with
on-disk matrix in chunks
</p>


<h3>Usage</h3>

<pre><code class="language-R">H5Apply(
  object,
  FUN,
  init = NULL,
  useData = c("rawData", "normData"),
  chunkSize = 1000,
  verbose = getOption("ligerVerbose"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>A ligerDataset object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>FUN</code></td>
<td>
<p>A function that is applied to each chunk. See detail for
restrictions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>init</code></td>
<td>
<p>Initialized result if it need to be updated iteratively. Default
<code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>useData</code></td>
<td>
<p>The slot name of the data to be processed. Choose from
<code>"rawData"</code>, <code>"normData"</code>, <code>"scaleData"</code>. Default
<code>"rawData"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>chunkSize</code></td>
<td>
<p>Number if columns to be included in each chunk.
Default <code>1000</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Logical. Whether to show information of the progress. Default
<code>getOption("ligerVerbose")</code> which is <code>TRUE</code> if users have not set.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Other arguments to be passed to <code>FUN</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The <code>FUN</code> function has to have the first four arguments ordered
by:
</p>

<ol>
<li> <p><b>chunk data:</b> A sparse matrix
(<code>dgCMatrix-class</code>) containing maximum <code>chunkSize</code>
columns.
</p>
</li>
<li> <p><b>x-vector index:</b> The index that subscribes the vector of <code>x</code>
slot of a dgCMatrix, which points to the values in each chunk. Mostly used
when need to write a new sparse matrix to H5 file.
</p>
</li>
<li> <p><b>cell index:</b> The column index of each chunk out of the whole
original matrix
</p>
</li>
<li> <p><b>Initialized result:</b> A customized object, the value passed to
<code>H5Apply(init)</code> argument will be passed here in the first iteration. And
the returned value of <code>FUN</code> will be iteratively passed here in next
chunk iterations. So it is important to keep the object structure of the
returned value consistent with <code>init</code>.
</p>
</li>
</ol>
<p>No default value to these four arguments should be pre-defined because
<code>H5Apply</code> will automatically generate the input.
</p>


</div>