<div class="container">

<table style="width: 100%;"><tr>
<td>writeH5</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Write in-memory data into H5 file</h2>

<h3>Description</h3>

<p>This function writes in-memory data into H5 file by default in 10x cellranger
HDF5 output format. The main goal of this function is to allow users to
integrate large H5-based dataset, that cannot be fully loaded into memory,
with other data already loaded in memory using <code>runOnlineINMF</code>.
In this case, users can write the smaller in-memory data to H5 file instead
of loading subset of the large H5-based dataset into memory, where
information might be lost.
</p>
<p>Basing on the goal of the whole workflow, the data will always be written
in a CSC matrix format and colnames/rownames are always required.
</p>
<p>The default method coerces the input to a dgCMatrix. Methods
for other container classes tries to extract proper data and calls the
default method.
</p>


<h3>Usage</h3>

<pre><code class="language-R">writeH5(x, file, ...)

## Default S3 method:
writeH5(x, file, ...)

## S3 method for class 'dgCMatrix'
writeH5(
  x,
  file,
  overwrite = FALSE,
  indicesPath = "matrix/indices",
  indptrPath = "matrix/indptr",
  dataPath = "matrix/data",
  shapePath = "matrix/shape",
  barcodesPath = "matrix/barcodes",
  featuresPath = "matrix/features/name",
  ...
)

## S3 method for class 'ligerDataset'
writeH5(x, file, ...)

## S3 method for class 'liger'
writeH5(x, file, useDatasets, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>An object with in-memory data to be written into H5 file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>A character string of the file path to be written.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments passed to other S3 methods.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>overwrite</code></td>
<td>
<p>Logical, whether to overwrite the file if it already exists.
Default <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>indicesPath, indptrPath, dataPath</code></td>
<td>
<p>The paths inside the H5 file where
the dgCMatrix constructor <code>i</code>, <code>p</code>, and <code>x</code> will
be written to, respectively. Default using cellranger convention
<code>"matrix/indices"</code>, <code>"matrix/indptr"</code>, and <code>"matrix/data"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>shapePath</code></td>
<td>
<p>The path inside the H5 file where the shape of the matrix
will be written to. Default <code>"matrix/shape"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>barcodesPath</code></td>
<td>
<p>The path inside the H5 file where the barcodes/colnames
will be written to. Default <code>"matrix/barcodes"</code>. Skipped if the object
does not have colnames.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>featuresPath</code></td>
<td>
<p>The path inside the H5 file where the features/rownames
will be written to. Default <code>"matrix/features/name"</code>. Skipped if the
object does not have rownames.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>useDatasets</code></td>
<td>
<p>For liger method. Names or indices of datasets to be
written to H5 files. Required.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Nothing is returned. H5 file will be created on disk.
</p>


<h3>See Also</h3>

<p><a href="https://www.10xgenomics.com/cn/support/software/cell-ranger/latest/analysis/outputs/cr-outputs-h5-matrices">10X cellranger H5 matrix detail</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">raw &lt;- rawData(pbmc, "ctrl")
writeH5(raw, tempfile(pattern = "ctrl_", fileext = ".h5"))
</code></pre>


</div>