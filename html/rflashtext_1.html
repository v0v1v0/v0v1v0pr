<div class="container">

<table style="width: 100%;"><tr>
<td>KeywordProcessor</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>FlashText algorithm to find and replace words</h2>

<h3>Description</h3>

<p>Based on the python library <a href="https://github.com/vi3k6i5/flashtext">flashtext</a>. To see more details about the algorithm visit: <a href="https://arxiv.org/abs/1711.00046">FlashText</a>
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>attrs</code></dt>
<dd>
<p>list. Stores the attributes of the <code>KeywordProcessor</code> object.</p>
</dd>
</dl>
</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-KeywordProcessor-new"><code>KeywordProcessor$new()</code></a>
</p>
</li>
<li> <p><a href="#method-KeywordProcessor-show_trie"><code>KeywordProcessor$show_trie()</code></a>
</p>
</li>
<li> <p><a href="#method-KeywordProcessor-add_keys_words"><code>KeywordProcessor$add_keys_words()</code></a>
</p>
</li>
<li> <p><a href="#method-KeywordProcessor-contain_keys"><code>KeywordProcessor$contain_keys()</code></a>
</p>
</li>
<li> <p><a href="#method-KeywordProcessor-get_words"><code>KeywordProcessor$get_words()</code></a>
</p>
</li>
<li> <p><a href="#method-KeywordProcessor-find_keys"><code>KeywordProcessor$find_keys()</code></a>
</p>
</li>
<li> <p><a href="#method-KeywordProcessor-replace_keys"><code>KeywordProcessor$replace_keys()</code></a>
</p>
</li>
</ul>
<hr>
<a id="method-KeywordProcessor-new"></a>



<h4>Method <code>new()</code>
</h4>

<p>Initializes the <code>KeywordProcessor</code> object.
</p>


<h5>Usage</h5>

<div class="r"><pre>KeywordProcessor$new(
  keys = NULL,
  words = NULL,
  trie = NULL,
  id = "_word_",
  chars = paste0(c(letters, LETTERS, 0:9, "_"), collapse = ""),
  ignore_case = FALSE
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>keys</code></dt>
<dd>
<p>character vector. Strings to identify (find/replace) in the text. Must be provided if <code>trie</code> is <code>NULL</code>.</p>
</dd>
<dt><code>words</code></dt>
<dd>
<p>character vector. Strings to be returned (find) or replaced (replace) when found the respective <code>keys</code>. Should have the same length as <code>keys</code>. If not provided, <code>words = keys</code>.</p>
</dd>
<dt><code>trie</code></dt>
<dd>
<p>character. JSON built character by character and needed for the search. It can be provided instead of <code>keys</code> and <code>words</code>.</p>
</dd>
<dt><code>id</code></dt>
<dd>
<p>character. Used to name the end nodes of the <code>trie</code> dictionary.</p>
</dd>
<dt><code>chars</code></dt>
<dd>
<p>character. Used to validate if a word continues. Default <code>paste0(c(letters, LETTERS, 0:9, "_"), collapse = "")</code> equivalent to <code style="white-space: pre;">⁠[a-zA-Z0-9_]⁠</code>.</p>
</dd>
<dt><code>ignore_case</code></dt>
<dd>
<p>logical. If <code>FALSE</code> the search is case sensitive. Default <code>TRUE</code>.</p>
</dd>
</dl>
</div>



<h5>Examples</h5>

<div class="r example copy">
<pre>library(rflashtext)

processor &lt;- KeywordProcessor$new(keys = c("NY", "LA"), words = c("New York", "Los Angeles"))
processor$attrs
</pre>
</div>
<div class="r example copy">
<pre>library(rflashtext)

processor &lt;- KeywordProcessor$new(chars = paste0(letters, collapse = ""), keys = c("NY", "LA"))
processor$attrs
</pre>
</div>


<hr>
<a id="method-KeywordProcessor-show_trie"></a>



<h4>Method <code>show_trie()</code>
</h4>

<p>Shows the <code>trie</code> dictionary used to find/replace <code>keys</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>KeywordProcessor$show_trie()</pre></div>



<h5>Returns</h5>

<p>character. JSON string of the <code>trie</code> structure. It can be converted to list using <code>jsonlite::fromJSON</code>.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>library(rflashtext)

processor &lt;- KeywordProcessor$new(keys = c("NY", "LA"), words = c("New York", "Los Angeles"))
processor$show_trie()
</pre>
</div>


<hr>
<a id="method-KeywordProcessor-add_keys_words"></a>



<h4>Method <code>add_keys_words()</code>
</h4>

<p>Adds <code>keys</code> and <code>words</code> to the <code>trie</code> dictionary.
</p>


<h5>Usage</h5>

<div class="r"><pre>KeywordProcessor$add_keys_words(keys, words = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>keys</code></dt>
<dd>
<p>character vector. Strings to identify (find/replace) in the text.</p>
</dd>
<dt><code>words</code></dt>
<dd>
<p>character vector. Strings to be returned (find) or replaced (replace) when found the respective <code>keys</code>. Should have the same length as <code>keys</code>. If not provided, <code>words = keys</code>.</p>
</dd>
</dl>
</div>



<h5>Examples</h5>

<div class="r example copy">
<pre>library(rflashtext)

processor &lt;- KeywordProcessor$new(keys = c("NY", "LA"), words = c("New York", "Los Angeles"))
processor$add_keys_words(keys = "CA", words = "California")
processor$show_trie()
</pre>
</div>


<hr>
<a id="method-KeywordProcessor-contain_keys"></a>



<h4>Method <code>contain_keys()</code>
</h4>

<p>Checks if <code>keys</code> are in the <code>trie</code> dictionary.
</p>


<h5>Usage</h5>

<div class="r"><pre>KeywordProcessor$contain_keys(keys)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>keys</code></dt>
<dd>
<p>character vector. Strings to check if already are in the search <code>trie</code> dictionary.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>logical vector. <code>TRUE</code> if the <code>keys</code> are in the search <code>trie</code> dictionary.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>library(rflashtext)

processor &lt;- KeywordProcessor$new(keys = c("NY", "LA"), words = c("New York", "Los Angeles"))
processor$contain_keys(keys = c("NY", "LA", "TX"))
</pre>
</div>


<hr>
<a id="method-KeywordProcessor-get_words"></a>



<h4>Method <code>get_words()</code>
</h4>

<p>Gets the <code>words</code> for the <code>keys</code> found in the <code>trie</code> dictionary.
</p>


<h5>Usage</h5>

<div class="r"><pre>KeywordProcessor$get_words(keys)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>keys</code></dt>
<dd>
<p>character vector. Strings to get back the respective <code>words</code>.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>character vector. Respective <code>words</code>. If <code>keys</code> not found returns <code>NA_character_</code>.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>library(rflashtext)

processor &lt;- KeywordProcessor$new(keys = c("NY", "LA"), words = c("New York", "Los Angeles"))
processor$get_words(keys = c("NY", "LA", "TX"))
</pre>
</div>


<hr>
<a id="method-KeywordProcessor-find_keys"></a>



<h4>Method <code>find_keys()</code>
</h4>

<p>Finds <code>keys</code> in the sentences using the search <code>trie</code> dictionary.
</p>


<h5>Usage</h5>

<div class="r"><pre>KeywordProcessor$find_keys(sentences, span_info = TRUE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>sentences</code></dt>
<dd>
<p>character vector. Text to find the <code>keys</code> previously defined.</p>
</dd>
<dt><code>span_info</code></dt>
<dd>
<p>logical. <code>TRUE</code> to retrieve the <code>words</code> and the position of the matches. <code>FALSE</code> to only retrieve the <code>words</code>. Default <code>TRUE</code>.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>list with the <code>words</code> corresponding to <code>keys</code> found in the <code>sentence</code>. Hint: Use <code>data.table::rbindlist(...)</code> to transform the list to a data frame.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>library(rflashtext)

processor &lt;- KeywordProcessor$new(keys = c("NY", "LA"), words = c("New York", "Los Angeles"))
words_found &lt;- processor$find_keys(sentences = "I live in LA but I like NY")
words_found
</pre>
</div>


<hr>
<a id="method-KeywordProcessor-replace_keys"></a>



<h4>Method <code>replace_keys()</code>
</h4>

<p>Replaces <code>keys</code> found in the sentences by the corresponding <code>words</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>KeywordProcessor$replace_keys(sentences)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>sentences</code></dt>
<dd>
<p>character vector. Text to replace the <code>keys</code> found by the corresponding <code>words</code>.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>character vector. Text with the <code>keys</code> replaced by the respective <code>words</code>.
</p>



<h5>Examples</h5>

<div class="r example copy">
<pre>library(rflashtext)

processor &lt;- KeywordProcessor$new(keys = c("NY", "LA"), words = c("New York", "Los Angeles"))
new_sentences &lt;- processor$replace_keys(sentences = "I live in LA but I like NY")
new_sentences
</pre>
</div>




<h3>Examples</h3>

<pre><code class="language-R">library(rflashtext)

processor &lt;- KeywordProcessor$new(keys = c("NY", "LA"), words = c("New York", "Los Angeles"))

processor$contain_keys(keys = "NY")
processor$get_words(keys = "LA")

processor$find_keys(sentences = "I live in LA but I like NY")
processor$replace_keys(sentences = "I live in LA but I like NY")

## ------------------------------------------------
## Method `KeywordProcessor$new`
## ------------------------------------------------

library(rflashtext)

processor &lt;- KeywordProcessor$new(keys = c("NY", "LA"), words = c("New York", "Los Angeles"))
processor$attrs
library(rflashtext)

processor &lt;- KeywordProcessor$new(chars = paste0(letters, collapse = ""), keys = c("NY", "LA"))
processor$attrs

## ------------------------------------------------
## Method `KeywordProcessor$show_trie`
## ------------------------------------------------

library(rflashtext)

processor &lt;- KeywordProcessor$new(keys = c("NY", "LA"), words = c("New York", "Los Angeles"))
processor$show_trie()

## ------------------------------------------------
## Method `KeywordProcessor$add_keys_words`
## ------------------------------------------------

library(rflashtext)

processor &lt;- KeywordProcessor$new(keys = c("NY", "LA"), words = c("New York", "Los Angeles"))
processor$add_keys_words(keys = "CA", words = "California")
processor$show_trie()

## ------------------------------------------------
## Method `KeywordProcessor$contain_keys`
## ------------------------------------------------

library(rflashtext)

processor &lt;- KeywordProcessor$new(keys = c("NY", "LA"), words = c("New York", "Los Angeles"))
processor$contain_keys(keys = c("NY", "LA", "TX"))

## ------------------------------------------------
## Method `KeywordProcessor$get_words`
## ------------------------------------------------

library(rflashtext)

processor &lt;- KeywordProcessor$new(keys = c("NY", "LA"), words = c("New York", "Los Angeles"))
processor$get_words(keys = c("NY", "LA", "TX"))

## ------------------------------------------------
## Method `KeywordProcessor$find_keys`
## ------------------------------------------------

library(rflashtext)

processor &lt;- KeywordProcessor$new(keys = c("NY", "LA"), words = c("New York", "Los Angeles"))
words_found &lt;- processor$find_keys(sentences = "I live in LA but I like NY")
words_found

## ------------------------------------------------
## Method `KeywordProcessor$replace_keys`
## ------------------------------------------------

library(rflashtext)

processor &lt;- KeywordProcessor$new(keys = c("NY", "LA"), words = c("New York", "Los Angeles"))
new_sentences &lt;- processor$replace_keys(sentences = "I live in LA but I like NY")
new_sentences
</code></pre>


</div>