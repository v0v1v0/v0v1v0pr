<div class="container">

<table style="width: 100%;"><tr>
<td>register_volume</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Imaging registration using <code>'NiftyReg'</code>
</h2>

<h3>Description</h3>

<p>Registers 'CT' to 'MRI', or 'MRI' to another 'MRI'
</p>


<h3>Usage</h3>

<pre><code class="language-R">register_volume(
  source,
  target,
  method = c("rigid", "affine", "nonlinear"),
  interpolation = c("cubic", "trilinear", "nearest"),
  threads = detect_threads(),
  symmetric = TRUE,
  verbose = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>source</code></td>
<td>
<p>source imaging data, or a <code>'nifti'</code> file path;
for example, 'CT'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>target</code></td>
<td>
<p>target imaging data to align to; for example, 'MRI'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>method of transformation, choices are <code>'rigid'</code>,
<code>'affine'</code>, or <code>'nonlinear'</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>interpolation</code></td>
<td>
<p>how volumes should be interpolated, choices are
<code>'cubic'</code>, <code>'trilinear'</code>, or <code>'nearest'</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>threads, symmetric, verbose, ...</code></td>
<td>
<p>see <code>niftyreg</code></p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>See <code>niftyreg</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">


source &lt;- system.file("extdata", "epi_t2.nii.gz", package="RNiftyReg")
target &lt;- system.file("extdata", "flash_t1.nii.gz", package="RNiftyReg")
aligned &lt;- register_volume(source, target, verbose = FALSE)

source_img &lt;- aligned$source[[1]]
target_img &lt;- aligned$target
aligned_img &lt;- aligned$image

oldpar &lt;- par(mfrow = c(2, 2), mar = c(0.1, 0.1, 3.1, 0.1))

pal &lt;- grDevices::grey.colors(256, alpha = 1)
image(source_img[,,30], asp = 1, axes = FALSE,
      col = pal, main = "Source image")
image(target_img[,,64], asp = 1, axes = FALSE,
      col = pal, main = "Target image")
image(aligned_img[,,64], asp = 1, axes = FALSE,
      col = pal, main = "Aligned image")

# bucket fill and calculate differences
aligned_img[is.nan(aligned_img) | aligned_img &lt;= 1] &lt;- 1
target_img[is.nan(target_img) | aligned_img &lt;= 1] &lt;- 1
diff &lt;- abs(aligned_img / target_img - 1)
image(diff[,,64], asp = 1, axes = FALSE,
      col = pal, main = "Percentage Difference")

par(oldpar)



</code></pre>


</div>