<div class="container">

<table style="width: 100%;"><tr>
<td>merge_waves</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Merge waves</h2>

<h3>Description</h3>

<p>Merge a list of surveys into a list with harmonized variable names,
variable labels and survey identifiers.
</p>


<h3>Usage</h3>

<pre><code class="language-R">merge_waves(waves, var_harmonization)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>waves</code></td>
<td>
<p>A list of surveys</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var_harmonization</code></td>
<td>
<p>Metadata of surveys, including at least
<code>filename</code>, <code>var_name_orig</code>, <code>var_name</code>, <code>var_label</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list of surveys with harmonized names and variable labels.
</p>


<h3>See Also</h3>

<p>survey
</p>


<h3>Examples</h3>

<pre><code class="language-R">
examples_dir &lt;- system.file("examples", package = "retroharmonize")
survey_list &lt;- dir(examples_dir)[grepl("\\.rds", dir(examples_dir))]

example_surveys &lt;- read_surveys(
  file.path( examples_dir, survey_list), 
  save_to_rds = FALSE)
    
metadata &lt;- metadata_waves_create(example_surveys)
 
to_harmonize &lt;- metadata %&gt;%
  dplyr::filter ( var_name_orig %in% 
                  c("rowid", "w1") |
                  grepl("trust ", label_orig ) ) %&gt;%
  dplyr::mutate ( var_label = var_label_normalize(label_orig) ) %&gt;%
  dplyr::mutate ( var_name = val_label_normalize(var_label) )

merge_waves ( example_surveys, to_harmonize )

</code></pre>


</div>