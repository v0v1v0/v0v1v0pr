<div class="container">

<table style="width: 100%;"><tr>
<td>stream</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Streaming</h2>

<h3>Description</h3>

<p>Open a streaming connection with Twitter and stores tweets for as long as you
wish.
</p>


<h3>Usage</h3>

<pre><code class="language-R">filtered_stream(
  timeout,
  file = tempfile(),
  expansions = NULL,
  fields = NULL,
  ...,
  token = NULL,
  append = TRUE,
  parse = TRUE
)

stream_add_rule(query, dry = FALSE, token = NULL)

stream_rm_rule(query, dry = FALSE, token = NULL)

sample_stream(
  timeout,
  file = tempfile(),
  expansions = NULL,
  fields = NULL,
  ...,
  token = NULL,
  parse = TRUE,
  append = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>timeout</code></td>
<td>
<p>time, in seconds, of the recording stream.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>Path to a file where the raw streaming should be stored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>expansions</code></td>
<td>
<p>Set <code>NULL</code> to not use any expansion, set <code>NA</code> to get all
expansions, or provide a vector with the expansions you want (create it with
<code>set_expansions()</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fields</code></td>
<td>
<p>Set <code>NULL</code> to not use any field, get all allowed fields with <code>NA</code>,
provide a list with the fields you want (create it with <code>set_fields()</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Other parameters passed to the body of the request.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>token</code></td>
<td>
<p>These endpoints only accept a bearer token (can be created via
<code>rtweet_app()</code>). In most cases you
are better of changing the default for all calls via <code>auth_as()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>append</code></td>
<td>
<p>Append streaming to the file? Default does but it is
recommended to have a new file for each call.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parse</code></td>
<td>
<p>If <code>TRUE</code>, the default, returns a tidy data frame. Use <code>FALSE</code>
to return the "raw" list corresponding to the JSON returned from the
Twitter API.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>query</code></td>
<td>
<p>If <code>NULL</code> returns the current rules, else depending:
</p>

<ul>
<li>
<p> In stream_add_rule it should be a list of value and tag.
</p>
</li>
<li>
<p> In stream_rm_rule it should be a vector of ids of rules to be removed
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dry</code></td>
<td>
<p>Check if the addition or removal of the rule works.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The connection can be left open as long as you wish, the data is appended to
the file provided. Be aware that the stream might have incomplete records
(you won't be able to read directly from the json file).
One tweet might belong to multiple rules.
</p>


<h3>Value</h3>

<p>The records in the streaming.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>filtered_stream()</code>: Start a filtered stream according to the rules.
</p>
</li>
<li> <p><code>stream_add_rule()</code>: Add rules for the filtered streaming.
</p>
</li>
<li> <p><code>stream_rm_rule()</code>: Remove rules from the filtered streaming
</p>
</li>
<li> <p><code>sample_stream()</code>: Retrieve a sample of the tweets posted.
</p>
</li>
</ul>
<h3>See Also</h3>

<p>Rules for filtered stream: <a href="https://developer.twitter.com/en/docs/twitter-api/tweets/filtered-stream/integrate/build-a-rule">https://developer.twitter.com/en/docs/twitter-api/tweets/filtered-stream/integrate/build-a-rule</a>
</p>
<p>Sampled stream: <a href="https://developer.twitter.com/en/docs/twitter-api/tweets/volume-streams/api-reference/get-tweets-sample-stream">https://developer.twitter.com/en/docs/twitter-api/tweets/volume-streams/api-reference/get-tweets-sample-stream</a>
</p>
<p>Filtered stream: <a href="https://developer.twitter.com/en/docs/twitter-api/tweets/filtered-stream/api-reference/get-tweets-search-stream">https://developer.twitter.com/en/docs/twitter-api/tweets/filtered-stream/api-reference/get-tweets-search-stream</a>
</p>
<p><code>ids()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Requires a bearer token
if (FALSE) {
  # How many rules do we have
  stream_add_rule(NULL)
  # Add new rule
  new_rule &lt;- stream_add_rule(list(value = "#rstats", tag = "rstats"))
  new_rule
  # Open filtered streaming connection for 30s
  filtered_stream(file = tempfile(), timeout = 30, parse = FALSE)
  # Remove rule
  stream_rm_rule(ids(new_rule))
  # Open random streaming connection
  sample_stream(file = tempfile(), timeout = 3, parse = FALSE)
}
</code></pre>


</div>