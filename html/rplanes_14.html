<div class="container">

<table style="width: 100%;"><tr>
<td>plane_repeat</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Repeat component</h2>

<h3>Description</h3>

<p>This function evaluates whether consecutive values in observations or forecasts are repeated a k number of times. This function takes in a forecast or observed object that is either from an observed dataset or forecast dataset. Note that if a signal is contant (i.e., the same value is repeated for all time points) then the repeat component will return <code>FALSE</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">plane_repeat(location, input, seed, tolerance = NULL, prepend = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>location</code></td>
<td>
<p>Character vector with location code; the location must appear in input and seed</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>input</code></td>
<td>
<p>Input signal data to be scored; object must be one of forecast or observed</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>Prepared seed</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tolerance</code></td>
<td>
<p>Integer value for the number of allowed repeats before flag is raised. Default is <code>NULL</code> and allowed repeats will be determined from seed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prepend</code></td>
<td>
<p>Integer value for the number of values from seed to add before the evaluated signal. Default is <code>NULL</code> and the number of values will be determined from seed.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A <code>list</code> with the following values:
</p>

<ul>
<li> <p><strong>indicator</strong>: Logical as to whether or not the value is repeated sequentially k number of times.
</p>
</li>
<li> <p><strong>repeats</strong>: A <code>tibble</code> with repeating values found. If there are no repeats (i.e., indicator is <code>FALSE</code>) then the <code>tibble</code> will have 0 rows.
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">## read in example observed data and prep observed signal
hosp &lt;- read.csv(system.file("extdata/observed/hdgov_hosp_weekly.csv", package = "rplanes"))
hosp$date &lt;- as.Date(hosp$date, format = "%Y-%m-%d")
prepped_observed &lt;- to_signal(hosp, outcome = "flu.admits", type = "observed", resolution = "weeks")

## read in example forecast and prep forecast signal
fp &lt;- system.file("extdata/forecast/2022-10-31-SigSci-TSENS.csv", package = "rplanes")
prepped_forecast &lt;- read_forecast(fp) %&gt;%
  to_signal(., outcome = "flu.admits", type = "forecast", horizon = 4)

## prepare seed with cut date
prepped_seed &lt;- plane_seed(prepped_observed, cut_date = "2022-10-29")

## run plane component
## use defaults
plane_repeat(location = "12", input = prepped_forecast, seed = prepped_seed)
## set tolerated repeats to 2
plane_repeat(location = "12", input = prepped_forecast, seed = prepped_seed, tolerance = 2)

## use defaults
plane_repeat(location = "49", input = prepped_forecast, seed = prepped_seed)
## set number of values prepended for evaluation to 4
plane_repeat(location = "49", input = prepped_forecast, seed = prepped_seed, prepend = 4)

</code></pre>


</div>