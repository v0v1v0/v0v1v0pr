<div class="container">

<table style="width: 100%;"><tr>
<td>adjust_rate.ft</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Adjust rates in flowthrough respirometry to account for background
respiration or oxygen flux.</h2>

<h3>Description</h3>

<p>The <code>adjust_rate.ft</code> function adjusts an oxygen uptake or production rate
(for example, as determined in <code>calc_rate.ft()</code>) for background oxygen use
by microbial organisms, or other removal or input of oxygen during
<em>flowthrough</em> respirometry experiments. The function accepts numeric values,
as well as <code>calc_rate.ft</code> objects. Numeric <code>x</code> and <code>by</code> inputs should be
rates calculated as the <strong>oxygen delta * flowrate</strong>. Units will be specified
in <code>convert_rate.ft()</code> when rates are converted to specific output units.
</p>


<h3>Usage</h3>

<pre><code class="language-R">adjust_rate.ft(x, by)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>numeric. A single numeric value, numeric vector, or object of class
<code>calc_rate.ft</code>. This is the experimental rate value(s) to be adjusted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by</code></td>
<td>
<p>numeric. A numeric value, numeric vector, or object of class
<code>calc_rate.ft</code>. This contains the background rate used to perform the
adjustment to <code>x</code>. If the vector or <code>calc_rate.ft</code> object contains multiple
rates, they will be averaged to produce a single adjustment value.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>adjust_rate.ft</code> allows the rate, or multiple rates, in <code>x</code> to be adjusted by
the background rate in <code>by</code>. There are several ways of determining the
background rate, or performing background corrections depending on the setup
of the experiment.
</p>
<p>For experiments in which an empty "blank" experiment has been run, and the
background rate generally does not change over the course of the experiment
(that is, the oxygen delta between inflow and outflow concentrations remains
consistent), it is recommended the rate be determined and saved via the
<code>inspect.ft()</code> and <code>calc_rate.ft()</code> functions and then entered as the
<code>by</code> input as either a value or the saved <code>calc_rate.ft</code> object. In this
case, the <code style="white-space: pre;">⁠$rate⁠</code> element of the <code>calc_rate.ft</code> object is used to adjust all
rates in <code>x</code>. If there are multiple background rates in <code style="white-space: pre;">⁠$rate⁠</code>, the mean
value is used. In this way, a single blank experiment can be applied to
several specimen experiments. Alternatively, the rate from several blank
experiments can be averaged to provide a single adjustment value, and this
entered via <code>by</code> as a numeric value.
</p>
<p>For experiments in which an empty "blank" experiment has been run alongside
actual experiments in parallel, and background rate may increase or decrease
over time (or there may be other variations for example in the inflow oxygen
concentrations), it is recommended you <em>NOT</em> use this function. Instead, the
paired blank oxygen concentration data should be used in <code>inspect.ft</code> as
the <code>in.oxy</code> input. In this way, the calculated specimen delta oxygen values
take account of whatever background or other variation in oxygen is occurring
in the blank chamber with respect to time. See examples in the vignettes on
the website.
</p>
<p>For adjustments, all rates in <code>x</code>, whether entered as values or as a
<code>calc_rate.ft</code> object, are adjusted by subtracting the mean of all background
rates in <code>by</code>.
</p>
<p><strong>Note:</strong> take special care with the <em>sign</em> of the rate used for adjustments.
In <code>respR</code> oxygen uptake rates are negative, as they represent a negative
slope of oxygen against time. Background rates will normally also be a
negative value (though not always). See Examples.
</p>


<h4>S3 Generic Functions</h4>

<p>Saved output objects can be used in the generic S3 functions <code>print()</code>,
<code>summary()</code>, and <code>mean()</code>.
</p>

<ul>
<li> <p><code>print()</code>: prints a single result, by default the first adjusted rate.
Others can be printed by passing the <code>pos</code> input. e.g. <code>print(x, pos = 2)</code>.
See <code>help("print.adjust_rate.ft")</code>.
</p>
</li>
<li> <p><code>summary()</code>: prints summary table of all results and metadata, or those
specified by the <code>pos</code> input. e.g. <code>summary(x, pos = 1:5)</code>. The summary can
be exported as a separate dataframe by passing <code>export = TRUE</code>. See
<code>help("summary.adjust_rate.ft")</code>.
</p>
</li>
<li> <p><code>mean()</code>: calculates the mean of all adjusted rates, or those specified by
the <code>pos</code> input. e.g. <code>mean(x, pos = 1:5)</code> The mean can be exported as a
separate value by passing <code>export = TRUE</code>. See <code>help("mean.adjust_rate.ft")</code>.
</p>
</li>
</ul>
<h4>More</h4>

<p>For additional help, documentation, vignettes, and more visit the <code>respR</code>
website at <a href="https://januarharianto.github.io/respR/">https://januarharianto.github.io/respR/</a>
</p>



<h3>Value</h3>

<p><strong>Output</strong>: If the <code>x</code> input is a <code>calc_rate.ft</code> object, the output
will be identical in structure, but of class <code>adjust_rate.ft</code> and
containing the additional elements <code style="white-space: pre;">⁠$adjustment⁠</code> and <code style="white-space: pre;">⁠$rate.adjusted⁠</code>, with
these also added to <code style="white-space: pre;">⁠$summary⁠</code> metadata.
</p>
<p>If <code>x</code> is a numeric value or vector, the output is a <code>list</code> object of class
<code>adjust_rate.ft</code> containing four elements: a <code style="white-space: pre;">⁠$summary⁠</code> table, <code style="white-space: pre;">⁠$rate⁠</code>,
<code style="white-space: pre;">⁠$adjustment⁠</code>, and <code style="white-space: pre;">⁠$rate.adjusted⁠</code>.
</p>
<p>For all outputs, the <code style="white-space: pre;">⁠$rate.adjusted⁠</code> element will be the one converted
when the object is passed to <code>convert_rate.ft</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Note that oxygen uptake rates are negative in respR
# since they represent a decrease in dissolved oxygen
# and negative slope. Typically both specimen rate and
# background rate values are negative.

# ----------------------------------------------------
# Simple background respiration correction to a single
# rate.

# Note, 'x' and 'by' should both be rates calculated as
# the delta oxygen value, the difference between inflow
# and outflow oxygen, multiplied by the flowrate.

# This is (-0.98) - (-0.04) = -0.94
adjust_rate.ft(x = -0.98, by = -0.04)

# ----------------------------------------------------
# Mean background adjustment to a single rate.
adjust_rate.ft(x = -0.98, by = c(-0.04, -0.05, -0.06))

# ----------------------------------------------------
# Mean background adjustment to multiple rates.
out &lt;- adjust_rate.ft(x = c(-0.98, -0.87, -0.91),
                      by = c(-0.04, -0.05, -0.06))
summary(out)

# ----------------------------------------------------
# Adjustment using calc_rate.ft objects
# Specimen rate
sp_rate &lt;- flowthrough_mult.rd %&gt;%
  inspect.ft(time = 1, out.oxy = 2, in.oxy = 6) %&gt;%
  calc_rate.ft(from = 30, flowrate = 0.1)

# Background rate
bg_rate &lt;- flowthrough_mult.rd %&gt;%
  inspect.ft(time = 1, out.oxy = 5, in.oxy = 9) %&gt;%
  calc_rate.ft(flowrate = 0.1)

# Perform adjustment
adj_rate &lt;- adjust_rate.ft(sp_rate, by = bg_rate)
print(adj_rate)
summary(adj_rate)
# ----------------------------------------------------
</code></pre>


</div>