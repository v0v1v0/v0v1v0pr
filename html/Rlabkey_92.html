<div class="container">

<table style="width: 100%;"><tr>
<td>saveResults</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2> Returns an object representing a LabKey schema </h2>

<h3>Description</h3>

<p>A wrapper function to labkey.saveBatch which uses a session object and provides defaults for the Batch/Run names.
</p>


<h3>Usage</h3>

<pre><code class="language-R">saveResults(session, assayName, resultDataFrame, 
  batchPropertyList= list(name=paste("Batch ", as.character(date()))),
  runPropertyList= list(name=paste("Assay Run ", as.character(date()))))
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>session</code></td>
<td>
<p>the session key returned from getSession</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>assayName</code></td>
<td>
<p>a string specifying the  name of the assay instance</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>resultDataFrame</code></td>
<td>
<p>a data frame containing rows of data to be inserted</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>batchPropertyList</code></td>
<td>
<p>a list of batch Properties </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>runPropertyList</code></td>
<td>
<p>a list of run Properties </p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>  saveResults is a wrapper function to labkey.saveBatch with two changes: First, it uses a session object in place
of the separate baseUrl and folderPath arguments. Second, it provides defaults for generating Batch and Run names based on a current
timestamp.
</p>
<p>To see the save result on LabKey server, click on the "SimpleMeans" assay in the Assay List web part.
</p>


<h3>Value</h3>

<p>an object representing the assay.
</p>


<h3>Author(s)</h3>

<p>Peter Hussey</p>


<h3>References</h3>

<p>https://www.labkey.org/home/project-begin.view</p>


<h3>See Also</h3>

<p><code>getSession</code>, <code>getSchema</code>, <code>getLookups</code>, <code>getRows</code></p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 

## Very simple example of an analysis flow:  query some data,
## calculate some stats, then save the calculations as an assay
## result set in LabKey Server
# library(Rlabkey)

s&lt;- getSession(baseUrl="http://localhost:8080/labkey",
    folderPath="/apisamples")
scobj &lt;- getSchema(s, "lists")
simpledf &lt;- getRows(s, scobj$AllTypes)

## some dummy calculations to produce and example analysis result
testtable &lt;- simpledf[,3:4]
colnames(testtable) &lt;- c("IntFld", "DoubleFld")
row &lt;- c(list("Measure"="colMeans"), colMeans(testtable, na.rm=TRUE))
results &lt;- data.frame(row, row.names=NULL, stringsAsFactors=FALSE)
row &lt;- c(list("Measure"="colSums"), colSums(testtable, na.rm=TRUE))
results &lt;- rbind(results, as.vector(row))

bprops &lt;- list(LabNotes="this is a simple demo")
bpl&lt;- list(name=paste("Batch ", as.character(date())),properties=bprops) 
rpl&lt;- list(name=paste("Assay Run ", as.character(date())))

assayInfo&lt;- saveResults(s, "SimpleMeans", results,
    batchPropertyList=bpl, runPropertyList=rpl)


## End(Not run)
</code></pre>


</div>