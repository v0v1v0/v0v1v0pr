<div class="container">

<table style="width: 100%;"><tr>
<td>new_package</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create an R package structure</h2>

<h3>Description</h3>

<p>This function creates a new R package structure according to the current
best practices.
Essential features of an R package are created (<code>DESCRIPTION</code> and
<code>NAMESPACE</code> files, and <code style="white-space: pre;">⁠R/⁠</code> and <code style="white-space: pre;">⁠man/⁠</code> folders). The project is also
<strong>versioned with git</strong> and a generic R <code>.gitignore</code> is added.
</p>
<p><strong>IMPORTANT -</strong> Before using this function user needs to create a new folder
(or a new project if using RStudio) and run this function inside this folder
(by using <code>setwd()</code> or by opening the <code>Rproj</code> in a new RStudio session).
<strong>The name of the package will be the same as the name of this folder</strong>.
Some rules must be respected:
<a href="https://r-pkgs.org/workflow101.html#name-your-package">https://r-pkgs.org/workflow101.html#name-your-package</a>.
</p>
<p>Some fields of the <code>DESCRIPTION</code> file (maintainer information, package name,
license, URLs, and  <code>roxygen2</code> version)  are automatically filled but
others (like title and description) need to be edited manually.
</p>
<p>Additional features are also created: a <code>CITATION</code> file, a <code>README.Rmd</code>, and
<code style="white-space: pre;">⁠tests/⁠</code> and <code style="white-space: pre;">⁠vignettes/⁠</code> folders (optional). See the vignette
<a href="https://frbcesab.github.io/rcompendium/articles/rcompendium.html">Get started</a>
for a complete overview of the full structure.
</p>
<p>A GitHub repository can also be created (default) following the
"GitHub last" workflow
(<a href="https://happygitwithr.com/existing-github-last.html">https://happygitwithr.com/existing-github-last.html</a>).
Configuration files for GitHub Actions to automatically 1) check the
package, 2) test and report code coverage, and 3) deploy the website using
<a href="https://pkgdown.r-lib.org/index.html"><code>pkgdown</code></a>
will be added in the <code style="white-space: pre;">⁠.github/⁠</code> folder. See below the section
<strong>Creating a GitHub repo</strong>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">new_package(
  license = "GPL (&gt;= 2)",
  status = NULL,
  lifecycle = NULL,
  contributing = TRUE,
  code_of_conduct = TRUE,
  vignette = TRUE,
  test = TRUE,
  create_repo = TRUE,
  private = FALSE,
  gh_check = TRUE,
  codecov = TRUE,
  website = TRUE,
  gh_render = TRUE,
  gh_citation = TRUE,
  given = NULL,
  family = NULL,
  email = NULL,
  orcid = NULL,
  organisation = NULL,
  overwrite = FALSE,
  quiet = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>license</code></td>
<td>
<p>A character vector of length 1. The license to be used for
this package. Run <code>get_licenses()</code> to choose an appropriate one.
Default is <code>license = 'GPL (&gt;= 2)'</code>
</p>
<p>The license can be changed later by calling <code>add_license()</code> (and
<code>add_license_badge()</code> or <code>refresh()</code> to update the corresponding badge in
the README).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>status</code></td>
<td>
<p>A character vector of length 1. The status of the project
according to the standard defined by the  <a href="https://www.repostatus.org">https://www.repostatus.org</a>
project. One among <code>'concept'</code>, <code>'wip'</code>, <code>'suspended'</code>,
<code>'abandoned'</code>, <code>'active'</code>, <code>'inactive'</code>, or <code>'unsupported'</code>.
See <code>add_repostatus_badge()</code> for further information.
</p>
<p>This argument is used to add a badge to the <code>README.Rmd</code> to help visitors
to better understand your project. If you don't want this badge use
<code>status = NULL</code> (default).
</p>
<p>This status can be added/changed later by using <code>add_repostatus_badge()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lifecycle</code></td>
<td>
<p>A character vector of length 1. The life cycle stage of the
project according to the standard defined at
<a href="https://lifecycle.r-lib.org/articles/stages.html">https://lifecycle.r-lib.org/articles/stages.html</a>. One among
<code>'experimental'</code>, <code>'stable'</code>, <code>'deprecated'</code>, or <code>'superseded'</code>.
See <code>add_lifecycle_badge()</code> for further information.
</p>
<p>This argument is used to add a badge to the <code>README.Rmd</code> to help visitors
to better understand your project. If you don't want this badge use
<code>lifecycle = NULL</code> (default).
</p>
<p>This stage can be added/changed later by using <code>add_lifecycle_badge()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>contributing</code></td>
<td>
<p>A logical value. If <code>TRUE</code> (default) adds a
<code>CONTRIBUTING.md</code> file and <code>ISSUE_TEMPLATES</code>. See <code>add_contributing()</code> for
further information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>code_of_conduct</code></td>
<td>
<p>A logical value. If <code>TRUE</code> (default) adds a
<code>CODE_OF_CONDUCT.md</code> file. See <code>add_code_of_conduct()</code> for further
information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vignette</code></td>
<td>
<p>A logical value. If <code>TRUE</code> (default) creates a vignette in
<code style="white-space: pre;">⁠vignettes/⁠</code>. Packages <a href="https://yihui.org/knitr/"><code>knitr</code></a> and
<a href="https://rmarkdown.rstudio.com/"><code>rmarkdown</code></a> are also added to the
<code>Suggests</code> field in the <code>DESCRIPTION</code> file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>test</code></td>
<td>
<p>A logical value. If <code>TRUE</code> (default) initializes units tests by
running <code>usethis::use_testthat()</code>. Package
<a href="https://testthat.r-lib.org"><code>testthat</code></a> is also added to the <code>Suggests</code>
field in the <code>DESCRIPTION</code> file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>create_repo</code></td>
<td>
<p>A logical value. If <code>TRUE</code> (default) creates a repository
(public if <code>private = FALSE</code> or private if <code>private = TRUE</code>) on GitHub.
See below the section <strong>Creating a GitHub repo</strong>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>private</code></td>
<td>
<p>A logical value. If <code>TRUE</code> creates a private repository on
user GitHub account (or organisation). Default is <code>private = FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gh_check</code></td>
<td>
<p>A logical value. If <code>TRUE</code> (default) configures GitHub
Actions to automatically check and test the package after each push. This
will run <code style="white-space: pre;">⁠R CMD check⁠</code> on the three major operating systems (Ubuntu, macOS,
and Windows) on the latest release of R. See <code>add_github_actions_check()</code>
for further information.
</p>
<p>If <code>create_repo = FALSE</code> this argument is ignored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>codecov</code></td>
<td>
<p>A logical value. If <code>TRUE</code> (default) configures GitHub
Actions to automatically report the code coverage of units tests after
each push. See <code>add_github_actions_codecov()</code> for further information.
</p>
<p>If <code>create_repo = FALSE</code> this argument is ignored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>website</code></td>
<td>
<p>A logical value. If <code>TRUE</code> (default) configures GitHub
Actions to automatically build and deploy the package website
(using <a href="https://pkgdown.r-lib.org/index.html"><code>pkgdown</code></a>)
after each push. A <strong>gh-pages</strong> branch will be created using
<code>usethis::use_github_pages()</code> and the GitHub repository will be
automatically configured to deploy website.
</p>
<p>If <code>create_repo = FALSE</code> this argument is ignored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gh_render</code></td>
<td>
<p>A logical value. If <code>TRUE</code> (default) configures GitHub
Actions to automatically knit the <code>README.Rmd</code> after each push.
See <code>add_github_actions_render()</code> for further information.
</p>
<p>If <code>create_repo = FALSE</code> this argument is ignored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gh_citation</code></td>
<td>
<p>A logical value. If <code>TRUE</code> (default) configures GitHub
Actions to automatically update the <code>CITATION.cff</code> file.
See <code>add_github_actions_citation()</code> for further information.
</p>
<p>If <code>create_repo = FALSE</code> this argument is ignored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>given</code></td>
<td>
<p>A character vector of length 1. The given name of the
maintainer of the package. If <code>NULL</code> (default) the function will try to
get this value by reading the <code>.Rprofile</code> file.
</p>
<p>For further information see <code>set_credentials()</code> and below the section
<strong>Managing credentials</strong>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>family</code></td>
<td>
<p>A character vector of length 1. The family name of the
maintainer of the package. If <code>NULL</code> (default) the function will try to
get this value by reading the <code>.Rprofile</code> file.
</p>
<p>For further information see <code>set_credentials()</code> and below the section
<strong>Managing credentials</strong>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>email</code></td>
<td>
<p>A character vector of length 1. The email address of the
maintainer of the package. If <code>NULL</code> (default) the function will try to
get this value by reading the <code>.Rprofile</code> file.
</p>
<p>For further information see <code>set_credentials()</code> and below the section
<strong>Managing credentials</strong>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>orcid</code></td>
<td>
<p>A character vector of length 1. The ORCID of the maintainer of
the package. If <code>NULL</code> (default) the function will try to get this value
by reading the <code>.Rprofile</code> file.
</p>
<p>For further information see <code>set_credentials()</code> and below the section
<strong>Managing credentials</strong>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>organisation</code></td>
<td>
<p>A character vector of length 1. The GitHub organisation
to host the repository. If defined it will overwrite the GitHub pseudo.
</p>
<p>Default is <code>organisation = NULL</code> (the GitHub pseudo will be used).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>overwrite</code></td>
<td>
<p>A logical value. If <code>TRUE</code> files written from templates and
modified by user are erased. Default is <code>overwrite = FALSE</code>.
<strong>Be careful while using this argument</strong>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quiet</code></td>
<td>
<p>A logical value. If <code>TRUE</code> messages are deleted. Default is
<code>FALSE</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>No return value.
</p>


<h3>Recommended workflow</h3>

<p>The purpose of the package <code>rcompendium</code> is to make easier the creation of R
package/research compendium so that user can focus on the code/analysis
instead of wasting time organizing files.
</p>
<p>The recommended workflow is:
</p>

<ol>
<li>
<p> Create an empty RStudio project;
</p>
</li>
<li>
<p> Store your credentials with <code>set_credentials()</code> (if not already done);
</p>
</li>
<li>
<p> Run <code>new_package()</code> to create a new package structure (and the GitHub
repository);
</p>
</li>
<li>
<p> Edit some metadata in <code>DESCRIPTION</code>, <code>CITATION</code>, and <code>README.Rmd</code>;
</p>
</li>
<li>
<p> Implement, document &amp; test functions (the fun part);
</p>
</li>
<li>
<p> Update the project (update <code>.Rd</code> files, <code>NAMESPACE</code>, external
dependencies in <code>DESCRIPTION</code>, re-knit <code>README.Rmd</code>, and check package
integrity) with <code>refresh()</code>;
</p>
</li>
<li>
<p> Repeat steps 5 and 6 while developing the package.
</p>
</li>
</ol>
<h3>Managing credentials</h3>

<p>You can use the arguments <code>given</code>, <code>family</code>, <code>email</code>, and <code>orcid</code>
directly with the function <code>new_package()</code> (and others). But if you create
a lot a projects (packages and/or compendiums) it can be frustrating in the
long run.
</p>
<p>An alternative is to use <strong>ONCE AND FOR ALL</strong> the function
<code>set_credentials()</code> to permanently store this information in the
<code>.Rprofile</code> file. If these arguments are set to <code>NULL</code> (default) each
function of the package <code>rcompendium</code> will search in this <code>.Rprofile</code> file.
It will save your time (it's the purpose of this package).
</p>
<p>Even if you have stored your information in the <code>.Rprofile</code> file you will
always be able to modify them on-the-fly (i.e. by using arguments of the
<code>new_package()</code>) or permanently by re-running <code>set_credentials()</code>.
</p>


<h3>Configuring git</h3>

<p>First run <code>gh::gh_whoami()</code> to see if your git is correctly configured. If
so you should see something like:
</p>
<div class="sourceCode"><pre>{
  "name": "John Doe",
  "login": "jdoe",
  "html_url": "https://github.com/jdoe",
  ...
}
</pre></div>
<p>Otherwise you might need to run:
</p>
<div class="sourceCode"><pre>gert::git_config_global_set(name  = "user.name", 
                            value = "John Doe")
                            
gert::git_config_global_set(name  = "user.email", 
                            value = "john.doe@domain.com")
                            
gert::git_config_global_set(name  = "github.user", 
                            value = "jdoe")
</pre></div>
<p>See <code>gert::git_config_global_set()</code> for further information.
</p>


<h3>Creating a GitHub repo</h3>

<p>To create the GitHub repository directly from R, the package <code>rcompendium</code>
uses the function <code>usethis::use_github()</code>, an client to the GitHub REST API.
The interaction with this API required an authentication method: a
<strong>GITHUB PAT</strong> (Personal Access Token).
</p>
<p>If you don't have a <strong>GITHUB PAT</strong> locally stored, you must:
</p>

<ol>
<li>
<p> Obtain a new one from your GitHub account. <strong>Make sure to select
at least the first two scopes (private repository and workflow)</strong>
</p>
</li>
<li>
<p> Store it in the <code style="white-space: pre;">⁠~/.Renviron⁠</code> file by using <code>usethis::edit_r_environ()</code>
and adding the following line: <code>GITHUB_PAT='ghp_99z9...z9'</code>
</p>
</li>
</ol>
<p>Run <code>usethis::gh_token_help()</code> for more information about getting and
configuring a <strong>GITHUB PAT</strong>.
</p>
<p>If everything is well configured you should see something like this after
calling <code>gh::gh_whoami()</code>:
</p>
<div class="sourceCode"><pre>{
  "name": "John Doe",
  "login": "jdoe",
  "html_url": "https://github.com/jdoe",
  "scopes": "delete_repo, repo, workflow",
  "token": "ghp_99z9...z9"
}
</pre></div>
<p>And you will be able to create a GitHub repository directly from R!
</p>


<h3>See Also</h3>

<p>Other setup functions: 
<code>new_compendium()</code>,
<code>refresh()</code>,
<code>set_credentials()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
library(rcompendium)

## Define **ONCE FOR ALL** your credentials ----
set_credentials(given = "John", family = "Doe", 
                email = "john.doe@domain.com", 
                orcid = "9999-9999-9999-9999", protocol = "ssh")

## Create an R package ----
new_package()

## Start developing functions ----
## ...

## Update package (documentation, dependencies, README, check) ----
refresh()

## End(Not run)
</code></pre>


</div>