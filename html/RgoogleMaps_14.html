<div class="container">

<table style="width: 100%;"><tr>
<td>GetMapTiles</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>download map tiles from specified map tile servers such as openstreetmap or Google</h2>

<h3>Description</h3>

<p>Query the server for map tiles, defined uniquely by their 
</p>
<p>X and Y ID and zoom. For offline usage, these map tiles are stored in a local directory
</p>
<p>Example OSM:http://a.tile.openstreetmap.org/10/549/335.png
</p>
<p>Also see https://wiki.openstreetmap.org/wiki/Tile_servers
</p>
<p>Example Google mobile: http://mt1.google.com/vt/lyrs=m&amp;x=1325&amp;y=3143&amp;z=13
</p>
<p>Example Google satellite: http://mt1.google.com/vt/lyrs=s&amp;x=1325&amp;y=3143&amp;z=13</p>


<h3>Usage</h3>

<pre><code class="language-R">GetMapTiles(center = c(lat = 52.431635, lon = 13.194773), 


    lonR, latR, nTiles = c(3, 3), zoom = 13, type = c("google", 


        "google-m", "google-s", "osm", "osm-hot", "stamen-toner", 


        "stamen-terrain", "stamen-watercolor")[1], 


    urlBase = "http://mt1.google.com/vt/lyrs=m", tileDir = "/tmp/", 


    CheckExistingFiles = TRUE, TotalSleep = NULL, tileExt = ".png", 


    returnTiles = TRUE, verbose = 0)</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>center</code></td>
<td>
<p>optional center (lat first,lon second  )</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lonR</code></td>
<td>
<p>longitude range</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>latR</code></td>
<td>
<p>latitude range</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nTiles</code></td>
<td>
<p>number of tiles in x and y direction</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zoom</code></td>
<td>
<p>Google maps zoom level.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>choice of tile server</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>urlBase</code></td>
<td>
<p>tileserver URL, alternatives would be "http://a.tile.openstreetmap.org/", "http://tile.stamen.com/toner/","http://tile.stamen.com/watercolor/"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tileDir</code></td>
<td>
<p>map tiles can be stored in a local directory, e.g. "~/mapTiles/Google/"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CheckExistingFiles</code></td>
<td>
<p>logical, if TRUE check if files already exist and only download if not!</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>TotalSleep</code></td>
<td>
<p>overall time (in seconds) that one is willing to add in between downloads. This is intended to lower the risk of a server denial. If NULL no call to Sys.sleep is executed</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tileExt</code></td>
<td>
<p>image type of tile</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>returnTiles</code></td>
<td>
<p>return tiles in a list?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>level of verbosity</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>list with important information</p>


<h3>Note</h3>

<p>Note that size is in order (lon, lat)</p>


<h3>Author(s)</h3>

<p>Markus Loecher</p>


<h3>See Also</h3>

<p>GetMap.bbox</p>


<h3>Examples</h3>

<pre><code class="language-R">

if (0){


  


  #OSM, Ireland


  xlim = c(-7, -3.5) 


  ylim = c(51.35, 55.35)


  Dublin = c(lon=-6.266155,lat=53.350140)


  DublinMerc = geosphere_mercator(Dublin)


  


  ir.osm &lt;- GetMapTiles(lonR=xlim, latR=ylim, zoom=7, verbose=1,


                        type = "osm", tileDir= TRUE)


  map = plotOSM(ir.osm)


  par("usr")#A vector of the form c(x1, x2, y1, y2)


  points(map$bbox$upperLeft,col=2,pch=20)


  points(map$bbox$lowerRight,col=2,pch=20)


  


  points(DublinMerc, col =2, pch=1,cex=1.5)


  


  ir.stamenToner &lt;- GetMapTiles(lonR=xlim, latR=ylim, zoom=7,verbose=0,


                                type = "stamen", tileDir= TRUE)


  plotOSM(ir.stamenToner)


  


  ir.stamenWater &lt;- GetMapTiles(lonR=xlim, latR=ylim, zoom=7, verbose=1,


                                type = "stamen-watercolor", tileDir= TRUE)


  plotOSM(ir.stamenWater)


 


  


  #############################################


  zoom=5


  nTiles = prod(NumTiles(lonR=c(-135,-66), latR=c(25,54) , zoom=zoom))


  us_google_5 = GetMapTiles(lonR=c(-135,-66), latR=c(25,54) , zoom=zoom, TotalSleep = 2*nTiles,


              type = "google", tileDir= TRUE, verbose = TRUE)


  


  PlotOnMapTiles(us_google_5)


  wtc_ll = getGeoCode("World Trade Center, NY")


  wtc_google_15=GetMapTiles(wtc_ll, zoom=15,nTiles = c(3,3), type = "google", 


                            tileDir= TRUE, verbose = 1)


  PlotOnMapTiles(wtc_google_15)


  wtc_google_16 =GetMapTiles(wtc_ll, zoom=16,nTiles = c(4,4), type = "google", 


                             tileDir= TRUE, verbose=1)


  PlotOnMapTiles(wtc_google_16)








  wtc_stamen=GetMapTiles(wtc_ll, zoom=15,nTiles = c(3,3), verbose=1,


                  type = "stamen-toner", tileDir= TRUE)


  PlotOnMapTiles(wtc_stamen)











###combine with leaflet:


#From:http://stackoverflow.com/questions/5050851/


#     best-lightweight-web-server-only-static-content-for-windows


#To use Python as a simple web server just change your working 


#directory to the folder with your static content and type 


#python -m SimpleHTTPServer 8000, everything in the directory


#will be available at http:/localhost:8000/


  


library(leaflet)


m = leaflet::leaflet() %&gt;% 


  addTiles( urlTemplate = "http:/localhost:8000/mapTiles/OSM/{z}_{x}_{y}.png")


m = leaflet::leaflet() %&gt;% 


  addTiles( urlTemplate = "http:/localhost:8000/mapTiles/Google/{z}_{x}_{y}.png")


m = m %&gt;% leaflet::setView(-74.01312, 40.71180, zoom = 16)


m = m %&gt;% leaflet::addMarkers(-74.01312, 40.71180)





#Quadriga:


m = m %&gt;% leaflet::setView(13.39780, 52.51534, zoom = 16)


m = m %&gt;% leaflet::addMarkers(13.39780, 52.51534)


}





</code></pre>


</div>