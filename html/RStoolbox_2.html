<div class="container">

<table style="width: 100%;"><tr>
<td>classifyQA</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Classify Landsat QA bands</h2>

<h3>Description</h3>

<p>extracts five classes from QA band: background, cloud, cirrus, snow and water.
</p>


<h3>Usage</h3>

<pre><code class="language-R">classifyQA(
  img,
  type = c("background", "cloud", "cirrus", "snow", "water"),
  confLayers = FALSE,
  sensor = "OLI",
  legacy = "collection1",
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>img</code></td>
<td>
<p>SpatRaster. Landsat 8 OLI QA band.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>Character. Classes which should be returned. One or more of c("background", "cloud", "cirrus","snow", "water").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>confLayers</code></td>
<td>
<p>Logical. Return one layer per class classified by confidence levels, i.e. cloud:low, cloud:med, cloud:high.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sensor</code></td>
<td>
<p>Sensor to encode. Options: <code>c("OLI", "TIRS", "ETM+", "TM", "MSS")</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legacy</code></td>
<td>
<p>Encoding systematic Options: <code>c("collection1", "pre_collection")</code>. Default is "collection1" for the Landsat Collection 1 8-bit quality designations. Use "pre_collection" for imagery downloaded before the Collection 1 quality designations were introduced</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>further arguments passed to writeRaster</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>By default each class is queried for *high* confidence. See encodeQA for details. To return the different confidence levels per condition use <code>confLayers=TRUE</code>.
This approach corresponds to the way LandsatLook Quality Images are produced by the USGS.
</p>


<h3>Value</h3>

<p>Returns a SpatRaster with maximal five classes:
</p>

<table>
<tr>
<td style="text-align: right;">
class </td>
<td style="text-align: right;"> value </td>
</tr>
<tr>
<td style="text-align: right;">
background </td>
<td style="text-align: right;"> 1L </td>
</tr>
<tr>
<td style="text-align: right;"> 
cloud  </td>
<td style="text-align: right;"> 2L </td>
</tr>
<tr>
<td style="text-align: right;">
cirrus </td>
<td style="text-align: right;"> 3L </td>
</tr>
<tr>
<td style="text-align: right;">
snow   </td>
<td style="text-align: right;"> 4L </td>
</tr>
<tr>
<td style="text-align: right;">
water  </td>
<td style="text-align: right;"> 5L </td>
</tr>
<tr>
<td style="text-align: right;"> 
</td>
</tr>
</table>
<p>Values outside of these classes are returned as NA.
If <code>confLayers = TRUE</code> then a RasterStack with one layer per condition (except 'background') is returned, whereby each layer contains the confidence level of the condition.
</p>

<table>
<tr>
<td style="text-align: right;">
Confidence </td>
<td style="text-align: right;"> value </td>
</tr>
<tr>
<td style="text-align: right;">
low    </td>
<td style="text-align: right;"> 1L </td>
</tr>
<tr>
<td style="text-align: right;">
med    </td>
<td style="text-align: right;"> 2L </td>
</tr>
<tr>
<td style="text-align: right;">
high   </td>
<td style="text-align: right;"> 3L </td>
</tr>
<tr>
<td style="text-align: right;">
</td>
</tr>
</table>
<h3>See Also</h3>

<p>encodeQA decodeQA
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(terra)
qa &lt;- rast(ncol = 100, nrow=100, val = sample(1:2^14,  10000))

## QA classes
qacs &lt;- classifyQA(img = qa)
## Confidence levels
qacs_conf &lt;- classifyQA(img = qa, confLayers = TRUE)
</code></pre>


</div>