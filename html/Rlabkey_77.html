<div class="container">

<table style="width: 100%;"><tr>
<td>labkey.updateRows</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Update existing rows of data in a labkey database</h2>

<h3>Description</h3>

<p>Send data from an R session to update existing rows of data in the database.
</p>


<h3>Usage</h3>

<pre><code class="language-R">labkey.updateRows(baseUrl, folderPath,
    schemaName, queryName, toUpdate,
    provenanceParams=NULL, options=NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>baseUrl</code></td>
<td>
<p>a string specifying the <code>baseUrl</code>for the labkey server</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>folderPath</code></td>
<td>
<p>a string specifying the <code>folderPath</code> </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>schemaName</code></td>
<td>
<p>a string specifying the  <code>schemaName</code>for the query</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>queryName</code></td>
<td>
<p>a string specifying the  <code>queryName</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>toUpdate</code></td>
<td>
<p>a data frame containing the row(s) of data to be updated</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>provenanceParams</code></td>
<td>
<p>the provenance parameter object which contains the options to include as part of a provenance recording.
This is a premium feature and requires the Provenance LabKey module to function correctly, if it is not present this parameter will be ignored.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>options</code></td>
<td>
<p>(optional) a list containing options specific to the insert action of the query</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>A single row or multiple rows of data can be updated.  The <code>toUpdate</code> data frame should contain 
the rows of data to be updated and must be created with the <code>stringsAsFactors</code> option
set to FALSE. The names of the data in the data frame must be the column names from the
labkey database.   To update a row/column to a value of NULL, use an empty string ("") in the data frame (regardless of the database column type).
<br><br>
The list of valid options for each query will vary, but some common examples include:
</p>

<ul>
<li> <p><code>auditBehavior (string)</code> : Can be used to override the audit behavior for the table the query is acting on.
The set of types include: NONE, SUMMARY, and DETAILED.
</p>
</li>
<li> <p><code>auditUserComment (string)</code> : Can be used to provide a comment from the user that will be attached to
certain detailed audit log records.
</p>
</li>
</ul>
<h3>Value</h3>

<p>A list is returned with named categories of <b>command</b>, <b>rowsAffected</b>, <b>rows</b>, <b>queryName</b>, <b>containerPath</b> and <b>schemaName</b>.
The <b>schemaName</b>, <b>queryName</b> and <b>containerPath</b> properties contain the same schema, query 
and folder path used in the request.  The
<b>rowsAffected</b> property indicates the number of rows affected by the API action. This will typically be the same
number as passed in the request. The <b>rows</b> property contains a list of row objects corresponding to the rows
updated.
</p>


<h3>Author(s)</h3>

<p>Valerie Obenchain</p>


<h3>See Also</h3>

<p><code>labkey.selectRows</code>, <code>labkey.executeSql</code>, <code>makeFilter</code>, 
<code>labkey.insertRows</code>, <code>labkey.importRows</code>, <br><code>labkey.deleteRows</code>, <code>labkey.moveRows</code>, <br><code>labkey.query.import</code>,
<code>labkey.provenance.createProvenanceParams</code>,
<code>labkey.provenance.startRecording</code>,
<code>labkey.provenance.addRecordingStep</code>,
<code>labkey.provenance.stopRecording</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 

## Insert, update and delete
## Note that users must have the necessary permissions in the database
## to be able to modify data through the use of these functions
# library(Rlabkey)

newrow &lt;- data.frame(
	DisplayFld="Inserted from R"
	, TextFld="how its done"
	, IntFld= 98 
	, DoubleFld = 12.345
	, DateTimeFld = "03/01/2010"
	, BooleanFld= FALSE
	, LongTextFld = "Four score and seven years ago"
#	, AttachmentFld = NA    		#attachment fields not supported 
	, RequiredText = "Veni, vidi, vici"
	, RequiredInt = 0
	, Category = "LOOKUP2"
	, stringsAsFactors=FALSE)

insertedRow &lt;- labkey.insertRows("http://localhost:8080/labkey",
    folderPath="/apisamples", schemaName="lists", queryName="AllTypes",
    toInsert=newrow, options=list(auditBehavior="DETAILED",
    auditUserComment="testing audit comment for insert"))
newRowId &lt;- insertedRow$rows[[1]]$RowId

selectedRow&lt;-labkey.selectRows("http://localhost:8080/labkey",
    folderPath="/apisamples", schemaName="lists", queryName="AllTypes",
    colFilter=makeFilter(c("RowId", "EQUALS", newRowId)))
selectedRow

updaterow=data.frame(
	RowId=newRowId
	, DisplayFld="Updated from R"
	, TextFld="how to update"
	, IntFld= 777 
	, stringsAsFactors=FALSE)

updatedRow &lt;- labkey.updateRows("http://localhost:8080/labkey",
    folderPath="/apisamples", schemaName="lists", queryName="AllTypes",
    toUpdate=updaterow, options=list(auditBehavior="DETAILED",
    auditUserComment="testing audit comment for update"))
selectedRow&lt;-labkey.selectRows("http://localhost:8080/labkey",
    folderPath="/apisamples", schemaName="lists", queryName="AllTypes",
    colFilter=makeFilter(c("RowId", "EQUALS", newRowId)))
selectedRow

deleterow &lt;- data.frame(RowId=newRowId, stringsAsFactors=FALSE)
result &lt;- labkey.deleteRows(baseUrl="http://localhost:8080/labkey",
    folderPath="/apisamples", schemaName="lists", queryName="AllTypes",
    toDelete=deleterow)
str(result)


## End(Not run)
</code></pre>


</div>