<div class="container">

<table style="width: 100%;"><tr>
<td>openbugs</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Wrapper to run OpenBUGS</h2>

<h3>Description</h3>

<p>The <code>openbugs</code> function takes data and starting values
as input.  It automatically calls the package <span class="pkg">BRugs</span> and runs
something similar to <code>BRugsFit</code>.  Not available in
S-PLUS.</p>


<h3>Usage</h3>

<pre><code class="language-R">openbugs(data, inits, parameters.to.save,
    model.file = "model.txt", n.chains = 3, n.iter = 2000,
    n.burnin = floor(n.iter/2),
    n.thin = max(1, floor(n.chains * (n.iter - n.burnin) / n.sims)),
    n.sims = 1000,  DIC = TRUE, 
    bugs.directory = "c:/Program Files/OpenBUGS/",
    working.directory = NULL, digits = 5, over.relax = FALSE, seed=NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>either a named list (names corresponding to variable names
in the <code>model.file</code>) of the data for the <span class="pkg">OpenBUGS</span> model,
<em>or</em> a vector or list of the names of the data objects used by
the model.  If <code>data</code> is a one element character vector (such as <code>"data.txt"</code>), 
it is assumed that data have already been written to the working directory into that file, 
e.g. by the function <code>bugs.data</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>inits</code></td>
<td>
<p>a list with <code>n.chains</code> elements; each element of the
list is itself a list of starting values for the <span class="pkg">OpenBUGS</span> model,
<em>or</em> a function creating (possibly random) initial values.
Alternatively, if <code>inits</code> are missing or <code>inits = NULL</code>,
initial values are generated by <span class="pkg">OpenBUGS</span>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parameters.to.save</code></td>
<td>
<p>character vector of the names of the
parameters to save which should be monitored</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model.file</code></td>
<td>
<p>file containing the model written in <span class="pkg">OpenBUGS</span> code.
The extension can be either ‘<span class="file">.bug</span>’ or ‘<span class="file">.txt</span>’.  If
‘<span class="file">.bug</span>’, a copy of the file with extension ‘<span class="file">.txt</span>’ will be
created in the <code>bugs()</code> call and removed afterwards.  Note that
similarly named ‘<span class="file">.txt</span>’ files will be overwritten.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.chains</code></td>
<td>
<p>number of Markov chains (default: 3)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.iter</code></td>
<td>
<p>number of total iterations per chain (including burn in;
default: 2000)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.burnin</code></td>
<td>
<p>length of burn in, i.e. number of iterations to
discard at the beginning.  Default is <code>n.iter/2</code>, that is,
discarding the first half of the simulations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.thin</code></td>
<td>
<p>thinning rate.  Must be a positive integer.  Set
<code>n.thin</code> &gt; 1 to save memory and computation time if
<code>n.iter</code> is large.  Default is <code>max(1, floor(n.chains *
    (n.iter-n.burnin) / 1000))</code> which will only thin if there are at
least 2000 simulations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.sims</code></td>
<td>
<p>The approximate number of simulations to keep after thinning.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>DIC</code></td>
<td>
<p>logical; if <code>TRUE</code> (default), compute deviance, pD, and
DIC.  This is done in <span class="pkg">BRugs</span> directly.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>number of significant digits used for <span class="pkg">OpenBUGS</span> input,
see <code>formatC</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bugs.directory</code></td>
<td>
<p>directory that contains the <span class="pkg">OpenBUGS</span> executable
- currently unused</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>working.directory</code></td>
<td>
<p>sets working directory during execution of
this function; <span class="pkg">WinBUGS</span> in- and output will be stored in this
directory; if <code>NULL</code>, a temporary working directory via
<code>tempdir</code> is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>over.relax</code></td>
<td>
<p>If <code>TRUE</code>, over-relaxed form of MCMC is used if available from OpenBUGS.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>random seed (default is no seed)</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A <code>bugs</code> object.</p>


<h3>Note</h3>

<p>By default, BRugs (and hence <code>openbugs()</code>) is quite verbose. 
This can be controlled for the whole BRugs package by the option ‘BRugsVerbose’ (see <code>options</code>)
which is set to <code>TRUE</code> by default.
</p>


<h3>Author(s)</h3>

<p>Andrew Gelman, <a href="mailto:gelman@stat.columbia.edu">gelman@stat.columbia.edu</a>; modifications and
packaged by Sibylle Sturtz, <a href="mailto:sturtz@statistik.tu-dortmund.de">sturtz@statistik.tu-dortmund.de</a>,
and Uwe Ligges.
</p>


<h3>See Also</h3>

<p><code>bugs</code> and the <span class="pkg">BRugs</span> package</p>


<h3>Examples</h3>

<pre><code class="language-R"># An example model file is given in:
model.file &lt;- system.file(package = "R2WinBUGS", "model", "schools.txt")
# Let's take a look:
file.show(model.file)

# Some example data (see ?schools for details):
data(schools)
schools

J &lt;- nrow(schools)
y &lt;- schools$estimate
sigma.y &lt;- schools$sd
data &lt;- list ("J", "y", "sigma.y")
inits &lt;- function(){
    list(theta = rnorm(J, 0, 100), mu.theta = rnorm(1, 0, 100),
         sigma.theta = runif(1, 0, 100))
}
## or alternatively something like:
# inits &lt;- list(
#   list(theta = rnorm(J, 0, 90), mu.theta = rnorm(1, 0, 90),
#        sigma.theta = runif(1, 0, 90)),
#   list(theta = rnorm(J, 0, 100), mu.theta = rnorm(1, 0, 100),
#        sigma.theta = runif(1, 0, 100))
#   list(theta = rnorm(J, 0, 110), mu.theta = rnorm(1, 0, 110),
#        sigma.theta = runif(1, 0, 110)))

parameters &lt;- c("theta", "mu.theta", "sigma.theta")

## Not run: 
## both write access in the working directory and package BRugs required:
schools.sim &lt;- bugs(data, inits, parameters, model.file,
    n.chains = 3, n.iter = 5000,
    program = "openbugs", working.directory = NULL)
print(schools.sim)
plot(schools.sim)

## End(Not run)
</code></pre>


</div>