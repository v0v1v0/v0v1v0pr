<div class="container">

<table style="width: 100%;"><tr>
<td>sim_mediation</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate data from a fitted mediation model</h2>

<h3>Description</h3>

<p>Generate data from a fitted mediation model, using the obtained coefficient
estimates as the true model coefficients for data generation.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sim_mediation(object, n, ...)

## S3 method for class 'fit_mediation'
sim_mediation(
  object,
  n = NULL,
  explanatory = c("sim", "boot"),
  errors = c("sim", "boot"),
  num_discrete = 10,
  ...
)

## S3 method for class 'test_mediation'
sim_mediation(object, n = NULL, ...)

rmediation(n, object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>an object inheriting from class <code>"fit_mediation"</code>
or <code>"test_mediation"</code> containing results from (robust) mediation
analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>an integer giving the number of observations to be generated.  If
<code>NULL</code> (the default), the number of observations is taken from the data
set used in the fitted mediation model from <code>object</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments to be passed down.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>explanatory</code></td>
<td>
<p>a character string specifying how to generate the
explanatory variables (i.e., the independent variables and additional
covariates).  Possible values are <code>"sim"</code> to draw each explanatory
variable independently from a certain distribution (the default), or
<code>"boot"</code> to bootstrap the explanatory variables from the observed data
(i.e., random sampling with replacement).  See ‘Details’ for more
information on how the data are generated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>errors</code></td>
<td>
<p>a character string specifying how to generate the error terms
in the linear models for the mediators and the dependent variable.  Possible
values are <code>"sim"</code> to draw the error terms independently from the
respective fitted model distribution (the default), or <code>"boot"</code> to
bootstrap the error terms from the observed residuals in the respective
fitted model (i.e., random sampling with replacement).  See ‘Details’
for more information on how the data are generated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num_discrete</code></td>
<td>
<p>integer; if the explanatory variables are drawn
from distributions (<code>explanatory</code> = "sim"), variables that take
<code>num_discrete</code> or fewer values are considered discrete (the default is
10).  In that case, the corresponding variables are drawn from multinomial
distributions with the relative frequencies from the observed data.  This is
only relevant if the mediation model was fitted via regressions and ignored
if the mediation model was fitted via the covariance matrix, as the latter
method assumes multivariate normality.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The data generating process consists of three basic steps:
</p>

<ol>
<li>
<p>Generate the explanatory variables (i.e., the independent variables
and additional covariates).
</p>
</li>
<li>
<p>Generate the error terms of the different regression models.
</p>
</li>
<li>
<p>Generate the mediators and the dependent variable from the
respective regression models, using the coefficient estimates from the
fitted mediation model as the true model coefficients.
</p>
</li>
</ol>
<p>If <code>explanatory = "sim"</code>, the explanatory variables are simulated as
follows.  For each variable, a regression on a constant term is performed,
using the same estimator and assumed error distribution as in the fitted
mediation model from <code>object</code>.  Typically, the assumed error
distribution is normal, but it can also be a skew-normal, <code class="reqn">t</code>, or
skew-<code class="reqn">t</code> distribution, or a selection of the best-fitting error
distribution.  Using the obtained location estimate and parameter estimates
of the assumed error distribution, values are drawn from this error
distribution and added to the location estimate.  It is important to note
that all explanatory variables are simulated independently from each other,
hence there are no correlations between the explanatory variables.
</p>
<p>In order to generate correlated explanatory variables, it is recommended
bootstrap the explanatory variables from the observed data by setting
<code>explanatory = "boot"</code>.
</p>
<p>If <code>errors = "sim"</code>, the error terms of the different regression models
are drawn from the assumed error distribution in the fitted mediation model
from <code>object</code>, using the respective parameter estimates.  Typically,
the assumed error distribution is normal, but it can also be a skew-normal,
<code class="reqn">t</code>, or skew-<code class="reqn">t</code> distribution, or a selection of the best-fitting
error distribution.
</p>
<p>If <code>errors = "boot"</code>, bootstrapping the error terms from the observed
residuals is done independently for the different regression models and,
if also <code>explanatory = "boot"</code>, independently from bootstrapping the
explanatory variables.
</p>
<p>The <code>"boot_test_mediation"</code> method for results of a bootstrap test
always uses the regression coefficient estimates obtained on the original
data for data generation, not the bootstrap estimates.  Keep in mind that
all bootstrap estimates are the means of the respective bootstrap
replicates.  If the bootstrap estimates of the regression coefficients were
used to generate the data, the true values of the indirect effects for the
generated data (i.e., the products of the corresponding bootstrap
coefficient estimates) would not be equal to the reported bootstrap
estimates of the indirect effects in <code>object</code>, which could lead to
confusion.  For the estimates on the original data, it of course holds that
the estimates of indirect effects are the products of the corresponding
coefficient estimates.
</p>


<h3>Value</h3>

<p>A data frame with <code>n</code> observations containing simulated data
for the variables of the fitted mediation model.
</p>


<h3>Mediation models</h3>

<p>The following mediation models are implemented.  In the regression equations
below, the <code class="reqn">i_j</code> are intercepts and the <code class="reqn">e_j</code> are random error terms.
</p>

<ul>
<li>
<p><em>Simple mediation model</em>: The mediation model in its simplest
form is given by the equations
</p>
<p style="text-align: center;"><code class="reqn">M = i_1 + aX + e_1,</code>
</p>

<p style="text-align: center;"><code class="reqn">Y = i_2 + bM + cX + e_2,</code>
</p>

<p style="text-align: center;"><code class="reqn">Y = i_3 + c'X + e_3,</code>
</p>

<p>where <code class="reqn">Y</code> denotes the dependent variable, <code class="reqn">X</code> the independent
variable, and <code class="reqn">M</code> the hypothesized mediator.  The main parameter of
interest is the product of coefficients <code class="reqn">ab</code>, called the indirect
effect.  The coefficients <code class="reqn">c</code> and <code class="reqn">c'</code> are called the direct and
total effect, respectively.
</p>
</li>
<li>
<p><em>Parallel multiple mediator model</em>: The simple mediation model
can be extended with multiple mediators <code class="reqn">M_1, \dots, M_k</code> in the
following way:
</p>
<p style="text-align: center;"><code class="reqn">M_1 = i_1 + a_1 X + e_1,</code>
</p>

<p style="text-align: center;"><code class="reqn">\vdots</code>
</p>

<p style="text-align: center;"><code class="reqn">M_k = i_k + a_k X + e_k,</code>
</p>

<p style="text-align: center;"><code class="reqn">Y = i_{k+1} + b_1 M_1 + \dots + b_k M_k + c X + e_{k+1},</code>
</p>

<p style="text-align: center;"><code class="reqn">Y = i_{k+2} + c' X + e_{k+2}.</code>
</p>

<p>The main parameters of interest are the individual indirect effects
<code class="reqn">a_1 b_1, \dots, a_k b_k</code>.
</p>
</li>
<li>
<p><em>Serial multiple mediator model</em>: It differs from the parallel
multiple mediator model in that it allows the hypothesized mediators
<code class="reqn">M_1, \dots, M_k</code> to influence each other in a sequential manner.
It is given by the equations
</p>
<p style="text-align: center;"><code class="reqn">M_1 = i_1 + a_1 X + e_1,</code>
</p>

<p style="text-align: center;"><code class="reqn">M_2 = i_1 + d_{21} M_1 + a_2 X + e_2,</code>
</p>

<p style="text-align: center;"><code class="reqn">\vdots</code>
</p>

<p style="text-align: center;"><code class="reqn">M_k = i_k + d_{k1} M_1 + \dots +  d_{k,k-1} M_{k-1} + a_k X + e_k,</code>
</p>

<p style="text-align: center;"><code class="reqn">Y = i_{k+1} + b_1 M_1 + \dots + b_k M_k + c X + e_{k+1},</code>
</p>

<p style="text-align: center;"><code class="reqn">Y = i_{k+2} + c' X + e_{k+2}.</code>
</p>

<p>The serial multiple mediator model quickly grows in complexity with
increasing number of mediators due to the combinatorial increase in
indirect paths through the mediators.  It is therefore only implemented
for two and three mediators to maintain a focus on easily interpretable
models.  For two serial mediators, the three indirect effects
<code class="reqn">a_1 b_1</code>, <code class="reqn">a_2 b_2</code>, and <code class="reqn">a_1 d_{21} b_2</code> are the main
parameters of interest.  For three serial mediators, there are already
seven indirect effects: <code class="reqn">a_1 b_1</code>, <code class="reqn">a_2 b_2</code>, <code class="reqn">a_3 b_3</code>,
<code class="reqn">a_1 d_{21} b_2</code>, <code class="reqn">a_1 d_{31} b_3</code>, <code class="reqn">a_2 d_{32} b_3</code>, and
<code class="reqn">a_1 d_{21} d_{32} b_3</code>.
</p>
</li>
<li>
<p><em>Multiple independent variables to be mediated</em>: The simple
mediation model can also be extended by allowing multiple independent
variables <code class="reqn">X_1, \dots, X_l</code> instead of multiple mediators.  It is
defined by the equations
</p>
<p style="text-align: center;"><code class="reqn">M = i_1 + a_1 X_1 + \dots + a_l X_l + e_1,</code>
</p>

<p style="text-align: center;"><code class="reqn">Y = i_2 + b M + c_1 X_1 + \dots + c_l X_l + e_2,</code>
</p>

<p style="text-align: center;"><code class="reqn">Y = i_3 + c_1' X_1 + \dots + c_l' X_l + e_3.</code>
</p>

<p>The indirect effects <code class="reqn">a_1 b, \dots, a_l b</code> are the main parameters of
interest.  Note that an important special case of this model occurs when a
categorical independent variable is represented by a group of dummy
variables.
</p>
</li>
<li>
<p><em>Control variables</em>: To isolate the effects of the independent
variables of interest from other factors, control variables can be added
to all regression equations of a mediation model.  Note that that there is
no intrinsic difference between independent variables of interest and
control variables in terms of the model or its estimation.  The difference
is purely conceptual in nature: for the control variables, the estimates
of the direct and indirect paths are not of particular interest to the
researcher.  Control variables can therefore be specified separately from
the independent variables of interest.  Only for the latter, results for
the indirect effects are included in the output.
</p>
</li>
<li>
<p><em>More complex models</em>: Some of the models described above can
be combined, for instance parallel and serial multiple mediator models
support multiple independent variables of interest and control variables.
</p>
</li>
</ul>
<h3>Note</h3>

<p>Function <code>sim_mediation()</code> takes the object containing results from
mediation analysis as its first argument so that it can easily be used with
the pipe operator (<span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>'s built-in <code>|&gt;</code> or <span class="pkg">magrittr</span>'s <code>%&gt;%</code>).
</p>
<p>Function <code>rmediation()</code> is a wrapper conforming with the naming
convention for functions that generate data, as well as the convention of
those function to take the number of observations as the first argument.
</p>


<h3>Author(s)</h3>

<p>Andreas Alfons
</p>


<h3>See Also</h3>

<p><code>fit_mediation()</code>, <code>test_mediation()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data("BSG2014")

## simple mediation
# fit the mediation model
fit_simple &lt;- fit_mediation(BSG2014,
                            x = "ValueDiversity",
                            y = "TeamCommitment",
                            m = "TaskConflict")
# simulate data from the fitted mediation model
sim_simple &lt;- sim_mediation(fit_simple, n = 100)
head(sim_simple)

## serial multiple mediators
# fit the mediation model
fit_serial &lt;- fit_mediation(BSG2014,
                            x = "ValueDiversity",
                            y = "TeamScore",
                            m = c("TaskConflict",
                                  "TeamCommitment"),
                            model = "serial")
# simulate data from the fitted mediation model
sim_serial &lt;- sim_mediation(fit_serial, n = 100)
head(sim_serial)

## parallel multiple mediators and control variables
# fit the mediation model
fit_parallel &lt;- fit_mediation(BSG2014,
                              x = "SharedLeadership",
                              y = "TeamPerformance",
                              m = c("ProceduralJustice",
                                    "InteractionalJustice"),
                              covariates = c("AgeDiversity",
                                             "GenderDiversity"),
                              model = "parallel")
# simulate data from the fitted mediation model
# (here the explanatory variables are bootstrapped
# to maintain the correlations between them)
sim_parallel &lt;- sim_mediation(fit_parallel, n = 100,
                              explanatory = "boot")
head(sim_parallel)

</code></pre>


</div>