<div class="container">

<table style="width: 100%;"><tr>
<td>getSimulationCounts</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Get Simulation Counts</h2>

<h3>Description</h3>

<p>Returns the simulated power, stopping probabilities, conditional power, and expected sample size for
testing mean rates for negative binomial distributed event numbers in the two treatment groups testing situation.
</p>


<h3>Usage</h3>

<pre><code class="language-R">getSimulationCounts(
  design = NULL,
  ...,
  plannedCalendarTime,
  maxNumberOfSubjects = NA_real_,
  lambda1 = NA_real_,
  lambda2 = NA_real_,
  lambda = NA_real_,
  theta = NA_real_,
  directionUpper = NA,
  thetaH0 = 1,
  overdispersion = 0,
  fixedExposureTime = NA_real_,
  accrualTime = NA_real_,
  accrualIntensity = NA_real_,
  followUpTime = NA_real_,
  allocationRatioPlanned = NA_real_,
  maxNumberOfIterations = 1000L,
  seed = NA_real_,
  showStatistics = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>design</code></td>
<td>
<p>The trial design. If no trial design is specified, a fixed sample size design is used.
In this case, Type I error rate <code>alpha</code>, Type II error rate <code>beta</code>, <code>twoSidedPower</code>,
and <code>sided</code> can be directly entered as argument where necessary.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Ensures that all arguments (starting from the "...") are to be named and
that a warning will be displayed if unknown arguments are passed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plannedCalendarTime</code></td>
<td>
<p>For simulating count data, the time points where an analysis is planned to be performed.
Should be a vector of length <code>kMax</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxNumberOfSubjects</code></td>
<td>
<p><code>maxNumberOfSubjects &gt; 0</code> needs to be specified for power calculations or calculation
of necessary follow-up (count data). For two treatment arms, it is the maximum number of subjects for both treatment arms.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambda1</code></td>
<td>
<p>A numeric value or vector that represents the assumed rate of a homogeneous Poisson process in
the active treatment group, there is no default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambda2</code></td>
<td>
<p>A numeric value that represents the assumed rate of a homogeneous Poisson process in
the control group, there is no default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambda</code></td>
<td>
<p>A numeric value or vector that represents the assumed rate of a homogeneous Poisson process in
the pooled treatment groups, there is no default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>theta</code></td>
<td>
<p>A numeric value or vector that represents the assumed mean ratios lambda1/lambda2 of a homogeneous
Poisson process, there is no default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>directionUpper</code></td>
<td>
<p>Logical. Specifies the direction of the alternative,
only applicable for one-sided testing; default is <code>TRUE</code>
which means that larger values of the test statistics yield smaller p-values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>thetaH0</code></td>
<td>
<p>The null hypothesis value,
default is <code>0</code> for the normal and the binary case (testing means and rates, respectively),
it is <code>1</code> for the survival case (testing the hazard ratio).<br><br>
For non-inferiority designs, <code>thetaH0</code> is the non-inferiority bound.
That is, in case of (one-sided) testing of
</p>

<ul>
<li> <p><em>means</em>: a value <code>!= 0</code>
(or a value <code>!= 1</code> for testing the mean ratio) can be specified.
</p>
</li>
<li> <p><em>rates</em>: a value <code>!= 0</code>
(or a value <code>!= 1</code> for testing the risk ratio <code>pi1 / pi2</code>) can be specified.
</p>
</li>
<li> <p><em>survival data</em>: a bound for testing H0: <code>hazard ratio = thetaH0 != 1</code> can be specified.
</p>
</li>
<li> <p><em>count data</em>: a bound for testing H0: <code>lambda1 / lambda2 = thetaH0 != 1</code> can be specified.
</p>
</li>
</ul>
<p>For testing a rate in one sample, a value <code>thetaH0</code> in (0, 1) has to be specified for
defining the null hypothesis H0: <code>pi = thetaH0</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>overdispersion</code></td>
<td>
<p>A numeric value that represents the assumed overdispersion of the negative binomial distribution,
default is <code>0</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fixedExposureTime</code></td>
<td>
<p>If specified, the fixed time of exposure per subject for count data, there is no default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>accrualTime</code></td>
<td>
<p>If specified, the assumed accrual time interval(s) for the study, there is no default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>accrualIntensity</code></td>
<td>
<p>If specified, the assumed accrual intensities for the study, there is no default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>followUpTime</code></td>
<td>
<p>If specified, the assumed (additional) follow-up time for the study, there is no default.
The total study duration is <code>accrualTime + followUpTime</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>allocationRatioPlanned</code></td>
<td>
<p>The planned allocation ratio <code>n1 / n2</code> for a two treatment groups
design, default is <code>1</code>. For multi-arm designs, it is the allocation ratio relating the active arm(s) to the control.
For simulating means and rates for a two treatment groups design, it can be a vector of length <code>kMax</code>, the number of stages.
It can be a vector of length kMax, too, for multi-arm and enrichment designs.
In these cases, a change of allocating subjects to treatment groups over the stages can be assessed.
Note that internally <code>allocationRatioPlanned</code> is treated as a vector of length <code>kMax</code>, not a scalar.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxNumberOfIterations</code></td>
<td>
<p>The number of simulation iterations, default is <code>1000</code>. Must be a positive integer of length 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>The seed to reproduce the simulation, default is a random seed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>showStatistics</code></td>
<td>
<p>Logical. If <code>TRUE</code>, summary statistics of the simulated data
are displayed for the <code>print</code> command, otherwise the output is suppressed, default
is <code>FALSE</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>At given design the function simulates the power, stopping probabilities, conditional power, and expected
sample size at given number of subjects and parameter configuration.
Additionally, an allocation <code>ratio = n1/n2</code> and a null hypothesis value <code>thetaH0</code> can be specified.
</p>


<h3>Value</h3>

<p>Returns a <code>SimulationResults</code> object.
The following generics (R generic functions) are available for this object:
</p>

<ul>
<li> <p><code>names()</code> to obtain the field names,
</p>
</li>
<li> <p><code>print()</code> to print the object,
</p>
</li>
<li> <p><code>summary()</code> to display a summary of the object,
</p>
</li>
<li> <p><code>plot()</code> to plot the object,
</p>
</li>
<li> <p><code>as.data.frame()</code> to coerce the object to a <code>data.frame</code>,
</p>
</li>
<li> <p><code>as.matrix()</code> to coerce the object to a <code>matrix</code>.
</p>
</li>
</ul>
<h3>Simulation Data</h3>

<p>The summary statistics "Simulated data" contains the following parameters: median range; mean +/-sd<br></p>
<p><code>$show(showStatistics = FALSE)</code> or <code>$setShowStatistics(FALSE)</code> can be used to disable
the output of the aggregated simulated data.<br></p>
<p><code>getData()</code> can be used to get the aggregated simulated data from the
object as <code>data.frame</code>. The data frame contains the following columns:
</p>

<ol>
<li> <p><code>iterationNumber</code>: The number of the simulation iteration.
</p>
</li>
<li> <p><code>stageNumber</code>: The stage.
</p>
</li>
<li> <p><code>lambda1</code>: The assumed or derived event rate in the treatment group.
</p>
</li>
<li> <p><code>lambda2</code>: The assumed or derived event rate in the control group.
</p>
</li>
<li> <p><code>accrualTime</code>: The assumed accrualTime.
</p>
</li>
<li> <p><code>followUpTime</code>: The  assumed followUpTime.
</p>
</li>
<li> <p><code>overdispersion</code>: The  assumed overdispersion.
</p>
</li>
<li> <p><code>fixedFollowUp</code>: The  assumed fixedFollowUp.
</p>
</li>
<li> <p><code>numberOfSubjects</code>: The number of subjects under consideration when the (interim) analysis takes place.
</p>
</li>
<li> <p><code>rejectPerStage</code>: 1 if null hypothesis can be rejected, 0 otherwise.
</p>
</li>
<li> <p><code>futilityPerStage</code>: 1 if study should be stopped for futility, 0 otherwise.
</p>
</li>
<li> <p><code>testStatistic</code>: The test statistic that is used for the test decision
</p>
</li>
<li> <p><code>estimatedLambda1</code>: The estimated rate in treatment group 1.
</p>
</li>
<li> <p><code>estimatedLambda2</code>: The estimated rate in treatment group 2.
</p>
</li>
<li> <p><code>estimatedOverdispersion</code>: The estimated overdispersion.
</p>
</li>
<li> <p><code>infoAnalysis</code>: The Fisher information at interim stage.
</p>
</li>
<li> <p><code>trialStop</code>: <code>TRUE</code> if study should be stopped for efficacy or futility or final stage, <code>FALSE</code> otherwise.
</p>
</li>
<li> <p><code>conditionalPowerAchieved</code>: Not yet available
</p>
</li>
</ol>
<h3>How to get help for generic functions</h3>

<p>Click on the link of a generic in the list above to go directly to the help documentation of
the <code>rpact</code> specific implementation of the generic.
Note that you can use the R function <code>methods</code> to get all the methods of a generic and
to identify the object specific name of it, e.g.,
use <code>methods("plot")</code> to get all the methods for the <code>plot</code> generic.
There you can find, e.g., <code>plot.AnalysisResults</code> and
obtain the specific help documentation linked above by typing <code>?plot.AnalysisResults</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# Fixed sample size design with two groups, fixed exposure time
getSimulationCounts(
    theta = 1.8,
    lambda2 = 0.2,
    maxNumberOfSubjects = 200,
    plannedCalendarTime = 8,
    maxNumberOfIterations = 1000,
    fixedExposureTime = 6,
    accrualTime = 3,
    overdispersion = 2)

# Group sequential design alpha spending function design with O'Brien and 
# Fleming type boundaries: Power and test characteristics for N = 264, 
# under variable exposure time with uniform recruitment over 1.25 months,
# study time (accrual + followup) = 4, interim analysis take place after
# equidistant time points (lambda1, lambda2, and overdispersion as specified,
# no futility stopping):
dOF &lt;- getDesignGroupSequential(
    kMax = 3,
    alpha = 0.025,
    beta = 0.2,
    typeOfDesign = "asOF")

getSimulationCounts(design = dOF,
    lambda1 = seq(0.04, 0.12, 0.02),
    lambda2 = 0.12,
    directionUpper = FALSE,
    overdispersion = 5,
    plannedCalendarTime = (1:3)/3*4,
    maxNumberOfSubjects = 264,
    followUpTime = 2.75,
    accrualTime = 1.25,
    maxNumberOfIterations = 1000)

## End(Not run)

</code></pre>


</div>