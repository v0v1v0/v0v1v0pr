<div class="container">

<table style="width: 100%;"><tr>
<td>factorAnalysis</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Factor analysis or principal component analysis</h2>

<h3>Description</h3>

<p>This is a wrapper for the <code>psych</code> functions <code>psych::pca()</code> and <code>psych::fa()</code>
to produce output that it similar to the output produced by jamovi.
</p>


<h3>Usage</h3>

<pre><code class="language-R">factorAnalysis(
  data,
  nfactors,
  items = names(data),
  rotate = "oblimin",
  covar = FALSE,
  na.rm = TRUE,
  kaiser = 1,
  loadings = TRUE,
  summary = FALSE,
  correlations = FALSE,
  modelFit = FALSE,
  eigenValues = FALSE,
  screePlot = FALSE,
  residuals = FALSE,
  itemLabels = items,
  colorLoadings = FALSE,
  fm = "minres",
  digits = 2,
  headingLevel = 3,
  ...
)

principalComponentAnalysis(
  data,
  items,
  nfactors,
  rotate = "oblimin",
  covar = FALSE,
  na.rm = TRUE,
  kaiser = 1,
  loadings = TRUE,
  summary = FALSE,
  correlations = FALSE,
  eigenValues = FALSE,
  screePlot = FALSE,
  residuals = FALSE,
  itemLabels = items,
  colorLoadings = FALSE,
  digits = 2,
  headingLevel = 3,
  ...
)

rosettaDataReduction_partial(
  x,
  digits = x$input$digits,
  headingLevel = x$input$headingLevel,
  echoPartial = FALSE,
  partialFile = NULL,
  quiet = TRUE,
  ...
)

## S3 method for class 'rosettaDataReduction'
knit_print(
  x,
  digits = x$input$digits,
  headingLevel = x$input$headingLevel,
  echoPartial = FALSE,
  partialFile = NULL,
  quiet = TRUE,
  ...
)

## S3 method for class 'rosettaDataReduction'
print(
  x,
  digits = x$input$digits,
  headingLevel = x$input$headingLevel,
  forceKnitrOutput = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>The data frame that contains the <code>items</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nfactors</code></td>
<td>
<p>The number of factors to extract, or '<code>eigen</code>' to
extract all factors with an eigen value higher than the number
specified in <code>kaiser</code>. In the future, <code>parallel</code> can be specified
here to extract the number of factors suggested by parallel analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>items</code></td>
<td>
<p>The items to analyse; if not specified, all variables
in <code>data</code> will be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rotate</code></td>
<td>
<p>Which rotation to use; see <code>psych::fa()</code> for all
options. The most common options are '<code>none</code>' to not rotate at all;
'<code>varimax</code>' for an orthogonal rotation (assuming/imposing that the
components or factors are not correlated); or '<code>oblimin</code>' for an
oblique rotation (allowing the components/factors to correlate).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>covar</code></td>
<td>
<p>Whether to analyse the correlation matrix (<code>FALSE</code>) or
the covariance matrix (<code>TRUE</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.rm</code></td>
<td>
<p>Whether to first remove all cases with missing values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>kaiser</code></td>
<td>
<p>The minimum eigenvalue when applying the Kaiser criterion (see
<code>nfactors</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>loadings</code></td>
<td>
<p>Whether to display the component or factor loadings.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>summary</code></td>
<td>
<p>Whether to display the factor or component summary.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>correlations</code></td>
<td>
<p>Whether to display the correlations between
factors of components.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>modelFit</code></td>
<td>
<p>Whether to display the model fit Only for EFA).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>eigenValues</code></td>
<td>
<p>Whether to display the eigen values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>screePlot</code></td>
<td>
<p>Whether to display the scree plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>residuals</code></td>
<td>
<p>Whether to display the matrix with residuals.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>itemLabels</code></td>
<td>
<p>Optionally, labels to use for the items (optionally, named,
with the names corresponding to the <code>items</code>; otherwise, the order of the
labels has to match the order of the items)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colorLoadings</code></td>
<td>
<p>Whether, when producing an Rmd partial (i.e. when
calling the command while knitting) to colour the cells using
<code>kableExtra::kable_styling()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fm</code></td>
<td>
<p>The method to use for the factor analysis: '<code>fm</code>' for Minimum
Residuals; '<code>ml</code>' for Maximum Likelihood; and '<code>pa</code>' for Principal Factor.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>The number of digits to round to.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>headingLevel</code></td>
<td>
<p>The number of hashes to print in front of the headings
when printing while knitting</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Any additional arguments are passed to <code>psych::fa()</code>,
<code>psych::pca()</code>, to the default print method by the print method, and to
<code>rmdpartials::partial()</code> when knitting an RMarkdown partial.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>The object to print.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>echoPartial</code></td>
<td>
<p>Whether to show the executed code in the R Markdown
partial (<code>TRUE</code>) or not (<code>FALSE</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>partialFile</code></td>
<td>
<p>This can be used to specify a custom partial file. The
file will have object <code>x</code> available.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quiet</code></td>
<td>
<p>Passed on to <code>knitr::knit()</code> whether it should b
chatty (<code>FALSE</code>) or quiet (<code>TRUE</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>forceKnitrOutput</code></td>
<td>
<p>Force knitr output.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The code in these functions uses parts of the code in jamovi, written
by Jonathon Love and Ravi Selker.
</p>


<h3>Value</h3>

<p>An object with the object resulting from the call to the
<code>psych</code> functions and some extracted information that will be printed.
</p>


<h3>Examples</h3>

<pre><code class="language-R">### Load example dataset
data("pp15", package="rosetta");

### Get variable names with expected
### effects of a high dose of MDMA
items &lt;-
  grep(
    "highDose_AttBeliefs_",
    names(pp15),
    value=TRUE
  );

### Do a factor analysis
rosetta::factorAnalysis(
  data = pp15,
  items = items,
  nfactors = "eigen",
  scree = TRUE
);

if (FALSE) {
  ### To get more output, show the
  ### output as Rmd Partial in the viewer,
  ### and color/size the factor loadings
  rosetta::rosettaDataReduction_partial(
    rosetta::factorAnalysis(
      data = pp15,
      items = items,
      nfactors = "eigen",
      summary = TRUE,
      correlations = TRUE,
      colorLoadings = TRUE
    )
  );
}

</code></pre>


</div>