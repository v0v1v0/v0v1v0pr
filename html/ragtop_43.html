<div class="container">

<table style="width: 100%;"><tr>
<td>iterate_grid_from_timestep</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Iterate over a set of timesteps to integrate the pricing differential equation</h2>

<h3>Description</h3>

<p>Timestep an implicit integration scheme to numerically integrate
the pricing differential equation for each of the given instruments,
backwardating from time <code>Tmax</code> to time 0.
</p>


<h3>Usage</h3>

<pre><code class="language-R">iterate_grid_from_timestep(
  starting_time_step,
  time_pts,
  z,
  S0,
  instruments,
  stock_level_fcn,
  discount_factor_fcn,
  default_intensity_fcn,
  variance_cumulation_fcn,
  dividends = NULL,
  grid = NULL,
  original_grid_values = as.matrix(grid[1 + starting_time_step, , ])
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>starting_time_step</code></td>
<td>
<p>The index into time_pts of the first timestep
to be emplyed.  This must be no larger than the length of time_pts, minus one</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time_pts</code></td>
<td>
<p>Time nodes to be treated on the grid</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>z</code></td>
<td>
<p>Space grid value morphable to stock prices using <code>stock_level_fcn</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>S0</code></td>
<td>
<p>Time zero price of the base equity</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>instruments</code></td>
<td>
<p>A list of instruments to be priced.  Each
one must have a <code>strike</code> and a <code>optionality_fcn</code>, as
with <code>GridPricedInstrument</code> and its subclasses.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stock_level_fcn</code></td>
<td>
<p>A function for changing space grid value to stock
prices, with arguments <code>z</code> and <code>t</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>discount_factor_fcn</code></td>
<td>
<p>A function for computing present values to
time <code>t</code> of various cashflows occurring during this timestep, with
arguments <code>T</code>, <code>t</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>default_intensity_fcn</code></td>
<td>
<p>A function for computing default intensity
occurring during this timestep, dependent on time and stock price, with
arguments <code>t</code>, <code>S</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>variance_cumulation_fcn</code></td>
<td>
<p>A function for computing total stock variance
occurring during this timestep, with arguments <code>T</code>, <code>t</code>.  E.g. with
a constant volatility <code class="reqn">s</code> this takes the form <code class="reqn">(T-t)s^2</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dividends</code></td>
<td>
<p>A <code>data.frame</code> with columns <code>time</code>, <code>fixed</code>,
and <code>proportional</code>.  Dividend size at the given <code>time</code> is
then expected to be equal to <code>fixed + proportional * S / S0</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grid</code></td>
<td>
<p>An optional grid into which results at each timestep will
be written.  Its size should be at least
<code>(1+starting_time_step, length(z), length(instruments))</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>original_grid_values</code></td>
<td>
<p>Grid values to timestep from</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Either a populated grid of present values of derivative prices, or a matrix
of values at the first time point, adapted to <code>z</code> at
each timestep.  Time zero value will appear in the first index of any grid.
</p>


<h3>See Also</h3>

<p>Other Implicit Grid Solver: 
<code>construct_implicit_grid_structure()</code>,
<code>find_present_value()</code>,
<code>form_present_value_grid()</code>,
<code>infer_conforming_time_grid()</code>,
<code>integrate_pde()</code>,
<code>take_implicit_timestep()</code>,
<code>timestep_instruments()</code>
</p>


</div>