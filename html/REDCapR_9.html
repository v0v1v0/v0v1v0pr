<div class="container">

<table style="width: 100%;"><tr>
<td>create_batch_glossary</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Creates a dataset that help batching long-running
read and writes</h2>

<h3>Description</h3>

<p>The function returns a <code>base::data.frame()</code> that other
functions use to separate long-running read and write REDCap calls into
multiple, smaller REDCap calls.  The goal is to (1) reduce the chance of
time-outs, and (2) introduce little breaks between batches so that the
server isn't continually tied up.
</p>


<h3>Usage</h3>

<pre><code class="language-R">create_batch_glossary(row_count, batch_size)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>row_count</code></td>
<td>
<p>The number records in the large dataset, before it's split.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>batch_size</code></td>
<td>
<p>The maximum number of subject records a single batch
should contain.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function can also assist splitting and saving a large
data frame to disk as smaller files (such as a .csv).  The
padded columns allow the OS to sort the batches/files in sequential order.
</p>


<h3>Value</h3>

<p>Currently, a <code>base::data.frame()</code> is returned with the following
columns,
</p>

<ul>
<li> <p><code>id</code>: an <code>integer</code> that uniquely identifies the batch, starting at <code>1</code>.
</p>
</li>
<li> <p><code>start_index</code>: the index of the first row in the batch. <code>integer</code>.
</p>
</li>
<li> <p><code>stop_index</code>: the index of the last row in the batch. <code>integer</code>.
</p>
</li>
<li> <p><code>id_pretty</code>: a <code>character</code> representation of <code>id</code>, but padded with zeros.
</p>
</li>
<li> <p><code>start_index</code>: a <code>character</code> representation of <code>start_index</code>, but padded
with zeros.
</p>
</li>
<li> <p><code>stop_index</code>: a <code>character</code> representation of <code>stop_index</code>, but padded
with zeros.
</p>
</li>
<li> <p><code>label</code>: a <code>character</code> concatenation of <code>id_pretty</code>, <code>start_index</code>, and
<code>stop_index_pretty</code>.
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>Will Beasley
</p>


<h3>See Also</h3>

<p>See <code>redcap_read()</code> for a function that uses <code>create_batch_glossary</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">REDCapR::create_batch_glossary(100, 50)
REDCapR::create_batch_glossary(100, 25)
REDCapR::create_batch_glossary(100,  3)
REDCapR::create_batch_glossary(  0,  3)
d &lt;- data.frame(
  record_id = 1:100,
  iv        = sample(x=4, size=100, replace=TRUE),
  dv        = rnorm(n=100)
)
REDCapR::create_batch_glossary(nrow(d), batch_size=40)
</code></pre>


</div>