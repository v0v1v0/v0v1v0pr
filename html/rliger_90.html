<div class="container">

<table style="width: 100%;"><tr>
<td>downsample</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Downsample datasets</h2>

<h3>Description</h3>

<p>This function mainly aims at downsampling datasets to a size
suitable for plotting or expensive in-memmory calculation.
</p>
<p>Users can balance the sample size of categories of interests with
<code>balance</code>. Multi-variable specification to <code>balance</code> is supported,
so that at most <code>maxCells</code> cells will be sampled from each combination
of categories from the variables. For example, when two datasets are
presented and three clusters labeled across them, there would then be at most
<code class="reqn">2 \times 3 \times maxCells</code> cells being selected. Note that
<code>"dataset"</code> will automatically be added as one variable when balancing
the downsampling. However, if users want to balance the downsampling solely
basing on dataset origin, users have to explicitly set <code>balance =
"dataset"</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">downsample(
  object,
  balance = NULL,
  maxCells = 1000,
  useDatasets = NULL,
  seed = 1,
  returnIndex = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>liger object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>balance</code></td>
<td>
<p>Character vector of categorical variable names in
<code>cellMeta</code> slot, to subsample <code>maxCells</code> cells from each
combination of all specified variables. Default <code>NULL</code> samples
<code>maxCells</code> cells from the whole object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxCells</code></td>
<td>
<p>Max number of cells to sample from the grouping based on
<code>balance</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>useDatasets</code></td>
<td>
<p>Index selection of datasets to include Default
<code>NULL</code> for using all datasets.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>Random seed for reproducibility. Default <code>1</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>returnIndex</code></td>
<td>
<p>Logical, whether to only return the numeric index that can
subset the original object instead of a subset object. Default <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments passed to <code>subsetLiger</code>, where
<code>cellIdx</code> is occupied by internal implementation.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>By default, a subset of liger <code>object</code>.
Alternatively when <code>returnIndex = TRUE</code>, a numeric vector to be used
with the original object.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Subsetting an object
pbmc &lt;- downsample(pbmc)
# Creating a subsetting index
sampleIdx &lt;- downsample(pbmcPlot, balance = "leiden_cluster",
                        maxCells = 10, returnIndex = TRUE)
plotClusterDimRed(pbmcPlot, cellIdx = sampleIdx)
</code></pre>


</div>