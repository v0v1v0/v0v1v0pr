<div class="container">

<table style="width: 100%;"><tr>
<td>gettvc</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Find the Most Recent Value of a Time-varying Covariate
Before Each Observed Response</h2>

<h3>Description</h3>

<p><code>gettvc</code> finds the most recent value of a time-varying covariate
before each observed response and possibly adds them to a list of other
time-varying covariates.
It compares the times of response observations with those of
time-varying covariates to find the most recent observed time-varying
covariate for each response. These are either placed in a new object of
class, <code>tvcov</code>, added to an already existing list of matrices containing
other time-varying covariates and a new object of class, <code>tvcov</code>,
created, or added to an existing object of class, <code>tvcov</code>.
</p>
<p>If there are response observation times before the first covariate
time, the covariate for these times is set to zero.
</p>


<h3>Usage</h3>

<pre><code class="language-R">gettvc(response, times=NULL, tvcov=NULL, tvctimes=NULL,
	oldtvcov=NULL, ties=TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>response</code></td>
<td>
<p>A list of two column matrices with response values and
times for each individual, one matrix or dataframe of response
values, or an object of class, <code>response</code> (created by
<code>restovec</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>times</code></td>
<td>
<p>When <code>response</code> is a matrix, a vector of possibly
unequally spaced times for the response, when they are the same for
all individuals or a matrix of times. Not necessary if equally spaced.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tvcov</code></td>
<td>
<p>A list of two column matrices with time-varying covariate
values and corresponding times for each individual or one matrix or
dataframe of such covariate values. Times need not be the same as for
responses.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tvctimes</code></td>
<td>
<p>When the time-varying covariate is a matrix, a vector
of possibly unequally spaced times for the covariate, when they are
the same for all individuals or a matrix of times. Not necessary if
equally spaced.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>oldtvcov</code></td>
<td>
<p>A list of matrices with time-varying covariate values,
observed at the event times in <code>response</code>, for each individual,
or an object of class, <code>tvcov</code>. If not provided, a new object is
created.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ties</code></td>
<td>
<p>If TRUE, when the response and covariate times are
identical, the response depends on that new value (as in observational
studies); if FALSE, only the next response depends on that value (for
example, if the covariate is a new treatment just applied at that time).</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class, <code>tvcov</code>, is returned containing the new time-varying
covariate and, possibly, those in <code>oldtvcov</code>.
</p>


<h3>Author(s)</h3>

<p>J.K. Lindsey and D.F. Heitjan</p>


<h3>See Also</h3>

<p><code>read.list</code>, <code>restovec</code>,
<code>tvctomat</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
y &lt;- matrix(rnorm(20), ncol=5)
resp &lt;- restovec(y, times=c(1,3,6,10,15))
z &lt;- matrix(rpois(20,5),ncol=5)
z
# create a new time-varying covariate object for the response
newtvc &lt;- gettvc(resp, tvcov=z, tvctimes=c(1,2,5,12,14))
covariates(newtvc)
# add another time-varying covariate to the object
z2 &lt;- matrix(rpois(20,5),ncol=5)
z2
newtvc2 &lt;- gettvc(resp, tvcov=z2, tvctimes=c(0,4,5,12,16), oldtvc=newtvc)
covariates(newtvc2)

## End(Not run)
</code></pre>


</div>