<div class="container">

<table style="width: 100%;"><tr>
<td>read_ascii</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Read ASCII datasets downloaded from the Roper Center</h2>

<h3>Description</h3>

<p><code>read_ascii</code> helps format ASCII data files downloaded from the Roper Center.
</p>


<h3>Usage</h3>

<pre><code class="language-R">read_ascii(
  file,
  total_cards = 1,
  var_names,
  var_cards = 1,
  var_positions,
  var_widths,
  card_pattern,
  respondent_pattern
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p>A path to an ASCII data file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>total_cards</code></td>
<td>
<p>For multicard files, the number of cards in the file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var_names</code></td>
<td>
<p>A string vector of variable names.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var_cards</code></td>
<td>
<p>For multicard files, a numeric vector of the cards on which <code>var_names</code> are recorded.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var_positions</code></td>
<td>
<p>A numeric vector of the column positions in which <code>var_names</code> are recorded.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var_widths</code></td>
<td>
<p>A numeric vector of the widths used to record <code>var_names</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>card_pattern</code></td>
<td>
<p>For use when the file does not contain a line for every card for every respondent (or contains extra lines that correspond to no respondent), a regular expression that matches the file's card identifier; e.g., if the card number is stored in the last digit of each line, "\d$".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>respondent_pattern</code></td>
<td>
<p>For use when the file does not contain a line for every card for every respondent (or contains extra lines that correspond to no respondent), a regular expression that matches the file's respondent identifier; e.g., if the respondent number is stored in the first four digits of each line, preceded by a space, "(?&lt;=^\s)\d4".</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Many older Roper Center datasets are available only in ASCII format, which is notoriously difficult to work with.  The 'read_ascii' function facilitates the process of extracting selected variables from ASCII datasets. For single-card files, one can simply identify the names, positions, and widths of the needed variables from the codebook and pass them to <code>read_ascii</code>'s <code>var_names</code>, <code>var_positions</code>, and <code>var_widths</code> arguments.  Multicard datasets are more complicated. In the best case, the file contains one line per card per respondent; then, the user can extract the needed variables by adding only the <code>var_cards</code> and <code>total_cards</code> arguments. When this condition is violated—there is not a line for every card for every respondent, or there are extra lines—the function will throw an error and request the user specify the additional arguments <code>card_pattern</code> and <code>respondent_pattern</code>.
</p>


<h3>Value</h3>

<p>A data frame containing any variables specified in the <code>var_names</code> argument, plus a numeric <code>respondent</code> identifier and as many string <code>card</code> variables (<code>card1</code>, <code>card2</code>, ...) as specified by the <code>total_cards</code> argument.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# a single-card file
roper_download("USAIPO1982-1197G", # Gallup Poll for June 25-28, 1982
               download_dir = tempdir())  # remember to specify a directory for your download
                      
gallup1982 &lt;- read_ascii(file = file.path(tempdir(), "USAIPO1982-1197G",
                                          "1197.dat"),
                         var_names = c("q09j", "weight"),
                         var_positions = c(38, 1),
                         var_widths = c(1, 1))
   
# a multi-card file, with extra lines that make the card_pattern and
  respondent_pattern arguments necessary
roper_download("USAIPOCNUS1996-9603008", # Gallup/CNN/USA Today Poll: Politics/1996 Election
               download_dir = tempdir())  # remember to specify a directory for your download

gallup1996 &lt;- read_ascii(file = file.path(tempdir(), "USAIPOCNUS1996-9603008",
                                          "a9603008.dat"),
                         var_names = c("q43a", "q44", "weight"),
                         var_cards = c(6, 6, 1),
                         var_positions = c(62, 64, 13),
                         var_widths = c(1, 1, 3),
                         total_cards = 7,
                         card_pattern = "(?&lt;=^.{10})\\d", 
                                        # (a digit, preceded by the start of the line
                                        # and ten other characters)
                         respondent_pattern = "(?&lt;=^\\s{2})\\d{4}")
                                       # (# four digits, preceded by the start of the line
                                       # and two whitespace characters)

## End(Not run)

</code></pre>


</div>