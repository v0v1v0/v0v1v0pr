<div class="container">

<table style="width: 100%;"><tr>
<td>rc.ramclustr</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>rc.ramclustr</h2>

<h3>Description</h3>

<p>Main clustering function for grouping features based on their analytical behavior.
</p>


<h3>Usage</h3>

<pre><code class="language-R">rc.ramclustr(
  ramclustObj = NULL,
  st = NULL,
  sr = NULL,
  maxt = NULL,
  deepSplit = FALSE,
  blocksize = 2000,
  mult = 5,
  hmax = NULL,
  collapse = TRUE,
  minModuleSize = 2,
  linkage = "average",
  cor.method = "pearson",
  rt.only.low.n = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>ramclustObj</code></td>
<td>
<p>ramclustR object: containing ungrouped features.  constructed by rc.get.xcms.data, for example</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>st</code></td>
<td>
<p>numeric: sigma t - time similarity decay value</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sr</code></td>
<td>
<p>numeric: sigma r - correlational similarity decay value</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxt</code></td>
<td>
<p>numeric: maximum time difference to calculate retention similarity for - all values beyond this are assigned similarity of zero</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>deepSplit</code></td>
<td>
<p>logical: controls how agressively the HCA tree is cut - see ?cutreeDynamicTree</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>blocksize</code></td>
<td>
<p>integer: number of features (scans?) processed in one block  =1000,</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mult</code></td>
<td>
<p>numeric: internal value, can be used to influence processing speed/ram usage</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hmax</code></td>
<td>
<p>numeric: precut the tree at this height, default 0.3 - see ?cutreeDynamicTree</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>collapse</code></td>
<td>
<p>logical: if true (default), feature quantitative values are collapsed into spectra quantitative values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minModuleSize</code></td>
<td>
<p>integer: how many features must be part of a cluster to be returned? default = 2</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>linkage</code></td>
<td>
<p>character: heirarchical clustering linkage method - see ?hclust</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cor.method</code></td>
<td>
<p>character: which correlational method used to calculate 'r' - see ?cor</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rt.only.low.n</code></td>
<td>
<p>logical: default = TRUE  At low injection numbers, correlational relationships of peak intensities may be unreliable.  by defualt ramclustR will simply ignore the correlational r value and cluster on retention time alone.  if you wish to use correlation with at n &lt; 5, set this value to FALSE.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Main clustering function output - see citation for algorithm description or vignette('RAMClustR') for a walk through.  batch.qc. normalization requires input of three vectors (1) batch (2) order (3) qc.   This is a feature centric normalization approach which adjusts signal intensities first by comparing batch median intensity of each feature (one feature at a time) QC signal intensity to full dataset median to correct for systematic batch effects and then secondly to apply a local QC median vs global median sample correction to correct for run order effects.
</p>


<h3>Value</h3>

<p>$featclus: integer vector of cluster membership for each feature
</p>
<p>$clrt: cluster retention time
</p>
<p>$clrtsd: retention time standard deviation of all the features that comprise that cluster
</p>
<p>$nfeat: number of features in the cluster
</p>
<p>$nsing: number of 'singletons' - that is the number of features which clustered with no other feature
</p>
<p>$cmpd: compound name.  C#### are assigned in order of output by dynamicTreeCut.  Compound with the most features is classified as C0001...
</p>
<p>$ann: annotation.  By default, annotation names are identical to 'cmpd' names.  This slot is a placeholder for when annotations are provided
</p>
<p>$SpecAbund: the cluster intensities after collapsing features to clusters
</p>
<p>$SpecAbundAve: the cluster intensities after averaging all samples with identical sample names
</p>


<h3>Author(s)</h3>

<p>Corey Broeckling
</p>


<h3>References</h3>

<p>Broeckling CD, Afsar FA, Neumann S, Ben-Hur A, Prenni JE. RAMClust: a novel feature clustering method enables spectral-matching-based annotation for metabolomics data. Anal Chem. 2014 Jul 15;86(14):6812-7. doi: 10.1021/ac501530d.  Epub 2014 Jun 26. PubMed PMID: 24927477.
</p>
<p>Broeckling CD, Ganna A, Layer M, Brown K, Sutton B, Ingelsson E, Peers G, Prenni JE. Enabling Efficient and Confident Annotation of LC-MS Metabolomics Data through MS1 Spectrum and Time Prediction. Anal Chem. 2016 Sep 20;88(18):9226-34. doi: 10.1021/acs.analchem.6b02479. Epub 2016 Sep 8. PubMed PMID: 7560453.
</p>


</div>