<div class="container">

<table style="width: 100%;"><tr>
<td>RankPlot</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Figure containing a plot of ranking data.</h2>

<h3>Description</h3>

<p><code>RankPlot</code> creates a figure with a plot of ranking data,
from among several options for showing uncertainty in the ranked estimates.
This function is meant for use within <code>RankPlotWithTable</code>,
which draws a ranking table aligned with this plot of the data
in one combined figure.
</p>


<h3>Usage</h3>

<pre><code class="language-R">RankPlot(
  est,
  se,
  names,
  refName = NULL,
  confLevel = 0.9,
  plotType = c("individual", "difference", "comparison", "columns"),
  tiers = 1,
  GH = FALSE,
  multcomp.scope = ifelse(plotType == "individual", "none", "demi"),
  multcomp.type = c("bonferroni", "independence"),
  tikzText = FALSE,
  cex = 1,
  tickWidth = NULL,
  rangeFactor = 1.2,
  textPad = 0,
  legendX = "topleft",
  legendY = NULL,
  legendText = NULL,
  lwdReg = 1,
  lwdBold = 3,
  thetaLine = 1,
  xlim = NULL,
  Bonferroni
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>est, se</code></td>
<td>
<p>Vectors containing the point estimate and its standard error
for each area.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>names</code></td>
<td>
<p>Vector containing the name of each area.
Abbreviations may be preferable to full names
(e.g. "CO" instead of "Colorado")
since these names will be displayed directly on the plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>refName</code></td>
<td>
<p>String containing the name of the reference area;
must be one of the values in <code>names</code>.
Required for <code>plotType = c("difference", "comparison")</code>.
Optional for <code>plotType = "individual"</code> (where it only determines
the row above/below which the <code>names</code> are plotted to the right/left
of the intervals; if unspecified, defaults to median rank);
or for <code>plotType = "columns"</code> (where it selects one column
to be highlighted by vertical lines, if specified).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>confLevel</code></td>
<td>
<p>Number between 0 and 1: confidence level for individual
(uncorrected) hypothesis tests and/or confidence intervals. E.g. with
<code>plotType = "individual"</code>, <code>confLevel = 0.9</code> will plot
individual 90% confidence intervals. If using <code>GH = TRUE</code>
and/or <code>multcomp.scope != "none"</code>, the Goldstein-Healy and/or Bonferroni/Independence
corrections will be applied to the <code>confLevel</code> baseline.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plotType</code></td>
<td>
<p>Which type of ranking plot to use. See vignettes for
examples and details.
</p>

<ul>
<li> <p><code>"individual"</code> is used for usual individual
confidence intervals, with or without Goldstein-Healy adjustment and/or
(demi or full) Bonferroni/Independence corrections.
</p>
</li>
<li> <p><code>"difference"</code> shows confidence intervals for the differences
between the reference area <code>refName</code> and all other areas.
</p>
</li>
<li> <p><code>"comparison"</code> also compares the reference area <code>refName</code>
to all others, but using the "comparison intervals"
of Almond et al. (2000).
</p>
</li>
<li> <p><code>"columns"</code> plots a grid of shaded columns, where each column
uses shading to report demi-Bonferroni/Independence-corrected significance tests
for comparing the reference area (labeled at the bottom of the column)
with all other areas.
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tiers</code></td>
<td>
<p>Numeric, either 1 for usual confidence intervals,
or 2 for two-tiered intervals. 2 can only be used with
<code>plotType = "individual"</code>, when either <code>GH = TRUE</code>
or <code>multcomp.scope != "none"</code> or both.
In that case, the "inner tiers" run between each interval's cross-bars,
and the "outer tiers" run past the cross-bars
all the way to the ends of each interval.
One of the tiers will show uncorrected
<code>confLevel*100</code>% confidence intervals,
and the other tier will show the Goldstein-Healy and/or Bonferroni/Independence
adjusted intervals. A legend will show which tier is which;
usually Goldstein-Healy alone gives shorter intervals (inner tier),
but Bonferroni/Independence corrections make them into longer intervals (outer tier).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>GH</code></td>
<td>
<p>Logical, for whether or not to plot adjusted
confidence intervals at an "average" <code>confLevel*100</code>%
confidence level as in Goldstein and Healy (1995).
Can only be used with <code>plotType = "individual"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>multcomp.scope</code></td>
<td>
<p>Whether to correct for multiple comparisons,
and if so, for how many
(by a correction to the confidence level of the tests or intervals).
<code>"none"</code> performs no correction; <code>"demi"</code> corrects for
comparing one reference area to all <code>n-1</code> other areas; and
<code>"full"</code> corrects for comparing all possible <code>choose(n, 2)</code>
pairs of areas.
Also use the <code>multcomp.type</code> argument to specify whether the correction
should rely on Bonferroni (default) or on an assumption of Independence.
If <code>GH = TRUE</code>, the Goldstein-Healy adjustment
is performed first, and any Bonferroni/Independence correction is applied afterwards.
Settings <code>"none"</code> and <code>"full"</code> can only be used
with <code>plotType = "individual"</code>;
all other plot types use the setting <code>"demi"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>multcomp.type</code></td>
<td>
<p>(Only used if <code>multcomp.scope != "none"</code>.)
Whether multiple comparison corrections should use a
Bonferroni correction (<code>"bonferroni"</code>)
or an independence-based correction (<code>"independence"</code>).
See Section 4 of the paper "A Joint Confidence Region..." (2020, JRSS-C)
for the difference in these two corrections.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tikzText</code></td>
<td>
<p>Logical, for whether or not to format text for tikz plotting.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex</code></td>
<td>
<p><strong>C</strong>haracter <strong>ex</strong>pansion factor for
the points use to plot each area's point estimate, and for the
text used to plot each area's name next to its interval.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tickWidth</code></td>
<td>
<p>Numeric height of the cross-bars on interval endpoints
(or inner tiers, if <code>tiers = 2</code>). The function tries to leave
a reasonable amount of space between intervals plotted in different rows,
but sometimes it may help to adjust <code>tickWidth</code> manually.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rangeFactor</code></td>
<td>
<p>Numeric multiple by which to expand the range of the data
when setting the x-axis limits. The function tries to leave sufficient room
for plotting margins of error and names next to each area,
but sometimes it may help to adjust <code>rangeFactor</code> manually.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>textPad</code></td>
<td>
<p>Numeric amount by which to shift the text of <code>names</code>
past the interval endpoints when plotting. Positive values shift outwards
(towards the edges of the plot); negative values shift inwards.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legendX, legendY</code></td>
<td>
<p>The x and y co-ordinates used to position the legend;
see <code>legend</code> for details on specifying <code>x</code> by keyword.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legendText</code></td>
<td>
<p>String, or string vector, with legend text. By default,
each plot type adds informative legend text, but the user may override.
To remove legends entirely, set <code>legendText=NA</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lwdReg</code></td>
<td>
<p>Positive number for the line width of regular lines.
Used for all intervals when <code>plotType = "individual"</code>,
or for intervals not significantly different from the reference area
when <code>plotType = c("difference", "comparison")</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lwdBold</code></td>
<td>
<p>Positive number for the line width of bold lines.
Used for intervals significantly different from the reference area
when <code>plotType = c("difference", "comparison")</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>thetaLine</code></td>
<td>
<p>Number for how many lines below bottom axis to display
"theta" or other default x-axis labels (which depend on <code>plotType</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlim</code></td>
<td>
<p>Vector of 2 numbers for x-axis limits. If <code>NULL</code>,
will be automatically set using range of data
expanded by <code>rangeFactor</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Bonferroni</code></td>
<td>
<p>Deprecated name for the <code>multcomp.scope</code> argument.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Users may wish to modify this code and write
their own plot function, which can be swapped into <code>figureFunction</code>
within <code>RankPlotWithTable</code>. Be aware that
<code>RankPlotWithTable</code> uses <code>layout</code> to arrange
the table and plot side-by-side, so <code>layout</code> cannot be used within
a new <code>figureFunction</code>.
</p>
<p>See Goldstein and Healy (1995) for details on the
"average" confidence level procedure used when <code>GH = TRUE</code>.
See Almond et al. (2000) for details
on the "comparison intervals" procedure.
</p>


<h3>References</h3>

<p>Almond, R.G., Lewis, C., Tukey, J.W., and Yan, D. (2000).
"Displays for Comparing a Given State to Many Others,"
<em>The American Statistician</em>, vol. 54, no. 2, 89-93.
</p>
<p>Goldstein, H. and Healy, M.J.R. (1995). "The Graphical Presentation of a
Collection of Means," <em>JRSS A</em>, vol. 158, no. 1, 175-177.
</p>


<h3>See Also</h3>

<p><code>RankPlotWithTable</code> and <code>RankTable</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Plot of 90% confidence intervals for differences
# between each state and Colorado, with demi-Bonferroni correction,
# for US states' mean travel times to work, from the 2011 ACS
data(TravelTime2011)
with(TravelTime2011,
     RankPlot(est = Estimate.2dec, se = SE.2dec,
              names = Abbreviation, refName = "CO",
              confLevel = 0.90, cex = 0.6,
              plotType = "difference"))
</code></pre>


</div>