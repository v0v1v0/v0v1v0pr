<div class="container">

<table style="width: 100%;"><tr>
<td>qtable_layout</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generalized frequency table</h2>

<h3>Description</h3>

<p>This function provides a convenience interface for generating generalizations of a 2-way frequency table. Row and
column space can be facetted by variables, and an analysis function can be specified. The function then builds a
layout with the specified layout and applies it to the data provided.
</p>


<h3>Usage</h3>

<pre><code class="language-R">qtable_layout(
  data,
  row_vars = character(),
  col_vars = character(),
  avar = NULL,
  row_labels = NULL,
  afun = NULL,
  summarize_groups = FALSE,
  title = "",
  subtitles = character(),
  main_footer = character(),
  prov_footer = character(),
  show_colcounts = TRUE,
  drop_levels = TRUE,
  ...,
  .default_rlabel = NULL
)

qtable(
  data,
  row_vars = character(),
  col_vars = character(),
  avar = NULL,
  row_labels = NULL,
  afun = NULL,
  summarize_groups = FALSE,
  title = "",
  subtitles = character(),
  main_footer = character(),
  prov_footer = character(),
  show_colcounts = TRUE,
  drop_levels = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>(<code>data.frame</code>)<br> the data to tabulate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>row_vars</code></td>
<td>
<p>(<code>character</code>)<br> the names of variables to be used in row facetting.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col_vars</code></td>
<td>
<p>(<code>character</code>)<br> the names of variables to be used in column facetting.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>avar</code></td>
<td>
<p>(<code>string</code>)<br> the variable to be analyzed. Defaults to the first variable in <code>data</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>row_labels</code></td>
<td>
<p>(<code>character</code> or <code>NULL</code>)<br> row label(s) which should be applied to the analysis rows. Length must
match the number of rows generated by <code>afun</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>afun</code></td>
<td>
<p>(<code>function</code>)<br> the function to generate the analysis row cell values. This can be a proper analysis
function, or a function which returns a vector or list. Vectors are taken as multi-valued single cells, whereas
lists are interpreted as multiple cells.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>summarize_groups</code></td>
<td>
<p>(<code>flag</code>)<br> whether each level of nesting should include marginal summary rows. Defaults to
<code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title</code></td>
<td>
<p>(<code>string</code>)<br> single string to use as main title (<code>formatters::main_title()</code>). Ignored for subtables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subtitles</code></td>
<td>
<p>(<code>character</code>)<br> a vector of strings to use as subtitles (<code>formatters::subtitles()</code>), where every
element is printed on a separate line. Ignored for subtables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main_footer</code></td>
<td>
<p>(<code>character</code>)<br> a vector of strings to use as main global (non-referential) footer materials
(<code>formatters::main_footer()</code>), where every element is printed on a separate line.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prov_footer</code></td>
<td>
<p>(<code>character</code>)<br> a vector of strings to use as provenance-related global footer materials
(<code>formatters::prov_footer()</code>), where every element is printed on a separate line.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show_colcounts</code></td>
<td>
<p>(<code>logical(1)</code>)<br> Indicates whether the lowest level of
applied to data. <code>NA</code>, the default, indicates that the <code>show_colcounts</code>
argument(s) passed to the relevant calls to <code style="white-space: pre;">⁠split_cols_by*⁠</code>
functions. Non-missing values will override the behavior specified in
column splitting layout instructions which create the lowest level, or
leaf, columns.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>drop_levels</code></td>
<td>
<p>(<code>flag</code>)<br> whether unobserved factor levels should be dropped during facetting. Defaults to
<code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments passed to <code>afun</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.default_rlabel</code></td>
<td>
<p>(<code>string</code>)<br> this is an implementation detail that should not be set by end users.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function creates a table with a single top-level structure in both row and column dimensions involving faceting
by 0 or more variables in each dimension.
</p>
<p>The display of the table depends on certain details of the tabulation. In the case of an <code>afun</code> which returns a
single cell's contents (either a scalar or a vector of 2 or 3 elements), the label rows for the deepest-nested row
facets will be hidden and the labels used there will be used as the analysis row labels. In the case of an <code>afun</code>
which returns a list (corresponding to multiple cells), the names of the list will be used as the analysis row
labels and the deepest-nested facet row labels will be visible.
</p>
<p>The table will be annotated in the top-left area with an informative label displaying the analysis variable
(<code>avar</code>), if set, and the function used (captured via substitute) where possible, or 'count' if not. One exception
where the user may directly modify the top-left area (via <code>row_labels</code>) is the case of a table with row facets and
an <code>afun</code> which returns a single row.
</p>


<h3>Value</h3>


<ul>
<li> <p><code>qtable</code> returns a built <code>TableTree</code> object representing the desired table
</p>
</li>
<li> <p><code>qtable_layout</code> returns a <code>PreDataTableLayouts</code> object declaring the structure of the desired table, suitable for
passing to <code>build_table()</code>.
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">qtable(ex_adsl)
qtable(ex_adsl, row_vars = "ARM")
qtable(ex_adsl, col_vars = "ARM")
qtable(ex_adsl, row_vars = "SEX", col_vars = "ARM")
qtable(ex_adsl, row_vars = c("COUNTRY", "SEX"), col_vars = c("ARM", "STRATA1"))
qtable(ex_adsl,
  row_vars = c("COUNTRY", "SEX"),
  col_vars = c("ARM", "STRATA1"), avar = "AGE", afun = mean
)
summary_list &lt;- function(x, ...) as.list(summary(x))
qtable(ex_adsl, row_vars = "SEX", col_vars = "ARM", avar = "AGE", afun = summary_list)
suppressWarnings(qtable(ex_adsl,
  row_vars = "SEX",
  col_vars = "ARM", avar = "AGE", afun = range
))

</code></pre>


</div>