<div class="container">

<table style="width: 100%;"><tr>
<td>spl_context</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>.spl_context within analysis and split functions</h2>

<h3>Description</h3>

<p><code>.spl_context</code> is an optional parameter for any of rtables' special functions, i.e. <code>afun</code> (analysis function
in <code>analyze()</code>), <code>cfun</code> (content or label function in <code>summarize_row_groups()</code>), or <code>split_fun</code> (e.g. for
<code>split_rows_by()</code>).
</p>


<h3>Details</h3>

<p>The <code>.spl_context</code> <code>data.frame</code> gives information about the subsets of data corresponding to the splits within
which the current <code>analyze</code> action is nested. Taken together, these correspond to the path that the resulting (set
of) rows the analysis function is creating, although the information is in a slightly different form. Each split
(which correspond to groups of rows in the resulting table), as well as the initial 'root' "split", is represented
via the following columns:
</p>

<dl>
<dt>split</dt>
<dd>
<p>The name of the split (often the variable being split).</p>
</dd>
<dt>value</dt>
<dd>
<p>The string representation of the value at that split (<code>split</code>).</p>
</dd>
<dt>full_parent_df</dt>
<dd>
<p>A <code>data.frame</code> containing the full data (i.e. across all columns) corresponding to the path
defined by the combination of <code>split</code> and <code>value</code> of this row <em>and all rows above this row</em>.</p>
</dd>
<dt>all_cols_n</dt>
<dd>
<p>The number of observations corresponding to the row grouping (union of all columns).</p>
</dd>
<dt>column for each column in the table structure (<em>row-split and analyze contexts only</em>)</dt>
<dd>
<p>These list columns
(named the same as <code>names(col_exprs(tab))</code>) contain logical vectors corresponding to the subset of this row's
<code>full_parent_df</code> corresponding to the column.</p>
</dd>
<dt>cur_col_id</dt>
<dd>
<p>Identifier of the current column. This may be an internal name, constructed by pasting the
column path together.</p>
</dd>
<dt>cur_col_subset</dt>
<dd>
<p>List column containing logical vectors indicating the subset of this row's <code>full_parent_df</code>
for the column currently being created by the analysis function.</p>
</dd>
<dt>cur_col_expr</dt>
<dd>
<p>List of current column expression. This may be used to filter <code>.alt_df_row</code>, or any external
data, by column. Filtering <code>.alt_df_row</code> by columns produces <code>.alt_df</code>.</p>
</dd>
<dt>cur_col_n</dt>
<dd>
<p>Integer column containing the observation counts for that split.</p>
</dd>
<dt>cur_col_split</dt>
<dd>
<p>Current column split names. This is recovered from the current column path.</p>
</dd>
<dt>cur_col_split_val</dt>
<dd>
<p>Current column split values. This is recovered from the current column path.</p>
</dd>
</dl>
<h3>Note</h3>

<p>Within analysis functions that accept <code>.spl_context</code>, the <code>all_cols_n</code> and <code>cur_col_n</code> columns of the data frame
will contain the 'true' observation counts corresponding to the row-group and row-group x column subsets of the
data. These numbers will not, and currently cannot, reflect alternate column observation counts provided by the
<code>alt_counts_df</code>, <code>col_counts</code> or <code>col_total</code> arguments to <code>build_table()</code>.
</p>


</div>