<div class="container">

<table style="width: 100%;"><tr>
<td>trunc_obs</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Define a set of truncated observations</h2>

<h3>Description</h3>

<p>If <code>x</code> is missing, both <code>xmin</code> and <code>xmax</code> must be specified.
</p>


<h3>Usage</h3>

<pre><code class="language-R">trunc_obs(x, xmin = x, xmax = x, tmin = -Inf, tmax = Inf, w = 1)

as_trunc_obs(.data)

truncate_obs(.data, tmin_new = -Inf, tmax_new = Inf, .partial = FALSE)

repdel_obs(.data, accident, delay, time, .truncate = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Observations</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xmin, xmax</code></td>
<td>
<p>Censoring bounds. If <code>xmin != xmax</code>, <code>x</code> must be <code>NA</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tmin, tmax</code></td>
<td>
<p>Truncation bounds. May vary per observation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>w</code></td>
<td>
<p>Case weights</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.data</code></td>
<td>
<p>A data frame or numeric vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tmin_new</code></td>
<td>
<p>New truncation minimum</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tmax_new</code></td>
<td>
<p>New truncation maximum</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.partial</code></td>
<td>
<p>Enable partial truncation of censored observations?
This could potentially create inconsistent data if the actual observation
lies outside of the truncation bounds but the censoring interval overlaps.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>accident</code></td>
<td>
<p>accident time (unquoted, evaluated in <code>.data</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>delay</code></td>
<td>
<p>reporting delay (unquoted, evaluated in <code>.data</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time</code></td>
<td>
<p>evaluation time (unquoted, evaluated in <code>.data</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.truncate</code></td>
<td>
<p>Should claims reported after <code>time</code> be silently discarded?
If there are claims reported after <code>time</code> and <code>.truncate</code> is <code>FALSE</code>,
an error will be raised.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Uncensored observations must satisfy <code>tmin &lt;= xmin = x = xmax &lt;= tmax</code>.
Censored observations must satisfy <code style="white-space: pre;">⁠tmin &lt;= xmin &lt; xmax &lt;= tmax⁠</code> and <code>x = NA</code>.
</p>


<h3>Value</h3>

<p><strong>trunc_obs</strong>: A <code>trunc_obs</code> tibble with columns <code>x</code>, <code>xmin</code>, <code>xmax</code>,
<code>tmin</code> and <code>tmax</code> describing possibly interval-censored observations with
truncation
</p>
<p><code>as_trunc_obs</code> returns a <code>trunc_obs</code> tibble.
</p>
<p><code>truncate_obs</code> returns a <code>trunc_obs</code> tibble with possibly fewer
observations than <code>.data</code> and updated truncation bounds.
</p>
<p><code>repdel_obs</code> returns a <code>trunc_obs</code> tibble corresponding to the reporting
delay observations of each claim. If <code>.truncate</code> is <code>FALSE</code>, the result is
guaranteed to have the same number of rows as <code>.data</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">N &lt;- 100
x &lt;- rexp(N, 0.5)

# Random, observation dependent truncation intervals
tmin &lt;- runif(N, 0, 1)
tmax &lt;- tmin + runif(N, 1, 2)

oob &lt;- x &lt; tmin | x &gt; tmax
x &lt;- x[!oob]
tmin &lt;- tmin[!oob]
tmax &lt;- tmax[!oob]

# Number of observations after truncation
N &lt;- length(x)

# Randomly interval censor 30% of observations
cens &lt;- rbinom(N, 1, 0.3) == 1L
xmin &lt;- x
xmax &lt;- x
xmin[cens] &lt;- pmax(tmin[cens], floor(x[cens]))
xmax[cens] &lt;- pmin(tmax[cens], ceiling(x[cens]))
x[cens] &lt;- NA

trunc_obs(x, xmin, xmax, tmin, tmax)

as_trunc_obs(c(1, 2, 3))
as_trunc_obs(data.frame(x = 1:3, tmin = 0, tmax = 10))
as_trunc_obs(data.frame(x = c(1, NA), xmin = c(1, 2), xmax = c(1, 3)))
truncate_obs(1:10, tmin_new = 2.0, tmax_new = 8.0)
</code></pre>


</div>