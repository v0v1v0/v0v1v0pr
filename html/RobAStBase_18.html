<div class="container">

<table style="width: 100%;"><tr>
<td>internals_for_RobAStBase_plot</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Internal / Helper functions of package RobAStBase for plot functions</h2>

<h3>Description</h3>

<p>These functions are internally used helper functions for <code>plot</code>,
<code>infoPlot</code> <code>comparePlot</code> in package <span class="pkg">RobAStBase</span>.</p>


<h3>Usage</h3>

<pre><code class="language-R">.rescalefct(x, fct, scaleX = FALSE, scaleX.fct, scaleX.inv,
         scaleY = FALSE, scaleY.fct = pnorm,
         xlim, ylim, dots)
.plotRescaledAxis(scaleX, scaleX.fct, scaleX.inv, scaleY,scaleY.fct,
                  scaleY.inv, xlim, ylim, X, ypts = 400, n = 11,
                  finiteEndpoints = rep(FALSE,4),
                  x.ticks = NULL, y.ticks = NULL, withbox = TRUE)
.legendCoord(x, scaleX, scaleX.fct, scaleY, scaleY.fct)
.SelectOrderData(data, fct, which.lbs, which.Order, which.nonlbs = NULL)
.makedotsP(dots)
.makedotsLowLevel(dots)
.cexscale(y, y1=y, maxcex=4,mincex=0.05,cex, fun=NULL)
.getX.vec(distr, dims0, lty, x.vec, scaleX, scaleX.fct, scaleX.inv, xm, xM)
.getXlimYlim(dots,dotsP, dims0, xlim, ylim)
.prepareTitles(withSubst, presubArg2, presubArg3, dots, mainText,
               L2Fam, inner, dims0, dims, to.draw, trafO, obj, type, bmar, tmar)
.getToDraw(dims, trafO, L2Fam, to.draw.arg, Abs=NULL)
.preparePanelFirstLast(with.automatic.grid , dims0, pF.0, pL.0,
            logArg, scaleX, scaleY, x.ticks, y.ticks, scaleX.fct, scaleY.fct)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>scaleX</code></td>
<td>
<p>logical; shall X-axis be rescaled (by default according to the cdf of
the underlying distribution)?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scaleY</code></td>
<td>
<p>logical; shall Y-axis be rescaled (by default according to a probit scale)?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scaleX.fct</code></td>
<td>
<p>an isotone, vectorized function mapping the domain of the IC
to [0,1]; if <code>scaleX</code> is <code>TRUE</code> and <code>scaleX.fct</code> is
missing, the cdf of the underlying observation distribution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scaleX.inv</code></td>
<td>
<p>the inverse function to <code>scale.fct</code>, i.e., an isotone,
vectorized function mapping [0,1] to the domain of the IC
such that for any <code>x</code> in the domain,<br><code>scaleX.inv(scaleX.fct(x))==x</code>; if <code>scaleX</code> is <code>TRUE</code>
and <code>scaleX.inv</code> is
missing, the quantile function of the underlying observation distribution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scaleY.fct</code></td>
<td>
<p>an isotone, vectorized function mapping for each coordinate the
range of the respective coordinate of the IC
to [0,1]; defaulting to the cdf of <code class="reqn">{\cal N}(0,1)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scaleY.inv</code></td>
<td>
<p>an isotone, vectorized function mapping for each coordinate
the range [0,1] into the range of the respective coordinate of the IC;
defaulting to the quantile function of  <code class="reqn">{\cal N}(0,1)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fct</code></td>
<td>
<p>for <code>.rescalefct</code>: (vectorized) function from reals to reals: function to produce y values.
for <code>.SelectOrderData</code>: (vectorized) function from data to reals:
function to produce the ordering.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlim</code></td>
<td>
<p>for one-panel plots: numeric vector of length 2: limits of the plotted x region (in original
scale), for multi-panel plots: can be matrix valued (with two columns and as many rows as panels).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylim</code></td>
<td>
<p>for one-panel plots: numeric vector of length 2: limits of the plotted y region (in original
scale), for multi-panel plots: can be matrix valued (with two columns and as many rows as panels).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>finiteEndpoints</code></td>
<td>
<p>a logical of length 4: are the  unscaled <code>xlim[1]</code>,
<code>xlim[2]</code>, <code>ylim[1]</code>, <code>ylim[2]</code> finite? </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x.ticks</code></td>
<td>
<p>numeric: coordinates in original scale of user-given ticks on x-axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y.ticks</code></td>
<td>
<p>numeric: coordinates in original scale of user-given ticks on y-axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>integer: number of default ticks in x and y axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>
<p>numeric: x-values on [0,1]-scale from which to produce range of x axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ypts</code></td>
<td>
<p>integer: number of y-points to be generated on [0,1] range to
produce y-axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dots</code></td>
<td>
<p>dots argument for later calls to <code>plot</code> which is manipulated
when using rescaling.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>coordinates of the legend placement to be rescaled when using a
scale transformation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>numeric or data.frame containing numerics; observations to be plotted into
a graph.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>which.lbs</code></td>
<td>
<p>either an integer vector with the indices of the observations
to be plotted into graph or <code>NULL</code> — then no observation is excluded</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>which.Order</code></td>
<td>
<p>indices of the observations after ordering which are to be
plotted into the graph; more speficically, the indices are obtained after
a possible thin-out by <code>which.lbs</code> and after ordering in descending order
of the remaining observations. If this argument is <code>NULL</code> then no
(further) observation is excluded.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>which.nonlbs</code></td>
<td>
<p>indices of the observations which should be plotted but
not labelled; either an integer vector with the indices of the observations
to be plotted into graph or <code>NULL</code> — then all non-labelled
observations are plotted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>withbox</code></td>
<td>
<p>logical of length 1. If <code>TRUE</code>, even if <code>scaleX</code> and
<code>scaleY</code> are both <code>FALSE</code> and, simultaneously, <code>x.ticks</code> and
<code>y.ticks</code> are both <code>NULL</code>, a respective box is drawn around the
panel; otherwise no box is drawn in this case. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>input at which to compute <code>cex</code>-values (for these <code>y</code> values)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y1</code></td>
<td>
<p>secondary input of <code>y</code>-values which is also used for
computaiton but not plotted itself at this <code>cex</code> value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxcex</code></td>
<td>
<p>maximal value for <code>cex</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mincex</code></td>
<td>
<p>minimal value for <code>cex</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex</code></td>
<td>
<p>basic factor for <code>cex</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fun</code></td>
<td>
<p>(optional) function to compute the <code>cex</code>-values acc. to the
<code>y</code> and <code>y1</code>-values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>L2Fam</code></td>
<td>
<p>L2-Family</p>
</td>
</tr>
</table>
<p>,
</p>
<table>
<tr style="vertical-align: top;">
<td><code>to.draw.arg</code></td>
<td>
<p>resp. argument from the user-interface of <code>comparePlot</code>,        
<code>infoPlot</code>, and the <code>plot</code>-method for ICs, i.e., either <code>NULL</code> 
(default; everything is plotted) or a vector of either integers (the indices 
of the subplots to be drawn) or characters — the names of the subplots 
to be drawn: these names are to be chosen either among the row names of 
the trafo matrix <code>rownames(trafo(eval(x@CallL2Fam)@param))</code> or if 
the last expression is <code>NULL</code> a vector <code>"dim&lt;dimnr&gt;"</code>, <code>dimnr</code> 
running through the number of rows of the trafo matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>distr</code></td>
<td>
<p>underlying distribution of the observations</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dims0</code></td>
<td>
<p>number of panels to be plotted</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lty</code></td>
<td>
<p>the <code>lty</code> argument used in the user interface</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x.vec</code></td>
<td>
<p>the resp. argument from the user interface.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xm</code></td>
<td>
<p>minimal x-value</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xM</code></td>
<td>
<p>maximal x-value</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dotsP</code></td>
<td>
<p>the internal <code>dotsP</code>-variable to be changed (taking up
additional arguments for the calls to <code>plot</code>); see also Details 
section.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>withSubst</code></td>
<td>
<p>should substitutions be made in titles?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>presubArg2</code></td>
<td>
<p>title part</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>presubArg3</code></td>
<td>
<p>title part</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mainText</code></td>
<td>
<p>text to be used for <code>main</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>inner</code></td>
<td>
<p>the resp. argument from the user interface.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dims</code></td>
<td>
<p>the dimension of the pIC</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>to.draw</code></td>
<td>
<p>the actual numbers / names of the plotted panels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trafO</code></td>
<td>
<p>the parameter transformation of  <code>L2fam@param</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>obj</code></td>
<td>
<p>the object from which to draw the name (of the plot).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>for which type of plot should the titles be produced – <code>"info"</code>,
<code>"all"</code> or <code>compare</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bmar</code></td>
<td>
<p>resp. argument from the user-interface of <code>comparePlot</code>, 
<code>infoPlot</code>, and the <code>plot</code>-method for ICs.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tmar</code></td>
<td>
<p>resp. argument from the user-interface of <code>comparePlot</code>, 
<code>infoPlot</code>, and the <code>plot</code>-method for ICs.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Abs</code></td>
<td>
<p>additional text template used in <code>infoPlot</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>with.automatic.grid</code></td>
<td>
<p>generate a grid automatically. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pF.0</code></td>
<td>
<p>the <code>panel.first</code> expression given by rhe user</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pL.0</code></td>
<td>
<p>the <code>panel.last</code> expression  given by rhe user</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>logArg</code></td>
<td>
<p>a character vector with <code>log</code>-arguments for <code>plot</code>
for each of the plotted panels.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>.rescalefct</code> rescales, if necessary, x and y axis for use in plot
functions. More specifically, if <code>scaleX</code> is <code>TRUE</code> rescales x,
if <code>scaleY</code> is <code>TRUE</code> rescales fct(x) (otherwise leaves them
unchanges); to this end uses trafos <code>scaleX.fct</code> with inverse
<code>scaleX.inv</code>, resp. <code>scaleY.fct</code>; it respects <code>xlim</code>
and  <code>ylim</code> (given in orig. scale), thins out the scaled values if
necessary and accordingly modifies  slots <code>xaxt</code>, <code>yaxt</code>, and
<code>axes</code> of argument <code>dots</code> to indicate the new axes have to be drawn;
using the  paradigm small letters to denote values on original scale and
capital letters on transformed scale, its return value is a list with
(thinned out) values of x and y, X and Y and modified dots.
</p>
<p><code>.plotRescaledAxis</code> plots rescaled axes according to logicals
<code>scaleX</code>, <code>scaleY</code>; to this end uses trafos <code>scaleX.fct</code> with
inverse <code>scale.inv</code>, resp. <code>scaleY.fct</code>, <code>scaleY.inv</code>;
it respects <code>xlim</code> and <code>ylim</code>. By default, ot produces the x axes according
to the values in argument <code>X</code>, and the y axes as an equidistant grid of
length <code>ypts</code> on [0,1] (on transformed scale); each of these axes, again
by default will have <code>n</code> tick values; these are however thinned out if
the come to lie too close to each other on transformed scale.
Instead of producing automatically chosen tick values, the user may explicitly
require x-ticks and y-ticks values on the axes, using arguments <code>x.ticks</code>
and <code>y-ticks</code>. This function has no return value.
</p>
<p><code>.legendCoord</code> produces, if needed (i.e., if coordinates are not
given as strings like <code>"bottomright"</code>), rescaled coordinates for the
placement of a legend.
</p>
<p><code>.SelectOrderData</code>, for data to be plotted into the graph,
performs two optional selections: a first selection on the unordered (original)
data (acc. to argument <code>which.lbs</code>) and a second selection according to
<code>which.Order</code> on the data remaining after the first selection and ordered
according to argument <code>fct</code>; the return value is a list with elements
<code>data</code>, ie., the selected/thinned out data, <code>y</code>, ie., the
values of  <code>fct(data)</code>, <code>ind</code>, ie., the indices of the selected data
in the original data (after possibly two selections), and <code>ind1</code> the
indices of the data selected by <code>which.lbs</code> in the original data; in 
addition also the non selected data, <code>data.ns</code>, the respective
y-values <code>y.ns</code> and the corresponding index elements <code>ind.ns</code> are
returned as list items.
</p>
<p><code>.makedotsP</code> and <code>.makedotsLowLevel</code> manipulate the <code>...</code>
argument, deleting certain items and selecting items which can be digested by
<code>plot</code>, returning the manipulated list.
</p>
<p><code>.cexscale</code> rescales the point sizes of the points to be plotted;
the unscaled sizes are given in argument <code>y</code>, <code>y1</code> in
case of several lines of points to be plotted may contain the
vector of the sizes of all points to be plotted in (e.g., including
those of the other lines of points). <code>maxcex</code> and <code>mincex</code>
are maximum and minimum of the raw rescaled sizes; <code>cex</code> is
a factor drawn from argument <code>cex.pts</code> by which the raw sizes
are rescaled before being returned. <code>fun</code> is the function
by which the rescaling is done; by default this argument is <code>NULL</code>
and in this case the function <code>log(1+abs(x))</code> is used.
</p>
<p><code>.getDimsTD</code> returns the number of different coordinates to be plotted.
</p>
<p><code>.producePanelFirstS</code> for each graphical panel inserts
(if needed) x and y tickmarks for user-specific axes
into a <code>panel.first</code> expression.
</p>
<p><code>.getX.vec</code> produces the x-grid (on original scale) for each of the panels
and decides whether to plot lines or points.
</p>
<p><code>.getXlimYlim</code> produces panel-wise <code>xlim</code> and <code>ylim</code> arguments
as well as left and right endpoints of the x-scalas.
</p>
<p><code>.prepareTitles</code> produces the titles for the panels.
</p>
<p><code>.getToDraw</code> computes which panels are to be drawn.
<code>.preparePanelFirstLast</code> prepares the <code>panel.first</code> and <code>panel.last</code>
expressions for each of the panels.
</p>


<h3>Author(s)</h3>

<p>Peter Ruckdeschel <a href="mailto:peter.ruckdeschel@uni-oldenburg.de">peter.ruckdeschel@uni-oldenburg.de</a></p>


</div>