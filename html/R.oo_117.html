<div class="container">

<table style="width: 100%;"><tr>
<td>clearCache.Object</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Clear fields that are defined to have cached values</h2>

<h3>Description</h3>

<p>Clear fields that are defined to have cached values by assigning <code>NULL</code> to these fields.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'Object'
clearCache(this, recursive=TRUE, gc=FALSE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>recursive</code></td>
<td>
<p>If <code>TRUE</code>, the same method is called also on all
fields that are <code>Object</code>:s. Circular dependencies can exists.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gc</code></td>
<td>
<p>If <code>TRUE</code>, the garbage collector is called, otherwise not.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Not used.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Returns itself (invisible).
</p>


<h3>Author(s)</h3>

<p>Henrik Bengtsson</p>


<h3>See Also</h3>

<p>For more information see <code>Object</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# - - - - - - - - - - - - - - - - - - - - - - - - - - - -
# Defining a class with a 'cached' fields
# - - - - - - - - - - - - - - - - - - - - - - - - - - - -
setConstructorS3("CachedObject", function(...) {
  extend(Object(), "CachedObject",
    ...
  )
})

setMethodS3("as.character", "CachedObject", function(this, ...) {
  s &lt;- NextMethod("as.character", this, ...)
  s &lt;- sprintf("%s RAM: %.2fkb.", s, objectSize(this)/1024)
  s
})


# - - - - - - - - - - - - - - - - - - - - - - - - - - - -
# Example of clearing a cache fields, reassigning it,
# and then clearing it again
# - - - - - - - - - - - - - - - - - - - - - - - - - - - -
obj &lt;- CachedObject(a=1, b=1:10^5, "cached:c"=1:10^6)
print(obj)
print(ll(obj))

clearCache(obj, gc=TRUE)
print(obj)
print(ll(obj))


obj$c &lt;- 1:10^6
print(obj)
print(ll(obj))

clearCache(obj, gc=TRUE)
print(obj)
print(ll(obj))


# - - - - - - - - - - - - - - - - - - - - - - - - - - - -
# Clearing cached fields recursively and make sure it
# avoids race conditions due to circular dependences
# - - - - - - - - - - - - - - - - - - - - - - - - - - - -
objA &lt;- CachedObject(a=2, "cached:c"=1:10^6, prev=NULL)
print(ll(objA))

objB &lt;- CachedObject(a=2, "cached:c"=1:10^6, prev=objA)
print(ll(objB))

objC &lt;- CachedObject(a=3, "cached:c"=1:10^6, prev=objB)
print(ll(objC))

objA$prev &lt;- objC

clearCache(objA, gc=TRUE)
print(ll(objA))
print(ll(objB))
print(ll(objC))

</code></pre>


</div>