<div class="container">

<table style="width: 100%;"><tr>
<td>rstrans</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Fit Cox Proportional Hazards Model in Transformed Time</h2>

<h3>Description</h3>

<p>The function transforms each person's time to his/her probability
of dying at that time according to the ratetable. It then fits the
Cox proportional hazards model with the transformed times as a 
response. It can also be used for calculatin the transformed times (no covariates are needed in the formula for that purpose).  
</p>


<h3>Usage</h3>

<pre><code class="language-R">rstrans(formula, data, ratetable, int,na.action,init,control,rmap,...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>

<p>a formula object, with the response as a <code>Surv</code> object on the
left of a <code>~</code> operator, and, if desired, terms separated  by
the <code>+</code> operator on the right. 
</p>
<p>NOTE: The follow-up time must be in days.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>

<p>a data.frame in which to interpret the variables named
in the <code>formula</code>.  
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ratetable</code></td>
<td>

<p>a table of event rates, such as <code>slopop</code>. 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>int</code></td>
<td>
 
<p>the number of follow-up years used for calculating survival(the rest is censored). If missing, it is set the 
the maximum observed follow-up time.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.action</code></td>
<td>
<p>a missing-data filter function, applied to the model.frame,
after any subset argument has been used.  Default is
<code>options()$na.action</code>. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>init</code></td>
<td>
<p>vector of initial values of the iteration.  Default initial
value is zero for all variables. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>control</code></td>
<td>
<p>a list of parameters for controlling the fitting process. 
See the documentation for <code>coxph.control</code> for details.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rmap</code></td>
<td>
<p>an optional list to be used if the variables are not
organized and named in the same way as in the <code>ratetable</code> object. See details below.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other arguments will be passed to <code>coxph.control</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>NOTE: The follow-up time must be specified in days. The <code>ratetable</code> being used may have different variable names and formats than the user's data set, this is dealt with by the <code>rmap</code> argument. For example, if age is in years in the data set but in days in the <code>ratetable</code> object, age=age*365.241 should be used. The calendar year can be in any date format (date, Date and POSIXt are allowed), the date formats in the <code>ratetable</code> and in the data may differ. 
A side product of this function are the transformed times - stored in teh <code>y</code> object of the output. To get these times, covariates are of course irrelevant.
</p>


<h3>Value</h3>

<p>an object of class <code>coxph</code>. See <code>coxph.object</code> and <code>coxph.detail</code> for details.  
</p>
<table><tr style="vertical-align: top;">
<td><code>y</code></td>
<td>

<p>an object of class <code>Surv</code> containing the transformed times (these times do not depend on covariates). 
</p>
</td>
</tr></table>
<h3>References</h3>

<p>Method: Stare J., Henderson R., Pohar M. (2005) "An individual measure for relative survival." Journal
of the Royal Statistical Society: Series C, <b>54</b> 115–126.
</p>
<p>Package. Pohar M., Stare J. (2006) "Relative survival analysis in R." Computer Methods and Programs in Biomedicine, <b>81</b>: 272–278
</p>
<p>Relative survival: Pohar, M., Stare, J. (2007) "Making relative survival analysis relatively easy."
Computers in biology and medicine, <b>37</b>: 1741–1749.
</p>


<h3>See Also</h3>

<p><code>rsmul</code>, <code>invtime</code>, <code>rsadd</code>, <code>survexp</code>.</p>


<h3>Examples</h3>

<pre><code class="language-R">data(slopop)
data(rdata)

#fit a Cox model using the transformed times
#note that the variable year is given in days since 01.01.1960 and that 
#age must be multiplied by 365.241 in order to be expressed in days.
fit &lt;- rstrans(Surv(time,cens)~sex+as.factor(agegr),rmap=list(age=age*365.241,
        sex=sex,year=year),ratetable=slopop,data=rdata)


#check the goodness of fit
rs.br(fit)
</code></pre>


</div>