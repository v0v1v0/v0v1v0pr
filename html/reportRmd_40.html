<div class="container">

<table style="width: 100%;"><tr>
<td>rm_survtime</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Display survival rates and events for specified times</h2>

<h3>Description</h3>

<p>This is a wrapper for the survfit function to output a tidy display for
reporting. Either Kaplan Meier or Cox Proportional Hazards models may be used
to estimate the survival probabilities.
</p>


<h3>Usage</h3>

<pre><code class="language-R">rm_survtime(
  data,
  time,
  status,
  covs = NULL,
  strata = NULL,
  type = "KM",
  survtimes,
  survtimeunit,
  strata.prefix = NULL,
  survtimesLbls = NULL,
  showCols = c("At Risk", "Events", "Censored"),
  CIwidth = 0.95,
  conf.type = "log",
  na.action = "na.omit",
  showCounts = TRUE,
  digits = getOption("reportRmd.digits", 2),
  caption = NULL,
  tableOnly = FALSE,
  fontsize
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>data frame containing survival data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time</code></td>
<td>
<p>string indicating survival time variable</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>status</code></td>
<td>
<p>string indicating event status variable</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>covs</code></td>
<td>
<p>character vector with the names of variables to adjust for in
coxph fit</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>strata</code></td>
<td>
<p>string indicating the variable to group observations by. If
this is left as NULL (the default) then event counts and survival rates are
provided for the entire cohort.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>survival function, if no covs are specified defaults to
Kaplan-Meier, otherwise the Cox PH model is fit. Use type='PH' to fit a Cox
PH model with no covariates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>survtimes</code></td>
<td>
<p>numeric vector specifying when survival probabilities should
be calculated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>survtimeunit</code></td>
<td>
<p>unit of time to suffix to the time column label if
survival probabilities are requested, should be plural</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>strata.prefix</code></td>
<td>
<p>character value describing the grouping variable</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>survtimesLbls</code></td>
<td>
<p>if supplied, a vector the same length as survtimes with
descriptions (useful for displaying years with data provided in months)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>showCols</code></td>
<td>
<p>character vector specifying which of the optional columns to
display, defaults to c('At Risk','Events','Censored')</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CIwidth</code></td>
<td>
<p>width of the survival probabilities, default is 95%</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf.type</code></td>
<td>
<p>type of confidence interval see <code>survfit</code> for
details. Default is 'log'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.action</code></td>
<td>
<p>default is to omit missing values, but can be set to throw
and error using na.action='na.fail'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>showCounts</code></td>
<td>
<p>boolean indicating if the at risk, events and censored
columns should be output, default is TRUE</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p>the number of digits in the survival rate, default is 2.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>caption</code></td>
<td>
<p>table caption for markdown output</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tableOnly</code></td>
<td>
<p>should a dataframe or a formatted object be returned</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fontsize</code></td>
<td>
<p>PDF/HTML output only, manually set the table fontsize</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If covariates are supplied then a Cox proportional hazards model is fit for
the entire cohort and each strata. Otherwise the default is for Kaplan-Meier
estimates. Setting type = 'PH' will force a proportional hazards model.
</p>


<h3>Value</h3>

<p>A character vector of the survival table source code, unless tableOnly=TRUE in
which case a data frame is returned
</p>


<h3>See Also</h3>

<p><code>survfit</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Kaplan-Mieir survival probabilities with time displayed in years
data("pembrolizumab")
rm_survtime(data=pembrolizumab,time='os_time',status='os_status',
strata="cohort",type='KM',survtimes=seq(12,72,12),
survtimesLbls=seq(1,6,1),
survtimeunit='years')

# Cox Proportional Hazards survivial probabilities
rm_survtime(data=pembrolizumab,time='os_time',status='os_status',
strata="cohort",type='PH',survtimes=seq(12,72,12),survtimeunit='months')

# Cox Proportional Hazards survivial probabilities controlling for age
rm_survtime(data=pembrolizumab,time='os_time',status='os_status',
covs='age',strata="cohort",survtimes=seq(12,72,12),survtimeunit='months')

</code></pre>


</div>