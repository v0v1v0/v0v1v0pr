<div class="container">

<table style="width: 100%;"><tr>
<td>Formula.translate.compat</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>An internal function, allowing back-compatibility, which translates a model
formula from a formula object or character string into an R list object.</h2>

<h3>Description</h3>

<p>Supports Formula syntax as used in earlier (&lt;0.8-0) versions of <span class="pkg">R2MLwiN</span>. A model
formula, as a formula object (or a character string) is translated into
an R list object. Called by <code>runMLwiN</code> if <code>oldsyntax = TRUE</code>
(when user specifies <code>levID</code> not <code>NULL</code> in <code>runMLwiN</code> function
call). For corresponding function supporting new syntax, see
<code>Formula.translate</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">Formula.translate.compat(Formula, levID, D = "Normal", indata)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Formula</code></td>
<td>
<p>A formula object (or a character string) specifying a
multilevel model. See <code>Value</code> for details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>levID</code></td>
<td>
<p>A character (vector) specifying the level ID(s).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>D</code></td>
<td>
<p>A character string/vector specifying the distribution to be
modelled, which can include <code>'Normal'</code> (the default), <code>'Binomial'</code>,
<code>'Poisson'</code>, <code>'Negbinom'</code>, <code>'Unordered Multinomial'</code>,
<code>'Ordered Multinomial'</code>, <code>'Multivariate Normal'</code>, or <code>'Mixed'</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>indata</code></td>
<td>
<p>A data.frame object containing the data to be modelled.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>If <code>Formula</code> is a character string, then the following
syntax applies:
</p>

<ul>
<li> <p><code>~</code> A tilde is used to separate response variable(s) and
explanatory variable(s).
</p>
</li>
<li> <p><code>()</code> Round brackets are used to specify each random
variable in the model together with its fixed/random part information.
</p>
</li>
<li> <p><code>|</code> Separates explanatory variable(s) (placed to the right of
<code>|</code>) from the fixed/random part information (placed to the left of
<code>|</code>) when placed within <code>()</code>.
</p>
</li>
<li> <p><code>[]</code> When placed
immediately after an explanatory variable, indicates that the variable is
categorical. The string in the <code>[]</code> represents the reference category;
if empty, no reference category is used; See note.
</p>
</li>
<li> <p><code>:</code> Indicates an interaction term: i.e. the variables adjacent to <code>:</code>, and
separated by it, are interacted with each other.
</p>
</li>
<li> <p><code>0</code> When placed to the left of <code>|</code> within <code>()</code> indicates that the variables
to the right of <code>|</code> within the same <code>()</code> are to be added to the
fixed part of the model.
</p>
</li>
<li> <p><code>1</code> When placed to the left of
<code>|</code> within <code>()</code> indicates that the coefficients of the variables
placed to the right of <code>|</code> within the same <code>()</code> are to be allowed
to randomly vary at level 1 (and so on for <code>2</code> for level 2, <code>3</code> for level 3, etc.)
</p>
</li>
<li> <p><code>0s/0c</code> When placed to the left of <code>|</code> within <code>()</code>
indicates that separate (hence <code>s</code>) / common (hence <code>c</code>)
coefficients for the variables to the right of <code>|</code> within the same
<code>()</code> are to be added to the fixed part (hence <code>0</code>) of multivariate
normal, multinomial and mixed responses models.
</p>
</li>
<li> <p><code>2s/2c</code> When
placed to the left of <code>|</code> within <code>()</code> indicates that separate
(hence <code>s</code>) / common (hence <code>c</code>) coefficients for the variables to
the right of <code>|</code> within the same <code>()</code> are to be added to the
random part of the model, and allowed to vary at level 2; applies to
multivariate normal, multinomial and mixed responses models only.
</p>
</li>
<li> <p><code>{}</code> gives a vector of binary indicators specifying a
common coefficient. 1 is to include the component at the corresponding
positions; zero otherwise. These digits are separated by commas; applies to
multivariate normal, multinomial and mixed responses models only.
</p>
</li>
<li> <p><code>.</code> Used for adding a separate coefficient for a particular
component at a specific level; applies to multivariate normal, multinomial
and mixed responses models only
</p>
</li>
</ul>
<p>If <code>Formula</code> is a formula object, <code>0s/0c</code>, <code>2s/2c</code>, .... and
<code>{}</code> have to be replaced by <code>`0s`/`0c`</code>, <code>`2s`/`2c`</code>, ....
and <code>()</code> respectively. Other syntax remains the same.
</p>


<h3>Value</h3>

<p>Outputs an R list object, which is then used as the input for
<code>write.IGLS</code> and/or <code>write.MCMC</code>.
</p>


<h3>Note</h3>

<p>Note that some characters listed above have special meanings in the
formula, so avoid using them when you name the random variable. Alphanumeric
characters (i.e. <code>[:alnum:]</code>) are recommended for naming the random
variable. They are also recommended for naming a reference category, inside
<code>[]</code>.  Note: use <code>[]</code> notation only in the fixed part when
there is no categorical variable in the random effects. If there is one in
the random part, the categorical variable has to be converted into a set of
binary variables (e.g., using <code>Untoggle</code>).
</p>


<h3>Author(s)</h3>

<p>Zhang, Z., Charlton, C.M.J., Parker, R.M.A., Leckie, G., and Browne,
W.J. (2016) Centre for Multilevel Modelling, University of Bristol.
</p>


<h3>See Also</h3>

<p><code>runMLwiN</code>, <code>write.IGLS</code>, <code>write.MCMC</code>, <code>Formula.translate</code>
</p>


</div>