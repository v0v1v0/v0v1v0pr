<div class="container">

<table style="width: 100%;"><tr>
<td>pval_cat_fn</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compares observed and expected distribution of p-values for categorical variables</h2>

<h3>Description</h3>

<p>Creates plots of calculated p-value distribution and AUC (area under curve)<br></p>


<h3>Usage</h3>

<pre><code class="language-R">pval_cat_fn(
  df = pval_cat_data,
  seed = 0,
  sims = -1,
  btsp = 500,
  title = "",
  stat = "chi_midp",
  stat.override = "no",
  fisher.sim = "y",
  fish.n.sims = 10000,
  method = "mix",
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>data frame generated from load_clean function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>the seed to use for random number generation, default 0 = current date and time. Specify seed to make repeatable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sims</code></td>
<td>
<p>number of simulations, default -1 = function selects based on number of variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>btsp</code></td>
<td>
<p>number of bootstrap repeats used to generate 95% confidence interval around AUC</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title</code></td>
<td>
<p>optional title for plots</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stat</code></td>
<td>
<p>statistical test to be used 'chisq', 'fisher', 'midp' or 'midp.epitools' (from epitools package), 'midp.sas' (as calculated in SAS), or combinations -if chisq is not appropriate because expected cells&lt;5, use second test: 'chi_fish', 'chi_midp' or 'chi_midp.epi','chi_midp.sas'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stat.override</code></td>
<td>
<p>if 'yes' then test specified in stat will be used rather than values for stat in data frame</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fisher.sim</code></td>
<td>
<p>"yes" or "no" indicator whether to allow fisher test to simulate p-values for &gt;2*2 tables</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fish.n.sims</code></td>
<td>
<p>number of simulations to use in Fisher test, default 10,000</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>'sm', 'mix', or 'ind'. 'ind' does test on individual data, 'sm' summarises data and then does test on summary data, 'mix' does 'ind' for fisher and 'sm' for others. Duration varies with size of studies, test, and number of simulations. Experiment before running large simulations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>TRUE or FALSE indicates whether progress bar and comments show and prints plot</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>See also Bolland MJ, Gamble GD, Avenell A, Grey A, Lumley T. Baseline P value distributions in randomized trials were uniform for continuous but not categorical variables. J Clin Epidemiol 2019;112:67-76.<br></p>
<p>Returns a list containing 3 objects and (if verbose = TRUE) prints the plot pval_cat_calculated_pvalues
</p>


<h3>Value</h3>

<p>list containing 3 objects as described
</p>

<ul>
<li>
<p> pval_cat_calculated_pvalues = plots of calculated p-value distribution and AUC
</p>
</li>
<li>
<p> pval_cat_reported_pvalues = plots of reported p-value distribution and AUC (if p-values were reported)
</p>
</li>
<li>
<p> all_results = list containing
</p>

<ul>
<li>
<p> pval_cat_baseline_pvalues_data = data frame of all results used in calculations
</p>
</li>
<li>
<p> pval_cat_reported_pvalues= plot of reported p-value distribution
</p>
</li>
<li>
<p> pval_cat_auc_reported_pvalues = AUC of reported p-values
</p>
</li>
<li>
<p> pval_cat_calculated_pvalues = plot of calculated p-value distribution
</p>
</li>
<li>
<p> pval_cat_auc_calculated_pvalues= AUC of calculated p-values
</p>
</li>
</ul>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R"># load example data
pval_cat_data &lt;- load_clean(import= "no", file.cat = "SI_cat_all", pval_cat= "yes",
format.cont = "wide")$pval_cat_data


# run function (takes a few seconds)
pval_cat_fn(seed=10, sims = 50, btsp = 100)$pval_cat_calculated_pvalues

# to import an excel spreadsheet (modify using local path,
# file and sheet name, range, and format):

# get path for example files
path &lt;- system.file("extdata", "reappraised_examples.xlsx", package = "reappraised",
                    mustWork = TRUE)
# delete file name from path
path &lt;- sub("/[^/]+$", "", path)

# load data
pval_cat_data &lt;- load_clean(import= "yes", pval_cat = "yes", dir = path,
     file.name.cat = "reappraised_examples.xlsx", sheet.name.cat = "SI_cat_all",
     range.name.cat = "A:n", format.cat = "wide")$pval_cat_data

</code></pre>


</div>