<div class="container">

<table style="width: 100%;"><tr>
<td>cr_works</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Search CrossRef works (articles)</h2>

<h3>Description</h3>

<p>Search CrossRef works (articles)
</p>


<h3>Usage</h3>

<pre><code class="language-R">cr_works(
  dois = NULL,
  query = NULL,
  filter = NULL,
  offset = NULL,
  limit = NULL,
  sample = NULL,
  sort = NULL,
  order = NULL,
  facet = FALSE,
  cursor = NULL,
  cursor_max = 5000,
  .progress = "none",
  flq = NULL,
  select = NULL,
  async = FALSE,
  ...
)

cr_works_(
  dois = NULL,
  query = NULL,
  filter = NULL,
  offset = NULL,
  limit = NULL,
  sample = NULL,
  sort = NULL,
  order = NULL,
  facet = FALSE,
  cursor = NULL,
  cursor_max = 5000,
  .progress = "none",
  parse = FALSE,
  flq = NULL,
  select = NULL,
  async = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dois</code></td>
<td>
<p>Search by a single DOI or many DOIs.  Note that using this
parameter at the same time as the <code>query</code>, <code>limit</code>, <code>select</code> or <code>flq</code>
parameter will result in an error.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>query</code></td>
<td>
<p>Query terms</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filter</code></td>
<td>
<p>Filter options. See examples for usage examples
and <code>filters</code> for what filters are available.
<code>filter</code> is available for use with <code>cr_works</code> and
other <code>crossref</code> family functions with <code>works=TRUE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>offset</code></td>
<td>
<p>Number of record to start at. Minimum: 1. For
<code>cr_works</code>, and any function setting <code>works = TRUE</code>,
the maximum offset value is 10000. For larger requests use <code>cursor</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>limit</code></td>
<td>
<p>Number of results to return in the query. Not relavant when
searching with specific dois. Default: 20. Max: 1000</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sample</code></td>
<td>
<p>(integer) Number of random results to return. when you use
the sample parameter, the rows and offset parameters are ignored.
Ignored unless <code>works=TRUE</code>. Max: 100</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sort</code></td>
<td>
<p>Field to sort on. Acceptable set of fields to sort on:
</p>

<ul>
<li> <p><code>score</code> OR <code>relevance</code> - Sort by relevance score
</p>
</li>
<li> <p><code>updated</code> - Sort by date of most recent change to metadata.
Currently the same as deposited.
</p>
</li>
<li> <p><code>deposited</code> - Sort by time of most recent deposit
</p>
</li>
<li> <p><code>indexed</code> - Sort by time of most recent index
</p>
</li>
<li> <p><code>published</code> - Sort by publication date
</p>
</li>
<li> <p><code>published-print</code> - Sort by print publication date
</p>
</li>
<li> <p><code>published-online</code> - Sort by online publication date
</p>
</li>
<li> <p><code>issued</code> - Sort by issued date (earliest known publication date)
</p>
</li>
<li> <p><code>is-referenced-by-count</code> - Sort by number of times this DOI is
referenced by other Crossref DOIs
</p>
</li>
<li> <p><code>references-count</code> - Sort by number of references included in
the references section of the document identified by this DOI
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>order</code></td>
<td>
<p>(character) Sort order, one of 'asc' or 'desc'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>facet</code></td>
<td>
<p>(logical) Include facet results. Boolean or string with
field to facet on. Valid fields are *, affiliation, funder-name,
funder-doi, orcid, container-title, assertion, archive, update-type,
issn, published, source, type-name, publisher-name, license,
category-name, assertion-group. Default: <code>FALSE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cursor</code></td>
<td>
<p>(character) Cursor character string to do deep paging.
Default is None. Pass in '*' to start deep paging. Any combination of
query, filters and facets may be used with deep paging cursors.
While the <code>limit</code> parameter may be specified along with cursor,
offset and sample cannot be used with the cursor. See
https://github.com/CrossRef/rest-api-doc#deep-paging-with-cursors</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cursor_max</code></td>
<td>
<p>(integer) Max records to retrieve. Only used when
cursor param used. Because deep paging can result in continuous requests
until all are retrieved, use this parameter to set a maximum number of
records. Of course, if there are less records found than this value,
you will get only those found. When cursor pagination is being used
the <code>limit</code> parameter sets the chunk size per request.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.progress</code></td>
<td>
<p>Show a <code>plyr</code>-style progress bar? Options are "none", "text",
"tk", "win", and "time".  See <code>create_progress_bar</code> for details
of each. Only used when passing in multiple ids (e.g., multiple DOIs, DOI prefixes,
etc.), or when using the <code>cursor</code> param. When using the <code>cursor</code> param,
this argument only accept a boolean, either <code>TRUE</code> or <code>FALSE</code>; any
non-boolean is coerced to <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>flq</code></td>
<td>
<p>field queries. One or more field queries. Acceptable set of
field query parameters are:
</p>

<ul>
<li> <p><code>query.container-title</code>    - Query container-title aka.
publication name
</p>
</li>
<li> <p><code>query.author</code> - Query author first and given names
</p>
</li>
<li> <p><code>query.editor</code> - Query editor first and given names
</p>
</li>
<li> <p><code>query.chair</code>    - Query chair first and given names
</p>
</li>
<li> <p><code>query.translator</code> - Query translator first and given names
</p>
</li>
<li> <p><code>query.contributor</code> - Query author, editor, chair and
translator first and given names
</p>
</li>
<li> <p><code>query.bibliographic</code> - Query bibliographic information, useful
for citation lookup. Includes titles, authors, ISSNs and publication years
</p>
</li>
<li> <p><code>query.affiliation</code> - Query contributor affiliations
</p>
</li>
</ul>
<p>Note: <code>query.title</code> has been removed - use <code>query.bibliographic</code>
as a replacement</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>select</code></td>
<td>
<p>(character) One or more field to return (only those fields
are returned)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>async</code></td>
<td>
<p>(logical) use async HTTP requests. Default: <code>FALSE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Named parameters passed on to <code>verb-GET</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parse</code></td>
<td>
<p>(logical) Whether to output json <code>FALSE</code> or parse to
list <code>TRUE</code>. Default: <code>FALSE</code></p>
</td>
</tr>
</table>
<h3>Deep paging (using the cursor)</h3>

<p>When using the cursor, a character string called <code>next-cursor</code> is
returned from Crossref that we use to do the next request, and so on. We
use a while loop to get number of results up to the value of
<code>cursor_max</code>. Since we are doing each request for you, you may not
need the <code>next-cursor</code> string, but if you do want it, you can get
to it by indexing into the result like <code>x$meta$next_cursor</code>
</p>
<p>Note that you can pass in curl options when using cursor, via <code>"..."</code>
</p>


<h3>Beware</h3>

<p>The API will only work for CrossRef DOIs.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>cr_works()</code> - Does data request and parses to data.frame for
easy downstream consumption
</p>
</li>
<li> <p><code>cr_works_()</code> - Does data request, and gives back json (default)
or lists, with no attempt to parse to data.frame's
</p>
</li>
</ul>
<h3>Explanation of some data fields</h3>


<ul><li>
<p> score: a term frequency, inverse document frequency score that
comes from the Crossref Solr backend, based on bibliographic metadata
fields title, publication title, authors, ISSN, publisher, and
date of publication.
</p>
</li></ul>
<h3>Note</h3>

<p>See the "Rate limiting" seciton in rcrossref to get
into the "fast lane"
</p>


<h3>References</h3>

<p>https://github.com/CrossRef/rest-api-doc
</p>


<h3>See Also</h3>

<p>Other crossref: 
<code>cr_funders()</code>,
<code>cr_journals()</code>,
<code>cr_licenses()</code>,
<code>cr_members()</code>,
<code>cr_prefixes()</code>,
<code>cr_types()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# Works funded by the NSF
cr_works(query="NSF")

# Works that include renear but not ontologies
cr_works(query="renear+-ontologies")

# Filter
cr_works(query="global state", filter=c(has_orcid=TRUE), limit=3)
# Filter by multiple fields
cr_works(filter=c(has_orcid=TRUE, from_pub_date='2004-04-04'))
# Only full text articles
cr_works(filter=c(has_full_text = TRUE))
# has affilitation data
cr_works(filter=c(has_affiliation = TRUE))
# has abstract
cr_works(filter=c(has_abstract = TRUE))
# has clinical trial number
cr_works(filter=c(has_clinical_trial_number = TRUE))

# Querying dois
cr_works(dois='10.1063/1.3593378')
cr_works('10.1371/journal.pone.0033693')
cr_works(dois='10.1007/12080.1874-1746')
cr_works(dois=c('10.1007/12080.1874-1746','10.1007/10452.1573-5125',
   '10.1111/(issn)1442-9993'))

# progress bar
cr_works(dois=c('10.1007/12080.1874-1746','10.1007/10452.1573-5125'),
   .progress="text")

# Include facetting in results
cr_works(query="NSF", facet=TRUE)
## Get facets only, by setting limit=0
cr_works(query="NSF", facet=TRUE, limit=0)
## you can also set facet to a query
cr_works(facet = "license:*", limit=0)

# Sort results
cr_works(query="ecology", sort='relevance', order="asc")
res &lt;- cr_works(query="ecology", sort='score', order="asc")
res$data$score
cr_works(query="ecology", sort='published')
x=cr_works(query="ecology", sort='published-print')
x=cr_works(query="ecology", sort='published-online')

# Get a random number of results
cr_works(sample=1)
cr_works(sample=10)

# You can pass in dot separated fields to filter on specific fields
cr_works(filter=c(award.number='CBET-0756451',
   award.funder='10.13039/100000001'))

# Use the cursor for deep paging
cr_works(query="NSF", cursor = "*", cursor_max = 300, limit = 100)
cr_works(query="NSF", cursor = "*", cursor_max = 300, limit = 100,
   facet = TRUE)
## with optional progress bar
x &lt;- cr_works(query="NSF", cursor = "*", cursor_max = 1200, limit = 200, 
  .progress = TRUE)

# Low level function - does no parsing to data.frame, get json or a list
cr_works_(query = "NSF")
cr_works_(query = "NSF", parse=TRUE)
cr_works_(query="NSF", cursor = "*", cursor_max = 300, limit = 100)
cr_works_(query="NSF", cursor = "*", cursor_max = 300, limit = 100,
   parse=TRUE)

# field queries
## query.author
res &lt;- cr_works(query = "ecology", flq = c(query.author = 'Boettiger'))

## query.container-title
res &lt;- cr_works(query = "ecology",
  flq = c(`query.container-title` = 'Ecology'))

## query.author and query.bibliographic
res &lt;- cr_works(query = "ecology",
  flq = c(query.author = 'Smith', query.bibliographic = 'cell'))

# select only certain fields to return
res &lt;- cr_works(query = "NSF", select = c('DOI', 'title'))
names(res$data)

# asyc
queries &lt;- c("ecology", "science", "cellular", "birds", "European",
  "bears", "beets", "laughter", "hapiness", "funding")
res &lt;- cr_works(query = queries, async = TRUE)
res_json &lt;- cr_works_(query = queries, async = TRUE)
unname(vapply(res_json, class, ""))
jsonlite::fromJSON(res_json[[1]])

queries &lt;- c("ecology", "science", "cellular")
res &lt;- cr_works(query = queries, async = TRUE, verbose = TRUE)
res

# time
queries &lt;- c("ecology", "science", "cellular", "birds", "European",
  "bears", "beets", "laughter", "hapiness", "funding")
system.time(cr_works(query = queries, async = TRUE))
system.time(lapply(queries, function(z) cr_works(query = z)))

## End(Not run)
</code></pre>


</div>