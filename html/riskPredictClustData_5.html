<div class="container">

<table style="width: 100%;"><tr>
<td>riskPredict</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Assessing risk prediction performance for clustered data
</h2>

<h3>Description</h3>

<p>Assessing risk prediction performance for clustered data.
</p>


<h3>Usage</h3>

<pre><code class="language-R">riskPredict(frame, alpha=0.05)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>frame</code></td>
<td>

<p>A data frame with 4 columns: cid, subuid, status, and score.
<code>cid</code> indicates cluster id; <code>subuid</code> indicates unit ID within a cluster;
<code>status=1</code> indicates an eye is progressed;
<code>status=0</code> indicates an eye is not progressed;
<code>score</code> represents the risk score.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>

<p>numeric. confidence level for <code class="reqn">eta_c</code>.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>To obtain 95% confidence interval of <code class="reqn">\eta_c</code>,
we first obtain 95% confidence interval <code class="reqn">[c_1, c_2]</code>
for 
<code class="reqn">\Phi^{-1}(\eta_c)</code>, then
transform back:
<code class="reqn">[\Phi(c_1), \Phi(c_2)]</code>.
</p>


<h3>Value</h3>

<p>A list of 6 elements:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>stat</code></td>
<td>
<p>the test statistics 
<code class="reqn">\hat{\eta}_c^{(1)}</code>
hateta_c^(1) based on the prediction rule.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>se.stat</code></td>
<td>
<p>standard error of the test statistic under the 
null hypothesis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>z</code></td>
<td>
<p>z score <code>z=(stat - 0.5)/se.stat</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pval</code></td>
<td>
<p>p-value of the test</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rho</code></td>
<td>

<p>correlation between <code class="reqn">H(Z_{ij}) and H(Z_{i \ell})</code>
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mu.hat</code></td>
<td>

<p>estimated <code class="reqn">\mu</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>theta.hat</code></td>
<td>

<p>estimated <code class="reqn">\theta</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>theta.c.hat</code></td>
<td>

<p>estimated <code class="reqn">\theta_c</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>E.stat.Ha</code></td>
<td>

<p>expectation of <code class="reqn">\hat{\eta}_c</code> under
the alternative hypothesis.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>se.stat.Ha</code></td>
<td>

<p>standard error for <code class="reqn">\hat{\eta}_c</code> under
the alternative hypothesis.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CIlow</code></td>
<td>

<p>lower confidence limit  for <code class="reqn">\eta_c</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CIupp</code></td>
<td>

<p>upper confidence limit  for <code class="reqn">\eta_c</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>datHk</code></td>
<td>

<p>A nSubj by 2 matrix of probit transformed risk scores by using only
the first 2 observations of each subject.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ci</code></td>
<td>

<p>the vector of <code class="reqn">c_i</code>, the number of progressing subunits for the <code class="reqn">i</code>-th subject.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>di</code></td>
<td>

<p>the vector of <code class="reqn">d_i</code>, the number of non-progressing subunits for the <code class="reqn">i</code>-th subject.
</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Bernard Rosner &lt;stbar@channing.harvard.edu&gt;, 
Weiliang Qiu &lt;Weiliang.Qiu@gmail.com&gt;, 
Meiling Ting Lee &lt;MLTLEE@umd.edu&gt;
</p>


<h3>References</h3>

<p>Rosner B, Qiu W, and Lee MLT.
Assessing Discrimination of Risk Prediction Rules in a Clustered Data Setting.
Lifetime Data Anal. 2013 Apr; 19(2): 242-256.
</p>


<h3>Examples</h3>

<pre><code class="language-R">


set.seed(1234567)
datFrame = genSimDataGLMEM(nSubj = 30, beta0 = -6, sd.beta0i = 1.58, 
                          beta1 = 1.58, beta2 = -3.95, beta3 = 3.15, beta4 = 2.06,
                          beta5 = 0.51, beta6 = 1.47, beta7 = 3.11, 
                          p.smkcur = 0.08, p.inieye31 = 0.44, p.inieye32 = 0.42,
                          p.inieye41 = 0.12, p.inieye42 = 0.11, sd.lncalorc = 0.33)

print(dim(datFrame))
print(datFrame[1:2,])

tt1 = getScore(fmla = prog~smkcur+lncalorc+inieye3+inieye4+factor(rtotfat), 
  cidVar = "cid", subuidVar = "subuid", statusVar = "prog", 
  datFrame = datFrame, mycorstr = "exchangeable",
  verbose = FALSE)
myframe1=tt1$frame

print(dim(myframe1))
print(myframe1[1:3,])

res1 = riskPredict(myframe1)
print(names(res1))
print(res1)


</code></pre>


</div>