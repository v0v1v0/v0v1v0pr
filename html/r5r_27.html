<div class="container">

<table style="width: 100%;"><tr>
<td>setup_r5</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create a transport network used for routing in R5</h2>

<h3>Description</h3>

<p>Builds a multimodal transport network used for routing in <code>R5</code>, combining
multiple data inputs present in the directory where the network should be
saved to. The directory must contain only one street network file (in
<code>.osm.pbf</code> format). It may optionally contain one or more public transport
GTFS feeds (in <code>GTFS.zip</code> format, where <code>GTFS</code> is the name of your feed),
when used for public transport routing, and a <code>.tif</code> file describing the
elevation profile of the study area. If there is more than one GTFS feed in
the directory, all feeds are merged. If there is already a 'network.dat'
file in the directory, the function will simply read it and load it to
memory (unless specified not to do so).
</p>


<h3>Usage</h3>

<pre><code class="language-R">setup_r5(
  data_path,
  verbose = FALSE,
  temp_dir = FALSE,
  elevation = "TOBLER",
  overwrite = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data_path</code></td>
<td>
<p>A string pointing to the directory where data inputs are
stored and where the built <code>network.dat</code> will be saved.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>A logical. Whether to show <code>R5</code> informative messages when
running the function. Defaults to <code>FALSE</code> (please note that in such case
<code>R5</code> error messages are still shown). Setting <code>verbose</code> to <code>TRUE</code> shows
detailed output, which can be useful for debugging issues not caught by
<code>r5r</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>temp_dir</code></td>
<td>
<p>A logical. Whether the <code>R5</code> Jar file should be saved to a
temporary directory. Defaults to <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>elevation</code></td>
<td>
<p>A string. The name of the impedance function to be used to
calculate impedance for walking and cycling based on street slopes.
Available options include <code>TOBLER</code> (Default) and <code>MINETTI</code>, or <code>NONE</code> to
ignore elevation. R5 loads elevation data from <code>.tif</code> files saved inside the
<code>data_path</code> directory. See more info in the Details below.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>overwrite</code></td>
<td>
<p>A logical. Whether to overwrite an existing <code>network.dat</code>
or to use a cached file. Defaults to <code>FALSE</code> (i.e. use a cached network).</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An <code>rJava</code> object to connect with <code>R5</code> routing engine.
</p>


<h3>Details</h3>

<p>More information about the <code>TOBLER</code> and <code>MINETTI</code> options to calculate the
effects of elevation on travel times can be found in the references below:
</p>

<ul>
<li>
<p> Campbell, M. J., et al (2019). Using crowdsourced fitness tracker data to
model the relationship between slope and travel rates. Applied geography, 106,
93-107. <a href="https://doi.org/10.1016/j.apgeog.2019.03.008">doi:10.1016/j.apgeog.2019.03.008</a>.
</p>
</li>
<li>
<p> Minetti, A. E., et al (2002). Energy cost of walking and running at extreme
uphill and downhill slopes. Journal of applied physiology. <a href="https://doi.org/10.1152/japplphysiol.01177.2001">doi:10.1152/japplphysiol.01177.2001</a>.
</p>
</li>
<li>
<p> Tobler, W. (1993). Three presentations on geographical analysis and modeling:
Non-isotropic geographic modeling speculations on the geometry of geography
global spatial analysis. Technical Report. National center for geographic
information and analysis. 93 (1). <a href="https://escholarship.org/uc/item/05r820mz">https://escholarship.org/uc/item/05r820mz</a>.
</p>
</li>
</ul>
<h3>See Also</h3>

<p>Other setup: 
<code>download_r5()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(r5r)

# directory with street network and gtfs files
data_path &lt;- system.file("extdata/poa", package = "r5r")

r5r_core &lt;- setup_r5(data_path)

</code></pre>


</div>