<div class="container">

<table style="width: 100%;"><tr>
<td>editLayer</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Edit a color patch using morphological operations</h2>

<h3>Description</h3>

<p>Applies one of several morphological operations from <code>imager</code> to a layer of a
recolorize object. Convenient for cleaning up a color patch without affecting
other layers of the recolorized image. This can be used to despeckle, fill in
holes, or uniformly grow or shrink a color patch.
</p>


<h3>Usage</h3>

<pre><code class="language-R">editLayer(
  recolorize_obj,
  layer_idx,
  operation = "clean",
  px_size = 2,
  plotting = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>recolorize_obj</code></td>
<td>
<p>A recolorize object from <code>recolorize</code>,
<code>recluster</code>, or <code>imposeColors</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>layer_idx</code></td>
<td>
<p>A single index value (numeric) indicating which
layer to edit. Corresponds to the order of the colors in the <code>centers</code>
attribute of the recolorize object, and to the indices in the
<code>pixel_assignments</code> attribute of the same.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>operation</code></td>
<td>
<p>The name of an imager morphological operation to perform on
the layer, passed as a string. See details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>px_size</code></td>
<td>
<p>The size (in pixels) of the elements to filter. If
<code>operation = "shrink"</code> and <code>px_size = 2</code>, for example, the color
patch will be shrunk by a 2-pixel radius.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plotting</code></td>
<td>
<p>Logical. Plot results?</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Current imager operations are:
</p>

<ul>
<li> <p><code>grow</code>: Grow a pixset
</p>
</li>
<li> <p><code>shrink</code>: Shrink a pixset
</p>
</li>
<li> <p><code>fill</code>: Remove holes in an pixset. Accomplished by
growing and then shrinking a pixset.
</p>
</li>
<li> <p><code>clean</code>: Remove small isolated elements (speckle).
Accomplished by shrinking and then growing a pixset.
</p>
</li>
</ul>
<h3>Value</h3>

<p>A <code>recolorize</code> object. The <code>sizes</code>, <code style="white-space: pre;">⁠pixel_assignments,⁠</code>, and
<code>recolored_img</code> attributes will differ from the input object for the
relevant color patch (layer) to reflect the edited layer.
</p>


<h3>See Also</h3>

<p>editLayers for editing multiple layers (with multiple operations)
at once; a wrapper for this function.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># load image and recolorize it
img &lt;- system.file("extdata/corbetti.png", package = "recolorize")

# first do a standard color binning
init_fit &lt;- recolorize(img, bins = 2, plotting = FALSE)

# then cluster patches by similarity
re_fit &lt;- recluster(init_fit, cutoff = 40)

# to reset graphical parameters:
current_par &lt;- graphics::par(no.readonly = TRUE)

# examine individual layers:
layout(matrix(1:6, nrow = 2))
layers &lt;- splitByColor(re_fit, plot_method = "color")

# notice patch 2 (cream) - lots of stray pixels
edit_cream_layer &lt;- editLayer(re_fit,
                              layer_idx = 2,
                              operation = "clean",
                              px_size = 3)

# shrinking and growing by the same element size gives us less flexibility, so
# we can also shrink and then grow, using different px_size arguments:
edit_green_1 &lt;- editLayer(re_fit,
                          layer_idx = 4,
                          operation = "shrink",
                          px_size = 2)
edit_green_2 &lt;- editLayer(edit_green_1,
                          layer_idx = 4,
                          operation = "grow",
                          px_size = 3)

# we can get pleasingly mondrian about it:
new_fit &lt;- re_fit
for (i in 1:nrow(new_fit$centers)) {
  new_fit &lt;- editLayer(new_fit,
                       layer_idx = i,
                       operation = "fill",
                       px_size = 5, plotting = FALSE)
}
plot(new_fit)

graphics::par(current_par)

</code></pre>


</div>