<div class="container">

<table style="width: 100%;"><tr>
<td>createH5LigerDataset</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create on-disk ligerDataset Object</h2>

<h3>Description</h3>

<p>For convenience, the default <code>formatType = "10x"</code> directly fits the
structure of cellranger output. <code>formatType = "anndata"</code> works for
current AnnData H5AD file specification (see Details). If a customized H5
file structure is presented, any of the <code>rawData</code>,
<code>indicesName</code>, <code>indptrName</code>, <code>genesName</code>, <code>barcodesName</code>
should be specified accordingly to override the <code>formatType</code> preset.
</p>
<p><b>DO</b> make a copy of the H5AD files because rliger functions write to
the files and they will not be able to be read back to Python. This will be
fixed in the future.
</p>


<h3>Usage</h3>

<pre><code class="language-R">createH5LigerDataset(
  h5file,
  formatType = "10x",
  rawData = NULL,
  normData = NULL,
  scaleData = NULL,
  barcodesName = NULL,
  genesName = NULL,
  indicesName = NULL,
  indptrName = NULL,
  anndataX = "X",
  modal = c("default", "rna", "atac", "spatial", "meth"),
  featureMeta = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>h5file</code></td>
<td>
<p>Filename of an H5 file</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>formatType</code></td>
<td>
<p>Select preset of H5 file structure. Default <code>"10X"</code>.
Alternatively, we also support <code>"anndata"</code> for H5AD files.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rawData, indicesName, indptrName</code></td>
<td>
<p>The path in a H5 file for the raw
sparse matrix data. These three types of data stands for the <code>x</code>,
<code>i</code>, and <code>p</code> slots of a <code>dgCMatrix-class</code>
object. Default <code>NULL</code> uses <code>formatType</code> preset.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>normData</code></td>
<td>
<p>The path in a H5 file for the "x" vector of the normalized
sparse matrix. Default <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scaleData</code></td>
<td>
<p>The path in a H5 file for the Group that contains the sparse
matrix constructing information for the scaled data. Default <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>genesName, barcodesName</code></td>
<td>
<p>The path in a H5 file for the gene names and
cell barcodes. Default <code>NULL</code> uses <code>formatType</code> preset.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>anndataX</code></td>
<td>
<p>The HDF5 path to the raw count data in an H5AD file. See
Details. Default <code>"X"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>modal</code></td>
<td>
<p>Name of modality for this dataset. Currently options of
<code>"default"</code>, <code>"rna"</code>, <code>"atac"</code>, <code>"spatial"</code> and
<code>"meth"</code> are supported. Default <code>"default"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>featureMeta</code></td>
<td>
<p>Data frame for feature metadata. Default <code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional slot data. See ligerDataset for detail.
Given values will be directly placed at corresponding slots.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>For H5AD file written from an AnnData object, we allow using
<code>formatType = "anndata"</code> for the function to infer the proper structure.
However, while a typical AnnData-based analysis tends to in-place update the
<code>adata.X</code> attribute and there is no standard/forced convention for where
the raw count data, as needed from LIGER, is stored. Therefore, we expose
argument <code>anndataX</code> for specifying this information. The default value
<code>"X"</code> looks for <code>adata.X</code>. If the raw data is stored in a layer,
e.g. <code>adata.layers['count']</code>, then <code>anndataX = "layers/count"</code>.
If it is stored to <code>adata.raw.X</code>, then <code>anndataX = "raw/X"</code>. If
your AnnData object does not have the raw count retained, you will have to
go back to the Python work flow to have it inserted at desired object space
and re-write the H5AD file, or just go from upstream source files with which
the AnnData was originally created.
</p>


<h3>Value</h3>

<p>H5-based ligerDataset object
</p>


<h3>Examples</h3>

<pre><code class="language-R">h5Path &lt;- system.file("extdata/ctrl.h5", package = "rliger")
tempPath &lt;- tempfile(fileext = ".h5")
file.copy(from = h5Path, to = tempPath)
ld &lt;- createH5LigerDataset(tempPath)
</code></pre>


</div>