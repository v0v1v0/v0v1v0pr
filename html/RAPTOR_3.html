<div class="container">

<table style="width: 100%;"><tr>
<td>batch.mode</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Automatic rows and position detection</h2>

<h3>Description</h3>

<p>Batch.mode applies all functionalities described in <code>is.raptor</code>,
<code>align</code>,
<code>first.cell</code>,
<code>pos.det</code> and
<code>write.output</code>.
Multiple input datasets (sample specific) can be provided in a folder and automatically
used within this function. Input data should be checked for all requirements described
in <code>is.raptor</code> and preferably adjusted with <code>align</code>.
See <code>pos.det</code> for a detailed description of arguments.
</p>


<h3>Usage</h3>

<pre><code class="language-R">batch.mode(location, files = FALSE,
           interact = TRUE, make.plot = TRUE,
           aligning = TRUE, frac.small=0.5, swe=0.5, sle=3,
           ec=3, swl=0.5, sll=5, lc=10, prof.co=6, max.cells=0.5,
           list = FALSE, flip = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>location</code></td>
<td>
<p>a character string containing the location of input files and where the outputs (.pdf and .txt files) should be stored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>files</code></td>
<td>
<p>a vector of files for the analyses (defaults to all files present in the folder). Text files should agree with all criteria presented in <code>is.raptor</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>interact</code></td>
<td>
<p>a logical flag. If <code>TRUE</code>, the user will have the options to manually assign the degree of rotation for each annual ring. See <code>align</code> for rotation options. If <code>FALSE</code>, the rotation is optimized automatically using a simple linear regression through all points along the horizontal axis (default = <code>FALSE</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>make.plot</code></td>
<td>
<p>logical flag indicating whether to make a plot (default =  <code>FALSE</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aligning</code></td>
<td>
<p>logical flag indicating whether a second alignment has to be performed based upon the cells detected within <code>first.cell</code> (default = <code>TRUE</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>frac.small</code></td>
<td>
<p>a numeric value (between 0 and 1) that is multiplied by the average cell lumen size of the ring, determining the minimal threshold used to filter out too small first row tracheids (default = 0.5).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>swe</code></td>
<td>
<p>a numeric value that is multiplied by the square-rooted cell lumen area (l) of the target cell and used to determine the width of the rectangular search area which locates the next earlywood cell in the row (default = 0.5).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sle</code></td>
<td>
<p>a numeric value that is multiplied by the square rooted cell lumen area (l) of the target cell to determine the length of the rectangle search area which locates the next earlywood cell in the row (default = 3).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ec</code></td>
<td>
<p>threshold ratio between the lumen area of two consecutive earlywood cells to determine the end of the earlywood search (default = 1.75). The default setting indicates that the earlywood search ends when the next cell lumen area is at least 1.75 times smaller than the target cell.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>swl</code></td>
<td>
<p>a numeric value that is multiplied by the square rooted cell lumen area (l) of the target cell to determine the width of the rectangle search area which locates the next latewood cell in the row (default = 0.25).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sll</code></td>
<td>
<p>a numeric value that is multiplied by the square rooted cell lumen area (l) of the target cell to determine the length of the rectangle search area which locates the next earlywood cell in the row (default = 5).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lc</code></td>
<td>
<p>threshold ratio between the lumen area of two consecutive latewood cells to determine the end of the radial file (default = 10). The default setting indicates that the latewood search ends when the next cell lumen area is at least 10 times smaller than the target cell.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prof.co</code></td>
<td>
<p>threshold ratio between the distance to the previous and consecutive cell to determine if the row (or radial file) should be excluded (default = 6).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max.cells</code></td>
<td>
<p>threshold proportion of the maximum number of cells to determine if the radial file has to be excluded (default = 0.6).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>list</code></td>
<td>
<p>a <code>data.frame</code> with the individual "ID" and in sequence the slopes as described in <code>pos.det</code>. Cannot be activated when interact = <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>flip</code></td>
<td>
<p>logical flag indicating whether to plot the data with earlywood downwards (default; flip = <code>FALSE</code>) or upwards (flip = <code>TRUE</code>).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function aids in applying all described functions on a large dataset composed of multiple files, including multiple individuals and years. It will generate output graphs as described in <code>is.raptor</code>, <code>align</code>, <code>first.cell</code>, <code>pos.det</code> and <code>write.output</code> in a .pdf file. Additionally, output text files are written. All output files are exported into the directory specified in the location argument.
</p>


<h3>Value</h3>

<p>Plots the detected radial files and writes output according the the
<code>write.output</code> format.
</p>


</div>