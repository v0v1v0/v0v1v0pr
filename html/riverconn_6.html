<div class="container">

<table style="width: 100%;"><tr>
<td>inner_d_index_calculation</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate index improvement for scenarios of barriers removal - function not for export</h2>

<h3>Description</h3>

<p>Calculate index improvement for scenarios of barriers removal - function not for export
</p>


<h3>Usage</h3>

<pre><code class="language-R">inner_d_index_calculation(
  graph,
  barriers_metadata,
  id_barrier,
  pass_u_updated,
  pass_d_updated,
  mode = "leave_one_out",
  parallel,
  ncores,
  weight,
  nodes_id,
  index_type,
  index_mode,
  c_ij_flag,
  B_ij_flag,
  dir_fragmentation_type,
  pass_confluence,
  pass_u,
  pass_d,
  field_B,
  dir_distance_type,
  disp_type,
  param_u,
  param_d,
  param,
  param_l
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>graph</code></td>
<td>
<p>an object of class igraph. Can be both directed or undirected.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>barriers_metadata</code></td>
<td>
<p>data.frame that must contain a column having the same name as the 'id_barrier' attribute of the graph,
and two columns with the corresponding upstream and downstream improved passabilities (see pass_u_updated and pass_d_updated).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id_barrier</code></td>
<td>
<p>graph edges attribute used to label barriers. Default is <code>"id_barrier"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pass_u_updated</code></td>
<td>
<p>field in barrier_metadata where updated value for upstream passability is stored
(recommended values higher than the original passability).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pass_d_updated</code></td>
<td>
<p>field in barrier_metadata where updated value for downstream passability is stored
(recommended values higher than the original passability).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mode</code></td>
<td>
<p>currentlym only <code>"leave_one_out"</code> is implemented.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parallel</code></td>
<td>
<p>logical value to flag if parallel option is to be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ncores</code></td>
<td>
<p>define how many cores are used in parallel processing. Active only when <code>parallel = TRUE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weight</code></td>
<td>
<p>check index_calculation function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nodes_id</code></td>
<td>
<p>check index_calculation function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>index_type</code></td>
<td>
<p>check index_calculation function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>index_mode</code></td>
<td>
<p>check index_calculation function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>c_ij_flag</code></td>
<td>
<p>check index_calculation function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>B_ij_flag</code></td>
<td>
<p>check index_calculation function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dir_fragmentation_type</code></td>
<td>
<p>check index_calculation function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pass_confluence</code></td>
<td>
<p>check index_calculation function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pass_u</code></td>
<td>
<p>check index_calculation function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pass_d</code></td>
<td>
<p>check index_calculation function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>field_B</code></td>
<td>
<p>check index_calculation function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dir_distance_type</code></td>
<td>
<p>check index_calculation function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>disp_type</code></td>
<td>
<p>check index_calculation function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>param_u</code></td>
<td>
<p>check index_calculation function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>param_d</code></td>
<td>
<p>check index_calculation function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>param</code></td>
<td>
<p>check index_calculation function.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Setting <code>c_ij_flag = FALSE</code> removes from the calculations the effect of barriers, i.e. the c_ij contribution
is not used in the calculation of the index.
Setting <code>B_ij_flag = FALSE</code> removes from the calculations the effect of movement/dispersal,
i.e. the B_ij contribution is not used in the calculation of the index.
Note that it is not possible to set both <code>c_ij_flag = FALSE</code> and <code>B_ij_flag = FALSE</code>.
</p>
<p>The setting <code>dir_distance_type = "symmetric"</code> is to be used when the directionality of the river network is not relevant.
The distance between reaches midpoints is calculated for each couple of reaches.
The setting <code>dir_distance_type = "asymmetric"</code> is to be used when the directionality is relevant.
The distance between reaches midpoints is calculated for each couple of reaches and splitted
between 'upstream travelled' distance and 'downstream travelled' distance
</p>
<p>The 'param_u', 'param_d', and 'param' values are interpreted differently based on the formula used to relate distance and probability.
When <code>disp_type ="exponential"</code>, those values are used as the base of the exponential dispersal kernel: B_ij = param^d_ij.
When <code>disp_type ="threshold"</code>, those values are used to define the maximum dispersal length: B_ij = ifelse(d_ij &lt; param, 1, 0).
</p>


<h3>Value</h3>

<p>returns a data.frame containing the percent improvement of the index for
each barrier present in the 'barriers_metadata' variable.
If <code>index_type = "full"</code>, the data.frame is organized by 'id_barrier'.
If <code>index_type = "reach"</code>, the data.frame is organized by 'id_barrier' and 'name'.
In both cases, both numerator and denominator used in the index calculations are reported in the columns 'num' and 'den'.
The column 'd_index' contains the relative index improvement when each barrier is removed.
</p>


</div>