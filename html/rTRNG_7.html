<div class="container">

<table style="width: 100%;"><tr>
<td>TRNG.Engine</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>TRNG random number engines.</h2>

<h3>Description</h3>

<p>Reference Classes exposing random number engines
(pseudo-random number generators) in the TRNG C++ library. Engine objects of
a class <code>engineClass</code> are created as <code>r &lt;- engineClass$new(...)</code>,
and a method <code>m</code> is invoked as <code>x$m(...)</code>. The engine object
<code>r</code> can be then used for generating random variates via any of the
<code>r&lt;dist&gt;_trng</code> functions (e.g., <code>runif_trng</code>), specifying
the optional argument <code>engine = r</code>.
</p>


<h3>Classes</h3>


<dl>
<dt>
<em>Parallel</em> random number engines</dt>
<dd>
<p><code>lcg64</code>, <code>lcg64_shift</code>, <code>mrg2</code>, <code>mrg3</code>, <code>mrg3s</code>,
<code>mrg4</code>, <code>mrg5</code>, <code>mrg5s</code>, <code>yarn2</code>, <code>yarn3</code>,
<code>yarn3s</code>, <code>yarn4</code>, <code>yarn5</code>, <code>yarn5s</code>.
</p>
</dd>
<dt>
<em>Conventional</em> random number engines</dt>
<dd>
<p><code>lagfib2plus_19937_64</code>, <code>lagfib2xor_19937_64</code>,
<code>lagfib4plus_19937_64</code>, <code>lagfib4xor_19937_64</code>, <code>mt19937_64</code>,
<code>mt19937</code>.
</p>
</dd>
</dl>
<h3>Constructors</h3>


<dl>
<dt><code>$new()</code></dt>
<dd>
<p>Construct a random engine object using default seed and internal parameters.
</p>
</dd>
<dt><code>$new(seed)</code></dt>
<dd>
<p>Construct a random engine object with default internal parameters using the
provided <code>seed</code>.
</p>
</dd>
<dt><code>$new(string)</code></dt>
<dd>
<p>Construct a random engine object restoring its internal state and
parameters from a character <code>string</code>, falling back to <code>$new()</code>
for empty strings. See method <code>$toString()</code>.
</p>
</dd>
</dl>
<h3>Methods</h3>


<dl>
<dt><code>$seed(seed)</code></dt>
<dd>
<p>Use the scalar integer <code>seed</code> to set the engine's internal state.
</p>
</dd>
<dt><code>$jump(steps)</code></dt>
<dd>
<p>Advance by <code>steps</code> the internal state of the engine. Applies to
<em>parallel</em> engines only.
</p>
</dd>
<dt><code>$split(p, s)</code></dt>
<dd>
<p>Update the internal state and parameters of the engine for generating
directly the <code>s</code>th of <code>p</code> subsequences, with <code>s</code> in
[<code>1</code>, <code>p</code>], producing one element every <code>s</code> starting from
the <code>p</code>th. Applies to <em>parallel</em> engines only.
</p>
</dd>
<dt>
<code>$name()</code>, <code>$kind()</code>
</dt>
<dd>
<p>Return the name of the random number engine (e.g., <code>"yarn2"</code>), also
referred to as <code>kind</code> in <span class="pkg">rTRNG</span> similarly to base
<span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>.
</p>
</dd>
<dt><code>$toString()</code></dt>
<dd>
<p>Return a character representation of the engine's internal state and
parameters.
</p>
</dd>
<dt><code>$copy()</code></dt>
<dd>
<p>Specialization of the generic method for Reference
Classes, ensuring the underlying C++ engine object is properly copied.
</p>
</dd>
<dt><code>$show()</code></dt>
<dd>
<p>Specialization of the generic show, displaying
<code>$toString()</code> (truncated to 80 characters).
</p>
</dd>
<dt><code>$.Random.seed()</code></dt>
<dd>
<p>Return a two-element character vector with elements <code>$kind()</code> and
<code>$toString()</code>, suitable for use in <code>TRNG.Random.seed</code> (and
by a possible function returning an engine object given a
<code>TRNG.Random.seed</code>).
</p>
</dd>
</dl>
<h3>Details</h3>

<p>The TRNG C++ library provides a collection of random number engines
(pseudo-random number generators). In particular, compared to
<em>conventional</em> engines working in a purely sequential manner,
<em>parallel</em> engines can be manipulated via <code>jump</code> and <code>split</code>
operations. Jumping allows to advance the internal state by a number of steps
without generating all intermediate states, whereas split operations allow to
generate directly a subsequence obtained by decimating the original sequence.
Please consult the TRNG C++ library documentation (see ‘References’)
for an introduction to the concepts and details around (parallel) random
number generation and engines, including details about the state size and
period of the TRNG generators.
</p>
<p>Random number engines from the C++ TRNG library are exposed to <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> using
<span class="pkg">Rcpp</span> <code>Module</code>s. As a consequence, the
arguments to all Constructors and Methods above are not passed by name but by
order. Moreover, arguments and return values are both defined in terms of C++
data types. Details can be displayed via the standard
Reference Class documentation method <code>$help</code>
(e.g., <code>yarn2$help(split)</code>).
</p>
<p>Most of the Methods above are simple wrappers of analogous methods in the
corresponding C++ class provided by the TRNG library. A few
differences/details are worth being mentioned.
</p>

<ul>
<li>
<p>Argument <code>s</code> of the <code>split</code> method is exposed to <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> according
to <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>'s <code>1</code>-based indexing, thus in the [<code>1</code>, <code>p</code>]
interval, whereas the TRNG C++ implementation follows C++ <code>0</code>-based
indexing, thus allowing values in [<code>0</code>, <code>p-1</code>].
</p>
</li>
<li>
<p>Constructor <code>new(string)</code> and method <code>toString()</code> rely on
streaming operators <code>&gt;&gt;</code> and <code>&lt;&lt;</code> available for all C++ TRNG
classes.
</p>
</li>
<li>
<p>TRNG C++ random number engine objects are <em>copy-constructible</em> and
<em>assignable</em>, whereas their <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> counterparts in <span class="pkg">rTRNG</span> are
purely reference-based. In particular, as for any <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>
Reference Object, engines are not copied upon
assignment but via the <code>$copy()</code> method.
</p>
</li>
</ul>
<h3>Random number engines details</h3>



<h4>Parallel engines</h4>


<dl>
<dt><code>lcg64</code></dt>
<dd>
<p>Linear congruential generator with modulus <code class="reqn">2^{64}</code>.
</p>
</dd>
<dt><code>lcg64_shift</code></dt>
<dd>
<p>Linear congruential generator with modulus <code class="reqn">2^{64}</code> and
bit-shift transformation.
</p>
</dd>
<dt>
<code>mrg2</code>, <code>mrg3</code>, <code>mrg4</code>, <code>mrg5</code>
</dt>
<dd>
<p>Multiple recurrence generators based on a linear feedback shift
register sequence with prime modulus <code class="reqn">2^{31}-1</code>.
</p>
</dd>
<dt>
<code>mrg3s</code>, <code>mrg5s</code>
</dt>
<dd>
<p>Multiple recurrence generators based on a linear feedback shift
register with Sophie-Germain prime modulus.
</p>
</dd>
<dt>
<code>yarn2</code>, <code>yarn3</code>, <code>yarn4</code>, <code>yarn5</code>
</dt>
<dd>
<p>YARN generators based on the delinearization of a linear feedback shift
register sequence with prime modulus <code class="reqn">2^{31}-1</code>.
</p>
</dd>
<dt>
<code>yarn3s</code>, <code>yarn5s</code>
</dt>
<dd>
<p>YARN generators based on the delinearization of a linear feedback shift
register sequence with Sophie-Germain prime modulus.
</p>
</dd>
</dl>
<h4>Conventional engines</h4>


<dl>
<dt>
<code>lagfib2plus_19937_64</code>, <code>lagfib4plus_19937_64</code>
</dt>
<dd>
<p>Lagged Fibonacci generator with <code>2</code> or <code>4</code> feedback taps and
addition.
</p>
</dd>
<dt>
<code>lagfib2xor_19937_64</code>, <code>lagfib4xor_19937_64</code>
</dt>
<dd>
<p>Lagged Fibonacci generator with <code>2</code> or <code>4</code> feedback taps and
exclusive-or operation.
</p>
</dd>
<dt><code>mt19937</code></dt>
<dd>
<p>Mersenne-Twister generating 32 random bit.
</p>
</dd>
<dt><code>mt19937_64</code></dt>
<dd>
<p>Mersenne-Twister generating 64 random bit.
</p>
</dd>
</dl>
<h3>References</h3>

<p>Heiko Bauke, <em>Tina's Random Number Generator Library</em>, Version
4.23.1, <a href="https://github.com/rabauke/trng4/blob/v4.23.1/doc/trng.pdf">https://github.com/rabauke/trng4/blob/v4.23.1/doc/trng.pdf</a>.
</p>


<h3>See Also</h3>

<p><code>ReferenceClasses</code>, <code>TRNG.Random</code>.
</p>
<p>TRNG distributions:
<code>rbinom_trng</code>, <code>rlnorm_trng</code>, <code>rnorm_trng</code>, <code>rpois_trng</code>, <code>runif_trng</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Class yarn2 used in the examples below can be replaced by any other TRNG
## engine class (only of a parallel kind for jump and split examples).

## basic constructor with default internal state (and parameters)
r &lt;- yarn2$new()
## show the internal parameters and state
r
## return internal parameters and state as character string
r$toString()

## seed the random number engine
r$seed(117)
r
## construct with given initial seed
s &lt;- yarn2$new(117)
identical(s$toString(), r$toString())

## construct from string representation
s &lt;- yarn2$new(r$toString()) # implicitly creates a copy
identical(s$toString(), r$toString())
s &lt;- yarn2$new("") # same as yarn2$new()
identical(s$toString(), yarn2$new()$toString())
## Not run: 
  ## error if the string is not a valid representation
  s &lt;- yarn2$new("invalid")

## End(Not run)

## copy vs. reference
r_ref &lt;- r # reference to the same engine object
r_cpy &lt;- r$copy() # copy an engine
identical(r_cpy$toString(), r$toString())
rbind(c(runif_trng(4, engine = r), runif_trng(6, engine = r_ref)),
      runif_trng(10, engine = r_cpy))

## jump (and draw from reference)
runif_trng(10, engine = r_cpy)
r_ref$jump(7) # jump 7 steps ahead
runif_trng(3, engine = r) # jump has effect on the original r

## split
r_cpy &lt;- r$copy()
runif_trng(10, engine = r)
r_cpy$split(5, 2) # every 5th element starting from the 2nd
runif_trng(2, engine = r_cpy)

## seed, jump and split can be used in c(...) as they return NULL
r &lt;- yarn2$new()
r_cpy &lt;- r$copy()
r$seed(117)
runif_trng(10, engine = r)
c(r_cpy$seed(117),
  r_cpy$jump(2), runif_trng(2, engine = r_cpy),
  r_cpy$split(3,2), runif_trng(2, engine = r_cpy))

## TRNG engine name/kind
r$kind()
r$name()

## use $.Random.seed() to set the current engine (as a copy)
r$.Random.seed()
TRNG.Random.seed(r$.Random.seed())

</code></pre>


</div>