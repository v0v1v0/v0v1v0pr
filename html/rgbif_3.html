<div class="container">

<table style="width: 100%;"><tr>
<td>occ_download_import</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Import a downloaded file from GBIF.</h2>

<h3>Description</h3>

<p>Import a downloaded file from GBIF.
</p>


<h3>Usage</h3>

<pre><code class="language-R">occ_download_import(
  x = NULL,
  key = NULL,
  path = ".",
  fill = FALSE,
  encoding = "UTF-8",
  ...
)

as.download(path = ".", key = NULL)

## S3 method for class 'character'
as.download(path = ".", key = NULL)

## S3 method for class 'download'
as.download(path = ".", key = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>The output of a call to <code>occ_download_get</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>key</code></td>
<td>
<p>A key generated from a request, like that from
<code>occ_download</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>path</code></td>
<td>
<p>Path to unzip file to. Default: <code>"."</code> Writes to
folder matching zip file name</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fill</code></td>
<td>
<p>(logical) (default: <code>FALSE</code>). If <code>TRUE</code> then in case
the rows have unequal length, blank fields are implicitly filled.
passed on to <code>fill</code> parameter in data.table::fread.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>encoding</code></td>
<td>
<p>(character) encoding to read in data; passed to
<code>data.table::fread()</code>. default: "UTF-8". other allowed options:
"Latin-1" and "unknown". see <code>?data.table::fread</code> docs</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>parameters passed on to <code>data.table::fread()</code>. See <code>fread</code>
docs for details. Some <code>fread</code> parameters that may be particular useful
here are: <code>select</code> (select which columns to read in; others are dropped),
<code>nrows</code> (only read in a certain number of rows)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>You can provide either x as input, or both key and path. We use
<code>data.table::fread()</code> internally to read data.
</p>


<h3>Value</h3>

<p>a tibble (data.frame)
</p>


<h3>Problems reading data</h3>

<p>You may run into errors when using <code>occ_download_import()</code>; most often
these are due to <code>data.table::fread()</code> not being able to parse the
<code>occurrence.txt</code> file correctly. The <code>fill</code> parameter passes down to
<code>data.table::fread()</code> and the <code>...</code> allows you to pass on any other
parameters that <code>data.table::fread()</code> accepts. Read the docs for <code>fread</code>
for help.
</p>


<h3>countryCode result column and Namibia</h3>

<p>The country code for Namibia is <code>"NA"</code>. Unfortunately in R an <code>"NA"</code> string
will be read in to R as an NA/missing. To avoid this, in this function
we read in the data, then convert an NA/missing values to the character
string <code>"NA"</code>. When a country code is truly missing it will be an empty
string.
</p>


<h3>Note</h3>

<p>see downloads for an overview of GBIF downloads methods
</p>


<h3>See Also</h3>

<p>Other downloads: 
<code>download_predicate_dsl</code>,
<code>occ_download_cached()</code>,
<code>occ_download_cancel()</code>,
<code>occ_download_dataset_activity()</code>,
<code>occ_download_datasets()</code>,
<code>occ_download_get()</code>,
<code>occ_download_list()</code>,
<code>occ_download_meta()</code>,
<code>occ_download_queue()</code>,
<code>occ_download_wait()</code>,
<code>occ_download()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# First, kick off at least 1 download, then wait for the job to be complete
# Then use your download keys
res &lt;- occ_download_get(key="0000066-140928181241064", overwrite=TRUE)
occ_download_import(res)

occ_download_get(key="0000066-140928181241064", overwrite = TRUE) %&gt;%
  occ_download_import

# coerce a file path to the right class to feed to occ_download_import
# as.download("0000066-140928181241064.zip")
# as.download(key = "0000066-140928181241064")
# occ_download_import(as.download("0000066-140928181241064.zip"))

# download a dump that has a CSV file
# res &lt;- occ_download_get(key = "0001369-160509122628363", overwrite=TRUE)
# occ_download_import(res)
# occ_download_import(key = "0001369-160509122628363")

# download and import a species list (in csv format)
# x &lt;- occ_download_get("0000172-190415153152247")
# occ_download_import(x)

## End(Not run)
</code></pre>


</div>