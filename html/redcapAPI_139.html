<div class="container">

<table style="width: 100%;"><tr>
<td>fileMethods</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Export, Import, or Delete Files to a Field in a REDCap Project</h2>

<h3>Description</h3>

<p>These methods enable to the user to export a file stored
in a project field, import a file, or delete an existing file.
</p>


<h3>Usage</h3>

<pre><code class="language-R">exportFiles(
  rcon,
  record,
  field,
  event = NULL,
  dir = getwd(),
  file_prefix = TRUE,
  ...
)

importFiles(
  rcon,
  file,
  record,
  field,
  event,
  overwrite = TRUE,
  repeat_instance = NULL,
  ...
)

deleteFiles(rcon, record, field, event, ...)

## S3 method for class 'redcapApiConnection'
exportFiles(
  rcon,
  record,
  field,
  event = NULL,
  dir = getwd(),
  file_prefix = TRUE,
  repeat_instance = NULL,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)

## S3 method for class 'redcapApiConnection'
importFiles(
  rcon,
  file,
  record,
  field,
  event = NULL,
  overwrite = TRUE,
  repeat_instance = NULL,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)

## S3 method for class 'redcapApiConnection'
deleteFiles(
  rcon,
  record = NULL,
  field = NULL,
  event = NULL,
  repeat_instance = NULL,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>record</code></td>
<td>
<p><code>character(1)</code> or <code>integerish(1)</code>. The record ID in
which the desired file is stored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>field</code></td>
<td>
<p><code>character(1)</code>. The field name in which the file is stored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>event</code></td>
<td>
<p><code>character(1)</code> or <code>NULL</code>. The event name for the file.
This applies only to longitudinal projects.  If the event is not
supplied for a longitudinal project, the API will return an error message</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>repeat_instance</code></td>
<td>
<p><code>integerish(1)</code> or <code>NULL</code>. The repeat instance number of
the repeating event or the repeating instrument. When available in your
instance of REDCap, and passed as <code>NULL</code>, the API will assume a value of 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file</code></td>
<td>
<p><code>character(1)</code>. The file path to the file to be imported.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>overwrite</code></td>
<td>
<p><code>logical(1)</code>.  When <code>FALSE</code>, the function checks
if a file already exists for that record.  If a file exists, the function
terminates to prevent overwriting.  When <code>TRUE</code>, no additional
check is performed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dir</code></td>
<td>
<p><code>character(1)</code>. A directory/folder to which the file
will be saved. By default, the working directory is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file_prefix</code></td>
<td>
<p><code>logical(1)</code>.  Determines if a prefix is appended
to the file name.  The prefix takes the form <code style="white-space: pre;">⁠[record_id]-[event_name]-[file_name]⁠</code>.
The file name is always the same name of the file as it exists in REDCap.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>error_handling</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("error", "null")</code>.
An option for how to handle errors returned by the API.
see <code>redcapError()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>config</code></td>
<td>
<p>A named <code>list</code>. Additional configuration parameters to pass to
<code>httr::POST()</code>. These are appended to any parameters in
<code>rcon$config</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>api_param</code></td>
<td>
<p>A named <code>list</code>. Additional API parameters to pass into the
body of the API call. This provides users to execute calls with options
that may not otherwise be supported by <code>redcapAPI</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>These functions only export, import, or delete a single file.
</p>
<p>When exporting, the file name cannot be changed; whatever name exists in
REDCap is the name that will be used. The record ID and event name
may be appended as a prefix.
</p>


<h3>Value</h3>

<p><code>exportFiles</code> invisibly returns the file path to which the exported
file was saved.
</p>
<p><code>importFiles</code> invisibly returns <code>TRUE</code> when successful, or throws an
error if the import failed.
</p>
<p><code>deleteFiles</code> invisible returns <code>TRUE</code> when successful, or throws an
error if the deletion failed.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>exportFiles()</code>: Export a file from a REDCap project.
</p>
</li>
<li> <p><code>importFiles()</code>: Import a file to a REDCap project.
</p>
</li>
<li> <p><code>deleteFiles()</code>: Delete a file from a REDCap project.
</p>
</li>
</ul>
<h3>See Also</h3>

<p><code>exportFilesMultiple()</code>, <br><code>importFileToRecord()</code> (can create a record to receive the file if it does yet exist)
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())

save_to_dir &lt;- tempdir()              

# Export a file
exportFiles(rcon, 
            record = 1, 
            field = "file_upload_test", 
            dir = save_to_dir)
            
# Export a file for a specific event
exportFiles(rcon, 
            record = 1, 
            field = "file_upload_test",
            event = "event_1_arm_1", 
            dir = save_to_dir)

# Import a file 
importFiles(rcon,
            file = "file_to_upload.txt" 
            record = 1, 
            field = "file_upload_test")
           
# Delete a file
deleteFiles(rcon, 
            record = 1, 
            field = "file_upload_test")

## End(Not run)

</code></pre>


</div>