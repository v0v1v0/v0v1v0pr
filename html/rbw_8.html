<div class="container">

<table style="width: 100%;"><tr>
<td>rbwPoint</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Residual Balancing Weights for Estimating the Average Treatment Effect (ATE) in a Point Treatment Setting</h2>

<h3>Description</h3>

<p><code>rbwPoint</code> is a function that produces residual balancing weights in a point treatment setting. It takes
a set of baseline confounders and computes the residuals for each confounder by centering it around
its sample mean. The weights can be used to fit marginal structural models to estimate the average treatment
effect (ATE).
</p>


<h3>Usage</h3>

<pre><code class="language-R">rbwPoint(
  treatment,
  data,
  baseline_x,
  base_weights,
  max_iter = 200,
  tol = 1e-04,
  print_level = 1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>treatment</code></td>
<td>
<p>A symbol or character string for the treatment variable in <code>data</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data frame containing all variables in the model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>baseline_x</code></td>
<td>
<p>An expression for a set of baseline confounders stored in <code>data</code> or a character
vector of the names of these variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>base_weights</code></td>
<td>
<p>(Optional) A vector of base weights (or its name).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_iter</code></td>
<td>
<p>Maximum number of iterations for Newton's method in entropy minimization.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tol</code></td>
<td>
<p>Tolerance parameter used to determine convergence in entropy minimization.
See documentation for <code>eb2</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>print_level</code></td>
<td>
<p>The level of printing. See documentation for <code>eb2</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list containing the results.
</p>
<table>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>A vector of residual balancing weights.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>constraints</code></td>
<td>
<p>A matrix of (linearly independent) residual balancing constraints</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>eb_out</code></td>
<td>
<p>Results from calling the <code>eb2</code> function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>call</code></td>
<td>
<p>The matched call.</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R"># residual balancing weights
rbwPoint_fit &lt;- rbwPoint(treat, baseline_x = c(log_TotalPop, PercentOver65, log_Inc,
  PercentHispanic, PercentBlack, density,
  per_collegegrads, CanCommute), data = advertisement)

# attach residual balancing weights to data
advertisement$rbw_point &lt;- rbwPoint_fit$weights

# fit marginal structural model
if(require(survey)){
  rbw_design &lt;- svydesign(ids = ~ 1, weights = ~ rbw_point, data = advertisement)
  # the outcome model includes the treatment, the square of the treatment,
  # and state-level fixed effects (Fong, Hazlett, and Imai 2018)
  msm_rbwPoint &lt;- svyglm(Cont ~ treat + I(treat^2) + factor(StFIPS), design = rbw_design)
  summary(msm_rbwPoint)
}

</code></pre>


</div>