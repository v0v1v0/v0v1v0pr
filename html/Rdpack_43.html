<div class="container">

<table style="width: 100%;"><tr>
<td>parse_Rdpiece</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Parse a piece of Rd source text
</h2>

<h3>Description</h3>

<p>Parse a piece of Rd source text.
</p>


<h3>Usage</h3>

<pre><code class="language-R">parse_Rdpiece(x, result = "")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>the piece of Rd text, a character vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>result</code></td>
<td>
<p>if "text", converts the result to printable text
(e.g. to be shown to the user), otherwise returns an Rd object.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>parse_Rdpiece</code> parses a piece of source Rd text. The text may be
an almost arbitrary piece that may be inserted in an Rd source file,
except that it should not be a top level section (use
<code>parse_Rdtext</code> for sections). Todo: it probably can be
also a parsed piece, check!
</p>
<p>This is somewhat tricky since <code>parse_Rd</code> does not accept
arbitrary piece of Rd text. It handles either a complete Rd source or
a fragment, defined (as I understand it) as a top level section.  To
circumvent this limitation, this function constructs a minimal
complete Rd source putting argument <code>x</code> in a section (currently
"Note") which does not have special formatting on its own. After
parsing, it extracts only the part corresponding to <code>x</code>.
</p>
<p><code>parse_Rdpiece</code> by default returns the parsed Rd piece. However,
if <code>result="text"</code>, then the text is formatted as the help system
would do when presenting help pages in text format.
</p>
<p><strong>TODO:</strong> add an argument for macros?
</p>


<h3>Value</h3>

<p>a parsed Rd piece or its textual representation as described in Details
</p>


<h3>Author(s)</h3>

<p>Georgi N. Boshnakov</p>


<h3>Examples</h3>

<pre><code class="language-R"># the following creates Rd object rdo
dummyfun &lt;- function(x) x
u1 &lt;- list_Rd(name = "Dummyname", alias = "dummyfun",
              title = "Dummy title", description = "Dummy description",
              usage = "dummyfun(x,y)",
              value = "numeric vector",
              author = "A. Author",
              Rd_class = TRUE )
fn &lt;- tempfile("dummyfun", fileext = "Rd")
reprompt(dummyfun, filename = fn)
rdo &lt;- tools::parse_Rd(fn)

# let's prepare a new item
rd &lt;- "\\item{...}{further arguments to be passed on.}"
newarg &lt;- parse_Rdtext(rd, section = "\\arguments")

# now append 'newarg' to the arguments section of rdo
iarg &lt;- which(tools:::RdTags(rdo) == "\\arguments")
rdoa &lt;- append_to_Rd_list(rdo, newarg, iarg)

Rdo_show(rdoa)

# for arguments and other frequent tasks, there are specialised functions
dots &lt;- paste0("\\", "dots")
rdob &lt;- Rdo_append_argument(rdo, dots, "further arguments to be passed on.")

Rdo_show(reprompt(rdob, filename = fn))

unlink(fn)
</code></pre>


</div>