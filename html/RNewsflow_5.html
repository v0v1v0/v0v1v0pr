<div class="container">

<table style="width: 100%;"><tr>
<td>delete_duplicates</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Delete duplicate (or similar) documents from a document term matrix</h2>

<h3>Description</h3>

<p>Delete duplicate (or similar) documents from a document term matrix. 
Duplicates are defined by: having high content similarity, occuring within a given time distance and being published by the same source.
</p>


<h3>Usage</h3>

<pre><code class="language-R">delete_duplicates(
  dtm,
  date_var = NULL,
  hour_window = c(-24, 24),
  group_var = NULL,
  measure = c("cosine", "overlap_pct"),
  similarity = 1,
  keep = "first",
  tf_idf = FALSE,
  dup_csv = NULL,
  verbose = F
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dtm</code></td>
<td>
<p>A quanteda dfm.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>date_var</code></td>
<td>
<p>The name of the column in docvars(dtm) that specifies the document date. The values should be of type POSIXlt or POSIXct</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hour_window</code></td>
<td>
<p>A vector of length 2, in which the first and second value determine the left and right side of the window, respectively. For example, c(-10, 36) will compare each document to all documents between the previous 10 and the next 36 hours.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group_var</code></td>
<td>
<p>Optionally,  column name in docvars(dtm) that specifies a group (e.g., source, sourcetype). If given, only documents within the same group will be compared.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>measure</code></td>
<td>
<p>The measure that should be used to calculate similarity/distance/adjacency. Currently supports the symmetrical measure "cosine" (cosine similarity), and the assymetrical measures "overlap_pct" (percentage of term scores in the document that also occur in the other document).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>similarity</code></td>
<td>
<p>A threshold for similarity. Documents of which similarity is equal or higher are deleted</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keep</code></td>
<td>
<p>A character indicating whether to keep the 'first' or 'last' published of duplicate documents.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tf_idf</code></td>
<td>
<p>If TRUE, weight the dtm with tf_idf before comparing documents. The original (non-weighted) DTM is returned.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dup_csv</code></td>
<td>
<p>Optionally, a path for writing a csv file with the duplicates edgelist. For each duplicate pair it is noted if "from" or "to" is the duplicate, or if "both" are duplicates (of other documents)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>If TRUE, report progress</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Note that this can also be used to delete "updates" of articles (e.g., on news sites, news agencies). 
This should be considered if the temporal order of publications is relevant for the analysis.
</p>


<h3>Value</h3>

<p>A dtm with the duplicate documents deleted
</p>


<h3>Examples</h3>

<pre><code class="language-R">## example with very low similarity threshold (normally not recommended!)
dtm2 = delete_duplicates(rnewsflow_dfm, similarity = 0.5, keep='first', tf_idf = TRUE)
</code></pre>


</div>