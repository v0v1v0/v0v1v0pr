<div class="container">

<table style="width: 100%;"><tr>
<td>RosvQueryBatch</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>R6 Class for OSV Querybatch Endpoint</h2>

<h3>Description</h3>

<p>An R6 class to provide a lower-level interface to the querybatch
endpoint of the OSV API. Batches are enforced to only process by commit hash, purl, or name+ecosystem.
This avoids some confusion as to which is taken preferentially and simplifies query creation.
</p>


<h3>Details</h3>

<p>Pageination is implemented via <code>httr2::req_perform_iterative()</code> and a private method for
extracting tokens automatically. When initialized, the page_token is set to <code>NULL</code>;
if a token is generated for large results the process is handled internally. The response object
will contain a list of all returned responses before any formatting occurred. The content field will
contain the list of results with vulnerabilities which may be further parsed into a table format.
</p>


<h3>Value</h3>

<p>An R6 object to operate with OSV querybatch endpoint.
</p>


<h3>Super class</h3>

<p><code>rosv::RosvQuery1</code> -&gt; <code>RosvQueryBatch</code>
</p>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-RosvQueryBatch-new"><code>RosvQueryBatch$new()</code></a>
</p>
</li>
<li> <p><a href="#method-RosvQueryBatch-run"><code>RosvQueryBatch$run()</code></a>
</p>
</li>
<li> <p><a href="#method-RosvQueryBatch-parse"><code>RosvQueryBatch$parse()</code></a>
</p>
</li>
<li> <p><a href="#method-RosvQueryBatch-clone"><code>RosvQueryBatch$clone()</code></a>
</p>
</li>
</ul>
<details open><summary>Inherited methods</summary><ul>
<li><span class="pkg-link" data-pkg="rosv" data-topic="RosvQuery1" data-id="print"><a href="../../rosv/html/RosvQuery1.html#method-RosvQuery1-print"><code>rosv::RosvQuery1$print()</code></a></span></li>
</ul></details><hr>
<a id="method-RosvQueryBatch-new"></a>



<h4>Method <code>new()</code>
</h4>

<p>Set the core request details for subsequent use when called in <code>run()</code> method.
</p>


<h5>Usage</h5>

<div class="r"><pre>RosvQueryBatch$new(
  commit = NULL,
  version = NULL,
  name = NULL,
  ecosystem = NULL,
  purl = NULL
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>commit</code></dt>
<dd>
<p>Commit hash to query against (do not use when version set).</p>
</dd>
<dt><code>version</code></dt>
<dd>
<p>Version of package.</p>
</dd>
<dt><code>name</code></dt>
<dd>
<p>Name of package.</p>
</dd>
<dt><code>ecosystem</code></dt>
<dd>
<p>Ecosystem package lives within (must be set if using <code>name</code>).</p>
</dd>
<dt><code>purl</code></dt>
<dd>
<p>URL for package (do not use if <code>name</code> or <code>ecosystem</code> is set).</p>
</dd>
</dl>
</div>


<hr>
<a id="method-RosvQueryBatch-run"></a>



<h4>Method <code>run()</code>
</h4>

<p>Perform the request and return response for OSV API call.
</p>


<h5>Usage</h5>

<div class="r"><pre>RosvQueryBatch$run()</pre></div>


<hr>
<a id="method-RosvQueryBatch-parse"></a>



<h4>Method <code>parse()</code>
</h4>

<p>Parse the contents returned into a tidier format.
</p>


<h5>Usage</h5>

<div class="r"><pre>RosvQueryBatch$parse()</pre></div>



<h5>Details</h5>

<p>When no result is found, any empty list is returned by the API, which
during parsing will be dropped as the list is flattened. However, the
index of the list is still accessible and the dropped items can easily
be identified from the results column. Not all contents are parsed.
</p>


<hr>
<a id="method-RosvQueryBatch-clone"></a>



<h4>Method <code>clone()</code>
</h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>RosvQueryBatch$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt>
<dd>
<p>Whether to make a deep clone.</p>
</dd>
</dl>
</div>




<h3>See Also</h3>

<p><a href="https://google.github.io/osv.dev/post-v1-querybatch/">https://google.github.io/osv.dev/post-v1-querybatch/</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">pkgs &lt;- c('jinja2', 'dask')
ecosystem &lt;- rep('PyPI', length(pkgs))
batchquery &lt;- RosvQueryBatch$new(name = pkgs, ecosystem = ecosystem)
batchquery

</code></pre>


</div>