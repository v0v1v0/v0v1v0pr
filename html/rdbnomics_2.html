<div class="container">

<table style="width: 100%;"><tr>
<td>rdb</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Download DBnomics data.</h2>

<h3>Description</h3>

<p><code>rdb</code> downloads data series from
<a href="https://db.nomics.world/">DBnomics</a> using shortcuts like <code>ids</code>,
<code>dimensions</code>, <code>mask</code>, <code>query</code> or using an <code>api_link</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">rdb(
  provider_code = NULL,
  dataset_code = NULL,
  ids = NULL,
  dimensions = NULL,
  mask = NULL,
  query = NULL,
  api_link = NULL,
  filters = getOption("rdbnomics.filters"),
  use_readLines = getOption("rdbnomics.use_readLines"),
  curl_config = getOption("rdbnomics.curl_config"),
  verbose = getOption("rdbnomics.verbose_warning"),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>provider_code</code></td>
<td>
<p>Character string (default <code>NULL</code>). DBnomics code
of the provider.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dataset_code</code></td>
<td>
<p>Character string (default <code>NULL</code>). DBnomics code
of the dataset.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ids</code></td>
<td>
<p>Character string (default <code>NULL</code>). DBnomics code of one or
several series.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dimensions</code></td>
<td>
<p>List or character string (single quoted)  (default <code>NULL</code>).
DBnomics code of one or several dimensions in the specified provider and dataset.
If it is a named list, then the function <code>toJSON</code> (from the
package <span class="pkg">jsonlite</span>) is applied to generate the json object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mask</code></td>
<td>
<p>Character string (default <code>NULL</code>). DBnomics code of one or
several masks in the specified provider and dataset.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>query</code></td>
<td>
<p>Character string (default <code>NULL</code>). A query to
filter/select series from a provider's dataset.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>api_link</code></td>
<td>
<p>Character string. DBnomics API link of the search. It should
starts with <code>http://</code> or <code>https://</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filters</code></td>
<td>
<p>List (default <code>NULL</code>). This argument must be a named
list for one filter because the function <code>toJSON</code> of the package <span class="pkg">jsonlite</span>
is used before sending the request to the server. For multiple filters,
you have to provide a list of valid filters (see examples).<br>
A valid filter is a named list with an element <code>code</code> which is a character string,
and an element <code>parameters</code> which is a named list with elements <code>frequency</code>
and <code>method</code> or a NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use_readLines</code></td>
<td>
<p>Logical (default <code>FALSE</code>). If <code>TRUE</code>, then
the data are requested and read with the base function <code>readLines</code> i.e.
through the default R internet connection. This can be used to get round the
error <code>Could not resolve host: api.db.nomics.world</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>curl_config</code></td>
<td>
<p>Named list (default <code>NULL</code>). If not
<code>NULL</code>, it is used to configure a proxy connection. This
configuration is passed to the function <code>curl_fetch_memory</code> of the package
<span class="pkg">curl</span>. A temporary <code>curl_handle</code> object is created internally
with arguments equal to the provided list in <code>curl_config</code>.<br>
For <code>curl_fetch_memory</code> arguments see <code>curl_fetch</code>.
For available curl options see <code>curl_options</code>,
<code>names(curl_options())</code> and
<a href="https://curl.haxx.se/libcurl/c/curl_easy_setopt.html">libcurl</a>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Logical (default <code>FALSE</code>). Show warnings of the function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments to be passed to the internal function <code>.rdb</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function gives you access to hundreds of millions data series from
<a href="https://api.db.nomics.world/">DBnomics API</a> (documentation about
the API can be found <a href="https://api.db.nomics.world/v22/apidocs">here</a>).
The code of each series is given on the
<a href="https://db.nomics.world/">DBnomics website</a>. <br><br>
In the event that only the argument <code>ids</code> is provided (and those in the
ellipsis <code>...</code>), the argument name can be dropped. The character string
vector is directly passed to <code>ids</code>. <br>
If only the argument <code>api_link</code> is provided (and those in the
ellipsis <code>...</code>), then the argument name can be dropped. The character string
vector is directly passed to <code>api_link</code>. <br>
In the same way, if only <code>provider_code</code>, <code>dataset_code</code> and
<code>mask</code> are provided then the arguments names can be dropped. The
last character string is automatically passed to <code>mask</code>.
</p>


<h3>Value</h3>

<p>A <code>data.table</code>.
</p>


<h3>Author(s)</h3>

<p>Sebastien Galais
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
## By ids
# Fetch one series from dataset 'Unemployment rate' (ZUTN) of AMECO provider:
df1 &lt;- rdb(ids = "AMECO/ZUTN/EA19.1.0.0.0.ZUTN")
# or when no argument names are given (provider_code -&gt; ids)
df1 &lt;- rdb("AMECO/ZUTN/EA19.1.0.0.0.ZUTN")

# Fetch two series from dataset 'Unemployment rate' (ZUTN) of AMECO provider:
df2 &lt;- rdb(ids = c("AMECO/ZUTN/EA19.1.0.0.0.ZUTN", "AMECO/ZUTN/DNK.1.0.0.0.ZUTN"))

# Fetch two series from different datasets of different providers:
df3 &lt;- rdb(ids = c("AMECO/ZUTN/EA19.1.0.0.0.ZUTN", "IMF/BOP/A.FR.BCA_BP6_EUR"))


## By dimensions
# Fetch one value of one dimension from dataset 'Unemployment rate' (ZUTN) of AMECO provider:
df1 &lt;- rdb("AMECO", "ZUTN", dimensions = list(geo = "ea12"))
# or
df1 &lt;- rdb("AMECO", "ZUTN", dimensions = '{"geo":["ea12"]}')

# Fetch two values of one dimension from dataset 'Unemployment rate' (ZUTN) of AMECO provider:
df2 &lt;- rdb("AMECO", "ZUTN", dimensions = list(geo = c("ea12", "dnk")))
# or
df2 &lt;- rdb("AMECO", "ZUTN", dimensions = '{"geo":["ea12","dnk"]}')

# Fetch several values of several dimensions from dataset 'Doing business' (DB) of World Bank:
dim &lt;- list(
  country = c("DZ", "PE"),
  indicator = c("ENF.CONT.COEN.COST.ZS", "IC.REG.COST.PC.FE.ZS")
)
df3 &lt;- rdb("WB", "DB", dimensions = dim)
# or
dim &lt;- paste0(
  '{"country":["DZ","PE"],',
  '"indicator":["ENF.CONT.COEN.COST.ZS","IC.REG.COST.PC.FE.ZS"]}'
)
df3 &lt;- rdb("WB", "DB", dimensions = dim)


## By mask
# Fetch one series from dataset 'Balance of Payments' (BOP) of IMF:
df1 &lt;- rdb("IMF", "BOP", mask = "A.FR.BCA_BP6_EUR")
# or when no argument names are given except provider_code and dataset_code (ids -&gt; mask)
df1 &lt;- rdb("IMF", "BOP", "A.FR.BCA_BP6_EUR")

# Fetch two series from dataset 'Balance of Payments' (BOP) of IMF:
df2 &lt;- rdb("IMF", "BOP", mask = "A.FR+ES.BCA_BP6_EUR")

# Fetch all series along one dimension from dataset 'Balance of Payments' (BOP) of IMF:
df3 &lt;- rdb("IMF", "BOP", mask = "A..BCA_BP6_EUR")

# Fetch series along multiple dimensions from dataset 'Balance of Payments' (BOP) of IMF:
df4 &lt;- rdb("IMF", "BOP", mask = "A.FR.BCA_BP6_EUR+IA_BP6_EUR")


## By query
# Fetch one series from dataset 'WEO by countries (2019-10 release)' (WEO:2019-10) from IMF :
df1 &lt;- rdb("IMF", "WEO:2019-10", query = "France current account balance percent")
# Fetch series from dataset 'WEO by countries (2019-10 release)' (WEO:2019-10) from IMF :
df2 &lt;- rdb("IMF", "WEO:2019-10", query = "current account balance percent")


## By api_link
# Fetch two series from different datasets of different providers :
df1 &lt;- rdb(
  api_link = paste0(
    "https://api.db.nomics.world/v22/",
    "series?observations=1&amp;series_ids=AMECO/ZUTN/EA19.1.0.0.0.ZUTN,IMF/CPI/A.AT.PCPIT_IX"
  )
)

# Fetch one series from the dataset 'Doing Business' of WB provider :
df2 &lt;- rdb(
  api_link = paste0(
    "https://api.db.nomics.world/v22/series/WB/DB?dimensions=%7B%22",
    "indicator%22%3A%5B%22IC.REG.PROC.FE.NO%22%5D%7D&amp;q=Doing%20Business",
    "&amp;observations=1&amp;format=json&amp;align_periods=1&amp;offset=0&amp;facets=0"
  )
)
# or when no argument names are given (provider_code -&gt; api_link)
df1 &lt;- rdb(
  paste0(
    "https://api.db.nomics.world/v22/",
    "series?observations=1&amp;series_ids=AMECO/ZUTN/EA19.1.0.0.0.ZUTN,IMF/CPI/A.AT.PCPIT_IX"
  )
)


## Use a specific proxy to fetch the data
# Fetch one series from dataset 'Unemployment rate' (ZUTN) of AMECO provider :
h &lt;- list(
  proxy = "&lt;proxy&gt;",
  proxyport = &lt;port&gt;,
  proxyusername = "&lt;username&gt;",
  proxypassword = "&lt;password&gt;"
)
options(rdbnomics.curl_config = h)
df1 &lt;- rdb(ids = "AMECO/ZUTN/EA19.1.0.0.0.ZUTN")
# or to use once
options(rdbnomics.curl_config = NULL)
df1 &lt;- rdb(ids = "AMECO/ZUTN/EA19.1.0.0.0.ZUTN", curl_config = h)


## Use R default connection to avoid a proxy failure (in some cases)
# Fetch one series from dataset 'Unemployment rate' (ZUTN) of AMECO provider :
options(rdbnomics.use_readLines = TRUE)
df1 &lt;- rdb(ids = "AMECO/ZUTN/EA19.1.0.0.0.ZUTN")
# or to use once
df1 &lt;- rdb(ids = "AMECO/ZUTN/EA19.1.0.0.0.ZUTN", use_readLines = TRUE)


## Apply filter(s) to the series
# One filter
df1 &lt;- rdb(
  ids = c("IMF/WEO:2019-10/ABW.BCA.us_dollars", "IMF/WEO:2019-10/ABW.BCA_NGDPD.pcent_gdp"),
  filters = list(
    code = "interpolate",
    parameters = list(frequency = "daily", method = "spline")
  )
)

# Two filters
df1 &lt;- rdb(
  ids = c("IMF/WEO:2019-10/ABW.BCA.us_dollars", "IMF/WEO:2019-10/ABW.BCA_NGDPD.pcent_gdp"),
  filters = list(
    list(
      code = "interpolate",
      parameters = list(frequency = "quarterly", method = "spline")
    ),
    list(
      code = "aggregate",
      parameters = list(frequency = "annual", method = "average")
    )
  )
)

## End(Not run)
</code></pre>


</div>