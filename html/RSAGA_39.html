<div class="container">

<table style="width: 100%;"><tr>
<td>rsaga.env</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Function to set up RSAGA geoprocessing environment:
Set up the RSAGA Geoprocessing Environment</h2>

<h3>Description</h3>

<p><code>rsaga.env</code> creates a list with system-dependent information on SAGA path, module path and data (working) directory. This kind of a list is required by most RSAGA geoprocessing functions and is referred to as the 'RSAGA geoprocessing environment.'
</p>


<h3>Usage</h3>

<pre><code class="language-R">rsaga.env(
  path = NULL,
  modules = NULL,
  workspace = ".",
  cmd = ifelse(Sys.info()["sysname"] == "Windows", "saga_cmd.exe", "saga_cmd"),
  version = NULL,
  cores,
  parallel = FALSE,
  root = NULL,
  lib.prefix
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>path</code></td>
<td>
<p>path in which to find <code>cmd</code>; <code>rsaga.env</code> is usually able to find SAGA on your system if it is installed; see Details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>modules</code></td>
<td>
<p>path in which to find SAGA libraries; see Details</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>workspace</code></td>
<td>
<p>path of the working directory for SAGA; defaults to the current directory (<code>"."</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cmd</code></td>
<td>
<p>name of the SAGA command line program; defaults to <code>saga_cmd.exe</code>, its name under Windows</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>version</code></td>
<td>
<p>optional character string: SAGA GIS (API) version, e.g. <code>"2.0.8"</code>; if missing, a call to <code>rsaga.get.version()</code> is used to determine version number of SAGA API</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cores</code></td>
<td>
<p>optional numeric argument, or <code>NA</code>: number of cores used by SAGA GIS; supported only by SAGA GIS 2.1.0 (and higher), ignored otherwise (with a warning). Multicore-enabled SAGA GIS modules such as the one used by <code>rsaga.pisr()</code> seem to run in multicore mode by default when this argument is not specified, therefore <code>cores</code> should only be specified to use a smaller number of cores than available on a machine.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parallel</code></td>
<td>
<p>optional logical argument (default: <code>FALSE</code>): if <code>TRUE</code>, run RSAGA functions that are capable of parallel processing in parallel mode; note that this is completely independent of the behaviour of SAGA GIS (which can be controlled using the <code>cores</code> argument); currently only some RSAGA functions support parallel processing (e.g., <code>pick.from.ascii.grid()</code> or <code>rsaga.get.modules()</code>). <code>parallel=TRUE</code> requires that a parallel backend such as <span class="pkg">doSNOW</span> or <span class="pkg">doMC</span> is available and has been started prior to calling any parallelized RSAGA function, otherwise warnings may be generated</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>root</code></td>
<td>
<p>optional root path to SAGA GIS installation. It is used if RSAGA performce a search for the SAGA command line program (s. <code>search</code>).  If left empty, on Windoes <code style="white-space: pre;">⁠C:/⁠</code> is used, on Linux <code style="white-space: pre;">⁠/usr⁠</code> and on Mac OS  <code style="white-space: pre;">⁠/usr/local/Cellar⁠</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lib.prefix</code></td>
<td>
<p>character string: a possible (platform-dependent) prefix for SAGA GIS library names; if missing (recommended), a call to <code>rsaga.lib.prefix()</code> tries to determine the correct prefix, e.g. <code>""</code> on Windows systems and <code>"lib"</code> on non-Windows systems with SAGA GIS pre-2.1.0. Try specifying <code>""</code> or <code>"lib"</code> manually if this causes problems, and contact the package maintainer if the detection mechanism fails on your system (indicate your <code>Sys.info()["sysname"]</code> and your SAGA GIS version)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>IMPORTANT: Unlike R functions such as <code>options()</code>,  which changes and saves settings somewhere in a global variable, <code>rsaga.env()</code> does not actually 'save' any settings, it simply creates a list that can (and has to) be passed to other <code style="white-space: pre;">⁠rsaga.*⁠</code> functions. See example below.
</p>
<p>We strongly recommend to install SAGA GIS on Windows in <code style="white-space: pre;">⁠C:/Program Files/SAGA-GIS⁠</code>, <code style="white-space: pre;">⁠C:/Program Files (x86)/SAGA-GIS⁠</code>,<code style="white-space: pre;">⁠C:/SAGA-GIS⁠</code>, <code style="white-space: pre;">⁠C:/OSGeo4W64/apps/saga-lts⁠</code> or <code style="white-space: pre;">⁠C:/OSGeo4W64/apps/saga⁠</code>.
If you use a standalone version of SAGA GIS in a different path, please refer to section 2 bellow.
</p>
<p>There are three ways to create a RSAGA environment with <code>rsaga.env</code>:
</p>

<ol>
<li>
<p> No paths to the SAGA command line program and to the SAGA modules are specified by the user through the arguments <code>path</code> and <code>modules</code>.
On Windows <code>rsaga.env</code> tries to find the SAGA command line program in the following folders
<code style="white-space: pre;">⁠C:/Progra~1/SAGA⁠</code>, <code style="white-space: pre;">⁠C:/Progra~2/SAGA⁠</code>, <code style="white-space: pre;">⁠C:/Progra~1/SAGA-GIS⁠</code>, <code style="white-space: pre;">⁠C:/Progra~2/SAGA-GIS⁠</code>, <code style="white-space: pre;">⁠C:/SAGA-GIS⁠</code>, <code style="white-space: pre;">⁠C:/OSGeo4W64/apps/saga-lts⁠</code> and <code style="white-space: pre;">⁠C:/OSGeo4W64/apps/saga⁠</code>.
If this fails and attempt is being made to find the SAGA command line program with a search on <code style="white-space: pre;">⁠C:/⁠</code>
(The drive letter can be changed with the <code>root</code> argument).
The subfolder <code>tools</code> (SAGA Version &lt; 3.0.0 subfolder <code>modules</code>) is checked for the SAGA module libraries.
On Unix systems <code>rsaga.env</code> tries to find the SAGA command line program in various default paths.
Additionally, on Unix systems the PATH environment variable is checked for the path to the SAGA command line program
and the SAGA_MLB environment variable is checked for the SAGA module libraries.
If this fails, a search for the SAGA command line program and the module libraries is performed on <code style="white-space: pre;">⁠/usr⁠</code>.
If no SAGA command line program can be found, please specify the paths as described in section 2.
</p>
</li>
<li>
<p> The user specifies both the path to the SAGA command line program and
to the SAGA module libraries. Both paths are checked if they are valid. Use this if SAGA GIS is located in a non-standard path
or if you use more than one SAGA GIS version.
</p>
</li>
<li>
<p> The user specifies only the path to the SAGA command line program. A search for the SAGA modules is performed as described in section 1.
</p>
</li>
</ol>
<h3>Value</h3>

<p>A list with components <code>workspace</code>, <code>cmd</code>, <code>path</code>, <code>modules</code>, <code>version</code>, <code>cores</code> and <code>parallel</code> with values as passed to <code>rsaga.env</code> or default values as described in the Details section.
</p>


<h3>Note</h3>

<p>Note that the default <code>workspace</code> is <code>"."</code>, not <code>getwd()</code>; i.e. the default SAGA workspace folder is not fixed, it changes each time you change the R working directory using <code>setwd</code>.
</p>


<h3>Author(s)</h3>

<p>Alexander Brenning and Marc Becker
</p>


<h3>See Also</h3>

<p><code>rsaga.get.version()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# Check the default RSAGA environment on your computer:
myenv &lt;- rsaga.env()
myenv
# SAGA data in C:/sagadata, binaries in C:/SAGA-GIS, modules in C:/SAGA-GIS/modules:
myenv &lt;- rsaga.env(workspace="C:/sagadata", path="C:/SAGA-GIS")
# Unix: SAGA in /usr/bin (instead of the default /usr/local/bin),
# and modules in /use/lib/saga:
# myenv &lt;- rsaga.env(path="/usr/bin")
# Use the 'myenv' environment for SAGA geoprocessing:
rsaga.hillshade("dem","hillshade",env=myenv)
# ...creates (or overwrites) grid "C:/sagadata/hillshade.sgrd"
# derived from digital elevation model "C:/sagadata/dem.sgrd"

# Same calculation with different SAGA version:
# (I keep several versions in SAGA-GIS_x.x.x folders:)
myenv05 = rsaga.env(path = "C:/Progra~1/SAGA-GIS_2.0.5")
rsaga.hillshade("dem","hillshade205",env=myenv05)

## End(Not run)
</code></pre>


</div>