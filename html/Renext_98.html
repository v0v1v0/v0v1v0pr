<div class="container">

<table style="width: 100%;"><tr>
<td>rRendata</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Simulate a random RenData object
</h2>

<h3>Description</h3>

<p>Simulate a random <code>RenData</code> object that can be used within the
<code>Renouv</code> function for tests.
</p>


<h3>Usage</h3>

<pre><code class="language-R">rRendata(lambda = 1,
         threshold = 0,
         effDuration = 100,
         distname.y = "exp",
         par.y = c(rate = 1),
         start = "1913-01-01",
         name = NULL,
         varName = "X", varUnit = "?",
         simDate = TRUE, roundDate = FALSE,
         MAX.effDuration = NULL,
         MAX.r = rep(1L, length(MAX.effDuration)),
         OTS.effDuration = NULL,
         OTS.threshold = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>lambda</code></td>
<td>

<p>The rate of the Homogeneous Poisson Process.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>threshold</code></td>
<td>

<p>The threshold for the exceedances.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>effDuration</code></td>
<td>

<p>The effective duration of the main Over Threshold (OT) period.
This must be a positive value.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>distname.y</code></td>
<td>

<p>Name of the distribution for the excesses to be simulated.  See
<b>Details</b>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>par.y</code></td>
<td>

<p>A named vector or list giving the parameters values for the
distribution. The name must conform to the chosen distribution.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start</code></td>
<td>

<p>A <code>POSIXct</code> object, or character that can be coerced to
<code>POSIXct</code> (e.g. a date given as a character in the
<code>"YYYY-MM-DD"</code> format) giving the start of the main OT sample.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>

<p>A name for the dataset which will be attached to it and be used by
some methods for <code>"Rendata"</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>varName</code></td>
<td>

<p>Name of the simulated variable.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>varUnit</code></td>
<td>

<p>Unit for the simulated variable (is used by plot). 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>simDate</code></td>
<td>

<p>Logical. If <code>TRUE</code> the dates will be reported for the
historical data (MAX and OTS).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>roundDate</code></td>
<td>

<p>Logical. If <code>TRUE</code> the time part ot the <code>date</code> column will
be rounded. Not implemented yet.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MAX.effDuration</code></td>
<td>

<p>Vector of the durations for the <code>MAX</code> historical blocks.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>MAX.r</code></td>
<td>

<p>Vector of the (positive) numbers of observations for <code>MAX</code>
historical blocks. Must have the same length as
<code>MAX.effDuration</code>. See <b>Caution</b> below for the effect of
selection large values.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>OTS.effDuration</code></td>
<td>

<p>Vector of durations for the <code>OTS</code> historical blocks.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>OTS.threshold</code></td>
<td>

<p>Vector of numerical thresholds for the observations in <code>OTS</code>
historical blocks. Must have the same length as
<code>OTS.effDuration</code>. All values must be <code>&gt;= threshold</code>.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The distribution of the excesses named in <code>distname.y</code> can be
any known distribution, provided that when prefixed with the usual
<code>"r"</code> letter, the name gives the wanted simulation function. For
example, with <code>distname.y = "exp"</code>, the <code>rexp</code> function is
used and <code>par.y</code> must thus contain an element with name
<code>"rate"</code>.
</p>
<p>When a suitable numeric threshold is given, the simulated marks of the
marked process are the sum of the threshold and of a random excess
drawn from <code>distname.y</code>.  When the threshold is not a finite
numeric value, the observed marks are the simulated values themselves.
</p>
<p>The main OT sample is assumed to begin at <code>start</code>. Historical MAX
blocks (if any) are assumed to be just before <code>start</code>, and OTS
are just before <code>start</code> or just before the beginning of the MAX
blocks when there are some.  The dates are computed without taking
into consideration the problems of leap years or leap seconds.
</p>


<h3>Value</h3>

<p>An object with S3 class <code>"Rendata"</code>. This class currently has
<code>plot</code> and <code>summary</code> methods.
</p>


<h3>Caution</h3>

<p>By construction, each <code>MAX</code> block contains at least one
observation, while a random period of the same duration might have
none. The simulated number of events on a MAX block is generated using
a censored Poisson distribution.  Care must be taken when estimations
are made on such data, since creating <code>MAX</code> blocks obviously
create a positive bias on <code>lambda</code>. Such bias then also affects
the other parameters concerning the excesses, because these
parameters are no longer orthogonal to the rate parameter
<code>lambda</code> when historical data are used. The bias can be severe if
<code>MAX</code> blocks with small durations are used, or if large number of
events are chosen in <code>MAX.r</code>.
</p>


<h3>Note</h3>

<p>When <code>effDuration</code> is small relative to the inverse of
<code>lambda</code> the number of simulated marks in the OT sample may be
<code class="reqn">0</code> which can cause problems for some uses of the created data.
</p>


<h3>Author(s)</h3>

<p>Yves Deville
</p>


<h3>See Also</h3>

<p><code>plot.Rendata</code>, <code>summary.Rendata</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">set.seed(1234)
rd &lt;- rRendata(effDuration = 60,
               MAX.effDuration = rep(3, 6),
               MAX.r = rep(4, 6),
               distname.y = "exp", par.y = c(rate = 1/100))
plot(rd)
summary(rd)
rd2 &lt;- rRendata(effDuration = 10,
                MAX.effDuration = rep(60, 2),
                MAX.r = rep(3, 2),
                simDate = FALSE,
                distname.y = "gpd", par.y = c(scale = 20, shape = 0.16))
plot(rd2)
rd3 &lt;- rRendata(effDuration = 10,
                OTS.effDuration = rep(60, 2),
                OTS.threshold = rep(80, 2),
                simDate = FALSE,
                distname.y = "gpd", par.y = c(scale = 20, shape = 0.16))
plot(rd3)
## Renouv fit with historical data
fit &lt;- Renouv(rd)
summary(fit)
</code></pre>


</div>