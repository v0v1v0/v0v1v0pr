<div class="container">

<table style="width: 100%;"><tr>
<td>Interaction</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Interaction with trellis objects.
</h2>

<h3>Description</h3>

<p><code>chooseRegion</code> provides a set of points (in the form of a
<code>SpatialPoints</code>) inside a region defined by several mouse clicks.
<code>identifyRaster</code> labels and returns points of a <code>trellis</code>
graphic according to mouse clicks.
</p>


<h3>Usage</h3>

<pre><code class="language-R">chooseRegion(sp = TRUE, proj = as.character(NA))
## S4 method for signature 'Raster'
identifyRaster(object, layer=1, values=FALSE, pch=13, cex=0.6, col='black',...)

</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>sp</code></td>
<td>
<p>logical, if TRUE the result is a <code>SpatialPoints</code>
object, otherwise it is a logical vector as returned by <code>in.out</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>proj</code></td>
<td>
<p>A character string for the <code>proj4string</code> of
<code>SpatialPoints</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>A Raster object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>layer</code></td>
<td>
<p>A numeric or character which should indicate the layer
to be chosen.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>values</code></td>
<td>
<p>logical, if TRUE the values are returned.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pch, cex, col</code></td>
<td>
<p>Graphical parameters for <code>panel.identify</code>
and <code>panel.link.splom</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments for
<code>trellis.focus</code>,<code>panel.link.splom</code> and
<code>panel.identify</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>When called, these functions wait for the user to identify points (in the panel being drawn) via
mouse clicks.  Clicks other than left-clicks close the region
(for <code>chooseRegion</code>) and the procedure (for
<code>identifyRaster</code>).
</p>


<h3>Note</h3>

<p><code>chooseRegion</code> needs the package <code>mgcv</code> to be installed.
</p>


<h3>Author(s)</h3>

<p>Oscar Perpiñán Lamigueiro
</p>


<h3>See Also</h3>

<p><code>panel.identify</code>,<code>panel.link.splom</code>, <code>trellis.focus</code>, <code>grid.locator</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(raster)

f &lt;- system.file("external/test.grd", package="raster")
r &lt;- raster(f)
levelplot(r)
##Do not close the last graphical window
##Use the left button of the mouse to identify points and the right button to finish
chosen_r &lt;- identifyRaster(r, values=TRUE)
chosen_r
s &lt;- stack(r, r-500, r+500)
levelplot(s)
chosen_s &lt;- identifyRaster(s, values=TRUE)
chosen_s

## Not run: 
##The package mgcv is needed for the next example
##Use the left button of the mouse to build a border with points, and the right button to finish.
##The points enclosed by the border will be highlighted and returned as a SpatialPoints object.
levelplot(s)
reg &lt;- chooseRegion()
summary(reg)

## End(Not run)

## Not run: 
##Solar irradiation data from CMSAF http://dx.doi.org/10.5676/EUM_SAF_CM/RAD_MVIRI/V001

dataURL &lt;- "https://raw.github.com/oscarperpinan/bookvis/master/data/"

old &lt;- setwd(tempdir())
download.file(paste0(dataURL, "SISmm2008_CMSAF.zip"),
   "SISmm2008_CMSAF.zip", method='wget')
unzip("SISmm2008_CMSAF.zip")

listFich &lt;- dir(pattern='\\.nc')
stackSIS &lt;- stack(listFich)
stackSIS &lt;- stackSIS*24 ##from irradiance (W/m2) to irradiation Wh/m2
setwd(old)

idx &lt;- seq(as.Date('2008-01-15'), as.Date('2008-12-15'), 'month')

SISmm &lt;- setZ(stackSIS, idx)
names(SISmm) &lt;- month.abb

levelplot(SISmm)

##Do not close the last graphical window
##Interaction
##Use the left button of the mouse to identify points and the right button to finish
chosen &lt;- identifyRaster(SISmm, layer=3, values=TRUE)
chosen
##Use the left button of the mouse to build a border with points, and the right button to finish.
##The points enclosed by the border will be highlighted and returned as a SpatialPoints object.
reg &lt;- chooseRegion()
summary(reg)

## End(Not run)
</code></pre>


</div>