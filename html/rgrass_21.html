<div class="container">

<table style="width: 100%;"><tr>
<td>readVECT</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Read and write GRASS vector object files</h2>

<h3>Description</h3>

<p><code>read_VECT</code> moves one GRASS vector object file with attribute data through a temporary GeoPackage file to a <span class="pkg">terra</span> <code>"SpatVector"</code> object; <code>write_VECT</code> moves a <span class="pkg">terra</span> <code>"SpatVector"</code> object through a temporary GeoPackage file to a GRASS vector object file. <code>vect2neigh</code> returns neighbour pairs with shared boundary length as described by Markus Neteler, in <a href="https://stat.ethz.ch/pipermail/r-sig-geo/2005-October/000616.html">https://stat.ethz.ch/pipermail/r-sig-geo/2005-October/000616.html</a>. <code>cygwin_clean_temp</code> can be called to try to clean the GRASS mapset-specific temporary directory under cygwin.
</p>


<h3>Usage</h3>

<pre><code class="language-R">read_VECT(vname, layer = "", proxy = FALSE, use_gdal_grass_driver = TRUE, type = NULL,
    flags = "overwrite", Sys_ignore.stdout = FALSE,
    ignore.stderr = get.ignore.stderrOption())
write_VECT(x, vname, flags = "overwrite", ignore.stderr = get.ignore.stderrOption())
vInfo(vname, layer, ignore.stderr = NULL)
vColumns(vname, layer, ignore.stderr = NULL)
vDataCount(vname, layer, ignore.stderr = NULL)
vect2neigh(vname, ID=NULL, ignore.stderr = NULL, remove=TRUE, vname2=NULL,
 units="k")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>vname</code></td>
<td>
<p>A GRASS vector file name</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>layer</code></td>
<td>
<p>a layer name (string); if missing the first layer will be used</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>proxy</code></td>
<td>
<p>Default is <code>FALSE</code>. Set as <code>TRUE</code> if you need a <code>SpatVectorProxy</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use_gdal_grass_driver</code></td>
<td>
<p>Default <code>TRUE</code>. The <a href="https://github.com/OSGeo/gdal-grass">standalone GDAL-GRASS driver</a> for the vector format will be used if it is installed. The advantage is that no intermediate file needs to be written from GRASS GIS and subsequently read into R; instead the vector layer is read directly from the GRASS GIS database. Please read the <strong>Note</strong> further below!</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>override type detection when multiple types are non-zero, passed to v.out.ogr</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Sys_ignore.stdout</code></td>
<td>
<p>Passed to <code>system</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ignore.stderr</code></td>
<td>
<p>default the value set by <code>set.ignore.stderrOption</code>; NULL, taking the value set by <code>set.ignore.stderrOption</code>, can be set to TRUE to silence <code>system()</code> output to standard error; does not apply on Windows platforms</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A <code>"SpatVector"</code> object moved to GRASS</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>flags</code></td>
<td>
<p>Character vector containing additional optional flags and/or options for v.in.ogr, particularly "o" and "overwrite"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ID</code></td>
<td>
<p>A valid DB column name for unique identifiers (optional)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>remove</code></td>
<td>
<p>default TRUE, remove copied vectors created in <code>vect2neigh</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vname2</code></td>
<td>
<p>If on a previous run, remove was FALSE, the name of the temporary vector may be given to circumvent its generation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>units</code></td>
<td>
<p>default "k"; see GRASS 'v.to.db' manual page for alternatives</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>read_VECT</code> imports a GRASS vector layer into a <code>SpatVector</code> or <code>SpatVectorProxy</code> object.
</p>
<p><code>vect2neigh</code> returns a data frame object with left and right neighbours and boundary lengths, also given class GRASSneigh and spatial.neighbour (as used in spdep). The incantation to retrieve the neighbours list is <code>sn2listw(vect2neigh())$neighbours</code>, and to retrieve the boundary lengths: <code>sn2listw(vect2neigh())$weights</code>. The GRASSneigh object has two other useful attributes: external is a vector giving the length of shared boundary between each polygon and the external area, and total giving each polygon's total boundary length.
</p>


<h3>Note</h3>

<p>Be aware that the GDAL-GRASS driver may have some <a href="https://github.com/OSGeo/gdal-grass/issues">issues</a> for vector data. In our experience, the error and warning messages for vector data can be ignored. Further, the returned metadata about the coordinate reference system may currently be incomplete, e.g. it may miss the EPSG code.
</p>


<h3>Author(s)</h3>

<p>Roger S. Bivand, e-mail: <a href="mailto:Roger.Bivand@nhh.no">Roger.Bivand@nhh.no</a></p>


<h3>Examples</h3>

<pre><code class="language-R">run &lt;- FALSE
if (nchar(Sys.getenv("GISRC")) &gt; 0 &amp;&amp;
    read.dcf(Sys.getenv("GISRC"))[1,"LOCATION_NAME"] == "nc_basic_spm_grass7") run &lt;- TRUE
GV &lt;- Sys.getenv("GRASS_VERBOSE")
Sys.setenv("GRASS_VERBOSE"=0)
ois &lt;- get.ignore.stderrOption()
set.ignore.stderrOption(TRUE)
if (run) {
  meta &lt;- gmeta()
  location_path &lt;- file.path(meta$GISDBASE, meta$LOCATION_NAME)
  previous_mapset &lt;- meta$MAPSET
  example_mapset &lt;- "RGRASS_EXAMPLES"
  execGRASS("g.mapset", "c", mapset = example_mapset)
}

if (run) {
  execGRASS("v.info", map="schools", layer="1")
}
if (run) {
  print(vInfo("schools"))
  schs &lt;- read_VECT("schools")
  print(summary(schs))
}
if (run) {
  try({
    write_VECT(schs, "newsch", flags=c("o", "overwrite"))
  })
  schs &lt;- read_VECT("schools", use_gdal_grass_driver = FALSE)
}
if (run) {
  write_VECT(schs, "newsch", flags=c("o", "overwrite"))
  execGRASS("v.info", map="newsch", layer="1")
}
if (run) {
  nschs &lt;- read_VECT("newsch")
  print(summary(nschs))
}
if (run) {
  print(all.equal(names(nschs), as.character(vColumns("newsch")[,2])))
}
if (run) {
  print(vInfo("roadsmajor"))
}
if (run) {
  roads &lt;- read_VECT("roadsmajor")
  print(summary(roads))
}
if (FALSE) {
  # not run: vect2neigh() currently writes 3 new data sources in the PERMANENT
  # mapset, despite this mapset not being the active one.
  cen_neig &lt;- vect2neigh("census")
  str(cen_neig)
}
if (run) {
  execGRASS("g.remove", flags="f", name=c("newsch", "newsch1"), type="vector")
  execGRASS("g.mapset", mapset = previous_mapset)
  if (example_mapset != previous_mapset) {
    unlink(file.path(location_path, example_mapset), recursive = TRUE)
  }
}
Sys.setenv("GRASS_VERBOSE"=GV)
set.ignore.stderrOption(ois)
</code></pre>


</div>