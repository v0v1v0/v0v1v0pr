<div class="container">

<table style="width: 100%;"><tr>
<td>rsaga.topdown.processing</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Top-Down Processing</h2>

<h3>Description</h3>

<p>Calculate the size of the local catchment area (contributing area), accumulated material, and flow path length, using top-down processing algorithms from the highest to the lowest cell. <br> Top-Down Processing is new with SAGA GIS 2.1.3. See <code>rsaga.parallel.processing()</code> with older versions.
</p>


<h3>Usage</h3>

<pre><code class="language-R">rsaga.topdown.processing(
  in.dem,
  in.sinkroute,
  in.weight,
  in.mean,
  in.material,
  in.target,
  in.lin.val,
  in.lin.dir,
  out.carea,
  out.mean,
  out.tot.mat,
  out.acc.left,
  out.acc.right,
  out.flowpath,
  step,
  method = "mfd",
  linear.threshold = Inf,
  convergence = 1.1,
  env = rsaga.env(),
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>in.dem</code></td>
<td>
<p>input: digital elevation model (DEM) as SAGA grid file (default file extension: <code>.sgrd</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>in.sinkroute</code></td>
<td>
<p>optional input: SAGA grid with sink routes</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>in.weight</code></td>
<td>
<p>optional input: SAGA grid with weights</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>in.mean</code></td>
<td>
<p>optional input: SAGA grid for mean over catchment calculation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>in.material</code></td>
<td>
<p>optional input: SAGA grid with material</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>in.target</code></td>
<td>
<p>optional input: SAGA grid of accumulation target</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>in.lin.val</code></td>
<td>
<p>optional input: SAGA grid providing values to be compared with linear flow threshold instead of catchment area</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>in.lin.dir</code></td>
<td>
<p>optional input: SAGA grid to be used for linear flow routing, if the value is a valid direction (0-7 = N, NE, E, SE, S, SW, W, NW)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>out.carea</code></td>
<td>
<p>output: catchment area grid</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>out.mean</code></td>
<td>
<p>optional output: mean over catchment grid</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>out.tot.mat</code></td>
<td>
<p>optional output: total accumulated material grid</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>out.acc.left</code></td>
<td>
<p>optional output: accumulated material from left side grid</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>out.acc.right</code></td>
<td>
<p>optional output: accumulated material from right side grid</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>out.flowpath</code></td>
<td>
<p>optional output: flow path length grid</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>step</code></td>
<td>
<p>integer &gt;=1: step parameter</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>character or numeric: choice of processing algorithm (default <code>"mfd"</code>, or 4):
</p>

<ul>
<li>
<p> 0 Deterministic 8 (<code>"d8"</code> or 0)
</p>
</li>
<li>
<p> 1 Rho 8 (<code>"rho8"</code>, or 1)
</p>
</li>
<li>
<p> 2 Braunschweiger Reliefmodell (<code>"braunschweig"</code> or 2)
</p>
</li>
<li>
<p> 3 Deterministic Infinity (<code>"dinf"</code> or 3)
</p>
</li>
<li>
<p> 4 Multiple Flow Direction (<code>"mfd"</code> or 4)
</p>
</li>
<li>
<p> 5 Multiple Triangular Flow Direction (<code>"mtfd"</code>, or 5)
</p>
</li>
<li>
<p> 6 Multiple Maximum Gradient Based Flow Direction (<code>"mdg"</code>, or 6)
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>linear.threshold</code></td>
<td>
<p>numeric (number of grid cells): threshold above which linear flow (i.e. the Deterministic 8 algorithm) will be used; linear flow is disabled for <code>linear.threshold=Inf</code> (the default)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>convergence</code></td>
<td>
<p>numeric &gt;=0: a parameter for tuning convergent/ divergent flow; default value of <code>1.1</code> gives realistic results and should not be changed</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>env</code></td>
<td>
<p>list, setting up a SAGA geoprocessing environment as created by <code>rsaga.env()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>further arguments to <code>rsaga.geoprocessor()</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Refer to the references for details on the available algorithms.
</p>


<h3>Value</h3>

<p>The type of object returned depends on the <code>intern</code> argument passed to the <code>rsaga.geoprocessor()</code>. For <code>intern=FALSE</code> it is a numerical error code (0: success), or otherwise (the default) a character vector with the module's console output.
</p>


<h3>Author(s)</h3>

<p>Alexander Brenning and Donovan Bangs (R interface), Olaf Conrad (SAGA module), Thomas Grabs (MTFD algorithm)
</p>


<h3>References</h3>

<p>Deterministic 8:
</p>
<p>O'Callaghan, J.F., Mark, D.M. (1984): The extraction of drainage networks from digital elevation data. Computer Vision, Graphics and Image Processing, 28: 323-344.
</p>
<p>Rho 8:
</p>
<p>Fairfield, J., Leymarie, P. (1991): Drainage networks from grid digital elevation models. Water Resources Research, 27: 709-717.
</p>
<p>Braunschweiger Reliefmodell:
</p>
<p>Bauer, J., Rohdenburg, H., Bork, H.-R. (1985): Ein Digitales Reliefmodell als Vorraussetzung fuer ein deterministisches Modell der Wasser- und Stoff-Fluesse. Landschaftsgenese und Landschaftsoekologie, H. 10, Parameteraufbereitung fuer deterministische Gebiets-Wassermodelle, Grundlagenarbeiten zu Analyse von Agrar-Oekosystemen, eds.: Bork, H.-R., Rohdenburg, H., p. 1-15.
</p>
<p>Deterministic Infinity:
</p>
<p>Tarboton, D.G. (1997): A new method for the determination of flow directions and upslope areas in grid digital elevation models. Water Ressources Research, 33(2): 309-319.
</p>
<p>Multiple Flow Direction:
</p>
<p>Freeman, G.T. (1991): Calculating catchment area with divergent flow based on a regular grid. Computers and Geosciences, 17: 413-22.
</p>
<p>Quinn, P.F., Beven, K.J., Chevallier, P., Planchon, O. (1991): The prediction of hillslope flow paths for distributed hydrological modelling using digital terrain models. Hydrological Processes, 5: 59-79.
</p>
<p>Multiple Triangular Flow Direction:
</p>
<p>Seibert, J., McGlynn, B. (2007): A new triangular multiple flow direction algorithm for computing upslope areas from gridded digital elevation models. Water Ressources Research, 43, W04501.
</p>
<p>Multiple Flow Direction Based on Maximum Downslope Gradient:
</p>
<p>Qin, C.Z., Zhu, A-X., Pei, T., Li, B.L., Scholten, T., Zhou, C.H. (2011): An approach to computing topographic wetness index based on maximum downslope gradient. Precision Agriculture, 12(1): 32-43.
</p>


<h3>See Also</h3>

<p><code>rsaga.parallel.processing()</code>, <code>rsaga.wetness.index()</code>, <code>rsaga.geoprocessor()</code>, <code>rsaga.env()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# Calculation of contributing area with default settings:
rsaga.topdown.processing(in.dem = "dem", out.carea = "carea")
# Calculation of contributing area by maximunm downslope gradient:
rsaga.topdown.processing(in.dem = "dem", out.carea = "carea",
                         method = "mdg")

## End(Not run)
</code></pre>


</div>