<div class="container">

<table style="width: 100%;"><tr>
<td>adapt_particles</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Adapt the number of particles</h2>

<h3>Description</h3>

<p>This function takes the provided <code>libbi</code> and runs
MCMC at a single point (i.e., repeatedly proposing the same parameters),
adapting the number of particles distribution until the variance of the
log-likelihood crosses the value given as <code>target.variance</code> (1 by
default).
</p>


<h3>Usage</h3>

<pre><code class="language-R">adapt_particles(
  x,
  min = 1,
  max = 1024,
  target_variance = 1,
  quiet = FALSE,
  target.variance,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a <code>libbi</code> object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min</code></td>
<td>
<p>minimum number of particles</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max</code></td>
<td>
<p>maximum number of particles</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>target_variance</code></td>
<td>
<p>target log-likelihood variance; once this is crossed,
the current number of particles will be used</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quiet</code></td>
<td>
<p>if set to TRUE, will not provide running output of particle
numbers tested</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>target.variance</code></td>
<td>
<p>deprecated; use <code>target_variance</code> instead</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>parameters for libbi$run</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>a <code>libbi</code> with the desired proposal distribution
</p>


<h3>Examples</h3>

<pre><code class="language-R">example_obs &lt;- rbi::bi_read(system.file(package="rbi", "example_dataset.nc"))
example_model &lt;- rbi::bi_model(system.file(package="rbi", "PZ.bi"))
example_bi &lt;- rbi::libbi(model = example_model, obs = example_obs)
obs_states &lt;- rbi::var_names(example_model, type = "obs")
max_time &lt;- max(vapply(example_obs[obs_states], function(x) {
  max(x[["time"]])
}, 0))
## Not run: 
  adapted &lt;- adapt_particles(example_bi, nsamples = 128, end_time = max_time)

## End(Not run)
</code></pre>


</div>