<div class="container">

<table style="width: 100%;"><tr>
<td>embed_entityrelationspace</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Build a Starspace model for entity relationship completion</h2>

<h3>Description</h3>

<p>Build a Starspace model for entity relationship completion (graphspace).
</p>


<h3>Usage</h3>

<pre><code class="language-R">embed_entityrelationspace(
  x,
  model = "graphspace.bin",
  early_stopping = 0.75,
  useBytes = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a data.frame with columns entity_head, entity_tail and relation indicating the relation between the head and tail entity</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>
<p>name of the model which will be saved, passed on to <code>starspace</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>early_stopping</code></td>
<td>
<p>the percentage of the data that will be used as training data. If set to a value smaller than 1, 1-<code>early_stopping</code> percentage of the data which will be used as the validation set and early stopping will be executed. Defaults to 0.75.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>useBytes</code></td>
<td>
<p>set to TRUE to avoid re-encoding when writing out train and/or test files. See <code>writeLines</code> for details</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>further arguments passed on to <code>starspace</code> except file, trainMode and fileFormat</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>an object of class <code>textspace</code> as returned by <code>starspace</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Example on Freebase - download the data
filename &lt;- paste(
  "https://raw.githubusercontent.com/bnosac-dev/GraphEmbeddings/master/",
  "diffbot_data/FB15k/freebase_mtr100_mte100-train.txt",
  sep = "")
tmpfile &lt;- tempfile(pattern = "freebase_mtr100_mte100_", fileext = "txt")
ok &lt;- suppressWarnings(try(
  download.file(url = filename, destfile = tmpfile),
  silent = TRUE))
if(!inherits(ok, "try-error") &amp;&amp; ok == 0){
  ## Build the model on the downloaded data
  x &lt;- read.delim(tmpfile, header = FALSE, nrows = 1000,
                  col.names = c("entity_head", "relation", "entity_tail"),
                  stringsAsFactors = FALSE)
  head(x)

  set.seed(123456789)
  model &lt;- embed_entityrelationspace(x, dim = 50)
  plot(model)

  predict(model, "/m/027rn /location/country/form_of_government")

  ## Also add reverse relation
  x_reverse &lt;- x
  colnames(x_reverse) &lt;- c("entity_tail", "relation", "entity_head")
  x_reverse$relation &lt;- sprintf("REVERSE_%s", x_reverse$relation)

  relations &lt;- rbind(x, x_reverse)
  set.seed(123456789)
  model &lt;- embed_entityrelationspace(relations, dim = 50)
  predict(model, "/m/027rn /location/country/form_of_government")
  predict(model, "/m/06cx9 REVERSE_/location/country/form_of_government")
}

## cleanup for cran
if(file.exists(tmpfile)) file.remove(tmpfile)
</code></pre>


</div>