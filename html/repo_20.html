<div class="container">

<table style="width: 100%;"><tr>
<td>repo_lazydo</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Run expression with cache.</h2>

<h3>Description</h3>

<p>lazydo searches the repo for previous execution of an
expression. If a previous execution is found, the result is loaded
and returned. Otherwise, the expression is executed and the result
stashed.
</p>


<h3>Usage</h3>

<pre><code class="language-R">repo_lazydo(expr, force = F, env = parent.frame())
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>expr</code></td>
<td>
<p>An object of class expression (the code to run).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>force</code></td>
<td>
<p>If TRUE, execute expr anyway</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>env</code></td>
<td>
<p>Environment for expr, defaults to parent.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The expression results are stashed as usual. The name of
the resource is obtained by digesting the expression, so it will
look like an MD5 string in the repo. Note that the expression, and
not its result, will uniquely identify the item in the repo.
</p>
<p>The new item is automatically tagged with "stash", "hide" and
"lazydo".
</p>


<h3>Value</h3>

<p>Results of the expression (either loaded or computed on the
fly).
</p>


<h3>See Also</h3>

<p>repo_stash, repo_put
</p>


<h3>Examples</h3>

<pre><code class="language-R">rp_path &lt;- file.path(tempdir(), "example_repo")
rp &lt;- repo_open(rp_path, TRUE)


## First run
system.time(rp$lazydo(
    {
        Sys.sleep(1/10)
        x &lt;- 10
    }
))

## lazydo is building resource from code.
## Cached item name is: f3c27f11f99dce20919976701d921c62
##   user  system elapsed 
##  0.004   0.000   0.108 

## Second run
system.time(rp$lazydo(
    {
        Sys.sleep(1/10)
        x &lt;- 10
    }
))

## lazydo found precomputed resource.
##   user  system elapsed 
##  0.001   0.000   0.001 


## The item's name in the repo can be obtained as the name of the
## last item added:

l &lt;- length(rp$entries())
resname &lt;- rp$entries()[[l]]$name
cat(rp$entries()[[l]]$description)
## {
##    Sys.sleep(1/10)
##    x &lt;- 10
## }
rp$rm(resname) ## single cached item cleared

## wiping temporary repo
unlink(rp_path, TRUE)
</code></pre>


</div>