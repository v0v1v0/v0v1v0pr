<div class="container">

<table style="width: 100%;"><tr>
<td>cat_all_fn</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compares observed and expected distribution of all categorical (binomial) variables</h2>

<h3>Description</h3>

<p>Creates plots of observed to expected numbers and ratios for the binomial variables and/or compares reported and calculated p-values for the variables<br>
Reference: Bolland MJ, Gamble GD, Avenell A, Cooper DJ, Grey A. Distributions of baseline categorical variables were different from the expected distributions in randomized trials with integrity concerns. J Clin Epidemiol. 2023;154:117-124
</p>


<h3>Usage</h3>

<pre><code class="language-R">cat_all_fn(
  df = cat_all_data,
  comp.pvals = "no",
  fisher.sim = "y",
  fish.n.sims = 10000,
  binom = "no",
  two_levels = "no",
  del.disparate = "yes",
  excl.level = "yes",
  seed = 0,
  title = "",
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>data frame generated from load_clean function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>comp.pvals</code></td>
<td>
<p>"yes" or "no" indicator whether reported and calculated p-values should be compared</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fisher.sim</code></td>
<td>
<p>"yes" or "no" indicator whether to allow fisher test to simulate p-values for &gt;2*2 tables</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fish.n.sims</code></td>
<td>
<p>number of simulations to use in Fisher test, default 10,000</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>binom</code></td>
<td>
<p>"yes" or "no" indicator whether observed to expected distributions of binomial variables should be calculated</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>two_levels</code></td>
<td>
<p>"yes" or "no" indicator whether variables with more than 2 levels should be collapsed to 2 levels</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>del.disparate</code></td>
<td>
<p>if yes, data in which the absolute difference between group sizes is &gt;20% are deleted</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>excl.level</code></td>
<td>
<p>"yes" or "no" indicator whether one level of a variable should be deleted. Deleted level is chosen randomly using seed parameter.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>seed for random number generator, default 0 = current date and time. Specify seed to make repeatable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title</code></td>
<td>
<p>title name for plots (optional)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>TRUE or FALSE indicates whether progress bar and comments show and flextable or plot or both are printed</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Returns a list containing objects described below and (if verbose = TRUE) prints the flextable cat_all_diff_calc_rep_ft and/or graph cat_all_graph depending on options chosen
</p>


<h3>Value</h3>

<p>list containing objects as described<br></p>
<p>if p-value comparison used:
</p>

<ul>
<li>
<p> cat_all_pvals = data frame of data for comparison of reported and calculated p-values
</p>
</li>
<li>
<p> cat_all_diff_calc_rep_ft = flextable of comparison of reported and calculated p-values
</p>
</li>
<li>
<p> cat_all_diff_calc_rep_data = data frame used to make flextable
</p>
</li>
<li>
<p> cat_all_diff_thresh_ft = flextable of comparison of reported and calculated p-values when only threshold given
</p>
</li>
<li>
<p> cat_all_diff_thresh_data = data frame used to make flextable for p-value thresholds
</p>
</li>
</ul>
<p>if comparing categorical variables used
</p>

<ul>
<li>
<p> cat_all_graph = plot of observed to expected numbers and differences between groups, top panels are the absolute numbers, bottom panels are the differences between trial arms in two arm studies
</p>
</li>
<li>
<p> cat_all_graph_pc = plot of observed to expected numbers expressed as percentages and differences between groups, top panels are the percentages, bottom panels are the differences between trial arms in two arm studies
</p>
</li>
<li>
<p> cat_all_data_abs = data frame of data for absolute numbers
</p>
</li>
<li>
<p> cat_all_data_df = data frame of data for difference between groups in two arm studies
</p>
</li>
<li>
<p> cat_all_dataset_abs = data frame of dataset used for all trials
</p>
</li>
<li>
<p> cat_all_dataset_df = data frame of dataset used for two arm trials
</p>
</li>
<li>
<p> cat_all_all_graphs list containing
</p>

<ul>
<li>
<p> abs = plot for absolute numbers only
</p>
</li>
<li>
<p> df = plot for difference between groups in two arm studies only
</p>
</li>
<li>
<p> pc = plot for percentages only
</p>
</li>
<li>
<p> all_pc = composite plot of percentages and absolute numbers
</p>
</li>
<li>
<p> individual_graphs list of 6 individual plots making up composite figures
</p>
</li>
</ul>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R"># load example data
cat_all_data &lt;- load_clean(import= "no", file.cat = "SI_cat_all", cat_all= "yes",
format.cat = "wide")$cat_all_data


# run function comparing p-values only (takes only a few seconds)
cat_all_fn (comp.pvals = "yes")$cat_all_diff_calc_rep_ft

# run function comparing distribution of binomial variables only

# to speed example up limit to 12 2-arm trials with 20 variables
# (takes close to 5 secs)

cat_all_data &lt;- cat_all_data [1:41, c(1:8,10:11,13:15)]

cat_all_fn (binom = "yes", two_levels = "yes", del.disparate = "yes",
excl.level = "yes", seed = 10)$cat_all_graph


# to import an excel spreadsheet (modify using local path,
# file and sheet name, range, and format):

# get path for example files
path &lt;- system.file("extdata", "reappraised_examples.xlsx", package = "reappraised",
                   mustWork = TRUE)
# delete file name from path
path &lt;- sub("/[^/]+$", "", path)

# load data
cat_all_data &lt;- load_clean(import= "yes", cat_all = "yes", dir = path,
   file.name.cat = "reappraised_examples.xlsx", sheet.name.cat = "SI_cat_all",
   range.name.cat = "A:N", format.cat = "wide")$cat_all_data

</code></pre>


</div>