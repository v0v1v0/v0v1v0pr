<div class="container">

<table style="width: 100%;"><tr>
<td>mpm_collapse</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Collapse a matrix population model to a smaller number of stages</h2>

<h3>Description</h3>

<p>Collapse a matrix population model to a smaller number of stages. For
instance, to compare properties of multiple projection matrices with
different numbers of stages, one might first collapse those matrices to a
standardized set of stages (e.g., propagule, pre-reproductive, reproductive,
and post-reproductive). The transition rates in the collapsed matrix are a
weighted average of the transition rates from the relevant stages of the
original matrix, weighted by the relative proportion of each stage class
expected at the stable distribution.
</p>


<h3>Usage</h3>

<pre><code class="language-R">mpm_collapse(matU, matF, matC = NULL, collapse)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>matU</code></td>
<td>
<p>The survival component of a matrix population model (i.e., a
square projection matrix reflecting survival-related transitions; e.g.,
progression, stasis, and retrogression)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>matF</code></td>
<td>
<p>The sexual component of a matrix population model (i.e., a square
projection matrix reflecting transitions due to sexual reproduction)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>matC</code></td>
<td>
<p>The clonal component of a matrix population model (i.e., a square
projection matrix reflecting transitions due to clonal reproduction).
Defaults to <code>NULL</code>, indicating no clonal reproduction (i.e.,
<code>matC</code> is a matrix of zeros).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>collapse</code></td>
<td>
<p>A list giving the mapping between stages of the original
matrix and the desired stages of the collapsed matrix (e.g., <code>list(1,
  2:3, 4)</code>). Original stages may be passed as either indices or stage names
corresponding to stage index or name in <code>matU</code>, <code>matF</code> and
<code>matC</code>). Names given to the elements of <code>collapse</code> are used as
stage names in the new, collapsed matrix.
</p>
<p>See <em>Missing Stages</em> for handling of <code>NA</code> within <code>collapse</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list with four elements:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>matA</code></td>
<td>
<p>Collapsed projection matrix</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>matU</code></td>
<td>
<p>Survival component of the collapsed projection matrix</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>matF</code></td>
<td>
<p>Sexual reproduction component of the collapsed projection
matrix</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>matC</code></td>
<td>
<p>Clonal reproduction component of the collapsed projection
matrix</p>
</td>
</tr>
</table>
<h3>Missing Stages</h3>

<p>The collapsed matrix will always be of dimension <code>length(collapse)</code>,
even if one or more elements of the <code>collapse</code> argument is <code>NA</code>
(corresponding to a desired stage of the collapsed matrix that is not present
in the original matrix). In the collapsed matrix, any row/column
corresponding to a missing stage will be coerced to <code>NA</code>.
</p>


<h3>Note</h3>

<p>This method of collapsing a matrix population model preserves the
equilibrium population growth rate (<code class="reqn">lambda</code>) and relative stable
distribution, but is not expected to preserve other traits such as relative
reproductive values, sensitivities, net reproductive rates, life
expectancy, etc.
</p>


<h3>Author(s)</h3>

<p>Rob Salguero-GÃ³mez &lt;rob.salguero@zoo.ox.ac.uk&gt;
</p>
<p>William K. Petry &lt;wpetry@ncsu.edu&gt;
</p>


<h3>References</h3>

<p>Salguero-Gomez, R. &amp; Plotkin, J. B. 2010. Matrix dimensions bias
demographic inferences: implications for comparative plant demography. The
American Naturalist 176, 710-722. &lt;doi:10.1086/657044&gt;
</p>


<h3>See Also</h3>

<p><code>mpm_standardize</code>
</p>
<p>Other transformation: 
<code>is_leslie_matrix()</code>,
<code>leslie_collapse()</code>,
<code>mpm_rearrange()</code>,
<code>mpm_split()</code>,
<code>mpm_standardize()</code>,
<code>name_stages()</code>,
<code>repro_stages()</code>,
<code>standard_stages()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(mpm1)

# check which stages reproductive
repro_stages(matR = mpm1$matF)

# collapse reproductive stages (3 and 4) into single stage
mpm_collapse(
  matU = mpm1$matU, matF = mpm1$matF,
  collapse = list(1, 2, 3:4, 5)
)

# use stage names instead, and name stages in the collapsed matrix
mpm_collapse(
  matU = mpm1$matU, matF = mpm1$matF,
  collapse = list(
    seed = "seed", vegetative = "small",
    flowering = c("medium", "large"),
    dormant = "dormant"
  )
)

</code></pre>


</div>