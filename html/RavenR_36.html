<div class="container">

<table style="width: 100%;"><tr>
<td>rvn_gen_obsweights</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create weights time series for calibration/diagnostic evaluation</h2>

<h3>Description</h3>

<p>Creates an observation data weights time series based upon dates stored in
an xts time series and criterion given by the user
</p>


<h3>Usage</h3>

<pre><code class="language-R">rvn_gen_obsweights(
  ts,
  criterion = "BETWEEN",
  startdate = "1785-10-05",
  enddate = "2500-01-01"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>ts</code></td>
<td>
<p>xts time series</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>criterion</code></td>
<td>
<p>criterion used to determine weighted vs. non-weighted dates
one of 'BEFORE', 'AFTER', 'BETWEEN', 'BETWEEN_CYCLIC'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>startdate</code></td>
<td>
<p>Date indicating start of time period (for 'BETWEEN' or
'AFTER' criterion) or start of annual cyclic period (for 'BETWEEN_CYCLIC'). In
the latter case, only the julian day of the startdate matters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>enddate</code></td>
<td>
<p>Date indicating end of time period (for 'BETWEEN' or
'BEFORE' criterion) or end of annual cyclic period (for 'BETWEEN_CYCLIC'). In
the latter case, only the julian day of the enddate matters.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>for criterion ='BEFORE', all timestamps prior to the enddate have a
weight of 1, 0 otherwise <br>
for criterion ='AFTER', all timestamps after the startdate have a
weight of 1, 0 otherwise <br>
for criterion ='BETWEEN', all timestamps after the startdate and before
the enddate have a weight of 1, 0 otherwise <br>
for criterion ='BETWEEN_CYCLIC', all julian days after the startdate and before
the enddate have a weight of 1, 0 otherwise; if startdate is more than enddate,
then the opposite is true, e.g, for startdate="2002-11-01" and enddate "2002-01-31",
only November, December and January timestamps have a weight of 1
</p>


<h3>Value</h3>

<p>returns numeric vector of weights
</p>


<h3>Author(s)</h3>

<p>James R. Craig, University of Waterloo
</p>


<h3>See Also</h3>

<p><code>rvn_rvt_write</code> to write the weights to an rvt file
</p>


<h3>Examples</h3>

<pre><code class="language-R"> # locate hydrograph sample csv data from RavenR package
 ff &lt;- system.file("extdata","run1_Hydrographs.csv", package="RavenR")

 # read in Raven Hydrographs file, store into mydata
 mydata &lt;- rvn_hyd_read(ff, tzone="EST")

 # generate rvt file using just observations from Subbasin ID 36
 flows &lt;- rvn_ts_infill(mydata$hyd$Sub36_obs)

 # weight March-October flows:
 wts &lt;- rvn_gen_obsweights(flows,criterion = "BETWEEN_CYCLIC",
   startdate="2000-03-01", enddate="2003-11-01")

 # and only after March 2003:
 wts2 &lt;- rvn_gen_obsweights(flows,criterion = "AFTER",
   startdate="2003-03-01")
 wts2 &lt;- wts2*wts # product merges weights

 # show weights over time
 plot(wts2)

</code></pre>


</div>