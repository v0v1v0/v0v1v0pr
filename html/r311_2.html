<div class="container">

<table style="width: 100%;"><tr>
<td>o311_api</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Select an open311 API</h2>

<h3>Description</h3>

<p>Select an open311 API and attach it to the active session. An open311 API is
an implementation of the open311 standard. It consists of an endpoint name
(e.g. a city), a root URL, and a jurisdiction ID. To unambiguously identify
an API, you can provide an endpoint, a jurisdiction ID, or both. The input
is matched with <code>o311_endpoints</code> to select an API. The
selected API is available to other <code>o311_*</code> functions until the
session is terminated or until it is overwritten.
</p>


<h3>Usage</h3>

<pre><code class="language-R">o311_api(
  endpoint = NULL,
  jurisdiction = NULL,
  key = NULL,
  format = c("json", "xml")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>endpoint</code></td>
<td>
<p><code>[character]</code>
</p>
<p>Name of an endpoint that runs an open311 API. This is usually a
city, but can be any provider of an open311 API.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>jurisdiction</code></td>
<td>
<p><code>[character]</code>
</p>
<p>ID of a jurisdiction that is served by an open311 API. A jurisdiction
ID is usually the root URL of the jurisdiction website, e.g.
<code>"sandiego.gov"</code> for San Diego.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>key</code></td>
<td>
<p><code>[character]</code>
</p>
<p>If a key is required by the selected API, this argument can be used to
store the key in the R session. The API key is automatically used in
API requests. If <code>key</code> is <code>NULL</code> although a key is required,
a warning is emitted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>format</code></td>
<td>
<p><code>[character]</code>
</p>
<p>Response format. Must be one of <code>"json"</code> or <code>"xml"</code>. Defaults to
<code>"json"</code> because simplification is more difficult and unsafe for
<code>xml2</code> objects. It is advisable to use <code>"json"</code> whenever
possible and applicable. Additionally, <code>"xml"</code> requires the
<code>xml2</code> package for queries and the <code>xmlconvert</code> package for
simplification.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>In theory, several jurisdictions can exist for a single endpoints, e.g.
if a region serves multiple jurisdictions. Similarly, multiple endpoints
can exist for a single jurisdiction, e.g. if a provider has set up both
production and test endpoints for a jurisdictions. Providing both
endpoint and jurisdiction is thus the most safe way to identify an API.
</p>
<p>By default, only a handful of endpoints are supported. For a list of
currently supported endpoints, run <code>o311_endpoints</code>. You can
add non-default endpoints using <code>o311_add_endpoint</code>.
</p>


<h3>Value</h3>

<p>A list containing the most important information on a given
jurisdiction, invisibly. This list is attached to the session and can
be retrieved by calling <code>o311_api()</code> without arguments. Passing no
arguments returns the currently attached API object.
</p>


<h3>See Also</h3>

<p><code>o311_requests</code>, <code>o311_request</code>,
<code>o311_services</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># cities are matched using regex
o311_api("Cologne")

# passing a jurisdiction is more explicit
o311_api(jurisdiction = "stadt-koeln.de")

# calls without arguments return the current API
o311_api()
</code></pre>


</div>