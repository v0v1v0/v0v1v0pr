<div class="container">

<table style="width: 100%;"><tr>
<td>code_source</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Add one or more codes to one or more sources</h2>

<h3>Description</h3>

<p>These functions add codes to one or more
sources that were read with one of the
<code>loading_sources</code> functions.
</p>


<h3>Usage</h3>

<pre><code class="language-R">code_source(
  input,
  codes,
  indices = NULL,
  output = NULL,
  decisionLabel = NULL,
  justification = NULL,
  justificationFile = NULL,
  preventOverwriting = rock::opts$get("preventOverwriting"),
  rlWarn = rock::opts$get(rlWarn),
  encoding = rock::opts$get("encoding"),
  silent = rock::opts$get("silent")
)

code_sources(
  input,
  codes,
  output = NULL,
  indices = NULL,
  outputPrefix = "",
  outputSuffix = "_coded",
  decisionLabel = NULL,
  justification = NULL,
  justificationFile = NULL,
  recursive = TRUE,
  filenameRegex = ".*",
  preventOverwriting = rock::opts$get("preventOverwriting"),
  encoding = rock::opts$get("encoding"),
  silent = rock::opts$get("silent")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>input</code></td>
<td>
<p>The source, or list of sources, as
produced by one of the <code>loading_sources</code> functions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>codes</code></td>
<td>
<p>A named character vector, where each element
is the code to be added to the matching utterance, and
the corresponding name is either an utterance identifier
(in which case the utterance with that identifier will be
coded with that code), a code (in which case all utterances
with that code will be coded with the new code as well), a
digit (in which case the utterance at that line number in
the source will be coded with that
code), or a regular expression, in which case all utterances
matching that regular expression will be coded with that
source. If specifying an utterance ID or code, make sure
that the code delimiters are included (normally, two square
brackets).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>indices</code></td>
<td>
<p>If <code>input</code> is a source as loaded by
<code>loading_sources</code>, <code>indices</code> can be used to pass a logical
vector of the same length as <code>input</code>
that indicates to which utterance the code in <code>codes</code> should be
applied. Note that if <code>indices</code> is provided, only the first
element of <code>codes</code> is used, and its name is ignored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output</code></td>
<td>
<p>If specified, the coded source will be written here.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>decisionLabel</code></td>
<td>
<p>A description of the (coding) decision that was taken.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>justification</code></td>
<td>
<p>The justification for this action.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>justificationFile</code></td>
<td>
<p>If specified, the justification is appended to
this file. If not, it is saved to the <code>justifier::workspace()</code>. This can
then be saved or displayed at the end of the R Markdown file or R script
using <code>justifier::save_workspace()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>preventOverwriting</code></td>
<td>
<p>Whether to prevent overwriting existing files.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rlWarn</code></td>
<td>
<p>Whether to let <code>readLines()</code> warn, e.g. if files do not end
with a newline character.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>encoding</code></td>
<td>
<p>The encoding to use.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>silent</code></td>
<td>
<p>Whether to be chatty or quiet.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outputPrefix, outputSuffix</code></td>
<td>
<p>A prefix and/or suffix to prepend and/or
append to the filenames to distinguish them from the input filenames.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>recursive</code></td>
<td>
<p>Whether to also read files from all subdirectories
of the <code>input</code> directory</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filenameRegex</code></td>
<td>
<p>Only input files matching this patterns will be read.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Invisibly, the coded source object.
</p>


<h3>Examples</h3>

<pre><code class="language-R">### Get path to example source
examplePath &lt;-
  system.file("extdata", package="rock");

### Get a path to one example file
exampleFile &lt;-
  file.path(examplePath, "example-1.rock");

### Parse single example source
loadedExample &lt;- rock::load_source(exampleFile);

### Show line 71
cat(loadedExample[71]);

### Specify the rules to code all utterances
### containing "Ipsum" with the code 'ipsum' and
### all utterances containing the code
codeSpecs &lt;-
  c("(?i)ipsum" = "ipsum",
    "BC|AD|\\d\\d\\d\\ds" = "timeRef");

### Apply rules
codedExample &lt;- code_source(loadedExample,
                            codeSpecs);

### Show line 71
cat(codedExample[71]);

### Also add code "foo" to utterances with code 'ipsum'
moreCodedExample &lt;- code_source(codedExample,
                                c("[[ipsum]]" = "foo"));

### Show line 71
cat(moreCodedExample[71]);

### Use the 'indices' argument to add the code 'bar' to
### line 71
overCodedExample &lt;- code_source(moreCodedExample,
                                "bar",
                                indices=71);

cat(overCodedExample[71]);

</code></pre>


</div>