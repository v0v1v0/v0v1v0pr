<div class="container">

<table style="width: 100%;"><tr>
<td>ms_flatten</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Flatten a scored multiple-response object into a factor
</h2>

<h3>Description</h3>

<p>Convert a multiple-response object into a named numeric vector using a supplied ordering. 
</p>


<h3>Usage</h3>

<pre><code class="language-R">ms_flatten(x, priorities, fun, start=0)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>

<p><code>mr</code> object
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>priorities</code></td>
<td>

<p>Character vector of levels.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fun</code></td>
<td>
<p>Function for reducing two values to one. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start</code></td>
<td>
<p>starting value for <code>fun</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Each observation is initially assigned the value <code>start</code>.  Starting with the lowest-priority level, the current value is combined with the new value as <code>fun(new, current)</code>. Using <code>fun=function(x,y) x</code> would return the value for the highest-priority level present; using <code>fun=pmax</code> would return the highest score for any level present; using <code>fun="+"</code> would return the sum of the scores.  
</p>


<h3>Value</h3>

<p>A factor
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(ethnicity)
ethnicity

## NZ 'prioritised ethnicity'
eth &lt;- mr_recode(ethnicity, `European/Other`="European", `European/Other` = "MELAA")
mr_flatten(ethnicity, c("Maori","Pacific","Asian","European/Other"))

data(nzbirds)
## hardest to see first
ms_flatten(nzbirds, c("kaki","ruru","kea","tui","tauhou"),"+")
ms_flatten(nzbirds, c("kaki","ruru","kea","tui","tauhou"),
  fun=function(x,y) x)
ms_flatten(nzbirds, c("kaki","ruru","kea","tui","tauhou"),pmin,start=Inf)
</code></pre>


</div>