<div class="container">

<table style="width: 100%;"><tr>
<td>csu_merge_cases_pop</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>csu_merge_cases_pop</h2>

<h3>Description</h3>

<p><code>csu_merge_cases_pop</code> merges registry data and population data, group by year and other user defined variable (sex, registry, etc...).<br></p>


<h3>Usage</h3>

<pre><code class="language-R">csu_merge_cases_pop(df_cases, 
	df_pop,
	var_age,
	var_cases="cases",
	var_py=NULL,
	group_by=NULL) 
	</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df_cases</code></td>
<td>

<p>Registry data group by 5 years-age group (need to be R <code>data.frame</code> format, see examples to import csv file).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>df_pop</code></td>
<td>

<p>Population data group by 5-years age group (need to be R <code>data.frame</code> format, see examples to import csv file).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var_age</code></td>
<td>

<p>Age variable. Several format are accepted 
</p>

<table>
<tr>
<td style="text-align: left;">
			1 </td>
<td style="text-align: left;"> 0-4 </td>
<td style="text-align: left;"> 0 </td>
</tr>
<tr>
<td style="text-align: left;">
			2 </td>
<td style="text-align: left;"> 5-9 </td>
<td style="text-align: left;"> 5 </td>
</tr>
<tr>
<td style="text-align: left;">
			3 </td>
<td style="text-align: left;"> 10-14 </td>
<td style="text-align: left;"> 10 </td>
</tr>
<tr>
<td style="text-align: left;">
			... </td>
<td style="text-align: left;"> ... </td>
<td style="text-align: left;"> ... </td>
</tr>
<tr>
<td style="text-align: left;">
			17 </td>
<td style="text-align: left;"> 80-84 </td>
<td style="text-align: left;"> 80 </td>
</tr>
<tr>
<td style="text-align: left;">
			18 </td>
<td style="text-align: left;"> 85+ </td>
<td style="text-align: left;"> 85 </td>
</tr>
<tr>
<td style="text-align: left;">
		</td>
</tr>
</table>
<p><b>This variable must be a variable with the same column name in both dataset </b> (<code>df_cases</code> and <code>df_pop</code>).<br>
Age &gt;= 85 in the <code>df_pop</code> dataset will be aggregated as 85+.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var_cases</code></td>
<td>

<p>Cases variable in the <code>df_cases</code> dataset.<br></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var_py</code></td>
<td>

<p>(Optional) If population is "long format", name of the population variable in the <code>df_pop</code> dataset.<br>
If population data is wide format (see <code>details</code>), var_py must be NULL.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group_by</code></td>
<td>

<p>(Optional) A vector of variables to create the different population (sex, country, etc...).<br><b>Each variable must be a variable with the same column name in both dataset </b> (<code>df_cases</code> and <code>df_pop</code>).<br>
Do not include the "year" variable since it is automatically detected (see details).
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function merges registry data and population for further analysis.<br> 
Both datasets must be group by 5-years age group.<br><b>If present, the year information in format "yyyy" will be detected automatically</b>.<br> 
2 formats are accepted for population data:.<br>
Long format: (year and population are 2 variables)<br></p>

<table>
<tr>
<td style="text-align: left;">
		sex	</td>
<td style="text-align: left;"> age </td>
<td style="text-align: left;"> pop </td>
<td style="text-align: left;"> year </td>
</tr>
<tr>
<td style="text-align: left;">
		1 </td>
<td style="text-align: left;"> 1 </td>
<td style="text-align: left;"> 116128 </td>
<td style="text-align: left;"> 2005 </td>
</tr>
<tr>
<td style="text-align: left;">
		1 </td>
<td style="text-align: left;"> 2 </td>
<td style="text-align: left;"> 130995 </td>
<td style="text-align: left;"> 2005 </td>
</tr>
<tr>
<td style="text-align: left;">
		1 </td>
<td style="text-align: left;"> 3 </td>
<td style="text-align: left;"> 137556 </td>
<td style="text-align: left;"> 2005 </td>
</tr>
<tr>
<td style="text-align: left;">
		... </td>
<td style="text-align: left;"> ... </td>
<td style="text-align: left;"> ... </td>
<td style="text-align: left;"> ... </td>
</tr>
<tr>
<td style="text-align: left;">
		2 </td>
<td style="text-align: left;"> 16 </td>
<td style="text-align: left;"> 27171 </td>
<td style="text-align: left;"> 2007 </td>
</tr>
<tr>
<td style="text-align: left;">
		2 </td>
<td style="text-align: left;"> 17 </td>
<td style="text-align: left;"> 13585 </td>
<td style="text-align: left;"> 2007 </td>
</tr>
<tr>
<td style="text-align: left;">
		2 </td>
<td style="text-align: left;"> 18 </td>
<td style="text-align: left;"> 13585 </td>
<td style="text-align: left;"> 2007 </td>
</tr>
<tr>
<td style="text-align: left;">
	</td>
</tr>
</table>
<p>Wide format: (One column per year and no population variable, "yyyy" year format must be included in columns name)<br></p>

<table>
<tr>
<td style="text-align: left;">
		sex	</td>
<td style="text-align: left;"> age </td>
<td style="text-align: left;"> Y2013 </td>
<td style="text-align: left;"> Y2014 </td>
<td style="text-align: left;"> Y2015 </td>
</tr>
<tr>
<td style="text-align: left;">
		1 </td>
<td style="text-align: left;"> 0-4 </td>
<td style="text-align: left;"> 215607 </td>
<td style="text-align: left;"> 237346 </td>
<td style="text-align: left;"> 247166 </td>
</tr>
<tr>
<td style="text-align: left;">
		1 </td>
<td style="text-align: left;"> 5-9 </td>
<td style="text-align: left;"> 160498 </td>
<td style="text-align: left;"> 152190 </td>
<td style="text-align: left;"> 152113 </td>
</tr>
<tr>
<td style="text-align: left;">
		1 </td>
<td style="text-align: left;"> 10-14 </td>
<td style="text-align: left;"> 175676 </td>
<td style="text-align: left;"> 171794 </td>
<td style="text-align: left;"> 165406 </td>
</tr>
<tr>
<td style="text-align: left;">
		... </td>
<td style="text-align: left;"> ... </td>
<td style="text-align: left;"> ... </td>
<td style="text-align: left;"> ... </td>
<td style="text-align: left;"> ... </td>
</tr>
<tr>
<td style="text-align: left;">
		2 </td>
<td style="text-align: left;"> 75-79 </td>
<td style="text-align: left;"> 20625 </td>
<td style="text-align: left;"> 20868 </td>
<td style="text-align: left;"> 23434 </td>
</tr>
<tr>
<td style="text-align: left;">
		2 </td>
<td style="text-align: left;"> 80-84 </td>
<td style="text-align: left;"> 7187 </td>
<td style="text-align: left;"> 7276 </td>
<td style="text-align: left;"> 7620 </td>
</tr>
<tr>
<td style="text-align: left;">
		2 </td>
<td style="text-align: left;"> 85+ </td>
<td style="text-align: left;"> 2551 </td>
<td style="text-align: left;"> 2597 </td>
<td style="text-align: left;"> 2617 </td>
</tr>
<tr>
<td style="text-align: left;">
	</td>
</tr>
</table>
<h3>Value</h3>

<p>Return a dataframe.
</p>


<h3>Author(s)</h3>

<p>Mathieu Laversanne
</p>


<h3>See Also</h3>

<p><code>csu_group_cases</code>
<code>csu_asr</code>
<code>csu_cumrisk</code>
<code>csu_eapc</code>
<code>csu_ageSpecific</code>
<code>csu_ageSpecific_top</code>
<code>csu_bar_top</code>
<code>csu_time_trend</code>
<code>csu_trendCohortPeriod</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# you can import your data from csv file using read.csv:
# mydata &lt;-  read.csv("mydata.csv", sep=",")

data(ICD_group_GLOBOCAN)
data(data_individual_file)
data(data_population_file)

#group individual data by 
# 5 year age group 
# ICD grouping from dataframe ICD_group_GLOBOCAN
# year (extract from date of incidence)

df_data_year &lt;- csu_group_cases(data_individual_file,
  var_age="age",
  group_by=c("sex", "regcode", "reglabel"),
  df_ICD = ICD_group_GLOBOCAN,
  var_ICD  ="site",
  var_year = "doi")     

#Merge 5-years age grouped data with population by year (automatic) and sex

df_data &lt;- csu_merge_cases_pop(
	df_data_year, 
	data_population_file, 
	var_age = "age_group",
	var_cases = "cases",
	var_py = "pop",
	group_by = c("sex"))


# you can export your result as csv file using write.csv:
# write.csv(result, file="result.csv")
				  		  
</code></pre>


</div>