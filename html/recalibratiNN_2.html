<div class="container">

<table style="width: 100%;"><tr>
<td>gg_CD_local</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plots the cumulative distributions of PIT-values for local calibration diagnostics.</h2>

<h3>Description</h3>

<p>This function generates a ggplot visual representation to compare the predicted versus empirical
cumulative distributions of Probability Integral Transform (PIT) values at a local level. It is
useful for diagnosing the calibration in different regions within the dataset, since miscalibration patterns may
differ across the covariate space. The function allows for customization of the plot layers to suit specific needs.
For advanced customization of the plot layers, refer to the ggplot2 User Guide.
</p>


<h3>Usage</h3>

<pre><code class="language-R">gg_CD_local(
  pit_local,
  psz = 0.01,
  abline = "black",
  pal = "Set2",
  facet = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>pit_local</code></td>
<td>
<p>A data frame of local PIT-values, typically obtained from <code>PIT_local()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>psz</code></td>
<td>
<p>Double indicating the size of the points on the plot. Default is 0.001.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>abline</code></td>
<td>
<p>Color of the diagonal line. Default color is "red".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pal</code></td>
<td>
<p>Palette name from RColorBrewer for coloring the plot. Default is "Set2".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>facet</code></td>
<td>
<p>Logical value indicating if a separate visualization for each subgroup is preferred. Default is FALSE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional parameters to customize the ggplot.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This funcion will work with the output of the <code>PIT_local()</code> function, which provides the PIT-values for each subgroup pf the covariate space in the appropriate format.
</p>


<h3>Value</h3>

<p>A <code>ggplot</code> object displaying the cumulative distributions of PIT-values that that can be customized as needed.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
n &lt;- 10000
split &lt;- 0.8

mu &lt;- function(x1){
10 + 5*x1^2
}

sigma_v &lt;- function(x1){
30*x1
}


x &lt;- runif(n, 1, 10)
y &lt;- rnorm(n, mu(x), sigma_v(x))

x_train &lt;- x[1:(n*split)]
y_train &lt;- y[1:(n*split)]

x_cal &lt;- x[(n*split+1):n]
y_cal &lt;- y[(n*split+1):n]

model &lt;- lm(y_train ~ x_train)

y_hat &lt;- predict(model, newdata=data.frame(x_train=x_cal))

MSE_cal &lt;- mean((y_hat - y_cal)^2)

pit_local &lt;- PIT_local(xcal = x_cal, ycal=y_cal, yhat=y_hat, mse=MSE_cal)

gg_CD_local(pit_local)
gg_CD_local(pit_local, facet=TRUE)

</code></pre>


</div>