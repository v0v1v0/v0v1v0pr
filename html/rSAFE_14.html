<div class="container">

<table style="width: 100%;"><tr>
<td>safe_extraction</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Creating SAFE Extractor - an Object Used for Surrogate-Assisted Feature Extraction</h2>

<h3>Description</h3>

<p>The safe_extraction() function creates a SAFE-extractor object which may be used later
for surrogate feature extraction.
</p>


<h3>Usage</h3>

<pre><code class="language-R">safe_extraction(
  explainer,
  response_type = "ale",
  grid_points = 50,
  N = 200,
  penalty = "MBIC",
  nquantiles = 10,
  no_segments = 2,
  method = "complete",
  B = 500,
  collapse = "_",
  interactions = FALSE,
  inter_param = 0.25,
  inter_threshold = 0.25,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>explainer</code></td>
<td>
<p>DALEX explainer created with explain() function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>response_type</code></td>
<td>
<p>character, type of response to be calculated, one of: "pdp", "ale".
If features are uncorrelated, one can use "pdp" type - otherwise "ale" is strongly recommended.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grid_points</code></td>
<td>
<p>number of points on x-axis used for creating the PD/ALE plot, default 50</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N</code></td>
<td>
<p>number of observations from the dataset used for creating the PD/ALE plot, default 200</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>penalty</code></td>
<td>
<p>penalty for introducing another changepoint,
one of "AIC", "BIC", "SIC", "MBIC", "Hannan-Quinn" or numeric non-negative value</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nquantiles</code></td>
<td>
<p>the number of quantiles used in integral approximation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>no_segments</code></td>
<td>
<p>numeric, a number of segments variable is to be divided into in case of founding no breakpoints</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>the agglomeration method to be used in hierarchical clustering, one of:
"ward.D", "ward.D2", "single", "complete", "average", "mcquitty", "median", "centroid"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>B</code></td>
<td>
<p>number of reference datasets used to calculate gap statistics</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>collapse</code></td>
<td>
<p>a character string to separate original levels while combining them to the new one</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>interactions</code></td>
<td>
<p>logical, if interactions between variables are to be taken into account</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>inter_param</code></td>
<td>
<p>numeric, a positive value indicating which of single observation non-additive effects
are to be regarded as significant, the higher value the higher non-additive effect has to be to be taken
into account</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>inter_threshold</code></td>
<td>
<p>numeric, a value from <code style="white-space: pre;">⁠[0,1]⁠</code> interval indicating which interactions should be returned
as significant. It corresponds to the percentage of observations for which interaction measure is greater
than inter_param - if this percentage is less than inter_threshold then interaction effect is ignored.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>logical, if progress bar is to be printed</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>safe_extractor object containing information about variables transformation
</p>


<h3>See Also</h3>

<p><code>safely_transform_categorical</code>, <code>safely_transform_continuous</code>, <code>safely_detect_interactions</code>, <code>safely_transform_data</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(DALEX)
library(randomForest)
library(rSAFE)

data &lt;- apartments[1:500,]
set.seed(111)
model_rf &lt;- randomForest(m2.price ~ construction.year + surface + floor +
                           no.rooms + district, data = data)
explainer_rf &lt;- explain(model_rf, data = data[,2:6], y = data[,1], verbose = FALSE)
safe_extractor &lt;- safe_extraction(explainer_rf, grid_points = 30, N = 100, verbose = FALSE)
print(safe_extractor)
plot(safe_extractor, variable = "construction.year")

</code></pre>


</div>