<div class="container">

<table style="width: 100%;"><tr>
<td>fbOAuth</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create OAuth token to Facebook R session</h2>

<h3>Description</h3>

<p><code>fbOAuth</code> creates a long-lived OAuth access token that enables R to make
authenticated calls to the Facebook API. The token can be saved as a
file in disk to be re-used in future sessions. This function relies on the
<code>httr</code> package to create the OAuth token, and is a simplified version
of one of its examples.
</p>
<p>This function will automatically detect the API version for the token you create.
</p>


<h3>Usage</h3>

<pre><code class="language-R">fbOAuth(app_id, app_secret, extended_permissions = FALSE,
  legacy_permissions = FALSE, scope = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>app_id</code></td>
<td>
<p>numeric, App ID of application to be used to create OAUth token. Available
at <a href="https://developers.facebook.com/apps">https://developers.facebook.com/apps</a></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>app_secret</code></td>
<td>
<p>string, App Secret of application to be used to create OAUth token.
Available at <a href="https://developers.facebook.com/apps">https://developers.facebook.com/apps</a>, in Basic Settings panel.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>extended_permissions</code></td>
<td>
<p>If <code>TRUE</code>, the token will give access to some of
the authenticated user's private information (birthday, hometown, location,
relationships) and that of his/her friends, and permissions to post
status updates as well as to access checkins, likes, and the user's newsfeed
If <code>FALSE</code>, token will give access only to public information. Note 
that <code>updateStatus</code> will only work for tokens with extended permissions.
After version 2.0 of the Graph API, creating an application with these permissions
requires passing App Review (<a href="https://developers.facebook.com/docs/facebook-login/review">https://developers.facebook.com/docs/facebook-login/review</a>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>legacy_permissions</code></td>
<td>
<p>For tokens created with old versions of the API, this option
adds the "read_stream" permission</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scope</code></td>
<td>
<p>Specify an explicit lists of permissions to ask (overrides extended_permissions)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>There are two different ways of making authenticated requests. One is to obtain
a temporary access token from <a href="https://developers.facebook.com/tools/explorer/">https://developers.facebook.com/tools/explorer/</a>,
which can be used as argument in any of the functions in Rfacebook. An example is 
shown below.
</p>
<p>However, this token has a 2-hour lifetime by default and after it expires, it
needs to be renewed. The second alternative is to create an OAuth token. The 
process to create it is a bit more tedious. It is divided in three steps.
</p>
<p>First, go to <a href="https://developers.facebook.com/apps">https://developers.facebook.com/apps</a>, register as a developer
and create a new app. You will also need a verified Facebook account.
After that, click in "Show" under "App Secret" to find your 'App ID' and 'App Secret'.
</p>
<p>Second, run the <code>fbOAuth</code> function with your "App ID" and "App Secret" as 
arguments. It will return a URL, which you will need to paste into the "Website with
Facebook login" field in your App Settings on Facebook. Once you've done so, press Enter.
</p>
<p>Third, after pressing Enter, R will try to open a browser window to sign the token. If 
everything works well, you will get a message that says you can return to R. If not,
try again in a few minutes to make sure your app had its settings updated properly.
</p>
<p>To ensure proper functioning of the "getInsights" function-family you will need to 
specify the exact permissions granted to your app. As this is (to our knowledge) currently not
possible through the R based authentication process, please follow these steps:
</p>
<p>-&gt; Create App as mentioned above.
1. Open the "Graph API Explorer": <a href="https://developers.facebook.com/tools/explorer/">https://developers.facebook.com/tools/explorer/</a>
2. Select your app in the upper right corner
3. Click "Get Token" -&gt; "Get Access Token"
4. In the popup navigate to "Extended Permissions" and select "Insights"
5. Confirm
6. Ignore the following warning message ("Submit for Login Review...") and confirm again.
6. Go back to R and run fbOAuth with extended_permissions (still) set to FALSE. 
-&gt; See third step for possible messages concerning token creation.
</p>


<h3>Author(s)</h3>

<p>Pablo Barbera <a href="mailto:pablo.barbera@nyu.edu">pablo.barbera@nyu.edu</a>
</p>


<h3>See Also</h3>

<p><code>getUsers</code>, <code>getPost</code>, <code>searchFacebook</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
## an example of an authenticated request after creating the OAuth token
## where app_id and app_secret are fictitious, and token is saved for
## future sessions
fb_oauth &lt;- fbOAuth(app_id="123456789", app_secret="1A2B3C4D")
save(fb_oauth, file="fb_oauth")
load("fb_oauth")
me &lt;- getUsers("me", token=fb_oauth)
me$username

## an example of a request using a temporary access token
	token &lt;- "XXXXXXAAAAAAA1111"
	me &lt;- getUsers("me", token=token)

## End(Not run)

</code></pre>


</div>