<div class="container">

<table style="width: 100%;"><tr>
<td>Formula.translate</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>An internal function to translate an R formula into an R list object.</h2>

<h3>Description</h3>

<p>A model formula, as a formula object written in R-type syntax, is translated
into an R list object.
</p>


<h3>Usage</h3>

<pre><code class="language-R">Formula.translate(Formula, D = "Normal", indata)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Formula</code></td>
<td>
<p>A <code>formula</code> object specifying a multilevel model.
See <code>formula</code> for notes on general usage, and <code>runMLwiN</code> for
further details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>D</code></td>
<td>
<p>A character string/vector specifying the type of distribution to be modelled, which
can include <code>'Normal'</code> (the default), <code>'Binomial'</code>, <code>'Poisson'</code>,
<code>'Negbinom'</code>, <code>'Unordered Multinomial'</code>, <code>'Ordered Multinomial'</code>,
<code>'Multivariate Normal'</code>, or <code>'Mixed'</code>. In the case of the latter,
<code>'Mixed'</code> precedes the response types which also need to be listed in
<code>D</code>, e.g. <code>c('Mixed', 'Normal', 'Binomial')</code>; these need to be
be listed in the same order to which they are referred to in the
<code>Formula</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>indata</code></td>
<td>
<p>A data.frame object containing the data to be modelled.
Optional (can <code>attach</code> as an alternative) but recommended.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Outputs an R list object, which is then used as the input for
<code>write.IGLS</code> or <code>write.MCMC</code>.
</p>


<h3>Author(s)</h3>

<p>Zhang, Z., Charlton, C.M.J., Parker, R.M.A., Leckie, G., and Browne,
W.J. (2016) Centre for Multilevel Modelling, University of Bristol.
</p>


<h3>See Also</h3>

<p><code>runMLwiN</code>, <code>write.IGLS</code>, <code>write.MCMC</code>; for
function allowing back-compatibility with Formula syntax used in older
versions of <span class="pkg">R2MLwiN</span> (&lt;0.8.0) see <code>Formula.translate.compat</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# NB: See demo(packge = 'R2MLwiN') for a wider range of examples.
library(R2MLwiN)
# NOTE: if MLwiN not saved in location R2MLwiN defaults to, specify path via:
# options(MLwiN_path = 'path/to/MLwiN vX.XX/')
# If using R2MLwiN via WINE, the path may look like this:
# options(MLwiN_path = '/home/USERNAME/.wine/drive_c/Program Files (x86)/MLwiN vX.XX/')

# Two-level random intercept model with student (level 1) nested within
# school (level 2) and standlrt added to the fixed part.
# Importantly, the ordering of school and student reflects their hierarchy,
# with the highest level (school) specified first.
# E.g. see demo(UserGuide04)
data(tutorial, package = 'R2MLwiN')
(mymodel1 &lt;- runMLwiN(normexam ~ 1 + standlrt + (1 | school) + (1 | student),
                     data = tutorial))

# Adding a random slope
(mymodel2 &lt;- runMLwiN(normexam ~ 1 + standlrt + (1 + standlrt | school)
                     + (1 | student), data = tutorial))

# Exploring complex level 1 variation
# E.g. see demo(UserGuide07)
(mymodel3 &lt;- runMLwiN(normexam ~ 1 + standlrt + (1 + standlrt | school)
                      + (1 + standlrt | student), data = tutorial))

# Logit link with cons specified as denominator
# Note level 1 ID not explicitly specified
# E.g. see demo(UserGuide09)
data(bang, package = 'R2MLwiN')
(mymodel4 &lt;- runMLwiN(logit(use, cons) ~ 1 + lc + age + (1 | district),
                      D = 'Binomial', data = bang))

# Mixed response model
# Note using MCMC estimation (EstM = 1)
# Normal (english) and Bernoulli (behaviour) distributed responses
# probit link modelling behaviour with cons as denominator
# E.g. see demo(MCMCGuide19)
data(jspmix1, package = 'R2MLwiN')
(mymodel &lt;- runMLwiN(c(english, probit(behaviour, cons)) ~
                     1 + sex + ravens + fluent[1] + (1 | school) + (1[1] | id),
                     D = c('Mixed', 'Normal', 'Binomial'),
                     estoptions = list(EstM = 1,
                     mcmcMeth = list(fixM = 1, residM = 1, Lev1VarM = 1)),
                     data = jspmix1))

## End(Not run)

</code></pre>


</div>