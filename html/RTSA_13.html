<div class="container">

<table style="width: 100%;"><tr>
<td>RTSA</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>R version of Trial Sequential Analysis. Used for designing and analysing sequential meta-analyses.</h2>

<h3>Description</h3>

<p>R version of Trial Sequential Analysis. Used for designing and analysing sequential meta-analyses.
</p>


<h3>Usage</h3>

<pre><code class="language-R">RTSA(
  type = "design",
  outcome = NULL,
  side = 2,
  alpha = 0.05,
  beta = 0.1,
  futility = "none",
  es_alpha = "esOF",
  es_beta = NULL,
  timing = NULL,
  data = NULL,
  design = NULL,
  ana_times = NULL,
  fixed = FALSE,
  mc = NULL,
  RRR = NULL,
  sd_mc = NULL,
  pC = NULL,
  weights = "MH",
  re_method = "DL_HKSJ",
  tau_ci_method = "BJ",
  gamma = NULL,
  rho = NULL,
  study = NULL,
  cont_vartype = "equal",
  zero_adj = 0.5,
  tau2 = NULL,
  I2 = NULL,
  D2 = NULL,
  trials = NULL,
  final_analysis = NULL,
  inf_type = "sw",
  conf_level = 0.95,
  random_adj = "tau2",
  power_adj = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>Type of RTSA. Options are "design" or "analysis".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outcome</code></td>
<td>
<p>Outcome metric. Options are: RR (risk ratio/relative risk), OR (odds ratio), RD (risk difference) and MD (mean difference).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>side</code></td>
<td>
<p>Whether a 1- or 2-sided hypothesis test is used. Options are 1 or 2. Default is 2.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>The level of type I error as a percentage, the default is 0.05 corresponding to 5%.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>beta</code></td>
<td>
<p>The level of type II error as a percentage, the default is 0.1 corresponding to 10%.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>futility</code></td>
<td>
<p>Futility boundaries added to design. Options are: none, non-binding and binding. Default is "none".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>es_alpha</code></td>
<td>
<p>The spending function for alpha-spending. Options are: esOF (Lan &amp; DeMets version of O'Brien-Fleming), esPoc (Lan &amp; DeMets version of Pocock), HSDC (Hwang Sihi and DeCani) and rho (rho family).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>es_beta</code></td>
<td>
<p>The spending function for beta-spending. For options see es_alpha.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timing</code></td>
<td>
<p>Expected timings of interim analyses when type = "design". Defaults to NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data.frame containing the study results. The data set must containing a specific set of columns. These are respectively 'eI' (events in intervention group), 'eC' (events in control group), 'nC' (participants intervention group) or 'nI' (participants control group) for discrete data, or, 'mI' (mean intervention group), 'mC' (mean control group), 'sdI' (standard error intervention group), 'sdC' (standard error control group),'nC' (participants intervention group) and 'nI' (participants control group)  for continuous outcomes. Preferable also a 'study' column as an indicator of study.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>design</code></td>
<td>
<p>RTSA object where type is design.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ana_times</code></td>
<td>
<p>An optional vector of analysis times. Used if the sequential analysis is not done for all studies included in the meta-analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fixed</code></td>
<td>
<p>Should only a fixed-effect meta-analysis be computed. Default is FALSE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mc</code></td>
<td>
<p>Minimal clinical relevant outcome value</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>RRR</code></td>
<td>
<p>Relative risk reduction. Used for binary outcomes with outcome metric RR. Argument mc can be used instead. Must be a value between 0 and 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sd_mc</code></td>
<td>
<p>The expected standard deviation. Used for sample size calculation for mean differences.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pC</code></td>
<td>
<p>The expected probability of event in the control group. Used for sample size calculation for binary outcomes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>Weighting method options include IV (inverse-variance) and MH (Mantel-Haenszel). Defaults to MH.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>re_method</code></td>
<td>
<p>Method for calculating the estimate of heterogeneity, tau^2, and the random-effects meta-analysis variance. Options are "DL" for DerSimonian-Laird and "DL_HKSJ" for the Hartung-Knapp-Sidik-Jonkman adjustment of the DerSimonian-Laird estimator.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tau_ci_method</code></td>
<td>
<p>Method for calculating confidence intervals for the estimated heterogeneity tau^2. Options are "QP" for Q-profiling and "BJ" for Biggelstaff ....</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gamma</code></td>
<td>
<p>Parameter for the HSDC error spending function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rho</code></td>
<td>
<p>Parameter for the rho family error spending function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>study</code></td>
<td>
<p>An optional vector of study names and perhaps year of study. Defaults to NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cont_vartype</code></td>
<td>
<p>For mean difference outcomes, do we expect the variance in the different groups to be "equal" or "non-equal".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zero_adj</code></td>
<td>
<p>Zero adjustment. Options for now is 0.5.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tau2</code></td>
<td>
<p>Heterogeneity estimate. Used for sample and trial size calculation. Defaults to NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>I2</code></td>
<td>
<p>Inconsistency estimate. Used for sample and trial size calculation. Defaults to NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>D2</code></td>
<td>
<p>Diversity estimate. Used for sample and trial size calculation. Defaults to NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trials</code></td>
<td>
<p>Number of anticipated extra trials. Used for heterogeneity adjustment by tau2.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>final_analysis</code></td>
<td>
<p>Whether or not the current analysis is the final analysis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>inf_type</code></td>
<td>
<p>Stopping time confidence interval. Options for now is sw (stage-wise).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf_level</code></td>
<td>
<p>Confidence level on stopping time confidence interval.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>random_adj</code></td>
<td>
<p>The sample size adjustment based on presence of heterogeneity. Options are "D2" (Diversity), "I2" (Inconsistency) and "tau2" (the heterogeneity estimate). Default is "tau2".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>power_adj</code></td>
<td>
<p>Whether the sample size should be adjusted by the sequential design. Defaults to TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other arguments</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A RTSA object, a list of five elements:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>settings</code></td>
<td>
<p>A list containing all of the settings used in the <code>RTSA</code> call. See Arguments.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ris</code></td>
<td>
<p>List containing sample and trial size calculations for a non-sequential meta-analysis. See documentation for <code>ris</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bounds</code></td>
<td>
<p>List of stopping boundaries, timing of trials and more. See documentation for <code>boundaries</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>results</code></td>
<td>
<p>List of 3 to 7 elements. <code>AIS</code> Achieved information size. <code>RIS</code> Fixed-effect required information size for a non-sequential meta-analysis. <code>SMA_RIS</code> RIS adjusted for sequential analysis. <code>HARIS</code> Heterogeneity adjusted required information size for a non-sequential meta-analysis. <code>SMA_HARIS</code> HARIS adjusted for sequential analysis. <code>results_df</code> a data.frame of inference, see documentation for <code>inference</code> function.  <code>seq_inf</code> a list of conditional inference, see documentation for <code>inference</code> function. <code>metaanalysis</code> A metaanalysis object, see documentation for <code>metaanalysis</code> function. <code>design_df</code> a data.frame containing the stopping boundaries and timings from the design.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>warnings</code></td>
<td>
<p>List of warnings</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
### Retrospective sequential meta-analysis:
# A RRR of 20% is expected which gives mc = 1 - RRR = 0.8. 
# No futility boundaries
data(perioOxy)
RTSA(type = "analysis", data = perioOxy, outcome = "RR", mc = 0.8, side = 2,
 alpha = 0.05, beta = 0.2, es_alpha = "esOF")

# Set binding futility boundaries
# And use Lan and DeMets' version of Pocock stopping boundaries 
RTSA(type = "analysis", data = perioOxy, outcome = "RR", mc = 0.8, side = 2,
 alpha = 0.05, beta = 0.2, es_alpha = "esOF", futility = "binding",
 es_beta = "esPoc", random_adj = "D2")

# Set non-binding futility boundaries
RTSA(type = "analysis", data = perioOxy, outcome = "RR", mc = 0.8, side = 2,
 alpha = 0.05, beta = 0.2, es_alpha = "esOF", futility = "non-binding",
 es_beta = "esOF")
 
### Design a prospective sequential meta-analysis
# For continuous data without expected heterogeneity
RTSA(type = "design", outcome = "MD", mc = 5, sd_mc = 10, side = 1, 
timing = c(0.33, 0.66, 1), fixed = TRUE,
alpha = 0.025, beta = 0.1, es_alpha = "esOF", futility = "non-binding", 
es_beta = "esPoc")

# For binary outcome
RTSA(type = "design", outcome = "RR", mc = 0.75, side = 1, 
timing = c(0.33, 0.66, 1), pC = 0.1, D2 = 0.1, 
alpha = 0.025, beta = 0.2, es_alpha = "esOF", futility = "non-binding", 
es_beta = "esOF")

# extract sample size calculation
out_rtsa &lt;-  RTSA(type = "design", outcome = "RR", mc = 0.75, side = 1, 
timing = c(0.33, 0.66, 1), pC = 0.1, D2 = 0.1, 
alpha = 0.025, beta = 0.2, es_alpha = "esOF", futility = "non-binding", 
es_beta = "esOF")
out_rtsa$ris

# plot the design
plot(out_rtsa)

# update the design with data as it accumulates (here toy-data)
fake_data &lt;- data.frame(eI = c(10,10), eC = c(13, 11), nI = c(750, 750),
nC = c(750,750))
RTSA(type = "analysis", design = out_rtsa, data = fake_data)

# plot the analysis
an_rtsa &lt;- RTSA(type = "analysis", design = out_rtsa, data = fake_data)
plot(an_rtsa)

## End(Not run)
</code></pre>


</div>