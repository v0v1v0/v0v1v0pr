<div class="container">

<table style="width: 100%;"><tr>
<td>select_nodes</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Apply tquery to initiate reshape operations</h2>

<h3>Description</h3>

<p>Apply tquery to initiate reshape operations
</p>


<h3>Usage</h3>

<pre><code class="language-R">select_nodes(
  tokens,
  tquery,
  fill = TRUE,
  fill_only_first = TRUE,
  .one_per_sentence = FALSE,
  .order = 1
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>tokens</code></td>
<td>
<p>A tokenIndex data.table, or any data.frame coercible with as_tokenindex.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tquery</code></td>
<td>
<p>A tquery that selects and labels the nodes that are used in the reshape operations</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fill</code></td>
<td>
<p>Logical, should fill be used?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fill_only_first</code></td>
<td>
<p>Logical, should a node only be filled once, with the nearest (first) labeled node?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.one_per_sentence</code></td>
<td>
<p>If true, only one match per sentence is used, giving priority to paterns closest to the root (or fartest from the root if .order = -1). 
This is sometimes necessary to deal with recursion.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.order</code></td>
<td>
<p>If .one_per_sentence is used, .order determines whether the paterns closest to (1) or farthest away (-1) are used.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A tokenIndex with a .nodes attribute, that enables the use of reshape operations on the selected nodes
</p>


<h3>Examples</h3>

<pre><code class="language-R">tokens = tokens_spacy[tokens_spacy$doc_id == 'text4',]

## use a tquery to label the nodes that you want to manipulate
tq = tquery(relation = "relcl", label = "relative_clause")

## apply query to select nodes
tokens2 = select_nodes(tokens, tq) 

## as an example, we make the parent of the relative_clause
## nodes NA, effectively cutting of the relcl from the tree
tokens2 = mutate_nodes(tokens2, "relative_clause", parent=NA)

tokens2


if (interactive()) plot_tree(tokens2)

## this is designed to work nicely with magrittr piping
if (interactive()) {
tokens %&gt;%
  select_nodes(tq) %&gt;%
  mutate_nodes("relative_clause", parent=NA) %&gt;%
  plot_tree()
}

</code></pre>


</div>