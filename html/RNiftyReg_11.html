<div class="container">

<table style="width: 100%;"><tr>
<td>buildAffine</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Build an affine matrix up from its constituent transformations</h2>

<h3>Description</h3>

<p>This function does the opposite to <code>decomposeAffine</code>, building
up an affine matrix from its components. It can be useful for testing, or
for rescaling images.
</p>


<h3>Usage</h3>

<pre><code class="language-R">buildAffine(translation = c(0, 0, 0), scales = c(1, 1, 1), skews = c(0,
  0, 0), angles = c(0, 0, 0), source = NULL, target = NULL,
  anchor = c("none", "origin", "centre", "center"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>translation</code></td>
<td>
<p>Translations along each axis, in <code>pixunits</code>
units. May also be a list, such as that produced by
<code>decomposeAffine</code>, with elements for translation, scales,
skews and angles.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scales</code></td>
<td>
<p>Scale factors along each axis.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>skews</code></td>
<td>
<p>Skews in the XY, XZ and YZ planes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>angles</code></td>
<td>
<p>Roll, pitch and yaw rotation angles, in radians. If
<code>source</code> is two-dimensional, a single angle will be interpreted as
being in the plane as expected.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>source</code></td>
<td>
<p>The source image for the transformation (required).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>target</code></td>
<td>
<p>The target image for the transformation. If <code>NULL</code> (the
default), it will be equal to <code>source</code>, or a rescaled version of it
if any of the <code>scales</code> are not 1. In the latter case the scales will
be reset back to 1 to produce the right effect.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>anchor</code></td>
<td>
<p>The fixed point for the transformation. Setting this parameter
to a value other than <code>"none"</code> will override the <code>translation</code>
parameter, with the final translation set to ensure that the requested
point remains in the same place after transformation.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A 4x4 affine matrix representing the composite transformation. Note
that NiftyReg affines logically transform backwards, from target to source
space, so the matrix may be the inverse of what is expected.
</p>


<h3>Author(s)</h3>

<p>Jon Clayden &lt;code@clayden.org&gt;
</p>


<h3>See Also</h3>

<p><code>decomposeAffine</code>, <code>isAffine</code>
</p>


</div>