<div class="container">

<table style="width: 100%;"><tr>
<td>rcompendium-package</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create a package or research compendium structure</h2>

<h3>Description</h3>

<p><code>rcompendium</code> makes easier the creation of R packages or research compendia
(i.e. a predefined files/folders structure) so that users can focus on the
code/analysis instead of wasting time organizing files. A full ready-to-work
structure is set up with some additional features: version control, remote
repository creation, CI/CD configuration (check package integrity under
several OS, test code with 'testthat', and build and deploy website using
'pkgdown').
</p>


<h3>Recommended workflow</h3>


<ol>
<li>
<p> Store your credentials (given and family names, email, ORCID, etc.) with
<code>set_credentials()</code> (if not already done);
</p>
</li>
<li>
<p> Create an new empty RStudio project;
</p>
</li>
<li>
<p> Run <code>new_package()</code> to create a new package structure or
<code>new_compendium()</code> to create a new research compendium structure;
</p>
</li>
<li>
<p> Edit some metadata in <code>DESCRIPTION</code>, <code>CITATION</code>, and <code>README.Rmd</code>;
</p>
</li>
<li>
<p> Start working (add data, write and document R functions, etc.);
</p>
</li>
<li>
<p> And do not forget to commit your changes.
</p>
</li>
</ol>
<h3>Managing credentials</h3>

<p>You can use the arguments <code>given</code>, <code>family</code>, <code>email</code>, and <code>orcid</code>
directly with the functions <code style="white-space: pre;">⁠new_*()⁠</code> and <code style="white-space: pre;">⁠add_*()⁠</code>. But if you create
a lot a projects (packages and/or compendia) it can be frustrating in the
long run.
</p>
<p>An alternative way is to use <strong>ONCE AND FOR ALL</strong> the function
<code>set_credentials()</code> to permanently store this information in the
<code style="white-space: pre;">⁠~/.Rprofile⁠</code> file. If these arguments are set to <code>NULL</code> while calling any
function of the package, <code>rcompendium</code> will search their values in this file.
It will save your time (it's the purpose of this package).
</p>
<p>Even if you have stored your credentials in the <code style="white-space: pre;">⁠~/.Rprofile⁠</code> file you will
always be able to modify them on-the-fly (i.e. by using credentials arguments
in the functions <code style="white-space: pre;">⁠new_*()⁠</code> and <code style="white-space: pre;">⁠add_*()⁠</code>) or permanently by re-running
<code>set_credentials()</code>.
</p>


<h3>Configuring git</h3>

<p>To see if <strong>git</strong> is correctly configured on your laptop, run
<code>gh::gh_whoami()</code>. You should see something like:
</p>
<div class="sourceCode"><pre>{
  "name": "John Doe",
  "login": "jdoe",
  "html_url": "https://github.com/jdoe",
  ...
}
</pre></div>
<p>Otherwise you might need to run:
</p>
<div class="sourceCode"><pre>gert::git_config_global_set(name  = "user.name", 
                            value = "John Doe")
                            
gert::git_config_global_set(name  = "user.email", 
                            value = "john.doe@domain.com")
                            
gert::git_config_global_set(name  = "github.user", 
                            value = "jdoe")
</pre></div>
<p>See <code>gert::git_config_global_set()</code> for further information.
</p>


<h3>Creating a GitHub repo</h3>

<p>To create the GitHub repository directly from R, the package <code>rcompendium</code>
uses the function <code>usethis::use_github()</code>, a client to the GitHub REST API.
The interaction with this API required an authentication method: a
<strong>GITHUB PAT</strong> (Personal Access Token).
</p>
<p>If you don't have a <strong>GITHUB PAT</strong> locally stored, you must:
</p>

<ol>
<li>
<p> Visit the page <a href="https://github.com/settings/tokens">https://github.com/settings/tokens</a> and create a new
token;
</p>
</li>
<li>
<p> Store it in the <code style="white-space: pre;">⁠~/.Renviron⁠</code> file by using <code>usethis::edit_r_environ()</code>
and adding the following line: <code>GITHUB_PAT='ghp_99z9...z9'</code>.
</p>
</li>
</ol>
<p>Run <code>usethis::gh_token_help()</code> for more information about getting and
configuring a <strong>GITHUB PAT</strong>.
</p>
<p>If everything is well configured, you should see something like this after
calling <code>gh::gh_whoami()</code>:
</p>
<div class="sourceCode"><pre>{
  "name": "John Doe",
  "login": "jdoe",
  "html_url": "https://github.com/jdoe",
  "scopes": "repo, workflow",
  "token": "ghp_...z99Z"
}
</pre></div>


<h3>Resources</h3>


<ul>
<li>
<p> Developing an R package:
<a href="https://frbcesab.github.io/rcompendium/articles/developing_a_package.html">https://frbcesab.github.io/rcompendium/articles/developing_a_package.html</a>
</p>
</li>
<li>
<p> Working with a compendium:
<a href="https://frbcesab.github.io/rcompendium/articles/working_with_a_compendium.html">https://frbcesab.github.io/rcompendium/articles/working_with_a_compendium.html</a>
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p><strong>Maintainer</strong>: Nicolas Casajus <a href="mailto:nicolas.casajus@fondationbiodiversite.fr">nicolas.casajus@fondationbiodiversite.fr</a> (<a href="https://orcid.org/0000-0002-5537-5294">ORCID</a>) [copyright holder]
</p>


<h3>See Also</h3>

<p>Useful links:
</p>

<ul>
<li> <p><a href="https://github.com/FRBCesab/rcompendium">https://github.com/FRBCesab/rcompendium</a>
</p>
</li>
<li> <p><a href="https://frbcesab.github.io/rcompendium/">https://frbcesab.github.io/rcompendium/</a>
</p>
</li>
<li>
<p> Report bugs at <a href="https://github.com/FRBCesab/rcompendium/issues">https://github.com/FRBCesab/rcompendium/issues</a>
</p>
</li>
</ul>
</div>