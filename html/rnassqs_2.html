<div class="container">

<table style="width: 100%;"><tr>
<td>nassqs</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Get data and return a data frame</h2>

<h3>Description</h3>

<p>The primary function in the <code>rnassqs</code> package, <code>nassqs</code> makes a HTTP GET
request to the USDA-NASS Quick Stats API and returns the data parsed as a
data.frame, plain text, or list. Various other functions make use of <code>nassqs</code>
to make specific queries. For a data request the Quick Stats API returns
JSON that when parsed to a data.frame contains 39 columns and a varying
number of rows depending on the query. Unfortunately there is not a way to
restrict the number of columns.
</p>


<h3>Usage</h3>

<pre><code class="language-R">nassqs(
  ...,
  agg_level_desc = NULL,
  asd_code = NULL,
  asd_desc = NULL,
  begin_code = NULL,
  class_desc = NULL,
  commodity_desc = NULL,
  congr_district_code = NULL,
  country_code = NULL,
  country_name = NULL,
  county_ansi = NULL,
  county_code = NULL,
  county_name = NULL,
  domaincat_desc = NULL,
  domain_desc = NULL,
  end_code = NULL,
  freq_desc = NULL,
  group_desc = NULL,
  load_time = NULL,
  location_desc = NULL,
  prodn_practice_desc = NULL,
  reference_period_desc = NULL,
  region_desc = NULL,
  sector_desc = NULL,
  short_desc = NULL,
  source_desc = NULL,
  state_alpha = NULL,
  state_ansi = NULL,
  state_fips_code = NULL,
  state_name = NULL,
  statisticcat_desc = NULL,
  unit_desc = NULL,
  util_practice_desc = NULL,
  watershed_code = NULL,
  watershed_desc = NULL,
  week_ending = NULL,
  year = NULL,
  zip_5 = NULL,
  as_numeric = TRUE,
  progress_bar = TRUE,
  format = "csv",
  as = "data.frame"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>either a named list of parameters or a series of additional
parameters that include operations, e.g. <code>year__GE = 2010</code> for all
records in 2010 and later. See <code>details</code> for information on available
operators.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>agg_level_desc</code></td>
<td>
<p>Geographic level ("AGRICULTURAL DISTRICT", "COUNTY",
"INTERNATIONAL", "NATIONAL", "REGION : MULTI-STATE", "REGION : SUB-STATE",
"STATE", "WATERSHED", or "ZIP CODE").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>asd_code</code></td>
<td>
<p>Agriculture statistical district code.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>asd_desc</code></td>
<td>
<p>Agriculture statistical district name / description.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>begin_code</code></td>
<td>
<p>Week number indicating when the data series begins.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>class_desc</code></td>
<td>
<p>Commodity class.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>commodity_desc</code></td>
<td>
<p>Commodity, the primary subject of interest (e.g.,
"CORN", "CATTLE", "LABOR", "TRACTORS", "OPERATORS").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>congr_district_code</code></td>
<td>
<p>Congressional District codes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>country_code</code></td>
<td>
<p>Country code.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>country_name</code></td>
<td>
<p>Country name.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>county_ansi</code></td>
<td>
<p>County ANSI code.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>county_code</code></td>
<td>
<p>County FIPS code.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>county_name</code></td>
<td>
<p>County name.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>domaincat_desc</code></td>
<td>
<p>Domain category within a domain (e.g.,
under domain_desc = "SALES", domain categories include $1,000 TO $9,999,
$10,000 TO $19,999, etc).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>domain_desc</code></td>
<td>
<p>Domain, a characteristic of operations that produce a
particular commodity (e.g., "ECONOMIC CLASS", "AREA OPERATED", "NAICS
CLASSIFICATION", "SALES"). For chemical usage data, the domain describes
the type of chemical applied to the commodity. The domain_desc: = "TOTAL"
will have no further breakouts; i.e., the data value pertains completely
to the short_desc.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>end_code</code></td>
<td>
<p>= Week number that the data series ends.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>freq_desc</code></td>
<td>
<p>Time period type covered by the data ("ANNUAL", "SEASON",
"MONTHLY", "WEEKLY", "POINT IN TIME"). "MONTHLY" often covers more than one
month. "POINT IN TIME" is for a particular day.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group_desc</code></td>
<td>
<p>Commodity group within a sector (e.g., under sector_desc =
"CROPS", the groups are "FIELD CROPS", "FRUIT &amp; TREE NUTS", "HORTICULTURE",
and "VEGETABLES").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>load_time</code></td>
<td>
<p>Date and time of the data load, e.g. "2015-02-17 16:05:20".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>location_desc</code></td>
<td>
<p>Location code, e.g. 5-digit fips code for counties.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prodn_practice_desc</code></td>
<td>
<p>Production practice, (e.g. "UNDER PROTECTION",
"OWNED, RIGHTS, LEASED", "ORGANIC, TRANSITIONING", "HIRED MANAGER").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reference_period_desc</code></td>
<td>
<p>Reference period of the data (e.g. "JUN",
"MID SEP", "WEEK #32").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>region_desc</code></td>
<td>
<p>Region name (e.g. "TEXAS", "WA &amp; OR", "WEST COAST",
"UMATILLA").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sector_desc</code></td>
<td>
<p>Sector, the five high level, broad categories useful to
narrow down choices. ("ANIMALS &amp; PRODUCTS", "CROPS", "DEMOGRAPHICS",
"ECONOMICS", or "ENVIRONMENTAL").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>short_desc</code></td>
<td>
<p>A concatenation of six columns: <code>commodity_desc</code>,
<code>class_desc</code>, <code>prodn_practice_desc</code>, <code>util_practice_desc</code>,
<code>statisticcat_desc</code>, and <code>unit_desc</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>source_desc</code></td>
<td>
<p>Source of data ("CENSUS" or "SURVEY"). Census program
includes the Census of Ag as well as follow up projects. Survey program
includes national, state, and county surveys.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>state_alpha</code></td>
<td>
<p>2-character state abbreviation, e.g. "NM".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>state_ansi</code></td>
<td>
<p>State ANSI code.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>state_fips_code</code></td>
<td>
<p>State FIPS code.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>state_name</code></td>
<td>
<p>Full name of the state, e.g. "ALABAMA".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>statisticcat_desc</code></td>
<td>
<p>Statistical category of the data (e.g.,
"AREA HARVESTED", "PRICE RECEIVED", "INVENTORY", "SALES").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>unit_desc</code></td>
<td>
<p>The units of the data (e.g. "TONS / ACRE", "TREES",
"OPERATIONS", "NUMBER", "LB / ACRE", "BU / PLANTED ACRE").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>util_practice_desc</code></td>
<td>
<p>Utilization practice (e.g. "WIND", "SUGAR", "SILAGE",
"ONCE REFINED", "FEED", "ANIMAL FEED").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>watershed_code</code></td>
<td>
<p>Watershed code as 8-digit HUC (e.g. "13020100").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>watershed_desc</code></td>
<td>
<p>Watershed/HUC name (e.g. "UPPER COLORADO").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>week_ending</code></td>
<td>
<p>Date of ending week (e.g. "1975-11-22").</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>year</code></td>
<td>
<p>Year of the data. Conditional values are possible by appending an
operation to the parameter, e.g. "year__GE = 2020" will return all records
with year &gt;= 2020. See <code>details</code> for more on operations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zip_5</code></td>
<td>
<p>5-digit zip code.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>as_numeric</code></td>
<td>
<p>Whether to convert data to numeric format. Conversion will
replace missing notation such as "(D)" or "(Z)" with NA, but removes the
need to convert to numeric format after querying.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>progress_bar</code></td>
<td>
<p>Whether or not to display the progress bar.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>format</code></td>
<td>
<p>The format to return the query in. Only useful if as = "text".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>as</code></td>
<td>
<p>whether to return a data.frame, list, or text string. See
<code>nassqs_parse()</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>nassqs()</code> accepts all parameters that are accepted by the USDA-NASS Quick
Stats. These parameters are listed in <code>nassqs_params()</code>, and are used to form
the data query.
</p>
<p>Parameters can be modified by operations, which are appended to the parameter
name. For example, "year__GE = 2020" will fetch data in 2020 and after.
Operations can take the following form:
</p>

<ul>
<li>
<p> __LE: less than or equal (&lt;=)
</p>
</li>
<li>
<p> __LT: less than (&lt;)
</p>
</li>
<li>
<p> __GT: greater than (&gt;)
</p>
</li>
<li>
<p> __GE: = &gt;=
</p>
</li>
<li>
<p> __LIKE = like
</p>
</li>
<li>
<p> __NOT_LIKE = not like
</p>
</li>
<li>
<p> __NE = not equal
</p>
</li>
</ul>
<h3>Value</h3>

<p>a data frame, list, or text string of requested data.
</p>


<h3>See Also</h3>

<p><code>nassqs_GET()</code>, <code>nassqs_parse()</code>, <code>nassqs_yields()</code>, <code>nassqs_acres()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
  # Get corn yields in Virginia in 2012
  params &lt;- list(commodity_desc = "CORN",
                 year = 2012,
                 agg_level_desc = "COUNTY",
                 state_alpha = "VA",
                 statisticcat_desc = "YIELD")
  yields &lt;- nassqs(params)
  head(yields)

## End(Not run)
</code></pre>


</div>