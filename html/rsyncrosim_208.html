<div class="container">

<table style="width: 100%;"><tr>
<td>sqlStatement</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Construct an SQLite query</h2>

<h3>Description</h3>

<p>Creates <code>SELECT</code>, <code>GROUP BY</code> and <code>WHERE</code> SQL statements.
The resulting list of SQL statements will be converted to an SQLite database
query by the <code>datasheet</code> function.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sqlStatement(
  groupBy = NULL,
  aggregate = NULL,
  aggregateFunction = "SUM",
  where = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>groupBy</code></td>
<td>
<p>character string or vector of these. Vector of variables
(column names) to <code>GROUP BY</code> (optional)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aggregate</code></td>
<td>
<p>character string of vector of these. Vector of variables
(column names) to aggregate using <code>aggregateFunction</code> (optional)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aggregateFunction</code></td>
<td>
<p>character string. An SQL aggregate function
(e.g. <code>SUM</code>, <code>COUNT</code>). Default is <code>SUM</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>where</code></td>
<td>
<p>named list. A list of subset variables. Names are column names,
and elements are the values to be selected from each column (optional)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Variables are column names of the Datasheet. See column names using <code>datasheet(,empty=TRUE)</code>
Variables not included in <code>groupBy</code>, <code>aggregate</code> or <code>where</code> will be dropped from the table.
Note that it is not possible to construct a complete SQL query at this stage,
because the <code>datasheet</code> function may add ScenarioId and/or ProjectId to the query.
</p>


<h3>Value</h3>

<p>Returns a list of <code>SELECT</code>, <code>GROUP BY</code> and <code>WHERE</code> SQL statements used by the
<code>datasheet</code> function to construct an SQLite database query.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# Query total Amount for each combination of ScenarioId, Iteration, Timestep and StateLabelXID,
# including only Timesteps 0,1 and 2, and Iterations 3 and 4.
mySQL &lt;- sqlStatement(
  groupBy = c("ScenarioId", "Iteration", "Timestep"),
  aggregate = c("yCum"),
  aggregateFunction = "SUM",
  where = list(Timestep = c(0, 1, 2), Iteration = c(3, 4))
)
mySQL

## End(Not run)
## Not run: 
# The SQL statement can then be used in the datasheet function

# Set the file path and name of an existing SsimLibrary
myLibraryName &lt;- file.path("MyLibrary.ssim")

# Set the SyncroSim Session, SsimLibrary, Project, and Scenario
mySession &lt;- session()
myLibrary &lt;- ssimLibrary(name = myLibraryName,
                         session = mySession)
myProject &lt;- project(myLibrary, project = "Definitions")
myScenario &lt;- scenario(myProject, scenario = "My Scenario")

# Run Scenario to generate results
resultScenario &lt;- run(myScenario)

# Use the SQL statement when loading the Datasheet
myAggregatedDataFrame &lt;- datasheet(resultScenario, 
                                   name = "helloworldSpatial_OutputDatasheet",
                                   sqlStatement = mySQL)
                                   
# View aggregated DataFrame
myAggregatedDataFrame

## End(Not run)

</code></pre>


</div>