<div class="container">

<table style="width: 100%;"><tr>
<td>tabCoord</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Coordinate representation of compositional tables and a sample of compositional tables</h2>

<h3>Description</h3>

<p>tabCoord computes a system of orthonormal coordinates of a compositional table. 
Computation of either pivot coordinates or a coordinate system based on the given SBP is possible.
</p>
<p>tabCoordWrapper: For each compositional table in the sample <code>tabCoordWrapper</code> 
computes a system of orthonormal coordinates and provide a simple descriptive analysis. 
Computation of either pivot coordinates or a coordinate system based on the given SBP is possible.
</p>


<h3>Usage</h3>

<pre><code class="language-R">tabCoord(
  x = NULL,
  row.factor = NULL,
  col.factor = NULL,
  value = NULL,
  SBPr = NULL,
  SBPc = NULL,
  pivot = FALSE,
  print.res = FALSE
)

tabCoordWrapper(
  X,
  obs.ID = NULL,
  row.factor = NULL,
  col.factor = NULL,
  value = NULL,
  SBPr = NULL,
  SBPc = NULL,
  pivot = FALSE,
  test = FALSE,
  n.boot = 1000
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>a data frame containing variables representing row and column factors of the respective compositional table and variable with the values of the composition.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>row.factor</code></td>
<td>
<p>name of the variable representing the row factor. Needs to be stated with the quotation marks.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col.factor</code></td>
<td>
<p>name of the variable representing the column factor. Needs to be stated with the quotation marks.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>value</code></td>
<td>
<p>name of the variable representing the values of the composition. Needs to be stated with the quotation marks.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>SBPr</code></td>
<td>
<p>an <code class="reqn">I-1\times I</code> array defining the sequential binary partition of the values of the row factor, where I is the number of the row factor levels. The values assigned in the given step to the + group are marked by 1, values from  the - group by -1 and the rest by 0. If it is not provided, the pivot version of coordinates is constructed automatically.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>SBPc</code></td>
<td>
<p>an <code class="reqn">J-1\times J</code> array defining the sequential binary partition of the values of the column factor, where J is the number of the column factor levels. The values assigned in the given step to the + group are marked by 1, values from  the - group by -1 and the rest by 0. If it is not provided, the pivot version of coordinates is constructed automatically.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pivot</code></td>
<td>
<p>logical, default is FALSE. If TRUE, or one of the SBPs is not defined, its pivot version is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>print.res</code></td>
<td>
<p>logical, default is FALSE. If TRUE, the output is displayed in the Console.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>
<p>a data frame containing variables representing row and column factors of the respective compositional tables, variable with the values 
of the composition and variable distinguishing the observations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>obs.ID</code></td>
<td>
<p>name of the variable distinguishing the observations. Needs to be stated with the quotation marks.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>test</code></td>
<td>
<p>logical, default is <code>FALSE</code>. If <code>TRUE</code>, the bootstrap analysis of coordinates is provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.boot</code></td>
<td>
<p>number of bootstrap samples.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>tabCoord
</p>
<p>This transformation moves the IJ-part compositional tables 
from the simplex into a (IJ-1)-dimensional real space isometrically 
with respect to its two-factorial nature. 
The coordinate system is formed by two types of coordinates - balances and log odds-ratios.
</p>
<p>tabCoordWrapper: Each of n IJ-part compositional tables from the sample is with 
respect to its two-factorial nature isometrically transformed from the simplex 
into a (IJ-1)-dimensional real space. Sample mean values and standard deviations are 
computed and using bootstrap an estimate of 95 % confidence interval is given.
</p>


<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Coordinates</code></td>
<td>
<p>an array of orthonormal coordinates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Grap.rep</code></td>
<td>
<p>graphical representation of the coordinates. Parts denoted by <code style="white-space: pre;">⁠+⁠</code> form the groups in the numerator of the respective computational formula, parts <code style="white-space: pre;">⁠-⁠</code> form the denominator and parts <code style="white-space: pre;">⁠.⁠</code> are not involved in the given coordinate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Ind.coord</code></td>
<td>
<p>an array of row and column balances. Coordinate representation of the independent part of the table.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Int.coord</code></td>
<td>
<p>an array of OR coordinates. Coordinate representation of the interactive part of the table.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Contrast.matrix</code></td>
<td>
<p>contrast matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Log.ratios</code></td>
<td>
<p>an array of pure log-ratios between groups of parts without the normalizing constant.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Coda.table</code></td>
<td>
<p>table form of the given composition.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Bootstrap</code></td>
<td>
<p>array of sample means, standard deviations and bootstrap confidence intervals.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Tables</code></td>
<td>
<p>Table form of the given compositions.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Kamila Facevicova
</p>


<h3>References</h3>

<p>Facevicova, K., Hron, K., Todorov, V. and M. Templ (2018) 
General approach to coordinate representation of compositional tables. 
Scandinavian Journal of Statistics, 45(4), 879–899.
</p>


<h3>See Also</h3>

<p><code>cubeCoord</code> 
<code>cubeCoordWrapper</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">###################
### Coordinate representation of a CoDa Table

# example from Fa\v cevicov\'a (2018):
data(manu_abs)
manu_USA &lt;- manu_abs[which(manu_abs$country=='USA'),]
manu_USA$output &lt;- factor(manu_USA$output, levels=c('LAB', 'SUR', 'INP'))

# pivot coordinates
tabCoord(manu_USA, row.factor = 'output', col.factor = 'isic', value='value')

# SBPs defined in paper
r &lt;- rbind(c(-1,-1,1), c(-1,1,0))
c &lt;- rbind(c(-1,-1,-1,-1,1), c(-1,-1,-1,1,0), c(-1,-1,1,0,0), c(-1,1,0,0,0))
tabCoord(manu_USA, row.factor = 'output', col.factor = 'isic', value='value', SBPr=r, SBPc=c)

###################
### Analysis of a sample of CoDa Tables

# example from Fa\v cevicov\'a (2018):
data(manu_abs)

### Compositional tables approach,
### analysis of the relative structure.
### An example from Facevi\v cov\'a (2018)

manu_abs$output &lt;- factor(manu_abs$output, levels=c('LAB', 'SUR', 'INP'))

# pivot coordinates
tabCoordWrapper(manu_abs, obs.ID='country',
row.factor = 'output', col.factor = 'isic', value='value')

# SBPs defined in paper
r &lt;- rbind(c(-1,-1,1), c(-1,1,0))
c &lt;- rbind(c(-1,-1,-1,-1,1), c(-1,-1,-1,1,0), 
c(-1,-1,1,0,0), c(-1,1,0,0,0))
tabCoordWrapper(manu_abs, obs.ID='country',row.factor = 'output', 
col.factor = 'isic', value='value', SBPr=r, SBPc=c, test=TRUE)

### Classical approach,
### generalized linear mixed effect model.

## Not run: 
library(lme4)
glmer(value~output*as.factor(isic)+(1|country),data=manu_abs,family=poisson)

## End(Not run)
</code></pre>


</div>