<div class="container">

<table style="width: 100%;"><tr>
<td>SSplotComps</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plot composition data and fits.</h2>

<h3>Description</h3>

<p>Plot composition data and fits from Stock Synthesis output.  Multi-figure
plots depend on <code>make_multifig</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">SSplotComps(
  replist,
  subplots = c(1:10, 21, 24),
  kind = "LEN",
  sizemethod = 1,
  aalyear = -1,
  aalbin = -1,
  plot = TRUE,
  print = FALSE,
  fleets = "all",
  fleetnames = "default",
  sexes = "all",
  yupper = 0.4,
  datonly = FALSE,
  samplesizeplots = TRUE,
  compresidplots = TRUE,
  bub = FALSE,
  showyears = TRUE,
  showsampsize = TRUE,
  showeffN = TRUE,
  aggregates_by_mkt = FALSE,
  sampsizeline = FALSE,
  effNline = FALSE,
  minnbubble = 3,
  pntscalar = NULL,
  scalebubbles = FALSE,
  cexZ1 = 1.5,
  bublegend = TRUE,
  colvec = c(rgb(1, 0, 0, 0.7), rgb(0, 0, 1, 0.7), rgb(0.1, 0.1, 0.1, 0.7)),
  linescol = c(rgb(0, 0.5, 0, 0.7), rgb(0.8, 0, 0, 0.7), rgb(0, 0, 0.8, 0.7)),
  xlas = 0,
  ylas = NULL,
  axis1 = NULL,
  axis2 = NULL,
  axis1labs = NULL,
  sizebinlabs = NULL,
  blue = rgb(0, 0, 1, 0.7),
  red = rgb(1, 0, 0, 0.7),
  pwidth = 6.5,
  pheight = 6.5,
  punits = "in",
  ptsize = 10,
  res = 300,
  plotdir = "default",
  cex.main = 1,
  linepos = 1,
  fitbar = FALSE,
  do.sqrt = TRUE,
  smooth = TRUE,
  cohortlines = c(),
  labels = c("Length (cm)", "Age (yr)", "Year", "Observed sample size",
    "Effective sample size", "Proportion", "cm", "Frequency", "Weight", "Length", "(mt)",
    "(numbers x1000)", "Stdev (Age)", "Conditional AAL plot, ", "Size bin"),
  printmkt = TRUE,
  printsex = TRUE,
  maxrows = 6,
  maxcols = 4,
  maxrows2 = 4,
  maxcols2 = 4,
  rows = 1,
  cols = 1,
  andre_oma = c(3, 0, 3, 0),
  andrerows = 4,
  fixdims = TRUE,
  fixdims2 = FALSE,
  maxneff = 5000,
  verbose = TRUE,
  scalebins = FALSE,
  addMeans = TRUE,
  mainTitle = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>replist</code></td>
<td>
<p>A list object created by <code>SS_output()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subplots</code></td>
<td>
<p>vector controlling which subplots to create
Numbering of subplots is as follows, where subplots 21 to 24
(aggregated across years) are provided first, and subplots
1 to 10 are all repeated for each fleet
</p>

<ul>
<li>
<p> 1 index data by fleet
</p>
</li>
<li>
<p> 1 multi-panel composition plot
</p>
</li>
<li>
<p> 2 single panel bubble plot for numbers at length or age
</p>
</li>
<li>
<p> 3 multi-panel bubble plots for conditional age-at-length
</p>
</li>
<li>
<p> 4 multi-panel plot of fit to conditional age-at-length for specific years
</p>
</li>
<li>
<p> 5 Pearson residuals for A-L key
</p>
</li>
<li>
<p> 6 multi-panel plot of point and line fit to conditional
age-at-length for specific length bins
</p>
</li>
<li>
<p> 7 sample size plot
</p>
</li>
<li>
<p> 8 TA1.8 Francis weighting plot
</p>
</li>
<li>
<p> 9 TA1.8 Francis weighting plot for conditional data
</p>
</li>
<li>
<p> 10 Andre's mean age and std. dev. in conditional AAL
</p>
</li>
<li>
<p> 21 composition by fleet aggregating across years
</p>
</li>
<li>
<p> 22 composition by fleet aggregating across years within each season
</p>
</li>
<li>
<p> 23 composition by fleet aggregating across seasons within a year
</p>
</li>
<li>
<p> 24 bubble plot comparison of length or age residuals
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>kind</code></td>
<td>
<p>indicator of type of plot can be "LEN", "SIZE", "AGE", "cond",
"GSTAGE", "GSTLEN", "L@A", or "W@A".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sizemethod</code></td>
<td>
<p>if kind = "SIZE" then this switch chooses which of the
generalized size bin methods will be plotted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aalyear</code></td>
<td>
<p>Years to plot multi-panel conditional age-at-length fits for
all length bins; must be in a "c(YYYY,YYYY)" format. Useful for checking the
fit of a dominant year class, critical time period, etc. Default=-1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aalbin</code></td>
<td>
<p>The length bin for which multi-panel plots of the fit to
conditional age-at-length data will be produced for all years.  Useful to
see if growth curves are ok, or to see the information on year classes move
through the conditional data. Default=-1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>plot to active plot device?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>print</code></td>
<td>
<p>print to PNG files?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fleets</code></td>
<td>
<p>optional vector to subset fleets for which plots will be made</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fleetnames</code></td>
<td>
<p>optional vector of fleet names to put in the labels</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sexes</code></td>
<td>
<p>which sexes to show plots for. Default="all" which will include
males, females, and unsexed. This option is not fully implemented for all
plots.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yupper</code></td>
<td>
<p>upper limit on ymax for polygon/histogram composition plots</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>datonly</code></td>
<td>
<p>make plots of data without fits?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>samplesizeplots</code></td>
<td>
<p>make sample size plots?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>compresidplots</code></td>
<td>
<p>make plots of residuals for fit to composition data?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bub</code></td>
<td>
<p>make bubble plot for numbers at age or size?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>showyears</code></td>
<td>
<p>Add labels for years to sample size plots?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>showsampsize</code></td>
<td>
<p>add sample sizes to plot</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>showeffN</code></td>
<td>
<p>add effective sample sizes to plot</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>aggregates_by_mkt</code></td>
<td>
<p>separate plots of aggregates across years
into different plots for each market category (retained, discarded)?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sampsizeline</code></td>
<td>
<p>show line for input sample sizes on top of conditional
age-at-length plots (TRUE/FALSE, still in development)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>effNline</code></td>
<td>
<p>show line for effective sample sizes on top of conditional
age-at-length plots (TRUE/FALSE, still in development)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minnbubble</code></td>
<td>
<p>number of unique x values before adding buffer. see
?bubble3 for more info.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pntscalar</code></td>
<td>
<p>This scalar defines the maximum bubble size for bubble
plots. This option is still available but a better choice is to use cexZ1
which allow the same scaling throughout all plots.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scalebubbles</code></td>
<td>
<p>scale data-only bubbles by sample size, not just
proportion within sample? Default=FALSE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cexZ1</code></td>
<td>
<p>Character expansion (cex) for point associated with value of 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bublegend</code></td>
<td>
<p>Add legend with example bubble sizes to bubble plots.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colvec</code></td>
<td>
<p>Vector of length 3 with colors for females, males, unsexed fish</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>linescol</code></td>
<td>
<p>Color for lines on top of polygons</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xlas</code></td>
<td>
<p>label style (las) input for x-axis. Default 0 has horizontal
labels, input 2 would provide vertical lables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ylas</code></td>
<td>
<p>label style (las) input for y-axis. Default NULL has horizontal
labels when all labels have fewer than 6 characters and vertical otherwise.
Input 0 would force vertical labels, and 1 would force horizontal.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>axis1</code></td>
<td>
<p>optional position of bottom axis values</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>axis2</code></td>
<td>
<p>optional position of left size axis values</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>axis1labs</code></td>
<td>
<p>optional vector of labels for axis1 (either NULL or needs to
match length of axis1)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sizebinlabs</code></td>
<td>
<p>Vector of size bin labels corresponding to the generalized
size frequency method</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>blue</code></td>
<td>
<p>What color to use for males in bubble plots (default is slightly
transparent blue)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>red</code></td>
<td>
<p>What color to use for females in bubble plots (default is slightly
transparent red)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pwidth</code></td>
<td>
<p>Default width of plots printed to files in units of
<code>punits</code>. The default is <code>pwidth=6.5</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pheight</code></td>
<td>
<p>Height of plots printed to png files in units of <code>punits</code>.
Default is designed to allow two plots per page, with <code>pheight_tall</code> used
for plots that work best with a taller format and a single plot per page.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>punits</code></td>
<td>
<p>Units for <code>pwidth</code> and <code>pheight</code>. Can be "px"
(pixels), "in" (inches), "cm" (centimeters), or "mm" (millimeters).
The default is <code>punits="in"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ptsize</code></td>
<td>
<p>Point size for plotted text in plots printed to files (see
<code>help("png")</code> in R for details).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>res</code></td>
<td>
<p>Resolution of plots printed to files.
The default is <code>res = 300</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plotdir</code></td>
<td>
<p>directory where PNG files will be written. by default it will
be the directory where the model was run.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex.main</code></td>
<td>
<p>character expansion parameter for plot titles</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>linepos</code></td>
<td>
<p>should lines be added before points (linepos=1) or after
(linepos=2)?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fitbar</code></td>
<td>
<p>show fit to bars instead of points</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>do.sqrt</code></td>
<td>
<p>scale bubbles based on sqrt of size vector. see ?bubble3 for
more info.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>smooth</code></td>
<td>
<p>add loess smoother to observed vs. expected index plots and
input vs. effective sample size?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cohortlines</code></td>
<td>
<p>optional vector of birth years for cohorts for which to
add growth curves to numbers at length bubble plots</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labels</code></td>
<td>
<p>vector of labels for plots (titles and axis labels)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>printmkt</code></td>
<td>
<p>show market categories in plot titles?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>printsex</code></td>
<td>
<p>show sex in plot titles?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxrows</code></td>
<td>
<p>maximum (or fixed) number or rows of panels in the plot</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxcols</code></td>
<td>
<p>maximum (or fixed) number or columns of panels in the plot</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxrows2</code></td>
<td>
<p>maximum number of rows for conditional age at length plots</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxcols2</code></td>
<td>
<p>maximum number of columns for conditional age at length
plots</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rows</code></td>
<td>
<p>number or rows to return to as default for next plots to come or
for single plots</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cols</code></td>
<td>
<p>number or cols to return to as default for next plots to come or
for single plots</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>andre_oma</code></td>
<td>
<p>Outer margins passed to Andre's multi-panel conditional
age-at-length plots.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>andrerows</code></td>
<td>
<p>Number of rows of Andre's conditional age-at-length plots
within each page. Default=3.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fixdims</code></td>
<td>
<p>fix the dimensions at maxrows by maxcols or resize based on
number of years of data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fixdims2</code></td>
<td>
<p>fix the dimensions at maxrows by maxcols in aggregate plots
or resize based on number of fleets</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxneff</code></td>
<td>
<p>the maximum value to include on plots of input and effective
sample size. Occasionally a calculation of effective N blows up to very
large numbers, rendering it impossible to observe the relationship for other
data. Default=5000.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>return updates of function progress to the R GUI?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scalebins</code></td>
<td>
<p>Rescale expected and observed proportions by dividing by
bin width for models where bins have different widths? Caution!: May not
work correctly in all cases.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>addMeans</code></td>
<td>
<p>Add parameter means in addition to medians for MCMC
posterior distributions in which the median and mean differ.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mainTitle</code></td>
<td>
<p>Logical indicating if a title for the plot should be produced</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments that will be passed to
the <code>par</code> command in the <code>make_multifig()</code> function.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Ian Taylor
</p>


<h3>See Also</h3>

<p><code>SS_plots()</code>, <code>make_multifig()</code>
</p>


</div>