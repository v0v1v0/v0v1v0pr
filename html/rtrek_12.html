<div class="container">

<table style="width: 100%;"><tr>
<td>stapi</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Retrieve Star Trek data from STAPI</h2>

<h3>Description</h3>

<p>Retrieve Star Trek data from the Star Trek API (STAPI).
</p>


<h3>Usage</h3>

<pre><code class="language-R">stapi(id, page = 1, uid = NULL, page_count = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>character, name of STAPI entity. See details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>page</code></td>
<td>
<p>integer vector, defaults to first page.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>uid</code></td>
<td>
<p><code>NULL</code> for search mode, character for extraction mode. See details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>page_count</code></td>
<td>
<p>logical, set to <code>TRUE</code> to do a preliminary check of the
total number a pages of results available for a potential entity search.
This will only have the impact of searching the first page.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>See <code>stapiEntities()</code> for all the currently available API entities. These are
the IDs for dataset collections or categories passed to <code>id</code>.
</p>
<p>The universal ID <code>uid</code> can be supplied to retrieve a more specific subset of
data. By default, <code>uid = NULL</code> and <code>stapi()</code> operates in search mode. As part
of a stepwise process, you can first use search mode. Then if the resulting
data frame includes a <code>uid</code> column, you can make a second call to the
function providing a specific <code>uid</code>. This puts <code>stapi()</code> into extraction mode
and will return satellite data associated with the unique entry from the
original general sweep of the entity <code>id</code>.
</p>
<p><code>rtrek</code> employs anti-DOS measures. It will not perform an API call to STAPI
more than once per second. To be an even better neighbor, you can increase
this wait time using <code>options()</code>, e.g. <code>options(rtrek_antidos = 10)</code> to
increase the minimum time between API calls to ten seconds. Values less than
one are ignored (defaulting back to one second) and a warning will be thrown
when making any API call if this is the case.
</p>
<p>Currently STAPI contains primarily real world data such as episode air dates,
movie metadata, or production company information. Fictional world data is
secondary and more limited.
</p>


<h3>Value</h3>

<p>a data frame in search mode, a list in extraction mode, and nothing
is returned in page count check mode but the result is printed to the console.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(dplyr)
stapi("character", page_count = TRUE) # check first
stapi("character", page = 2) |&gt; select(1:2)
Q &lt;- stapi("character", uid = "CHMA0000025118")
Q$episodes |&gt; select(uid, title, stardateFrom, stardateTo)

</code></pre>


</div>