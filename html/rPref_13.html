<div class="container">

<table style="width: 100%;"><tr>
<td>show.pref</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Partial Evaluation and String Output of Preferences</h2>

<h3>Description</h3>

<p>Functions to substitute variables and functions in preferences 
which can be calculated before the preference is evaluated on a data frame
and character output of preferences.
</p>


<h3>Usage</h3>

<pre><code class="language-R">show.pref(p, df = NULL)

## S4 method for signature 'preference'
as.character(x, ...)

pref.str(p, df = NULL)

partial.eval.pref(p, df = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>p, x</code></td>
<td>
<p>The preference to be shown or partially evaluated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>(optional) A data frame on which the preference operates. Used for partial evaluation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Optional arguments passed to <code>as.character</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function <code>pref.str</code> (or <code>as.character(p)</code> for a preference <code>p</code>) returns the preference string 
while <code>show.pref</code> outputs it directly to the console, preceded by <code>'[Preference]'</code>.
If <code>df</code> is specified, then a partial evaluation of the preference is done before converting it to a string. 
</p>
<p>The function <code>partial.eval.pref</code> (with given data frame <code>df</code>) partially evaluates the internal preference expression and 
returns again a preference object. All expressions in <code>p</code> are evaluated in the environment
where <code>p</code> was defined, except the the column names in <code>df</code> (which are potential attributes in <code>p</code>) 
and except the special variable <code>df__</code>, which accesses the entire data set (see <code>psel</code>).
The content of the data frame <code>df</code> does not matter; only <code>names(df)</code> is used to get the "free variables" in <code>p</code>.
</p>
<p>If <code>p</code> has already an associated data frame (see <code>assoc.df</code>), 
then a partial evaluation was already done when the data frame was associated.
In this case, the <code>df</code> parameter should not be used.
The association will not be changed if one of these function are called 
with a given data frame on a preference object having an associated data frame.
</p>


<h3>Partial Evaluation Before String Output</h3>

<p>The functions <code>show.pref</code> and <code>pref.str</code> have the optional parameter <code>df</code>.
If this parameter is given, these functions call <code>partial.eval.pref</code> before they output or return the preference string.
The following equalities hold:
</p>

<ul>
<li> <p><code>as.character(partial.eval.pref(p, df)) == pref.str(p, df)</code>
</p>
</li>
<li> <p><code>show(partial.eval.pref(p, df))</code> produces the same console output as <code>show.pref(p, df)</code>
</p>
</li>
</ul>
<h3>See Also</h3>

<p>See <code>general_pref</code> for more utility functions for preferences.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
f &lt;- function(x) 2*x
p &lt;- true(cyl == f(1))

# prints 'true(cyl == f(1))'
p

# prints 'true(cyl == 2)'
show.pref(p, mtcars)
partial.eval.pref(p, mtcars)

</code></pre>


</div>