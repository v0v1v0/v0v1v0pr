<div class="container">

<table style="width: 100%;"><tr>
<td>ch09</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Print examples of chapter 9 of 'R for Dummies'.</h2>

<h3>Description</h3>

<p>To print a listing of all examples of a chapter, use <code>ch9()</code>.
To run all the examples of <code>ch9()</code>, use <code>example(ch9)</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ch09()

ch9()
</code></pre>


<h3>See Also</h3>

<p><code>toc</code>
</p>
<p>Other Chapters: 
<code>ch01()</code>,
<code>ch02()</code>,
<code>ch03()</code>,
<code>ch04()</code>,
<code>ch05()</code>,
<code>ch06()</code>,
<code>ch07()</code>,
<code>ch08()</code>,
<code>ch10()</code>,
<code>ch11()</code>,
<code>ch12()</code>,
<code>ch13()</code>,
<code>ch14()</code>,
<code>ch15()</code>,
<code>ch16()</code>,
<code>ch17()</code>,
<code>ch18()</code>,
<code>ch19()</code>,
<code>ch20()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">if (interactive()) {
# Chapter 9
# Controlling the Logical Flow

#Making Choices with if Statements

priceCalculator &lt;- function(hours, pph=40){
    net.price &lt;- hours * pph
    round(net.price)
}

priceCalculator &lt;- function(hours, pph=40){
    net.price &lt;- hours * pph
    if (hours &gt; 100) {
      net.price &lt;- net.price * 0.9
    }
    round(net.price)
}

priceCalculator(hours = 55)
priceCalculator(hours = 110)

priceCalculator &lt;- function(hours, pph=40){
    net.price &lt;- hours * pph
    if(hours &gt; 100) net.price &lt;- net.price * 0.9
    round(net.price)
}

?'if'
?"if"
?`if`

## Doing Something Else with an if...else Statement

priceCalculator &lt;- function(hours, pph=40, public=TRUE){
    net.price &lt;- hours * pph
    if(hours &gt; 100) net.price &lt;- net.price * 0.9
    if(public) {
      tot.price &lt;- net.price * 1.06
    } else {
      tot.price &lt;- net.price * 1.12
    }
    round(tot.price)
}

priceCalculator(25,public=TRUE)
priceCalculator(25,public=FALSE)

priceCalculator &lt;- function(hours, pph=40, public=TRUE){
    net.price &lt;- hours * pph
    if(hours &gt; 100) net.price &lt;- net.price * 0.9
    if(public) tot.price &lt;- net.price * 1.06 else
               tot.price &lt;- net.price * 1.12
    round(tot.price)
}

priceCalculator &lt;- function(hours, pph=40, public=TRUE){
    net.price &lt;- hours * pph
    if(hours &gt; 100) net.price &lt;- net.price * 0.9
    tot.price &lt;- net.price * if(public) 1.06 else 1.12
    round(tot.price)
}

# Vectorizing Choices

## Looking at the problem

#priceCalculator(c(25,110))
priceCalculator(110)
c(25, 110) &gt; 100

## Choosing based on a logical vector

### Understanding how it works

ifelse(c(1,3) &lt; 2.5 , 1:2 , 3:4)

### Trying it out

my.hours &lt;- c(25,110)
my.hours * 40 * ifelse(my.hours &gt; 100, 0.9, 1)

### Adapting the function

priceCalculator &lt;- function(hours,pph=40,public){
    net.price &lt;- hours * pph
    net.price &lt;- net.price * ifelse(hours &gt; 100 , 0.9, 1)
    tot.price &lt;- net.price * ifelse(public, 1.06, 1.12)
    round(tot.price)
}

clients &lt;- data.frame(
  hours = c(25, 110, 125, 40),
  public = c(TRUE,TRUE,FALSE,FALSE)
)

with(clients, priceCalculator(hours, public = public))

# Making Multiple Choices

## Chaining if...else statements


# Code example # NOT run
#if(client=='private'){
#  tot.price &lt;- net.price * 1.12      # 12% VAT
#} else {
#  if(client=='public'){
#    tot.price &lt;- net.price * 1.06    # 6% VAT
#  } else {
#    tot.price &lt;- net.price * 1    # 0% VAT
#  }
#}

# Code example # NOT run
#if(client=='private'){
#    tot.price &lt;- net.price * 1.12
#} else if(client=='public'){
#    tot.price &lt;- net.price * 1.06
#} else {
#    tot.price &lt;- net.price
#}

# Code example # NOT run
#VAT &lt;- ifelse(client=='private', 1.12,
#          ifelse(client == 'public', 1.06, 1)
#       )
#tot.price &lt;- net.price * VAT
#

## Switching between possibilities

### Making choices with switch

# Code example # NOT run
# VAT &lt;- switch(client, private=1.12, public=1.06, abroad=1)



### Using default values in switch

# Code example # NOT run
# VAT &lt;- switch(client, private=1.12, public=1.06, 1)

client &lt;- 'other'
switch(client, private=1.12, public=1.06, 1)


# Looping Through Values

## Constructing a for loop

## Calculating values in a for loop

### Using the values of the vector

priceCalculator &lt;- function(hours, pph=40, client){
    net.price &lt;- hours * pph *
                   ifelse(hours &gt; 100, 0.9, 1)

    VAT &lt;- numeric(0)
    for(i in client){
      VAT &lt;- c(VAT,switch(i, private=1.12, public=1.06, 1))
    }

    tot.price &lt;- net.price * VAT
    round(tot.price)
}


clients$type &lt;- c('public','abroad','private','abroad')
priceCalculator(clients$hours, client=clients$type)

### Using loops and indices

nclient &lt;- length(client)
VAT &lt;- numeric(nclient)
for(i in seq_along(client)){
  VAT[i] &lt;- switch(client[i], private=1.12, public=1.06, 1)
}
VAT

# Looping without Loops: Meeting the Apply Family

songline &lt;- 'Get out of my dreams...'
for(songline in 1:5) print('...Get into my car!')

songline

## Looking at the family features

## Meeting three of the members


## Applying functions on rows and columns

### Counting birds

counts &lt;- matrix(c(3,2,4,6,5,1,8,6,1), ncol=3)
colnames(counts) &lt;- c('sparrow','dove','crow')
counts

apply(counts, 2, max)

### Adding extra arguments

counts[2, 2] &lt;- NA
apply(counts,2,max)
apply(counts, 2, max, na.rm=TRUE)

## Applying functions to listlike objects

### Applying a function to a vector

#### Using switch on vectors

sapply(c('a','b'), switch, a='Hello', b='Goodbye')

#### Replacing a complete for loop with a single statement

priceCalculator &lt;- function(hours, pph=40, client){
  net.price &lt;- hours * pph * ifelse(hours &gt; 100, 0.9, 1)

  VAT &lt;- sapply(client, switch, private=1.12, public=1.06, 1)

  tot.price &lt;- net.price * VAT
  round(tot.price)
}

### Applying a function to a data frame

sapply(clients,class)

### Simplifying results (or not) with sapply

sapply(clients, unique)

### Getting lists using lapply

sapply(clients[c(1,3), ], unique)

lapply(clients[c(1,3), ], unique)
}
</code></pre>


</div>