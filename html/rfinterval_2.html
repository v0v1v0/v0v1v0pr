<div class="container">

<table style="width: 100%;"><tr>
<td>rfinterval</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Prediction Intervals for Random forests</h2>

<h3>Description</h3>

<p>The <code>rfinterval</code> constructs prediction intervals for random forest predictions using a fast implementation package 'ranger'.
</p>


<h3>Usage</h3>

<pre><code class="language-R">rfinterval(formula = NULL, train_data = NULL, test_data = NULL,
  method = c("oob", "split-conformal", "quantreg"), alpha = 0.1,
  symmetry = TRUE, seed = NULL, params_ranger = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>Object of class <code>formula</code> or character describing the model to fit. Interaction terms supported only for numerical variables.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>train_data</code></td>
<td>
<p>Training data of class data.frame, matrix, or dgCMatrix (Matrix).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>test_data</code></td>
<td>
<p>Test data of class data.frame, matrix, or dgCMatrix (Matrix).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>Method for constructing prediction interval. If method = "oob", compute the out-of-bag prediction intervals; if method = "split-conformal", compute the split conformal prediction interval; if method = "quantreg", use quantile regression forest to compute prediction intervals.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>Confidence level. alpha = 0.05 for the 95% prediction interval.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>symmetry</code></td>
<td>
<p>True if constructing symmetric out-of-bag prediction intervals, False otherwise. Only for method = "oob"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>Seed (only for method = "split-conformal")</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>params_ranger</code></td>
<td>
<p>List of further parameters that should be passed to ranger. See <code>ranger</code> for possible parameters.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>oob_interval</code></td>
<td>
<p>Out-of-bag prediction intervals</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sc_interval</code></td>
<td>
<p>Split-conformal prediction intervals</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quantreg_interval</code></td>
<td>
<p>Quantile regression forest prediction intervals</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>alpha</code></td>
<td>
<p>Confidence level for prediction intervals</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>testPred</code></td>
<td>
<p>Random forest prediction for test set</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>train_data</code></td>
<td>
<p>Training data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>test_data</code></td>
<td>
<p>Test data</p>
</td>
</tr>
</table>
<h3>References</h3>

<p>Haozhe Zhang, Joshua Zimmerman, Dan Nettleton, and Dan Nordman. (2019). "Random Forest Prediction Intervals." The American Statistician. Doi: 10.1080/00031305.2019.1585288.
</p>
<p>Haozhe Zhang. (2019). "Topics in Functional Data Analysis and Machine Learning Predictive Inference." Ph.D. Dissertations. Iowa State University Digital Repository. 17929.
</p>
<p>Lei, J., Max Gâ€™Sell, Alessandro Rinaldo, Ryan J. Tibshirani, and Larry Wasserman. "Distribution-free predictive inference for regression." Journal of the American Statistical Association 113, no. 523 (2018): 1094-1111.
</p>
<p>Meinshausen, Nicolai. "Quantile regression forests." Journal of Machine Learning Research 7 (2006): 983-999.
</p>
<p>Leo Breiman. (2001). Random Forests. Machine Learning 45(1), 5-32.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
train_data &lt;- sim_data(n = 500, p = 8)
test_data &lt;- sim_data(n = 500, p = 8)
output &lt;- rfinterval(y~., train_data = train_data, test_data = test_data,
                     method = c("oob", "split-conformal", "quantreg"),
                     symmetry = TRUE,alpha = 0.1)
y &lt;- test_data$y
mean(output$oob_interval$lo &lt; y &amp; output$oob_interval$up &gt; y)
mean(output$sc_interval$lo &lt; y &amp; output$sc_interval$up &gt; y)
mean(output$quantreg_interval$lo &lt; y &amp; output$quantreg_interval$up &gt; y)

</code></pre>


</div>