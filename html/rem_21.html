<div class="container">

<table style="width: 100%;"><tr>
<td>timeToEvent</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate the time-to-next-event or the time-since-date for a REM data set.</h2>

<h3>Description</h3>

<p>Calculate time-to-next-event or time-since-date for a REM data set.</p>


<h3>Usage</h3>

<pre><code class="language-R">timeToEvent(time, type = 'time-to-next-event', timeEventPossible = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>time</code></td>
<td>
<p> A integer or Date variable reflecting the time of the event. Note: make sure to specify event time not the event sequence in a counting process data set.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p> Either 'time-to-next-event' or 'time-since-date'. 
<code>type = 'time-to-next-event'</code> calculates the time between the current event and the event closes to the current in the past. 
<code>type = 'time-since-date'</code> uses the <code>time</code>-variable as well as the <code>timeEventPossible</code>-variable to calculate how much time has passed between the two variables, i.e., how long the event took to come true. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeEventPossible</code></td>
<td>
<p> An optional integer or Date variable to be used if <code>type = 'time-since-date'</code> is specified.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>To come.
</p>


<h3>Author(s)</h3>

<p>Laurence Brandenberger <a href="mailto:laurence.brandenberger@eawag.ch">laurence.brandenberger@eawag.ch</a>
</p>


<h3>See Also</h3>

<p>rem-package
</p>


<h3>Examples</h3>

<pre><code class="language-R">## get some random data
dt &lt;- data.frame(
  sender = c('a', 'c', 'd', 'a', 'a', 'f', 'c'), 
  target = c('b', 'd', 'd', 'b', 'b', 'a', 'd'), 
  date = c(rep('10.01.90',2), '11.01.90', '04.01.90',
 '05.01.90', rep('10.01.90',2)),
  start = c(0, 0, 1, 1, 1, 3, 3), 
  end = rep(6, 7), 
  targetAvailableSince = c(rep(-10,6), -2),
  dateTargetAvailable = c(rep('31.12.89',6), '01.01.90')
)

## create event sequence
dt &lt;- eventSequence(dt$date, dateformat = '%d.%m.%y', data = dt,
              type = "continuous", byTime = "daily",
              excludeDate = '07.01.90',
              returnData = TRUE, sortData = TRUE,
              returnDateSequenceData = FALSE)
## also return the sequenceData
dt.seq &lt;- eventSequence(dt$date, dateformat = '%d.%m.%y', data = dt,
                    type = "continuous", byTime = "daily",
                    excludeDate = '07.01.90',
                    returnDateSequenceData = TRUE)

## create counting process data set
dts &lt;- createRemDataset(
	data = dt, sender = dt$sender, target = dt$target, 
	eventSequence = dt$event.seq.cont, 
	eventAttribute = NULL, time = NULL, 
	start = dt$start, startDate = NULL, 
	end = dt$end, endDate = NULL, 
	timeformat = NULL, atEventTimesOnly = TRUE, 
	untilEventOccurrs = TRUE,
	includeAllPossibleEvents = FALSE, 
	possibleEvents = NULL, returnInputData = TRUE)	
## divide up the results: counting process data = 1, original data = 2
dt.rem &lt;- dts[[1]]
dt &lt;- dts[[2]]

## merge all necessary event attribute variables back in
dt.rem$targetAvailableSince &lt;- dt$targetAvailableSince[match(dt.rem$eventID, 
	dt$eventID)]
dt.rem$dateTargetAvailable &lt;- dt$dateTargetAvailable[match(dt.rem$eventID, 
	dt$eventID)]

## add dates to the eventTime
dt.rem$eventDate &lt;- dt.seq$date.sequence[match(dt.rem$eventTime,
	dt.seq$event.sequence)]

## sort the dataframe according to eventTime
dt.rem &lt;- dt.rem[order(dt.rem$eventTime), ]

## 1. numeric, time-to-next-event
dt.rem$timeToNextEvent &lt;- timeToEvent(as.integer(dt.rem$eventTime))

## 2. numeric, time-since
dt.rem$timeSince &lt;- timeToEvent(dt.rem$eventTime, 
                                type = 'time-since-date', 
                                dt.rem$targetAvailableSince)

## 3. Date, time-to-next-event
# since the event sequence excluded 06.01.90 =&gt; time to next event differs
# for the two specification with the integr (1) and the Date-variable (2).
# To be consistent, pick the eventTime instead of the Date-variable.
dt.rem$timeToNextEvent2 &lt;- timeToEvent(as.Date(dt.rem$eventDate, '%d.%m.%y'))


## 4. Date, time-since
dt.rem$timeSince2 &lt;- timeToEvent(
	as.Date(dt.rem$eventDate, '%d.%m.%y'),
	type = 'time-since-date', 
	as.Date(dt.rem$dateTargetAvailable, '%d.%m.%y'))

</code></pre>


</div>