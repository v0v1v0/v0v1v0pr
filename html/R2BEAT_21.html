<div class="container">

<table style="width: 100%;"><tr>
<td>select_SSU</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Select sample of secondary stage units (SSU)
</h2>

<h3>Description</h3>

<p>Select sample of secondary stage units (SSU) from the population frame on the basis of the SSU allocated to each selected PSU
</p>


<h3>Usage</h3>

<pre><code class="language-R">     select_SSU(df,PSU_code,SSU_code,PSU_sampled)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>Dataframe containing sampling units (SSUs)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>PSU_code</code></td>
<td>
<p>Identifier of each PSU in dataframe containing sampling units</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>SSU_code</code></td>
<td>
<p>Identifier of each SSU in dataframe containing sampling units</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>PSU_sampled</code></td>
<td>
<p>Dataframe containing selected PSUs</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A dataframe containing the units selected in the sample
</p>


<h3>Author(s)</h3>

<p>Giulio Barcaroli</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
library(readr)
pop &lt;- read_rds("https://github.com/barcaroli/R2BEAT_workflows/blob/master/pop.RDS?raw=true")
library(R2BEAT)
cv &lt;- as.data.frame(list(DOM=c("DOM1","DOM2"),
                         CV1=c(0.02,0.03),
                         CV2=c(0.03,0.06),
                         CV3=c(0.03,0.06),
                         CV4=c(0.05,0.08)))
cv
samp_frame &lt;- pop
samp_frame$one &lt;- 1
id_PSU &lt;- "municipality"  
id_SSU &lt;- "id_ind"        
strata_var &lt;- "stratum"   
target_vars &lt;- c("income_hh","active","inactive","unemployed")   
deff_var &lt;- "stratum"     
domain_var &lt;- "region"  
delta =  1       # households = survey units
minimum &lt;- 50    # minimum number of SSUs to be interviewed in each selected PSU
deff_sugg &lt;- 1.5 # suggestion for the deff value

inp &lt;- prepareInputToAllocation1(samp_frame,
                                  id_PSU,
                                  id_SSU,
                                  strata_var,
                                  target_vars,
                                  deff_var,
                                  domain_var,
                                  minimum,
                                  delta,
                                  deff_sugg)
inp$desfile$MINIMUM &lt;- 50
alloc &lt;- beat.2st(stratif = inp$strata, 
                   errors = cv, 
                   des_file = inp$des_file, 
                   psu_file = inp$psu_file, 
                   rho = inp$rho, 
                   deft_start = NULL,
                   effst = inp$effst, 
                   minPSUstrat = 2,
                   minnumstrat = 50
)
sample_1st &lt;- select_PSU(alloc, type="ALLOC", pps=TRUE, plot=TRUE)
samp &lt;- select_SSU(df=pop,
                   PSU_code="municipality",
                   SSU_code="id_ind",
                   PSU_sampled=sample_1st$sample_PSU)

## End(Not run)
</code></pre>


</div>