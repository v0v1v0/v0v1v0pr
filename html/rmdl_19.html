<div class="container">

<table style="width: 100%;"><tr>
<td>fmls</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Vectorized formulas</h2>

<h3>Description</h3>

<p>This function defines a modified <code>formula</code> class that has been
vectorized. The <code>fmls</code> serves as a set of instructions or a <em>script</em> for the
formula and its tm. It expands upon the functionality of formulas,
allowing for additional descriptions and relationships to exist between the
tm.
</p>


<h3>Usage</h3>

<pre><code class="language-R">fmls(
  x = unspecified(),
  pattern = c("direct", "sequential", "parallel", "fundamental"),
  ...
)

is_fmls(x)

key_terms(x)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Objects of the following types can be used as inputs
</p>

<ul>
<li> <p><code>tm</code>
</p>
</li>
<li> <p><code>formula</code>
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pattern</code></td>
<td>
<p>A <code>character</code> from the following choices for pattern
expansion. This is how the formula will be expanded, and decides how the
covariates will incorporated. See the details for further explanation.
</p>

<ul>
<li>
<p> direct: the covariates will all be included in each formula
</p>
</li>
<li>
<p> sequential: the covariates will be added sequentially, one by one, or by groups, as indicated
</p>
</li>
<li>
<p> parallel: the covariates or groups of covariates will be placed in parallel
</p>
</li>
<li>
<p> fundamental: every formula will be decomposed to a single outcome and predictor in an atomic fashion
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments to be passed to or from other methods</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This is not meant to supersede a <code>stats::formula()</code> object, but provide a
series of relationships that can be helpful in causal modeling. All <code>fmls</code>
can be converted to a traditional <code>formula</code> with ease. The base for this
object is built on the <code>tm()</code> object.
</p>


<h3>Value</h3>

<p>An object of class <code>fmls</code>
</p>


<h3>Patterns</h3>

<p>The expansion pattern allows for instructions on how the covariates should be
included in different formulas. Below, assuming that <em>x1</em>, <em>x2</em>, and <em>x3</em> are
covariates...
</p>
<p style="text-align: center;"><code class="reqn">y = x1 + x2 + x3</code>
</p>

<p><strong>Direct</strong>:
</p>
<p style="text-align: center;"><code class="reqn">y = x1 + x2 + x3</code>
</p>

<p><strong>Seqential</strong>:
</p>
<p style="text-align: center;"><code class="reqn">y = x1</code>
</p>

<p style="text-align: center;"><code class="reqn">y = x1 + x2</code>
</p>

<p style="text-align: center;"><code class="reqn">y = x1 + x2 + x3</code>
</p>

<p><strong>Parallel</strong>:
</p>
<p style="text-align: center;"><code class="reqn">y = x1</code>
</p>

<p style="text-align: center;"><code class="reqn">y = x2</code>
</p>

<p style="text-align: center;"><code class="reqn">y = x3</code>
</p>



<h3>Roles</h3>

<p>Specific roles the variable plays within the formula. These are of particular
importance, as they serve as special terms that can effect how a formula is
interpreted.</p>

<table>
<tr>
<td style="text-align: left;">
   Role </td>
<td style="text-align: left;"> Shortcut </td>
<td style="text-align: left;"> Description </td>
</tr>
<tr>
<td style="text-align: left;">
   outcome </td>
<td style="text-align: left;"> <code>.o(...)</code> </td>
<td style="text-align: left;"> <strong>outcome</strong> ~ exposure </td>
</tr>
<tr>
<td style="text-align: left;">
   exposure </td>
<td style="text-align: left;"> <code>.x(...)</code> </td>
<td style="text-align: left;"> outcome ~ <strong>exposure</strong> </td>
</tr>
<tr>
<td style="text-align: left;">
   predictor </td>
<td style="text-align: left;"> <code>.p(...)</code> </td>
<td style="text-align: left;"> outcome ~ exposure + <strong>predictor</strong> </td>
</tr>
<tr>
<td style="text-align: left;">
   confounder </td>
<td style="text-align: left;"> <code>.c(...)</code> </td>
<td style="text-align: left;"> outcome + exposure ~ <strong>confounder</strong> </td>
</tr>
<tr>
<td style="text-align: left;">
   mediator </td>
<td style="text-align: left;"> <code>.m(...)</code> </td>
<td style="text-align: left;"> outcome <strong>mediator</strong> exposure </td>
</tr>
<tr>
<td style="text-align: left;">
   interaction </td>
<td style="text-align: left;"> <code>.i(...)</code> </td>
<td style="text-align: left;"> outcome ~ exposure * <strong>interaction</strong> </td>
</tr>
<tr>
<td style="text-align: left;">
   strata </td>
<td style="text-align: left;"> <code>.s(...)</code> </td>
<td style="text-align: left;"> outcome ~ exposure / <strong>strata</strong> </td>
</tr>
<tr>
<td style="text-align: left;">
   group </td>
<td style="text-align: left;"> <code>.g(...)</code> </td>
<td style="text-align: left;"> outcome ~ exposure + <strong>group</strong> </td>
</tr>
<tr>
<td style="text-align: left;">
   <em>unknown</em> </td>
<td style="text-align: left;"> <code>-</code> </td>
<td style="text-align: left;"> not yet assigned </td>
</tr>
<tr>
<td style="text-align: left;">
</td>
</tr>
</table>
<p>Formulas can be condensed by applying their specific role to individual runes
as a function/wrapper. For example, <code>y ~ .x(x1) + x2 + x3</code>. This would
signify that <code>x1</code> has the specific role of an <em>exposure</em>.
</p>
<p>Grouped variables are slightly different in that they are placed together in
a hierarchy or tier. To indicate the group and the tier, the shortcut can
have an <code>integer</code> following the <code>.g</code>. If no number is given, then it is
assumed they are all on the same tier. Ex: <code>y ~ x1 + .g1(x2) + .g1(x3)</code>
</p>
<p><strong>Warning</strong>: Only a single shortcut can be applied to a variable within a
formula directly.
</p>


<h3>Pluralized Labeling Arguments</h3>

<p>For a single argument, e.g. for the <code>tm.formula()</code> method, such as to
identify variable <strong>X</strong> as an exposure, a <code>formula</code> should be given with the
term of interest on the <em>LHS</em>, and the description or instruction on the
<em>RHS</em>. This would look like <code>role = "exposure" ~ X</code>.
</p>
<p>For the arguments that would be dispatched for objects that are plural, e.g.
containing multiple terms, each <code>formula()</code> should be placed within a
<code>list()</code>. For example, the <strong>role</strong> argument would be written:
</p>
<p><code>role = list(X ~ "exposure", M ~ "mediator", C ~ "confounder")</code>
</p>
<p>Further implementation details can be seen in the implementation of
<code>labeled_formulas_to_named_list()</code>.
</p>


</div>