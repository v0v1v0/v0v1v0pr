<div class="container">

<table style="width: 100%;"><tr>
<td>ipc_get_areas</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Get areas resources from the IPC-CH API</h2>

<h3>Description</h3>

<p>Accesses the areas resources on the IPC-CH API. Contains detailed area and
population data. If <code>country</code>, <code>year</code> and/or <code>type</code> parameters are passed,
accesses the <strong>areas</strong> simplified API endpoint and pulls in all areas filtered to
those parameters. To get all areas for a specific analysis
and period, available on the <strong>areas/{id}/{period}</strong> advanced API endpoint,
pass in <code>id</code> and <code>period</code>. You cannot pass in both sets of parameters.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ipc_get_areas(
  country = NULL,
  year = NULL,
  type = NULL,
  id = NULL,
  period = NULL,
  return_format = c("csv", "geojson"),
  api_key = NULL,
  tidy_df = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>country</code></td>
<td>
<p>ISO2 country code.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>year</code></td>
<td>
<p>Single numeric year to filter analysis, calculated from the
maximum year of current period dates. If <code>NULL</code>, the default, returns
data for all years.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>Single string value of 'A' or 'C', corresponding to food security
conditions, either acute or chronic. If <code>NULL</code>, the default, returns
data for all types.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>Analysis ID.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>period</code></td>
<td>
<p>Period code, either 'C', 'P', or 'A' for current, projection,
and second projection.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return_format</code></td>
<td>
<p>The format that should be returned by the API. Allows
<code>"csv"</code> (the default) and <code>"geojson"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>api_key</code></td>
<td>
<p>IPC API key. If <code>NULL</code> (the default), looks for <code>IPC_API_KEY</code>
in the environment.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tidy_df</code></td>
<td>
<p>If <code>TRUE</code>, returns a tidy data frame wrangled as described in
the Tidy section of the documentation. If <code>FALSE</code>, returns
the data frame as returned direct from the IPC-CH API.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Areas data is the typical unit of analysis in IPC-CH outputs. These are
typically administrative units (or clusters of them together). For each area,
estimates of the population in each phase is provided and a general phase
classification is assigned. Use <code>ipc_get_population()</code> to get
detailed population data and classifications for all analysis periods.
</p>
<p>See the <a href="https://www.ipcinfo.org">IPC website</a> and
<a href="https://docs.api.ipcinfo.org">API documentation</a> for more information.
</p>


<h3>Value</h3>

<p>Data frame of IPC and CH analysis at the areas level. Refer to the
<a href="https://docs.api.ipcinfo.org">IPC-CH Public API documentation</a> for details
on the returned values, with variables described in full in the <a href="https://observablehq.com/@ipc/ipc-api-extended-documentation">extended documentation</a>.
</p>


<h3>Tidy</h3>

<p>When <code>tidy_df</code> is <code>TRUE</code>, the following changes are made to the initial
output to ensure each row represents a single area analysis, and all estimates
and values are stored as columns:
</p>

<ol>
<li> <p><code>analysis_period_start</code> and <code>analysis_period_end</code> created as <code>Date</code> columns
from the <code>from</code> and <code>to</code> columns respectively, allocating the day of the
start and end periods to be the 15th of the month.
</p>
</li>
<li> <p><code>title</code> column is renamed to be <code>area_name</code>, <code>anl_id</code> to <code>analysis_id</code>,
and <code>id</code> and <code>aar_id</code> are changed to <code>area_id</code>.
</p>
</li>
<li>
<p> Duplicated rows are removed from the data frame if the return value is CSV,
because the duplicates are there due to polygon geometries.
</p>
</li>
</ol>
<h3>Examples</h3>

<pre><code class="language-R">
# get all areas from the simplified API
ipc_get_areas()

# get areas for specific analysis ID and period from advanced API
ipc_get_areas(id = 12856213, period = "P")

# request GeoJSON return
ipc_get_areas(id = 12856213, period = "P", return_format = "geojson")

</code></pre>


</div>