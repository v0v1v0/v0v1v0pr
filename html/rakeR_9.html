<div class="container">

<table style="width: 100%;"><tr>
<td>weight</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>weight</h2>

<h3>Description</h3>

<p>Produces fractional weights using the iterative proportional fitting
algorithm.
</p>


<h3>Usage</h3>

<pre><code class="language-R">weight(cons, inds, vars = NULL, iterations = 10)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>cons</code></td>
<td>
<p>A data frame containing all the constraints. This
should be in the format of one row per zone, one column per constraint
category. The first column should be a zone code; all other columns must be
numeric counts.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>inds</code></td>
<td>
<p>A data frame containing individual–level (survey) data. This
should be in the format of one row per individual, one column per
constraint. The first column should be an individual ID.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vars</code></td>
<td>
<p>A character vector of variables that constrain the simulation
(i.e. independent variables)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>iterations</code></td>
<td>
<p>The number of iterations the algorithm should complete.
Defaults to 10</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The first column of each data frame should be an ID. The first column of
<code>cons</code> should contain the zone codes. The first column of <code>inds</code>
should contain the individual unique identifier.
</p>
<p>Both data frames should only contain:
</p>

<ul>
<li>
<p> an ID column (zone ID <code>cons</code> or individual ID <code>inds</code>).
</p>
</li>
<li>
<p> constraints <code>inds</code> or constraint category <code>cons</code>.
</p>
</li>
<li> <p><code>inds</code> can optionally contain additional dependent variables
that do not influence the weighting process.
</p>
</li>
</ul>
<p>No other columns should be present (the user can merge these back in later).
</p>
<p>It is essential that the levels in each <code>inds</code> constraint (i.e. column)
match exactly with the column names in <code>cons</code>. In the example below see
how the column names in cons (<code>'age_0_49', 'sex_f', ...</code>) match exactly
the levels in <code>inds</code> variables.
</p>
<p>The columns in <code>cons</code> must be in alphabetical order because these are
created alphabetically when they are 'spread' in the individual–level data.
</p>


<h3>Value</h3>

<p>A data frame of fractional weights for each individual in each zone
with zone codes recorded in column names and individual id recorded in row
names.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># SimpleWorld
cons &lt;- data.frame(
"zone"      = letters[1:3],
"age_0_49"  = c(8, 2, 7),
"age_gt_50" = c(4, 8, 4),
"sex_f"     = c(6, 6, 8),
"sex_m"     = c(6, 4, 3),
stringsAsFactors = FALSE
)
inds &lt;- data.frame(
"id"     = LETTERS[1:5],
"age"    = c("age_gt_50", "age_gt_50", "age_0_49", "age_gt_50", "age_0_49"),
"sex"    = c("sex_m", "sex_m", "sex_m", "sex_f", "sex_f"),
"income" = c(2868, 2474, 2231, 3152, 2473),
stringsAsFactors = FALSE
)
# Set variables to constrain over
vars &lt;- c("age", "sex")
weights &lt;- weight(cons = cons, inds = inds, vars = vars)
print(weights)
</code></pre>


</div>