<div class="container">

<table style="width: 100%;"><tr>
<td>GribGrab</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Download grib file from the NOMADS server.
</h2>

<h3>Description</h3>

<p>This function interfaces with the programming API at <a href="https://nomads.ncep.noaa.gov/">https://nomads.ncep.noaa.gov/</a> to download NOMADS model data.
The available models can be viewed by calling <code>NOMADSRealTimeList</code>.
The data arrives in grib (gridded binary) format that can be read with <code>ReadGrib</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">GribGrab(model.url, preds, levels, variables, 
    local.dir = NULL, file.names = NULL,
    model.domain = NULL, tidy = FALSE, verbose = TRUE,
    check.url = TRUE, download.method = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>model.url</code></td>
<td>

<p>The address of a model download page, probably from <code>CrawlModels</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>preds</code></td>
<td>

<p>A vector of predictions (or model times) determined by the specific model from <code>model.url</code>
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>levels</code></td>
<td>

<p>A list of model levels to download.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>variables</code></td>
<td>

<p>A list of model variables to download.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>local.dir</code></td>
<td>

<p>Where to save the grib file, defaults to the current directory.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file.names</code></td>
<td>

<p>What to name the grib file, defaults to <code>"fcst.grb"</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model.domain</code></td>
<td>

<p>A vector of latitudes and longitudes that specify the area to return a forecast for.
This is a rectangle with elements: west longitude, east longitude, north latitude, south latitude.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tidy</code></td>
<td>

<p>If <code>TRUE</code>, remove all files with the suffix ".grb" from <code>local.dir</code> prior to downloading a new grib file.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>

<p>If <code>TRUE</code>, give information on connection status.  Default <code>TRUE</code>
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>check.url</code></td>
<td>

<p>If <code>TRUE</code>, verify that the model URL is real and contains data.  Default <code>TRUE</code>
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>download.method</code></td>
<td>

<p>Allows the user to set the download method used by <code>download.file</code>: <code>"internal"</code>, <code>"wget"</code> <code>"curl"</code>, <code>"lynx"</code>.
If <code>NULL</code> (the default), let R decide.
</p>
</td>
</tr>
</table>
<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>grib.info$file.name</code></td>
<td>
<p>The path and file name of the grib file that was downloaded.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grib.info$url</code></td>
<td>
<p>The URL that the grib file was downloaded from</p>
</td>
</tr>
</table>
<h3>Note</h3>

<p>This requires the external programs <code>wgrib2</code> and\or <code>wgrib</code> to be installed (depending on whether the files are in GRIB2 or GRIB format).</p>


<h3>Author(s)</h3>

<p>Daniel C. Bowman <a href="mailto:danny.c.bowman@gmail.com">danny.c.bowman@gmail.com</a>
</p>


<h3>References</h3>

<p><a href="https://nomads.ncep.noaa.gov/">https://nomads.ncep.noaa.gov/</a>
</p>


<h3>See Also</h3>

<p><code>CrawlModels</code>, <code>ParseModelPage</code>, <code>ReadGrib</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
#An example for the Global Forecast System 0.5 degree model

#Get the latest model url
## Not run: 
urls.out &lt;- CrawlModels(abbrev = "gfs_0p50", depth = 1)

#Get a list of forecasts, variables and levels
model.parameters &lt;- ParseModelPage(urls.out[1])

#Figure out which one is the 6 hour forecast
#provided by the latest model run
#(will be the forecast from 6-12 hours from the current date) 

my.pred &lt;- model.parameters$pred[grep("06$", model.parameters$pred)]

#What region of the atmosphere to get data for
levels &lt;- c("2 m above ground", "800 mb") 

#What data to return
variables &lt;- c("TMP", "RH") #Temperature and relative humidity

#Get the data
grib.info &lt;- GribGrab(urls.out[1], my.pred, levels, variables)

#Extract the data
model.data &lt;- ReadGrib(grib.info[[1]]$file.name, levels, variables)

#Reformat it
model.grid &lt;- ModelGrid(model.data, c(0.5, 0.5))

#Show an image of world temperature at ground level
image(model.grid$z[2, 1,,])

## End(Not run)
</code></pre>


</div>