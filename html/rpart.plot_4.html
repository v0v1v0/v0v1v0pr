<div class="container">

<table style="width: 100%;"><tr>
<td>rpart.plot</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plot an rpart model. A simplified interface to the prp function.</h2>

<h3>Description</h3>

<p>Plot an <code>rpart</code> model, automatically tailoring the plot
for the model's response type.
</p>
<p>For an overview, please see the package vignette
<a href="../doc/prp.pdf">Plotting rpart trees with the rpart.plot package</a>.
</p>
<p>This function is a simplified front-end to <code>prp</code>,
with only the most useful arguments of that function, and
with different defaults for some of the arguments.
The different defaults mean that this function automatically creates a
colored plot suitable for the type of model (whereas <code>prp</code>
by default creates a minimal plot).
See the <code>prp</code> help page for a table showing the
different defaults.
</p>


<h3>Usage</h3>

<pre><code class="language-R">rpart.plot(x = stop("no 'x' arg"),
    type = 2, extra = "auto",
    under = FALSE, fallen.leaves = TRUE,
    digits = 2, varlen = 0, faclen = 0, roundint = TRUE,
    cex = NULL, tweak = 1,
    clip.facs = FALSE, clip.right.labs = TRUE,
    snip = FALSE,
    box.palette = "auto", shadow.col = 0,
    ...)
</code></pre>


<h3>Arguments</h3>

<p>To start off, look at the arguments <code>x</code>, <code>type</code> and <code>extra</code>.
Just those arguments will suffice for many users.
If you don't want a colored plot, use <code>box.palette=0</code>.
</p>
<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>

<p>An <code>rpart</code> object.  The only required argument.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>

<p>Type of plot. Possible values:
</p>
<p><b>0</b> Draw a split label at each split
and a node label at each leaf.
</p>
<p><b>1</b> Label all nodes, not just leaves.
Similar to <code>text.rpart</code>'s <code>all=TRUE</code>.
</p>
<p><b>2</b> Default.
Like <code>1</code> but draw the split labels below the node labels.
Similar to the plots in the CART book.
</p>
<p><b>3</b> Draw separate split labels for the left and right directions.
</p>
<p><b>4</b> Like <code>3</code> but label all nodes, not just leaves.
Similar to <code>text.rpart</code>'s <code>fancy=TRUE</code>.
See also <code>clip.right.labs</code>.<br></p>
<p><b>5</b> Show the split variable name in the interior nodes.<br></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>extra</code></td>
<td>

<p>Display extra information at the nodes. Possible values:
</p>
<p><b>"auto"</b> (case insensitive) Default.<br>
Automatically select a value based on the model type, as follows:<br><code>extra=106</code> class model with a binary response<br><code>extra=104</code> class model with a response having more than two levels<br><code>extra=100</code> other models<br></p>
<p><b>0</b> No extra information.
</p>
<p><b>1</b> Display the number of observations that fall in the node
(per class for <code>class</code> objects;
prefixed by the number of events for <code>poisson</code> and <code>exp</code> models).
Similar to <code>text.rpart</code>'s <code>use.n=TRUE</code>.
</p>
<p><b>2</b> Class models: display the classification rate at the node,
expressed as the number of correct classifications and the number
of observations in the node.<br>
Poisson and exp models: display the number of events.
</p>
<p><b>3</b> Class models: misclassification rate at the node,
expressed as the number of incorrect classifications and the number
of observations in the node.
</p>
<p><b>4</b> Class models:
probability per class of observations in the node
(conditioned on the node, sum across a node is 1).
</p>
<p><b>5</b> Class models:
like <code>4</code> but don't display the fitted class.
</p>
<p><b>6</b> Class models:
the probability of the second class only.
Useful for binary responses.
</p>
<p><b>7</b> Class models:
like <code>6</code> but don't display the fitted class.
</p>
<p><b>8</b> Class models:
the probability of the fitted class.
</p>
<p><b>9</b> Class models:
The probability relative to <em>all</em> observations –
the sum of these probabilities across all leaves is 1.
This is in contrast to the options above, which give the probability
relative to observations falling <em>in the node</em> –
the sum of the probabilities across the node is 1.
</p>
<p><b>10</b> Class models:
Like <code>9</code> but display the probability of the second class only.
Useful for binary responses.<br></p>
<p><b>11</b> Class models:
Like <code>10</code> but don't display the fitted class.<br></p>
<p><b>+100</b> Add <code>100</code> to any of the above to also display
the percentage of observations in the node.
For example <code>extra=101</code> displays the number
and percentage of observations in the node.
Actually, it's a weighted percentage
using the <code>weights</code> passed to <code>rpart</code>.<br></p>
<p>Note: Unlike <code>text.rpart</code>,
by default <code>prp</code> uses its own routine for
generating node  labels (not the function attached to the object).
See the <code>node.fun</code> argument of <code>prp</code>.<br></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>under</code></td>
<td>

<p>Applies only if <code>extra &gt; 0</code>.
Default <code>FALSE</code>, meaning put the extra text <em>in</em> the box.
Use <code>TRUE</code> to put the text <em>under</em> the box.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fallen.leaves</code></td>
<td>

<p>Default <code>TRUE</code> to position the leaf nodes at the bottom of the graph.
It can be helpful to use <code>FALSE</code> if the graph is too crowded
and the text size is too small.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>

<p>The number of significant digits in displayed numbers.
Default <code>2</code>.<br>
If <code>0</code>, use <code>getOption("digits")</code>.<br>
If negative, use the standard <code>format</code> function
(with the absolute value of <code>digits</code>).<br><br>
When <code>digits</code> is positive, the following details apply:<br>
Numbers from <code>0.001</code> to <code>9999</code> are printed without an exponent
(and the number of digits is actually only a suggestion,
see <code>format</code> for details).
Numbers out that range are printed with an “engineering” exponent (a multiple of 3).<br></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>varlen</code></td>
<td>

<p>Length of variable names in text at the splits
(and, for class responses, the class in the node label).
Default <code>0</code>, meaning display the full variable names.
Possible values:<br></p>
<p><b>0</b> use full names (default).<br></p>
<p><b>greater than 0</b> call <code>abbreviate</code> with the given <code>varlen</code>.<br></p>
<p><b>less than 0</b> truncate variable names to the shortest length where they are still unique,
but never truncate to shorter than <code>abs(varlen)</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>faclen</code></td>
<td>

<p>Length of factor level names in splits.
Default <code>0</code>, meaning display the full factor names.
Possible values are as <code>varlen</code> above, except that
for back-compatibility with <code>text.rpart</code> the special value <code>1</code>
means represent the factor levels with alphabetic characters
(<code>a</code> for the first level, <code>b</code> for the second, etc.).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>roundint</code></td>
<td>

<p>If <code>roundint=TRUE</code> (default) and all values of a predictor in the
training data are integers, then splits for that predictor
are rounded to integer.
For example, display <code>nsiblings &lt; 3</code> instead of <code>nsiblings &lt; 2.5</code>.<br>
If <code>roundint=TRUE</code> and the data used to build the model is no longer
available, a warning will be issued.<br>
Using <code>roundint=FALSE</code> is advised if non-integer values are in fact possible
for a predictor, even though all values in the training data for that
predictor are integral.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex</code></td>
<td>

<p>Default <code>NULL</code>, meaning calculate the text size automatically.<br>
Since font sizes are discrete, the <code>cex</code> you ask for
may not be exactly the <code>cex</code> you get.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tweak</code></td>
<td>

<p>Adjust the (possibly automatically calculated) <code>cex</code>.
Using <code>tweak</code> is often easier than specifying <code>cex</code>.<br>
The default <code>tweak</code> is <code>1</code>, meaning no adjustment.<br>
Use say <code>tweak=1.2</code> to make the text 20% larger.<br>
Since font sizes are discrete,
a small change to tweak may not actually change the type size,
or change it more than you want.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>clip.facs</code></td>
<td>

<p>Default <code>FALSE</code>.
If <code>TRUE</code>, print splits on factors as <code>female</code> instead of
<code>sex = female</code>; the variable name and equals is dropped.
<br>
Another example: print <code>survived</code> or <code>died</code> rather than
<code>survived = survived</code> or <code>survived = died</code>.<br></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>clip.right.labs</code></td>
<td>

<p>Applies only if <code>type=3</code> or <code>4</code>.<br>
Default is <code>TRUE</code> meaning “clip” the right-hand split labels,
i.e., don't print <code>variable=</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>snip</code></td>
<td>

<p>Default <code>FALSE</code>.
Set <code>TRUE</code> to interactively trim the tree with the mouse.
See the <a href="../doc/prp.pdf">package vignette</a> (or just try it).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>box.palette</code></td>
<td>

<p>Palette for coloring the node boxes based on the fitted value.
This is a vector of <code>colors</code>,
for example <code>box.palette=c("green", "green2", "green4")</code>.
Small fitted values are displayed with colors at the start of the vector;
large values with colors at the end.
Quantiles are used to partition the fitted values.
</p>
<p>The special value <code>box.palette=0</code> (default for <code>prp</code>) uses
the background color (typically white).
</p>
<p>The special value <code>box.palette="auto"</code> (default for
<code>rpart.plot</code>, case insensitive) automatically selects a
predefined palette based on the type of model.
</p>
<p>Otherwise specify a <b>predefined palette</b>
e.g. <code>box.palette="Grays"</code> for the predefined gray palette (a range of grays).
The predefined palettes are (see the <code>show.prp.palettes</code> function):<br><code>Grays</code> <code>Greys</code> <code>Greens</code> <code>Blues</code> <code>Browns</code> <code>Oranges</code> <code>Reds</code> <code>Purples</code> <br><code>Gy</code> <code>Gn</code> <code>Bu</code> <code>Bn</code> <code>Or</code> <code>Rd</code> <code>Pu</code> (alternative names for the above palettes)<br><code>BuGn</code> <code>GnRd</code> <code>BuOr</code> etc. (two-color diverging palettes: any combination of two of the above palettes)<br><code>RdYlGn</code> <code>GnYlRd</code> <code>BlGnYl</code> <code>YlGnBl</code> (three color palettes)
</p>
<p>Prefix the palette name with <code>"-"</code> to reverse the order of the colors<br>
e.g. <code>box.palette="-auto"</code> or <code>box.palette="-Grays"</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>shadow.col</code></td>
<td>

<p>Color of the shadow under the boxes.
Default <code>0</code>, no shadow.
Try <code>"gray"</code> or <code>"darkgray"</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>

<p>Extra arguments passed to <code>prp</code> and the plotting routines.
Any of <code>prp</code>'s arguments can be used.
</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>The returned value is identical to that of <code>prp</code>.
</p>


<h3>Author(s)</h3>

<p>Stephen Milborrow, borrowing heavily from the <code>rpart</code>
package by Terry M. Therneau and Beth Atkinson,
and the R port of that package by Brian Ripley.
</p>


<h3>See Also</h3>

<p>The package vignette <a href="../doc/prp.pdf">Plotting rpart trees with the rpart.plot package</a><br><code>prp</code><br><code>rpart.rules</code><br>
Functions in the <code>rpart</code> package:
<code>plot.rpart</code>
<code>text.rpart</code>
<code>rpart</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">old.par &lt;- par(mfrow=c(2,2))            # put 4 figures on one page

data(ptitanic)

#---------------------------------------------------------------------------

binary.model &lt;- rpart(survived ~ ., data = ptitanic, cp = .02)
                                        # cp = .02 for small demo tree

rpart.plot(binary.model,
           main = "titanic survived\n(binary response)")

rpart.plot(binary.model, type = 3, clip.right.labs = FALSE,
           branch = .4,
           box.palette = "Grays",       # override default GnBu palette
           main = "type = 3, clip.right.labs = FALSE, ...\n")

#---------------------------------------------------------------------------

anova.model &lt;- rpart(Mileage ~ ., data = cu.summary)

rpart.plot(anova.model,
           shadow.col = "gray",         # add shadows just for kicks
           main = "miles per gallon\n(continuous response)\n")

#---------------------------------------------------------------------------

multi.class.model &lt;- rpart(Reliability ~ ., data = cu.summary)

rpart.plot(multi.class.model,
           main = "vehicle reliability\n(multi class response)")

par(old.par)
</code></pre>


</div>