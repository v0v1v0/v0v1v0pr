<div class="container">

<table style="width: 100%;"><tr>
<td>MOE</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Mother of All Extractions</h2>

<h3>Description</h3>

  <p><code>MOE</code> function extracts the risk neutral density based on all models and summarizes the results.</p>


<h3>Usage</h3>

<pre><code class="language-R">MOE(market.calls, call.strikes, market.puts, put.strikes, call.weights = 1, 
  put.weights = 1, lambda = 1, s0, r, te, y, file.name = "myfile")
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>market.calls</code></td>
<td>
<p>market calls (most expensive to cheapest)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>call.strikes</code></td>
<td>
<p>strikes for the calls (smallest to largest)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>market.puts</code></td>
<td>
<p>market calls (cheapest to most expensive)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>put.strikes</code></td>
<td>
<p>strikes for the puts (smallest to largest)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>call.weights</code></td>
<td>
<p>Weights for the calls (must be in the same order of calls)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>put.weights</code></td>
<td>
<p>Weights for the puts (must be in the same order of puts)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambda</code></td>
<td>
<p>Penalty parameter to enforce the martingale condition</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>s0</code></td>
<td>
<p>Current asset value</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>r</code></td>
<td>
<p>risk free rate</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>te</code></td>
<td>
<p>time to expiration</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>dividend yield</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>file.name</code></td>
<td>
<p>File names where analysis is to be saved.  SEE DETAILS!</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The MOE function in a few key strokes extracts the risk neutral density
via various methods and summarizes the results.
</p>
<p>This function should only be used for European options.
</p>
<p>NOTE:  Three files will be produced: 
filename will have the pdf version of the results.
file.namecalls.csv will have the predicted call values.
file.nameputs.csv will have the predicted put values.
</p>


<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>bsm.mu</code></td>
<td>
<p>mean of log(S(T)), when S(T) is lognormal</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bsm.sigma</code></td>
<td>
<p>SD of log(S(T)), when S(T) is lognormal</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gb.a</code></td>
<td>
<p>extracted power parameter, when S(T) is assumed to be a GB rv</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gb.b</code></td>
<td>
<p>extracted scale paramter, when S(T) is assumed to be a GB rv</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gb.v</code></td>
<td>
<p>extracted first beta paramter, when S(T) is assumed to be a GB rv</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gb.w</code></td>
<td>
<p>extracted second beta parameter, when S(T) is assumed to be a GB rv</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mln.alpha.1</code></td>
<td>
<p>extracted proportion of the first lognormal.  Second one is 1 - <code>alpha.1</code> in mixture of lognormals</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mln.meanlog.1</code></td>
<td>
<p>extracted mean of the log of the first lognormal in mixture of lognormals</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mln.meanlog.2</code></td>
<td>
<p>extracted mean of the log of the second lognormal in mixture of lognormals</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mln.sdlog.1</code></td>
<td>
<p>extracted standard deviation of the log of the first lognormal in mixture of lognormals</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mln.sdlog.2</code></td>
<td>
<p>extracted standard deviation of the log of the second lognormal in mixture of lognormals</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ew.sigma </code></td>
<td>
<p>volatility when using the Edgeworth expansions</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ew.skew </code></td>
<td>
<p>normalized skewness when using the Edgeworth expansions</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ew.kurt </code></td>
<td>
<p>normalized kurtosis when using the Edgeworth expansions</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>a0</code></td>
<td>
<p>extracted constant term in the quadratic polynomial of Shimko method</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>a1</code></td>
<td>
<p>extracted coefficient term of k in the quadratic polynomial of Shimko method</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>a2</code></td>
<td>
<p>extracted coefficient term of k squared in the quadratic polynomial of Shimko method</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Kam Hamidieh</p>


<h3>References</h3>

<p>E. Jondeau and S. Poon and M. Rockinger (2007):
<em>Financial Modeling Under Non-Gaussian Distributions</em> 
Springer-Verlag, London
</p>


<h3>Examples</h3>

<pre><code class="language-R">
###
### You should see that all methods extract the same density!
###

r     = 0.05
te    = 60/365
s0    = 1000
sigma = 0.25
y     = 0.02

strikes     = seq(from = 500, to = 1500, by = 5)
bsm.prices  = price.bsm.option(r =r, te = te, s0 = s0, 
              k = strikes, sigma = sigma, y = y)

calls   = bsm.prices$call
puts    = bsm.prices$put

###
### See where your results will go...
###

getwd()


###
###  Running this may take 1-2 minutes...
###
### MOE(market.calls = calls, call.strikes = strikes, market.puts = puts, 
###    put.strikes = strikes, call.weights = 1, put.weights = 1, 
###    lambda = 1, s0 = s0, r = r, te = te, y = y, file.name = "myfile")
###
### You may get some warning messages.  This happens because the
###    automatic initial value selection sometimes picks values
###    that produce NaNs in the generalized beta density estimation.
###    These messages are often inconsequential.
###
</code></pre>


</div>