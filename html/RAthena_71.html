<div class="container">

<table style="width: 100%;"><tr>
<td>db_compute</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>S3 implementation of <code>db_compute</code> for Athena</h2>

<h3>Description</h3>

<p>This is a backend function for dplyr's <code>compute</code> function. Users won't be required to access and run this function.
</p>


<h3>Usage</h3>

<pre><code class="language-R">db_compute.AthenaConnection(con, table, sql, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>con</code></td>
<td>
<p>A <code>dbConnect</code> object, as returned by <code>dbConnect()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>table</code></td>
<td>
<p>Table name, if left default RAthena will use the default from <code>dplyr</code>'s <code>compute</code> function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sql</code></td>
<td>
<p>SQL code to be sent to the data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>passes <code>RAthena</code> table creation parameters: [<code>file_type</code>,<code>s3_location</code>,<code>partition</code>]
</p>

<ul>
<li>
<p><code>file_type:</code> What file type to store data.frame on s3, RAthena currently supports ["NULL","csv", "parquet", "json"]. 
<code>"NULL"</code> will let Athena set the file_type for you.
</p>
</li>
<li>
<p><code>s3_location:</code> s3 bucket to store Athena table, must be set as a s3 uri for example ("s3://mybucket/data/")
</p>
</li>
<li>
<p><code>partition:</code> Partition Athena table, requires to be a partitioned variable from previous table.</p>
</li>
</ul>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>db_compute</code> returns table name
</p>


<h3>See Also</h3>

<p><code>AthenaWriteTables</code> <code>backend_dbplyr_v2</code> <code>backend_dbplyr_v1</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# Note: 
# - Require AWS Account to run below example.
# - Different connection methods can be used please see `RAthena::dbConnect` documentation

library(DBI)
library(dplyr)

# Demo connection to Athena using profile name 
con &lt;- dbConnect(RAthena::athena())

# Write data.frame to Athena table
copy_to(con, mtcars,
        s3_location = "s3://mybucket/data/")
             
# Write Athena table from tbl_sql
athena_mtcars &lt;- tbl(con, "mtcars")
mtcars_filter &lt;- athena_mtcars %&gt;% filter(gear &gt;=4)

# create athena with unique table name
mtcars_filer %&gt;% 
  compute()

# create athena with specified name and s3 location
mtcars_filer %&gt;% 
    compute("mtcars_filer",
            s3_location = "s3://mybucket/mtcars_filer/")

# Disconnect from Athena
dbDisconnect(con)

## End(Not run)
</code></pre>


</div>