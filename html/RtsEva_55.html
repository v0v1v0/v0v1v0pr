<div class="container">

<table style="width: 100%;"><tr>
<td>tsEvaTransformSeriesToStatSeasonal_ciPercentile</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>tsEvaTransformSeriesToStatSeasonal_ciPercentile</h2>

<h3>Description</h3>

<p>This function decomposes a time series into a season-dependent trend and a season-dependent standard deviation.
The season-dependent amplitude is given by a seasonal factor multiplied by a slowly varying percentile.
</p>


<h3>Usage</h3>

<pre><code class="language-R">tsEvaTransformSeriesToStatSeasonal_ciPercentile(
  timeStamps,
  series,
  timeWindow,
  percentile
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>timeStamps</code></td>
<td>
<p>A vector of time stamps for the time series.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>series</code></td>
<td>
<p>The original time series.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timeWindow</code></td>
<td>
<p>The length of the moving window used for trend estimation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>percentile</code></td>
<td>
<p>The percentile value used for computing the slowly varying percentile.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list containing the following components:
</p>

<dl>
<dt><code>runningStatsMulteplicity</code></dt>
<dd>
<p>The size of each sample used to compute the average</p>
</dd>
<dt><code>stationarySeries</code></dt>
<dd>
<p>The transformed stationary series</p>
</dd>
<dt><code>trendSeries</code></dt>
<dd>
<p>The trend series</p>
</dd>
<dt><code>trendSeriesNonSeasonal</code></dt>
<dd>
<p>The non-seasonal trend series</p>
</dd>
<dt><code>stdDevSeries</code></dt>
<dd>
<p>The season-dependent standard deviation series</p>
</dd>
<dt><code>stdDevSeriesNonSeasonal</code></dt>
<dd>
<p>The non-seasonal standard deviation series</p>
</dd>
<dt><code>trendError</code></dt>
<dd>
<p>The error on the trend</p>
</dd>
<dt><code>stdDevError</code></dt>
<dd>
<p>The error on the standard deviation</p>
</dd>
<dt><code>statSer3Mom</code></dt>
<dd>
<p>The 3rd moment of the transformed stationary series</p>
</dd>
<dt><code>statSer4Mom</code></dt>
<dd>
<p>The 4th moment of the transformed stationary series</p>
</dd>
<dt><code>nonStatSeries</code></dt>
<dd>
<p>The original non-stationary series</p>
</dd>
<dt><code>Regime</code></dt>
<dd>
<p>The regime of the trend seasonality</p>
</dd>
<dt><code>timeStamps</code></dt>
<dd>
<p>The time stamps</p>
</dd>
<dt><code>trendNonSeasonalError</code></dt>
<dd>
<p>The error on the non-seasonal trend</p>
</dd>
<dt><code>stdDevNonSeasonalError</code></dt>
<dd>
<p>The error on the non-seasonal standard deviation</p>
</dd>
<dt><code>trendSeasonalError</code></dt>
<dd>
<p>The error on the seasonal trend</p>
</dd>
<dt><code>stdDevSeasonalError</code></dt>
<dd>
<p>The error on the seasonal standard deviation</p>
</dd>
</dl>
<h3>this function decomposes the series into a season-dependent trend and a</h3>

<p>season-dependent standard deviation.
The season-dependent standard deviation is given by a seasonal factor
multiplied by a slowly varying standard deviation.
transformation non stationary -&gt; stationary
x(t) =  (y(t) - trend(t) - ssn_trend(t))/(stdDev(t)*ssn_stdDev(t))
transformation stationary -&gt; non stationary
y(t) = stdDev(t)*ssn_stdDev(t)*x(t) + trend(t) + ssn_trend(t)
trasfData.trendSeries = trend(t) + ssn_trend(t)
trasfData.stdDevSeries = stdDev(t)*ssn_stdDev(t)
</p>


<h3>Examples</h3>

<pre><code class="language-R">timeAndSeries &lt;- ArdecheStMartin
timeStamps &lt;- ArdecheStMartin[,1]
series &lt;- ArdecheStMartin[,2]
#select only the 5 latest years
yrs &lt;- as.integer(format(timeStamps, "%Y"))
tokeep &lt;- which(yrs&gt;=2015)
timeStamps &lt;- timeStamps[tokeep]
series &lt;- series[tokeep]
timeWindow &lt;- 365 # 1 year
percentile &lt;- 90
result &lt;- tsEvaTransformSeriesToStatSeasonal_ciPercentile(timeStamps,
series, timeWindow, percentile)
plot(result$trendSeries)
</code></pre>


</div>