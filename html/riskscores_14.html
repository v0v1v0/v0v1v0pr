<div class="container">

<table style="width: 100%;"><tr>
<td>risk_mod</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Fit an Integer Risk Score Model</h2>

<h3>Description</h3>

<p>Fits an optimized integer risk score model using a cyclical coordinate descent
algorithm. Returns an object of class "risk_mod".
</p>


<h3>Usage</h3>

<pre><code class="language-R">risk_mod(
  X,
  y,
  gamma = NULL,
  beta = NULL,
  weights = NULL,
  lambda0 = 0,
  a = -10,
  b = 10,
  max_iters = 100,
  tol = 1e-05,
  shuffle = TRUE,
  seed = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>
<p>Input covariate matrix with dimension <code class="reqn">n \times p</code>;
every row is an observation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>Numeric vector for the (binomial) response variable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gamma</code></td>
<td>
<p>Starting value to rescale coefficients for prediction (optional).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>beta</code></td>
<td>
<p>Starting numeric vector with <code class="reqn">p</code> coefficients.
Default starting coefficients are rounded coefficients from a
logistic regression model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>Numeric vector of length <code class="reqn">n</code> with weights for each
observation. Unless otherwise specified, default will give equal weight to
each observation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambda0</code></td>
<td>
<p>Penalty coefficient for L0 term (default: 0).
See <code>cv_risk_mod()</code> for <code>lambda0</code> tuning.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>a</code></td>
<td>
<p>Integer lower bound for coefficients (default: -10).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>b</code></td>
<td>
<p>Integer upper bound for coefficients (default: 10).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_iters</code></td>
<td>
<p>Maximum number of iterations (default: 100).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tol</code></td>
<td>
<p>Tolerance for convergence (default: 1e-5).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>shuffle</code></td>
<td>
<p>Whether order of coefficients is shuffled during coordinate
descent (default: TRUE).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>An integer that is used as argument by <code>set.seed()</code> for
offsetting the random number generator. Default is to not set a
particular randomization seed.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function uses a cyclical coordinate descent algorithm to solve the
following optimization problem.
</p>
<p style="text-align: center;"><code class="reqn">\min_{\alpha,\beta} \quad \frac{1}{n} \sum_{i=1}^{n} (\gamma y_i x_i^T \beta - log(1 + exp(\gamma x_i^T \beta))) + \lambda_0 \sum_{j=1}^{p} 1(\beta_{j} \neq 0)</code>
</p>

<p style="text-align: center;"><code class="reqn">l \le \beta_j \le u \; \; \; \forall j = 1,2,...,p</code>
</p>

<p style="text-align: center;"><code class="reqn">\beta_j \in \mathbb{Z} \; \; \; \forall j = 1,2,...,p </code>
</p>

<p style="text-align: center;"><code class="reqn">\beta_0, \gamma \in \mathbb{R}</code>
</p>

<p>These constraints ensure that the model will be sparse and include
only integer coefficients.
</p>


<h3>Value</h3>

<p>An object of class "risk_mod" with the following attributes:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>gamma</code></td>
<td>
<p>Final scalar value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>beta</code></td>
<td>
<p>Vector of integer coefficients.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>glm_mod</code></td>
<td>
<p>Logistic regression object of class "glm" (see stats::glm).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>
<p>Input covariate matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>Input response vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>Input weights.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambda0</code></td>
<td>
<p>Imput <code>lambda0</code> value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model_card</code></td>
<td>
<p>Dataframe displaying the nonzero integer coefficients
(i.e. "points") of the risk score model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>score_map</code></td>
<td>
<p>Dataframe containing a column of possible scores and a column
with each score's associated risk probability.</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">y &lt;- breastcancer[[1]]
X &lt;- as.matrix(breastcancer[,2:ncol(breastcancer)])

mod1 &lt;- risk_mod(X, y)
mod1$model_card

mod2 &lt;- risk_mod(X, y, lambda0 = 0.01)
mod2$model_card

mod3 &lt;- risk_mod(X, y, lambda0 = 0.01, a = -5, b = 5)
mod3$model_card
</code></pre>


</div>