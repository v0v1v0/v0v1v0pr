<div class="container">

<table style="width: 100%;"><tr>
<td>updateAmBarChart</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Update the data of a bar chart</h2>

<h3>Description</h3>

<p>Update the data of a bar chart in a Shiny app (vertical,
horizontal, radial, or stacked bar chart).
</p>


<h3>Usage</h3>

<pre><code class="language-R">updateAmBarChart(session, outputId, data)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>session</code></td>
<td>
<p>the Shiny <code>session</code> object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outputId</code></td>
<td>
<p>the output id passed on to <code>amChart4Output</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>new data; if it is not valid, then nothing will happen (in order
to be valid it must have the same structure as the data passed on to
<code>amBarChart</code> / <code>amHorizontalBarChart</code> /
<code>amRadialBarChart</code> / <code>amStackedBarChart</code>); in this
case check the JavaScript console, it will report the encountered issue</p>
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">library(rAmCharts4)
library(shiny)

ui &lt;- fluidPage(
  br(),
  actionButton("update", "Update", class = "btn-primary"),
  br(), br(),
  amChart4Output("barchart", width = "650px", height = "470px")
)

server &lt;- function(input, output, session){

  set.seed(666)
  dat &lt;- data.frame(
    country = c("USA", "China", "Japan", "Germany", "UK", "France"),
    visits = c(3025, 1882, 1809, 1322, 1122, 1114),
    income = rpois(6, 25),
    expenses = rpois(6, 20)
  )
  newdat &lt;- data.frame(
    country = c("USA", "China", "Japan", "Germany", "UK", "France"),
    income = rpois(6, 25),
    expenses = rpois(6, 20)
  )

  output[["barchart"]] &lt;- renderAmChart4({
    amBarChart(
      data = dat,
      category = "country",
      values = c("income", "expenses"),
      valueNames = list(income = "Income", expenses = "Expenses"),
      draggable = TRUE,
      backgroundColor = "#30303d",
      columnStyle = list(
        income = amColumn(
          color = "darkmagenta", strokeColor = "#cccccc", strokeWidth = 2
        ),
        expenses = amColumn(
          color = "darkred", strokeColor = "#cccccc", strokeWidth = 2
        )
      ),
      chartTitle = list(text = "Income and expenses per country"),
      xAxis = "Country",
      yAxis = "Income and expenses",
      yLimits = c(0, 41),
      valueFormatter = "#.#",
      caption = "Year 2018",
      theme = "dark")
  })

  observeEvent(input[["update"]], {
    updateAmBarChart(session, "barchart", newdat)
  })

}

if(interactive()){
  shinyApp(ui, server)
}


# Survival probabilities ####
library(shiny)
library(rAmCharts4)

probs &lt;- c(control = 30, treatment = 75) # initial probabilities

ui &lt;- fluidPage(
  br(),
  sidebarLayout(
    sidebarPanel(
      wellPanel(
        tags$fieldset(
          tags$legend("Survival probability"),
          sliderInput(
            "control",
            "Control group",
            min = 0, max = 100, value = probs[["control"]], step = 1
          ),
          sliderInput(
            "treatment",
            "Treatment group",
            min = 0, max = 100, value = probs[["treatment"]], step = 1
          )
        )
      )
    ),
    mainPanel(
      amChart4Output("barchart", width = "500px", height = "400px")
    )
  )
)

server &lt;- function(input, output, session){

  dat &lt;- data.frame(
    group = c("Control", "Treatment"),
    alive = c(probs[["control"]], probs[["treatment"]]),
    dead  = 100 - c(probs[["control"]], probs[["treatment"]])
  )
  stacks &lt;- list(
    c("alive", "dead")
  )
  seriesNames &lt;- list(
    alive = "Alive",
    dead  = "Dead"
  )

  output[["barchart"]] &lt;- renderAmChart4({
    amStackedBarChart(
      dat,
      category = "group",
      stacks = stacks,
      seriesNames = seriesNames,
      yLimits = c(0, 100),
      chartTitle = amText(
        "Survival probabilities",
        fontFamily = "Trebuchet MS",
        fontSize = 30,
        fontWeight = "bold"
      ),
      xAxis = "Group",
      yAxis = "Probability",
      theme = "dataviz"
    )
  })

  observeEvent(list(input[["control"]], input[["treatment"]]), {
    newdat &lt;- data.frame(
      group = c("Control", "Treatment"),
      alive = c(input[["control"]], input[["treatment"]]),
      dead  = 100 - c(input[["control"]], input[["treatment"]])
    )
    updateAmBarChart(session, "barchart", newdat)
  })

}

if(interactive()){
  shinyApp(ui, server)
}
</code></pre>


</div>