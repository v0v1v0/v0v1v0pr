<div class="container">

<table style="width: 100%;"><tr>
<td>csu_bar_top</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>csu_bar_top</h2>

<h3>Description</h3>

<p><code>csu_bar_top</code> plots top X single-sided or double-sided bar chart.
</p>


<h3>Usage</h3>

<pre><code class="language-R">csu_bar_top(df_data,
	var_value, 
	var_bar,
	group_by=NULL,
	nb_top = 10,
	plot_title=NULL,
	plot_subtitle=NULL,
	xtitle= NULL,
	label_by=NULL,
	color=NULL,
	digits = 1)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df_data</code></td>
<td>

<p>Data (need to be R <code>data.frame</code> format, see examples to import csv file).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var_value</code></td>
<td>

<p>Value variable.<br>
There must be only 1 value for each bar.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var_bar</code></td>
<td>

<p>Bar label variable.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group_by</code></td>
<td>


<ul>
<li>
<p> Single-sided bar chart. <code>NULL</code> (default)
</p>
</li>
<li>
<p> Double-sided bar chart. Variable name with exactly 2 values. (For example, "sex").
</p>
</li>
</ul>
<p>Must be filled if <code>label_by</code> argument is defined.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nb_top</code></td>
<td>

<p>Lowest Rank included. Default is 10.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot_title</code></td>
<td>

<p>Title of the plot. (For example, "Top 10 cancer sites").
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot_subtitle</code></td>
<td>

<p>Subtitle of the plot. (For example, "Males").
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xtitle</code></td>
<td>

<p>x-axe title. (For example, "Number of cases").
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label_by</code></td>
<td>

<p>2 values vector. Will overwrite the legend label for double-sided bar chart. (See <code>group_by</code>).<br>
For example: c("Male", "Female"). 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>color</code></td>
<td>

<p>The color codes are hexadecimal (e.g. "#FF0000") or predefined R color names (e.g. "red").<br></p>

<ul>
<li>
<p> Single-sided bar chart. 1 hexadecimal color code (same color for each bar) or variable name with a color associated to each bar label variable. 
</p>
</li>
<li>
<p> Double-sided bar chart. 2 values vector. For example: c("#2c7bb6","#b62ca1").
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>

<p>Number of decimal digits. Default: 1
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function plots a top X (default is top 10) bar chart, single-sided or double sided.
</p>


<h3>Value</h3>

<p>Return plots and a <code>data.frame</code>.
</p>


<h3>Author(s)</h3>

<p>Mathieu Laversanne
</p>


<h3>See Also</h3>

<p><code>csu_group_cases</code>
<code>csu_merge_cases_pop</code>
<code>csu_asr</code>
<code>csu_cumrisk</code>
<code>csu_eapc</code>
<code>csu_ageSpecific</code>
<code>csu_ageSpecific_top</code>
<code>csu_time_trend</code>
<code>csu_trendCohortPeriod</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
data(data_individual_file)
data(data_population_file)
data(ICD_group_GLOBOCAN)

#Group individual data by:
#5 year age group
#ICD grouping from dataframe ICD_group_GLOBOCAN
#year extract from date of incidence

df_data_year &lt;- csu_group_cases(data_individual_file,
  var_age="age",
  group_by=c("sex", "regcode", "reglabel"),
  df_ICD = ICD_group_GLOBOCAN,
  var_ICD  ="site",
  var_year = "doi")     

#Merge 5-years age grouped data with population by year (automatic) and sex

df_data &lt;- csu_merge_cases_pop(
  df_data_year, 
  data_population_file, 
  var_age = "age_group",
  var_cases = "cases",
  var_py = "pop",
  group_by = c("sex"))


#prepare for calculate ASR
df_data$age_group_label &lt;- NULL # to avoid warning
df_data &lt;- subset(df_data , year == 2012) # to keep only 2012 data
df_data$year &lt;- NULL # to avoid warning

# calculate asr
df_asr &lt;- csu_asr(df_data,
  "age_group", 
  "cases",
  "pop",
  group_by=c("sex", "ICD_group", "LABEL", "reglabel", "regcode"),
  missing_age =19)

#remove Other cancer
df_asr &lt;- subset(df_asr , LABEL != "Other") 
df_asr &lt;- subset(df_asr , LABEL != "Other skin")


#keep male
df_asr_M &lt;- subset(df_asr , sex==1)

#Single sided bar plot 
data1 &lt;- csu_bar_top(
   df_asr_M,
   var_value="cases",
   var_bar="LABEL",
   nb_top = 10,
   plot_title = "Top 10 cancer sites",
   xtitle= "Number of cases",
   color= c("#2c7bb6"),
   digits=0) 

#Double sided bar plot example 1
data2 &lt;- csu_bar_top(
   df_asr,
   var_value="cases",
   var_bar="LABEL",
   group_by="sex",
   nb_top = 15,
   plot_title = "Top 15 cancer sites",
   xtitle= "Number of cases",
   label_by=c("Male", "Female"),
   color = c("#2c7bb6","#b62ca1"),
   digits=0) 

#Double sided bar plot example 2
data3 &lt;- csu_bar_top(
   df_asr,
   var_value="asr",
   var_bar="LABEL",
   group_by="sex",
   nb_top = 10,
   plot_title = "Top 10 cancer sites",
   xtitle= "Age-standardized rate per 100,000",
   label_by=c("Male", "Female"),
   color = c("#2c7bb6","#b62ca1"),
   digits=1) 

</code></pre>


</div>