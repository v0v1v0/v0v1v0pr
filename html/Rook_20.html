<div class="container">

<table style="width: 100%;"><tr>
<td>Request-class</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Class <code>Request</code>
</h2>

<h3>Description</h3>

<p>A convenience class for working with a <code>Rook</code> environment. Be sure to see the example at the end of this help file.
</p>


<h3>Methods</h3>


<dl>
<dt>
<code>parseable_data()</code>:</dt>
<dd>
<p> Returns a boolean value determining if the POST payload is parseable. </p>
</dd>
<dt>
<code>url()</code>:</dt>
<dd>
<p> Returns url as a character string containing the scheme, host, port, and possibly the GET query string if supplied.</p>
</dd>
<dt>
<code>request_method()</code>:</dt>
<dd>
<p> Returns the HTTP method as a character string, e.g. 'GET', 'POST', etc. </p>
</dd>
<dt>
<code>GET()</code>:</dt>
<dd>
<p> Returns a named list containing the variables parsed from the query string. </p>
</dd>
<dt>
<code>post()</code>:</dt>
<dd>
<p> Returns TRUE if the current request method is 'POST', FALSE otherwise. </p>
</dd>
<dt>
<code>new(env)</code>:</dt>
<dd>
<p> Instantiates a new <code>Request</code> object for the given <code>Rook</code> environment.</p>
</dd>
<dt>
<code>media_type()</code>:</dt>
<dd>
<p> Returns the media type for the current request as a character string.</p>
</dd>
<dt>
<code>query_string()</code>:</dt>
<dd>
<p> Returns the unparsed query string. </p>
</dd>
<dt>
<code>fullpath()</code>:</dt>
<dd>
<p> Returns the same string as url() but without the scheme, host, and port. </p>
</dd>
<dt>
<code>referer()</code> or <code>referrer()</code>:</dt>
<dd>
<p> Returns the referring url.  </p>
</dd>
<dt>
<code>cookies()</code>:</dt>
<dd>
<p> Returns any cookies in the request as a named list. </p>
</dd>
<dt>
<code>content_charset()</code>:</dt>
<dd>
<p> Returns the content charset as a character string. </p>
</dd>
<dt>
<code>head()</code>:</dt>
<dd>
<p> Returns TRUE if the HTTP method is 'HEAD', FALSE otherwise.</p>
</dd>
<dt>
<code>accept_encoding()</code>:</dt>
<dd>
<p> Returns the accept encoding header as a character string.</p>
</dd>
<dt>
<code>content_length()</code>:</dt>
<dd>
<p> Returns content length header value as a string. </p>
</dd>
<dt>
<code>form_data()</code>:</dt>
<dd>
<p> Returns TRUE if there's form data, e.g. POST data with the request, FALSE otherwise.</p>
</dd>
<dt>
<code>xhr()</code>:</dt>
<dd>
<p> Returns the x-requested-with header value as a character string.</p>
</dd>
<dt>
<code>params()</code>:</dt>
<dd>
<p> Returns the combination of <code>POST()</code> and <code>GET()</code> in one named list.</p>
</dd>
<dt>
<code>media_type_params()</code>:</dt>
<dd>
<p> Returns any media type parameters from the content type as a named list. </p>
</dd>
<dt>
<code>user_agent()</code>:</dt>
<dd>
<p> Returns the user-agent header value as a character string. </p>
</dd>
<dt>
<code>put()</code>:</dt>
<dd>
<p> Returns TRUE if the current request is a 'PUT'. </p>
</dd>
<dt>
<code>get()</code>:</dt>
<dd>
<p> Returns TRUE if the current request is a 'GET'. </p>
</dd>
<dt>
<code>path()</code>:</dt>
<dd>
<p> Returns a character string like <code>fullpath()</code> but without the query string. </p>
</dd>
<dt>
<code>body()</code>:</dt>
<dd>
<p> Returns the 'rook.input' object from the environment. See <code>RhttpdInputStream</code> for more information.</p>
</dd>
<dt>
<code>port()</code>:</dt>
<dd>
<p> Returns the server port as an integer.e</p>
</dd>
<dt>
<code>host_with_port()</code>:</dt>
<dd>
<p> Returns the host and port as a character string separated by ':'. </p>
</dd>
<dt>
<code>scheme()</code>:</dt>
<dd>
<p> Returns the scheme, e.g. 'http' or 'https', as a character string. </p>
</dd>
<dt>
<code>ip()</code>:</dt>
<dd>
<p> Returns the remote IP address as a character string. </p>
</dd>
<dt>
<code>options()</code>:</dt>
<dd>
<p> Returns TRUE if the current request is 'OPTIONS'. </p>
</dd>
<dt>
<code>to_url(url, ...)</code>:</dt>
<dd>
<p> Concatenates the script name with the <code>url</code> argument along with any named parameters passed via <code>...</code> .</p>
</dd>
<dt>
<code>host()</code>:</dt>
<dd>
<p> Returns the server host as a character string. </p>
</dd>
<dt>
<code>POST()</code>:</dt>
<dd>
<p> Returns a named list containing the variables parsed from the POST payload.</p>
</dd>
<dt>
<code>trace()</code>:</dt>
<dd>
<p> Returns TRUE if the current request is 'TRACE'. </p>
</dd>
<dt>
<code>script_name(s=NULL)</code>:</dt>
<dd>
<p> Returns the script name of the application, e.g. '/custom/multi'. Also, if <code>s</code> is not NULL, sets the script name to <code>s</code>. </p>
</dd>
<dt>
<code>content_type()</code>:</dt>
<dd>
<p> Returns the content-type header value as a character string. </p>
</dd>
<dt>
<code>delete()</code>:</dt>
<dd>
<p> Returns TRUE if the current request is 'DELETE'. </p>
</dd>
<dt>
<code>path_info(s=NULL)</code>:</dt>
<dd>
<p> Returns the portion of the url after the script name as a character string. If <code>s</code> is not NULL, sets the path info to <code>s</code>.</p>
</dd>
</dl>
<h3>See Also</h3>

<p><code>Rhttpd</code> and <code>Response</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">#
# The following example prints out the result of each method.
# 
ls_str &lt;- function(s) paste(capture.output(str(s),file=NULL),collapse='\n')
s &lt;- Rhttpd$new()
## Not run: 
s$start(quiet=TRUE)

## End(Not run)
s$add(name="request",
    app=function(env){
        req &lt;- Request$new(env)
        res &lt;- Response$new()
        res$set_cookie('imacookie','42')
        action &lt;- req$to_url('/foo',bar=1,baz='three')
        res$write('&lt;form enctype="multipart/form-data" method=POST action="')
        res$write(action)
        res$write('"&gt;')
        res$write('Upload a file: &lt;input type=file name=fileUpload&gt;')
        res$write('&lt;input type=submit&gt;&lt;/form&gt;&lt;br&gt;&lt;pre&gt;')
        res$write(c('parseable_data: ',req$parseable_data(),'\n'))
        res$write(c('url: ',req$url(),'\n'))
        res$write(c('request_method: ',req$request_method(),'\n'))
        res$write(c('GET: ',ls_str(req$GET()),'\n'))
        res$write(c('post: ',req$post(),'\n'))
        res$write(c('media_type: ',req$media_type(),'\n'))
        res$write(c('query_string: ',req$query_string(),'\n'))
        res$write(c('fullpath: ',req$fullpath(),'\n'))
        res$write(c('referer: ',req$referer(),'\n'))
        res$write(c('cookies: ',ls_str(req$cookies()),'\n'))
        res$write(c('content_charset: ',req$content_charset(),'\n'))
        res$write(c('head: ',req$head(),'\n'))
        res$write(c('accept_encoding: ',req$accept_encoding(),'\n'))
        res$write(c('content_length: ',req$content_length(),'\n'))
        res$write(c('form_data: ',req$form_data(),'\n'))
        res$write(c('xhr: ',req$xhr(),'\n'))
        res$write(c('params: ',ls_str(req$params()),'\n'))
        res$write(c('media_type_params:\n',ls_str(req$media_type_params()),'\n'))
        res$write(c('user_agent: ',req$user_agent(),'\n'))
        res$write(c('put: ',req$put(),'\n'))
        res$write(c('get: ',req$get(),'\n'))
        res$write(c('path: ',req$path(),'\n'))
        res$write(c('body: ',ls_str(req$body()),'\n'))
        res$write(c('port: ',req$port(),'\n'))
        res$write(c('host_with_port: ',req$host_with_port(),'\n'))
        res$write(c('scheme: ',req$scheme(),'\n'))
        res$write(c('ip: ',req$ip(),'\n'))
        res$write(c('options: ',req$options(),'\n'))
        res$write(c('to_url: ',req$to_url('foo',bar=1,baz='two'),'\n'))
        res$write(c('host: ',req$host(),'\n'))
        res$write(c('POST: ',ls_str(req$POST()),'\n'))
        res$write(c('trace: ',req$trace(),'\n'))
        res$write(c('script_name: ',req$script_name(),'\n'))
        res$write(c('content_type: ',req$content_type(),'\n'))
        res$write(c('delete: ',req$delete(),'\n'))
        res$write(c('path_info: ',req$path_info(),'\n'))
        res$write(c('\nRac env: ',ls_str(as.list(env)),'\n'))
        res$finish()
    }
)
## Not run: 
s$browse('request') # Opens a browser window to the app.

## End(Not run)
s$remove(all=TRUE)
rm(s)
</code></pre>


</div>