<div class="container">

<table style="width: 100%;"><tr>
<td>plot_tree</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Create an igraph tree from a sentence</h2>

<h3>Description</h3>

<p>Create an igraph tree from a token_index (as_tokenindex) or a data.frame that can be coerced to a tokenindex.
</p>
<p>By default, all columns in the data are included as labels. This can be changes by using the ... argument.
</p>


<h3>Usage</h3>

<pre><code class="language-R">plot_tree(
  tokens,
  ...,
  sentence_i = 1,
  doc_id = NULL,
  sentence = NULL,
  annotation = NULL,
  only_annotation = FALSE,
  pdf_file = NULL,
  allign_text = TRUE,
  ignore_rel = NULL,
  all_lower = FALSE,
  all_abbrev = NULL,
  textsize = 1,
  spacing = 1,
  use_color = TRUE,
  max_curve = 0.3,
  palette = grDevices::terrain.colors,
  rel_on_edge = F,
  pdf_viewer = FALSE,
  viewer_mode = TRUE,
  viewer_size = c(100, 100)
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>tokens</code></td>
<td>
<p>A tokenIndex data.table, or any data.frame coercible with as_tokenindex. Can also be a corpustools tCorpus.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Optionally, select which columns to include as labels and how to present them. Can be quoted or unquoted names and expressions, using columns in the tokenIndex. For example, plot_tree(tokens, token, pos) will use the $token and $pos columns in tokens. You can also use expressions for easy controll of visulizations. For example: plot_tree(tokens, tolower(token), abbreviate(pos,1)). (note that abbreviate() is really usefull here)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sentence_i</code></td>
<td>
<p>By default, plot_tree uses the first sentence (sentence_i = 1) in the data. sentence_i can be changed to select other sentences by position (the i-th unique sentence in the data). Note that sentence_i does not refer to the values in the sentence column (for this use the sentence argument together with doc_id)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>doc_id</code></td>
<td>
<p>Optionally, the document id can be specified. If so, sentence_i refers to the i-th sentence within the given document.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sentence</code></td>
<td>
<p>Optionally, the sentence id can be specified (note that sentence_i refers to the position). If sentence is given, doc_id has to be given as well.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>annotation</code></td>
<td>
<p>Optionally, a column with an rsyntax annotation, to add boxes around the annotated nodes.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>only_annotation</code></td>
<td>
<p>If annotation is given, only_annotation = TRUE will print only the nodes with annotations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pdf_file</code></td>
<td>
<p>Directly save the plot as a pdf file</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>allign_text</code></td>
<td>
<p>If TRUE (default) allign text (the columns specified in ...) in a single horizontal line at the bottom, instead of following the different levels in the tree</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ignore_rel</code></td>
<td>
<p>Optionally, a character vector with relation names that will not be shown in the tree</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>all_lower</code></td>
<td>
<p>If TRUE, make all text lowercase</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>all_abbrev</code></td>
<td>
<p>If an integer, abbreviate all text, with the number being the target number of characters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>textsize</code></td>
<td>
<p>A number to manually change the textsize. The function tries to set a suitable textsize for the plotting device, but if this goes wrong and now everything is broken and sad, you can multiply the textsize with the given number.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>spacing</code></td>
<td>
<p>A number for scaling the distance between words (between 0 and infinity)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use_color</code></td>
<td>
<p>If true, use colors</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_curve</code></td>
<td>
<p>A number for controlling the allowed amount of curve in the edges.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>palette</code></td>
<td>
<p>A function for creating a vector of n contiguous colors. See ?terrain.colors for standard functions and documentation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rel_on_edge</code></td>
<td>
<p>If TRUE, print relation label on edge instead of above the node</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pdf_viewer</code></td>
<td>
<p>If TRUE, view the plot as a pdf. If no pdf_file is specified, the pdf will be saved to the temp folder</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>viewer_mode</code></td>
<td>
<p>By default, the plot is saved as a PNG embedded in a HTML and opened in the viewer. This hack makes it independent of the 
size of the plotting device and enables scrolling. By setting viewer_mode to False, the current plotting device is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>viewer_size</code></td>
<td>
<p>A vector of length 2, that multiplies the width (first value) and height (second value) of the viewer_mode PNG</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>plots a dependency tree.
</p>


<h3>Examples</h3>

<pre><code class="language-R">tokens = tokens_spacy[tokens_spacy$doc_id == 'text3',]


if (interactive()) plot_tree(tokens, token, pos)

## plot with annotations
direct = tquery(label = 'verb', pos = 'VERB', fill=FALSE,
                children(label = 'subject', relation = 'nsubj'),
                children(label = 'object', relation = 'dobj'))
passive = tquery(label = 'verb', pos = 'VERB', fill=FALSE,
                 children(label = 'subject', relation = 'agent'),
                 children(label = 'object', relation = 'nsubjpass'))
 
if (interactive()) {                
tokens %&gt;%
   annotate_tqueries('clause', pas=passive, dir=direct) %&gt;%
   plot_tree(token, pos, annotation='clause')
}

</code></pre>


</div>