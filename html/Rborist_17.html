<div class="container">

<table style="width: 100%;"><tr>
<td>rfTrain</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Rapid Decision Tree Training</h2>

<h3>Description</h3>

<p>Accelerated training using the Random Forest (trademarked name)
algorithm.  Tuned for multicore and GPU hardware.  Bindable with most
numerical front-end languages in addtion to R.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## Default S3 method:
rfTrain(preFormat,
                 sampler,
                 y,
                autoCompress = 0.25,
                ctgCensus = "votes",
                classWeight = NULL,
                maxLeaf = 0,
                minInfo = 0.01,
                minNode = if (is.factor(y)) 2 else 3,
                nLevel = 0,
                nThread = 0,
                predFixed = 0,
                predProb = 0.0,
                predWeight = NULL, 
                regMono = NULL,
                splitQuant = NULL,
                thinLeaves = FALSE,
                treeBlock = 1,
                verbose = FALSE,
                ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p> the response (outcome) vector, either numerical or
categorical.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>preFormat</code></td>
<td>
<p>Compressed, presorted representation of the predictor
values. Row count must conform with <code>y</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sampler</code></td>
<td>
<p>Compressed representation of the sampled response.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>autoCompress</code></td>
<td>
<p>plurality above which to compress predictor values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ctgCensus</code></td>
<td>
<p>report categorical validation by vote or by probability.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>classWeight</code></td>
<td>
<p>proportional weighting of classification
categories.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>maxLeaf</code></td>
<td>
<p>maximum number of leaves in a tree.  Zero denotes no limit.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minInfo</code></td>
<td>
<p>information ratio with parent below which node does not split.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>minNode</code></td>
<td>
<p>minimum number of distinct row references to split a node.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nLevel</code></td>
<td>
<p>maximum number of tree levels to train, including
terminals (leaves).  Zero denotes no limit.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nThread</code></td>
<td>
<p>suggests an <code>OpenMP</code>-style thread count.  Zero denotes
the default processor setting.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>predFixed</code></td>
<td>
<p>number of trial predictors for a split (<code>mtry</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>predProb</code></td>
<td>
<p>probability of selecting individual predictor as trial splitter.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>predWeight</code></td>
<td>
<p>relative weighting of individual predictors as trial
splitters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>regMono</code></td>
<td>
<p>signed probability constraint for monotonic
regression.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>splitQuant</code></td>
<td>
<p>(sub)quantile at which to place cut point for
numerical splits</p>
</td>
</tr>
</table>
<p>.
</p>
<table>
<tr style="vertical-align: top;">
<td><code>thinLeaves</code></td>
<td>
<p>bypasses creation of leaf state in order to reduce
memory footprint.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>treeBlock</code></td>
<td>
<p>maximum number of trees to train during a single
level (e.g., coprocessor computing).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>indicates whether to output progress of training.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Not currently used.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>an object of class <code>arbTrain</code>, containing:
</p>

<ul>
<li> <p><code>version</code> the version of the <code>Rborist</code> package used to train.
</p>
</li>
<li> <p><code>samplerHash</code> hash value of the <code>Sampler</code> object used to train.  Recorded for consistency of subsequent commands.
</p>
</li>
<li> <p><code>predInfo</code> a vector of forest-wide Gini (classification) or weighted
variance (regression), by predictor.
</p>
</li>
<li> <p><code>predMap</code> a vector of integers mapping internal to front-end
predictor indices.
</p>
</li>
<li> <p><code>forest</code> an object of class <code>Forest</code> containing:
</p>

<ul>
<li> <p><code>nTree</code> the number of trees trained.
</p>
</li>
<li> <p><code>node</code> an object of class <code>Node</code> consisting of:
</p>

<ul>
<li> <p><code>treeNode</code> forest-wide vector of packed node representations.
</p>
</li>
<li> <p><code>extent</code> per-tree node counts.
</p>
</li>
<li> <p><code>scores</code> numeric vector of scores, for all terminals and nonterminals.
</p>
</li>
<li> <p><code>factor</code> an object of class <code>Factor</code> consisting of:
</p>

<ul>
<li> <p><code>facSplit</code> forest-wide vector of packed factor bits.
</p>
</li>
<li> <p><code>extent</code> per-tree extent of factor bits.
</p>
</li>
<li> <p><code>observed</code> forest-wide vector of observed factor bits.
</p>
</li>
</ul>
</li>
</ul>
</li>
<li> <p><code>Leaf</code> an object of class <code>Leaf</code> containing:
</p>

<ul>
<li> <p><code>extent</code> forest-wide vector of leaf populations, i.e., counts of unique samples.
</p>
</li>
<li> <p><code>index</code> forest-wide vector of sample indices.
</p>
</li>
</ul>
</li>
</ul>
</li>
<li> <p><code>diag</code> diagnostics accumulated over the training task.
</p>
</li>
</ul>
<h3>Author(s)</h3>

<p>Mark Seligman at Suiji.
</p>


<h3>See Also</h3>

<p><code>Rborist</code></p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
  # Regression example:
  nRow &lt;- 5000
  x &lt;- data.frame(replicate(6, rnorm(nRow)))
  y &lt;- with(x, X1^2 + sin(X2) + X3 * X4) # courtesy of S. Welling.

  # Classification example:
  data(iris)

  # Generic invocation:
  rt &lt;- rfTrain(y)


  # Causes 300 trees to be trained:
  rt &lt;- rfTrain(y, nTree = 300)


  # Causes validation census to report class probabilities:
  rt &lt;- rfTrain(iris[-5], iris[5], ctgCensus="prob")


  # Applies table-weighting to classification categories:
  rt &lt;- rfTrain(iris[-5], iris[5], classWeight = "balance")


  # Weights first category twice as heavily as remaining two:
  rt &lt;- rfTrain(iris[-5], iris[5], classWeight = c(2.0, 1.0, 1.0))


  # Does not split nodes when doing so yields less than a 2% gain in
  # information over the parent node:
  rt &lt;- rfTrain(y, preFormat, sampler, minInfo=0.02)


  # Does not split nodes representing fewer than 10 unique samples:
  rt &lt;- rfTrain(y, preFormat, sampler, minNode=10)


  # Trains a maximum of 20 levels:
  rt &lt;- rfTrain(y, preFormat, sampler, nLevel = 20)


  # Trains, but does not perform subsequent validation:
  rt &lt;- rfTrain(y, preFormat, sampler, noValidate=TRUE)


  # Chooses 500 rows (with replacement) to root each tree.
  rt &lt;- rfTrain(y, preFormat, sampler, nSamp=500)


  # Chooses 2 predictors as splitting candidates at each node (or
  # fewer, when choices exhausted):
  rt &lt;- rfTrain(y, preFormat, sampler, predFixed = 2)  


  # Causes each predictor to be selected as a splitting candidate with
  # distribution Bernoulli(0.3):
  rt &lt;- rfTrain(y, preFormat, sampler, predProb = 0.3) 


  # Causes first three predictors to be selected as splitting candidates
  # twice as often as the other two:
  rt &lt;- rfTrain(y, preFormat, sampler, predWeight=c(2.0, 2.0, 2.0, 1.0, 1.0))


  # Constrains modelled response to be increasing with respect to X1
  # and decreasing with respect to X5.
  rt &lt;- rfTrain(x, y, preFormat, sampler, regMono=c(1.0, 0, 0, 0, -1.0, 0))


  # Suppresses creation of detailed leaf information needed for
  # quantile prediction and external tools.
  rt &lt;- rfTrain(y, preFormat, sampler, thinLeaves = TRUE)

  spq &lt;- rep(0.5, ncol(x))
  spq[0] &lt;- 0.0
  spq[1] &lt;- 1.0
  rt &lt;- rfTrain(y, preFormat, sampler, splitQuant = spq)
  
## End(Not run)
</code></pre>


</div>