<div class="container">

<table style="width: 100%;"><tr>
<td>prepost</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Identifying Predictors of Resilience to Stressors in Single-Arm Studies of Pre-Post Change</h2>

<h3>Description</h3>

<p>Studies of resilience in older adults are typically conducted with a single-arm where everyone experiences the stressor. The simplistic
approach of regressing change versus baseline yields biased estimates due to mathematical coupling and regression-to-the-mean. This function provides a method to correct the bias.
</p>


<h3>Usage</h3>

<pre><code class="language-R">prepost(formula, data, change=TRUE, k=c(1.0,1.5, 2.0), m=1, nboot=1000, 
    ci.level=0.95, boot.method=c("perc", "norm", "basic", "bca"),
    ncores=2)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>

<p>formula object where LHS is Post response variable and RHS is pre-response variable plus the covariates; note: the first variable of the RHS of the formula must be the pre-response variable. For example, <code>y2 ~ y1 + x1 + x2</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>

<p>data-frame containing all the variables. Only complete cases are used in the analysis, i.e. rows of dataframe with missing values in any of the predictors are automatically deleted.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k</code></td>
<td>

<p>A sensitivity analysis parameter.  Typically, it is greater than or equal to 1.0.  It is recommended that the user provide at least two values to examine how the effects vary with ‘k’.  Default setting allows three values:  k = 1.0, 1.5, and 2.0.  For more details about this parameter refer to the manuscript.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>m</code></td>
<td>

<p>Another sensitivity analysis parameter.  It is set equal to 1.0.  It is recommended that the user not change this unless there is information from an external study to justify a diferent value.  For more details about this parameter refer to the manuscript.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>change</code></td>
<td>

<p>A logical variable.  If <code>TRUE</code> the dependent variable of regression is the pre-post change. If <code>FALSE</code>, the post response is used as the dependent variable.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nboot</code></td>
<td>

<p>Number of boot strap samples for calculating the confidence intervals of corrected regression coefficients.  Default is 1000. 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ci.level</code></td>
<td>

<p>Confidence coefficient for confidence interval.  Default is 95% confidence intervals.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>boot.method</code></td>
<td>

<p>The bootstrap method for confidence interval.  Four options are provided: percentile, normal approximation, basic, and bias-corrected accelerated bootstrap. Default is “percentile.”</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ncores</code></td>
<td>

<p>Number of cores avaialble for parallel computing.  Default is set to 2 due to CRAN requirements.  If more cores are available, the user can utilize all available cores with the command: <br><code>ncores = parallel::detectCores()</code>
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function uses the <code>parallel</code> and <code>foreach</code> packages to perform parallel computations of bootstrap confidence intervals for different values of the sensitivity parameter, ‘k.’
</p>


<h3>Value</h3>

<table>
<tr style="vertical-align: top;">
<td><code>beta.naive</code></td>
<td>
<p>Unadjusted, naive estimates of regression coefficients</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>corrected.beta</code></td>
<td>
<p>The corrected coefficients of the variables. A matrix with one column of parameter values for each value of sensitivity parameter ‘k.’</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>CI</code></td>
<td>
<p>A list of length equal to the number of sensitivity values. Each component of the list is a matrix with two columns of lower and upper confidence interval for each parameter.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Ravi Varadhan
</p>


<h3>References</h3>

<p>Varadhan, R., Zhu, J., and Bandeen-Roche, K (2023). Identifying Predictors of Resilience to Stressors
in Single-Arm Studies of Pre-Post Change. <em>Biostatistics</em>. To appear. 
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(tkr)

names(tkr.dat)
dim(tkr.dat)

# pre-post change regression
ans1 &lt;- prepost(post.Y ~ pre.Y + I(age-mean(age)) + I((age - mean(age))^2) + 
bmi + gender + as.factor(smoker), data=tkr.dat, k=c(1.2, 1.5), nboot=200)
print(ans1)

# Post regression
ans2 &lt;- prepost(post.Y ~ pre.Y + I(age-mean(age)) + I((age - mean(age))^2) + 
bmi + gender + as.factor(smoker), data=tkr.dat, 
k=c(1.2, 1.5), change=FALSE, nboot=200, boot.method="norm")
print(ans2)

# without any covariates
ans3 &lt;- prepost(post.Y ~ pre.Y, data=tkr.dat, k=c(1.2, 2.0), nboot=200)
print(ans3)

# Bootstrapping using "bca" - realtively slow
# Not run
#ans4 &lt;- prepost(post.Y ~ pre.Y, data=tkr.dat, k=c(1.2, 2.0), change=FALSE,
#boot.method = "bca")

</code></pre>


</div>