<div class="container">

<table style="width: 100%;"><tr>
<td>treatment_assign</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>treatment_assign() carries out robust treatment assignment by strata/blocks</h2>

<h3>Description</h3>

<p>treatment_assign() carries out robust treatment assignment by strata/blocks
</p>


<h3>Usage</h3>

<pre><code class="language-R">treatment_assign(
  data,
  share_control,
  n_t = 2,
  strata_varlist,
  missfits = c("global", "NA", "strata"),
  seed = 1990,
  share_ti = rep(1/n_t - share_control/n_t, times = n_t),
  key
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data.frame, tibble or data.table</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>share_control</code></td>
<td>
<p>share of the observations assigned to control group</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_t</code></td>
<td>
<p>Number of treatments groups</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>strata_varlist</code></td>
<td>
<p>vector of categorical variables to form the strata/blocks for random assignment. 
Should be in the form of vars(var1, var2, ...)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>missfits</code></td>
<td>
<p>How to handle the misfits. Default is "global". See Carril (2016) for details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>A number used to set.seed().</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>share_ti</code></td>
<td>
<p>The share of each treatment group. If NULL (Default), each treatment group will 
have equal share.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>key</code></td>
<td>
<p>The key identifier column of data.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function creates a variable that indicates the treatment status. The random 
assignment is made by strata/blocks. It can handle equal or unequal treatment shares. 
Finally, it has three methods available to handle misfits (same as randtreat in STATA):
"global": assigning the observations that couldn't be randomly assigned globally, 
"strata": assigning the observations that couldn't be randomly assigned by strata,
"NA": set the the treat observations that couldn't be randomly assigned to NA.
</p>


<h3>Value</h3>

<p>A list: "data" = the data with key, treat, strata, misfit column., 
"summary_strata" = A summary tibble with the membership of each strata and its size.
</p>


<h3>Examples</h3>

<pre><code class="language-R">data&lt;-data.frame(key = c(1:1000), 
                 ing_quartile = rep(c("Q1", "Q2", "Q3", "Q4"), each = 250), 
                 age_quartile = rep(c("Q1", "Q2", "Q3", "Q4"), times = 250))
assigment&lt;-treatment_assign(data = data, share_control = 0.1, n_t = 3,
                            strata_varlist = dplyr::vars(ing_quartile, 
                            age_quartile), missfits = "strata", 
                            seed = 1990, key = "key")
table(data$treat, useNA = "ifany")
prop.table(table(data$treat, useNA = "ifany"))
</code></pre>


</div>