<div class="container">

<table style="width: 100%;"><tr>
<td>purgeRestoreProject</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Purge and Restore Project Data</h2>

<h3>Description</h3>

<p>These functions are primarily intended to assist with testing
features of <code>redcapAPI</code>. Purging and restoring project data permits
us to perform tests on different project structures without having to
manage multiple projects or API tokens.
</p>
<p>When purging project data, many of these actions may
only be performed with a project in development status, as they are
potentially destructive and may result in data loss. It is a good
practice to back up your data and project structure before purging
a project.
</p>


<h3>Usage</h3>

<pre><code class="language-R">purgeProject(object, ...)

## S3 method for class 'redcapApiConnection'
purgeProject(
  object,
  arms = FALSE,
  events = FALSE,
  users = FALSE,
  user_roles = FALSE,
  dags = FALSE,
  records = FALSE,
  purge_all = FALSE,
  flush = TRUE,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list()
)

restoreProject(object, ...)

## S3 method for class 'redcapApiConnection'
restoreProject(
  object,
  project_information = NULL,
  arms = NULL,
  events = NULL,
  meta_data = NULL,
  mappings = NULL,
  repeating_instruments = NULL,
  users = NULL,
  user_roles = NULL,
  user_role_assignments = NULL,
  dags = NULL,
  dag_assignments = NULL,
  records = NULL,
  flush = TRUE,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list()
)

## S3 method for class 'list'
restoreProject(
  object,
  rcon,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object, rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object. Except in
<code>restoreProject.list</code>, where <code>object</code> is a list of data frames
to use in restoring the project.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>arms</code></td>
<td>
<p>Either <code>logical(1)</code> indicating if arms data should be
purged from the project; or a <code>data.frame</code> for restoring arms
data via <code>importArms</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>events</code></td>
<td>
<p>Either <code>logical(1)</code> indicating if events data should be
purged from the project; or a <code>data.frame</code> for restoring events
data via <code>importEvents</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>users</code></td>
<td>
<p>Either <code>logical(1)</code> indicating if users data should be
purged from the project; or a <code>data.frame</code> for restoring users
data via <code>importUsers</code>. NOT YET IMPLEMENTED</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>user_roles</code></td>
<td>
<p>Either <code>logical(1)</code> indicating if user roles data should be
purged from the project; or a <code>data.frame</code> for restoring user roles
data via <code>importUserRoles</code>. NOT YET IMPLEMENTED</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dags</code></td>
<td>
<p>Either <code>logical(1)</code> indicating if DAG data should be
purged from the project; or a <code>data.frame</code> for restoring DAGs
data via <code>importDags</code>. NOT YET IMPLEMENTED</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>records</code></td>
<td>
<p>Either <code>logical(1)</code> indicating if records data should be
purged from the project; or a <code>data.frame</code> for restoring records
data via <code>importRecords</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>purge_all</code></td>
<td>
<p><code>logical(1)</code>. A shortcut option to purge all
data elements from a project.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>flush</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code>, all caches in the connection
object will be flushed after completing the operation. This is highly
recommended.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>error_handling</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("error", "null")</code>.
An option for how to handle errors returned by the API.
see <code>redcapError()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>config</code></td>
<td>
<p>A named <code>list</code>. Additional configuration parameters to pass to
<code>httr::POST()</code>. These are appended to any parameters in
<code>rcon$config</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>project_information</code></td>
<td>
<p><code>data.frame</code> for restoring data. Provides the
project settings to load via <code>importProjectInformation</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>meta_data</code></td>
<td>
<p>A <code>data.frame</code> for restoring metadata
data via <code>importMetaData</code>. The API does not support deleting
metadata, but an import replaces the existing metadata.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mappings</code></td>
<td>
<p>A <code>data.frame</code> for restoring instrument-event mappings
via <code>importMappings</code>. The API does not support deleting
mappings, but an import replaces the existing mappings.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>repeating_instruments</code></td>
<td>
<p>A <code>data.frame</code> for restoring repeating instruments
configuration via <code>importRepeatingInstrumentsEvents()</code>. The API does not support deleting
repeating instruments, but an import replaces the existing instruments.
NOT YET IMPLEMENTED</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>user_role_assignments</code></td>
<td>
<p>A <code>data.frame</code> for restoring user-role
assignments via <code>importUserRoleAssignments</code>. The API does not support deleting
assignments, but an import replaces the existing assignments. NOT YET IMPLEMENTED.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dag_assignments</code></td>
<td>
<p>A <code>data.frame</code> for restoring DAG
assignments via <code>importDagAssignments</code>. The API does not support deleting
assignments, but an import replaces the existing assignments. NOT YET IMPLEMENTED.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>When restoring a project, all arguments are optional. Any argument
that is <code>NULL</code> will result in no import being made. The order of
reconstructing the project is (purging data occurs in the reverse order):
</p>

<ol>
<li>
<p> Update project information
</p>
</li>
<li>
<p> Import Arms Data
</p>
</li>
<li>
<p> Import Events Data
</p>
</li>
<li>
<p> Import Meta Data
</p>
</li>
<li>
<p> Import Mappings
</p>
</li>
<li>
<p> Import Repeating Instruments
</p>
</li>
<li>
<p> Import Users
</p>
</li>
<li>
<p> Import User Roles
</p>
</li>
<li>
<p> Import User-Role Assignments
</p>
</li>
<li>
<p> Import Data Access Groups
</p>
</li>
<li>
<p> Import Data Access Group Assignments
</p>
</li>
<li>
<p> Import Records
</p>
</li>
</ol>
<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())
             
# Preserve a project
preserveProject(rcon)

# Purge a project
purgeProject(rcon, 
             purge_all = TRUE)
                
# Restore a project
restoreProject(rcon)


## End(Not run)

</code></pre>


</div>