<div class="container">

<table style="width: 100%;"><tr>
<td>setse_expanded</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>SETSe embedding showing full convergence history</h2>

<h3>Description</h3>

<p>This is a special case function of SETSe which keeps the history of all node movements during convergence0. It is useful for demonstrations,
or parametrising difficult networks.
</p>


<h3>Usage</h3>

<pre><code class="language-R">setse_expanded(
  g,
  force = "force",
  distance = "distance",
  edge_name = "edge_name",
  k = "k",
  tstep = 0.02,
  mass = 1,
  max_iter = 20000,
  coef_drag = 1,
  tol = 1e-06,
  sparse = FALSE,
  verbose = TRUE,
  two_node_solution = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>g</code></td>
<td>
<p>An igraph object. The network</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>force</code></td>
<td>
<p>A character string</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>distance</code></td>
<td>
<p>A character string. The name of the graph attribute that contains the graph distance</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>edge_name</code></td>
<td>
<p>A character string. This is the edge attribute that contains the edge_name of the edges.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>k</code></td>
<td>
<p>A character string. This is k for the moment don't change it.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tstep</code></td>
<td>
<p>A numeric. The time in seconds that elapses between each iteration</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mass</code></td>
<td>
<p>A numeric. The mass in kg of the nodes, this is arbitrary and commonly 1 is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_iter</code></td>
<td>
<p>An integer. The maximum number of iterations before terminating the simulation</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>coef_drag</code></td>
<td>
<p>A numeric. A multiplier used to tune the damping. Generally no need to twiddle</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tol</code></td>
<td>
<p>A numeric. Early termination. If the dynamics of the nodes fall below this value the algorithm will be classed as 
"converged" and the simulation terminates.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sparse</code></td>
<td>
<p>Logical. Whether or not the function should be run using sparse matrices. must match the actual matrix, this could prob be automated</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Logical value. Whether the function should output messages or run quietly.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>two_node_solution</code></td>
<td>
<p>Logical. The Newton-Raphson algo is used to find the correct angle</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A dataframe equivalent to the node_embeddings dataframe for the other SETSe methods. However, the dataframe includes a 
row for each node in each iteration of the simulation, as well as an additional column identifying the iteration number. 
This dataframe can be very large as it contains nxm rows where n is the number of nodes and m is the number of iterations in the simulation.
</p>


<h3>See Also</h3>

<p>Other setse: 
<code>setse_auto_hd()</code>,
<code>setse_auto()</code>,
<code>setse_bicomp()</code>,
<code>setse()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
g_prep &lt;- biconnected_network%&gt;%
prepare_edges(.) %&gt;%
prepare_continuous_force(., node_names = "name", force_var = "force", k = NULL) 

#the base configuration does not work
divergent_result &lt;- setse_expanded(g_prep, k = "weight", tstep = 0.1)

#with a smaller timestep the algorithm converges
convergent_result &lt;- setse_expanded(g_prep, k = "weight", tstep = 0.01)

## Not run: 
library(ggplot2)
#plot the results for a given node
convergent_result %&gt;%
 ggplot(aes(x = t, y = net_force, colour = node)) + geom_line()
#re-plot with divergent_result to see what it looks like

## End(Not run)
</code></pre>


</div>