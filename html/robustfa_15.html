<div class="container">

<table style="width: 100%;"><tr>
<td>factorScorePfa</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Factor Analysis by Principal Factor Analysis (PFA)
</h2>

<h3>Description</h3>

<p>Perform principal factor factor analysis on a covariance matrix or data matrix. 
</p>


<h3>Usage</h3>

<pre><code class="language-R">factorScorePfa(x, factors = 2, covmat = NULL, cor = FALSE, 
rotation = c("varimax", "none"), 
scoresMethod = c("none", "regression", "Bartlett"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>

<p>A numeric matrix or an object that can be coerced to a numeric matrix.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>factors</code></td>
<td>

<p>The number of factors to be fitted.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>covmat</code></td>
<td>

<p>A covariance matrix, or a covariance list as returned by <code>cov.wt</code>. Of course, correlation matrices are covariance matrices.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cor</code></td>
<td>

<p>A logical value indicating whether the calculation should use the covariance matrix (<code>cor = FALSE</code>) or the correlation matrix (<code>cor = TRUE</code>).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rotation</code></td>
<td>

<p>character. "none" or "varimax": it will be called with first argument the loadings matrix, and should return a list with component <code>loadings</code> giving the rotated loadings, or just the rotated loadings.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scoresMethod</code></td>
<td>

<p>Type of scores to produce, if any. The default is <code>"none"</code>, <code>"regression"</code> gives Thompson's scores, <code>"Bartlett"</code> gives Bartlett's weighted least-squares scores.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Other feasible usages are:
</p>
<p><code>factorScorePfa(factors, covmat)</code>
</p>
<p><code>factorScorePfa(x, factors, rotation, scoresMethod)</code>
</p>
<p>If <code>x</code> is missing, then the following components of the result will be NULL: scores, ScoringCoef, meanF, corF, and n.obs.
</p>


<h3>Value</h3>

<p>An object of class <code>"factorScorePfa"</code> with components:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>call </code></td>
<td>
<p>The matched call.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>loadings </code></td>
<td>
<p>A matrix of loadings, one column for each factor. This is of class <code>"loadings"</code> if <code>rotation = "varimax"</code>: see <code>loadings</code> for its print method; It is a plain matrix if <code>rotation = "none"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>communality </code></td>
<td>
<p>The common variance.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>uniquenesses </code></td>
<td>
<p>The uniquenesses/specific variance computed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>covariance </code></td>
<td>
<p>The robust/classical covariance matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>correlation </code></td>
<td>
<p>The robust/classical correlation matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>usedMatrix </code></td>
<td>
<p>The used matrix (running matrix). It may be the covariance or correlation matrix according to the value of <code>cor</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reducedCorrelation </code></td>
<td>
<p>The last reduced correlation matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>factors </code></td>
<td>
<p>The argument factors.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method </code></td>
<td>
<p>The method: always <code>"pfa"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scores </code></td>
<td>
<p>If requested, a matrix of scores. NULL if <code>x</code> is missing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scoringCoef </code></td>
<td>
<p>The scoring coefficients. NULL if <code>x</code> is missing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>meanF </code></td>
<td>
<p>The sample mean of the scores. NULL if <code>x</code> is missing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>corF </code></td>
<td>
<p>The sample correlation matrix of the scores. NULL if <code>x</code> is missing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scoresMethod </code></td>
<td>
<p>The argument <code>scoresMethod</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.obs </code></td>
<td>
<p>The number of observations if available. NULL if <code>x</code> is missing.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>center </code></td>
<td>
<p>The center of the data. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>eigenvalues </code></td>
<td>
<p>The eigenvalues of the usedMatrix.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p> Ying-Ying Zhang (Robert) <a href="mailto:robertzhangyying@qq.com">robertzhangyying@qq.com</a> </p>


<h3>References</h3>

<p>Zhang, Y. Y. (2013), An Object Oriented Solution for Robust Factor Analysis.
</p>


<h3>See Also</h3>

<p><code>factorScorePca</code>, <code>factanal</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
data(stock611)
R611 = cor(stock611[,3:12]); R611

## covmat is a matrix
fsPfa1 = factorScorePfa(factors = 3, covmat = R611); fsPfa1

## covmat is a list
covx = rrcov::Cov(stock611[,3:12])
covmat = list(cov = rrcov::getCov(covx), center = rrcov::getCenter(covx), n.obs = covx@n.obs)
fsPfa2 = factorScorePfa(factors = 3, cor = TRUE, covmat = covmat); fsPfa2

## fsPfa3 contains scores etc.
fsPfa3 = factorScorePfa(x = stock611[,3:12], factors = 2, 
cor = TRUE, rotation = "varimax", scoresMethod = "regression"); fsPfa3

</code></pre>


</div>