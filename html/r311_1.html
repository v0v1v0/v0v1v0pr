<div class="container">

<table style="width: 100%;"><tr>
<td>o311_add_endpoint</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Endpoints</h2>

<h3>Description</h3>

<p>Modify and examine defined open311 endpoints. <code>o311_endpoints()</code>
retrieves a list of endpoints including additional information.
<code>o311_add_endpoint</code> adds to this list to define a new endpoint that
can be used for queries. <code>o311_reset_endpoints</code> restores the initial
state of the endpoints list.
</p>


<h3>Usage</h3>

<pre><code class="language-R">o311_add_endpoint(
  name,
  root,
  jurisdiction = NULL,
  key = FALSE,
  pagination = FALSE,
  limit = NULL,
  json = TRUE,
  dialect = NULL
)

o311_reset_endpoints()

o311_endpoints(...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>name</code></td>
<td>
<p><code>[character]</code>
</p>
<p>Name of an endpoint / city. This name can be arbitrary and only serves
for identification in <code>[o311_api]</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>root</code></td>
<td>
<p><code>[character]</code>
</p>
<p>Base URL of the endpoint for sending production-grade requests. The root
URL commonly points to <code>"georeport/v2/"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>jurisdiction</code></td>
<td>
<p><code>[character]</code>
</p>
<p>Unique identifier of the jurisdiction. The jurisdiction is typically
defined as the domain of the respective city website. It is optional as
most endpoints only serve one jurisdiction.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>key</code></td>
<td>
<p><code>[logical]</code>
</p>
<p>Is an API key mandatory?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pagination</code></td>
<td>
<p><code>[logical]</code>
</p>
<p>Are <code>requests</code> responses paginated?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>limit</code></td>
<td>
<p><code>[integer]</code>
</p>
<p>If paginated, how many requests does one page contain?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>json</code></td>
<td>
<p><code>[logical]</code>
</p>
<p>Are JSON responses supported? If <code>FALSE</code>, defaults to <code>"XML"</code>
responses. See also <code>o311_api</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dialect</code></td>
<td>
<p><code>[character]</code>
</p>
<p>open311 extension that the endpoint is built on. Common dialects include
CitySDK, Connected Bits, SeeClickFix and Mark-a-Spot. Currently, this
argument does nothing, but it could be used in the future to adjust
response handling based on dialect.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>List of key-value pairs where each pair is a filter.
The key represents the column and the value the requested column value.
All keys must be present in the column names of <code>o311_endpoints()</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>o311_endpoints()</code> returns a static list defined in the package
installation directory. This list contains a limited number of endpoints
that were proven to work at the time of package development. It does not
include newer/smaller/less known endpoints or test APIs. These can be
manually added using <code>o311_add_endpoint</code>.
</p>


<h3>Value</h3>

<p>For <code>o311_endpoints</code>, a dataframe containing all relevant
information on an endpoint. For <code>o311_add_endpoint</code>, the new endpoint,
invisibly. <code>o311_reset_endpoints</code> returns <code>NULL</code> invisibly.
If the new endpoint is a duplicate, <code>NULL</code> is returned invisibly.
</p>


<h3>Note</h3>

<p>This function uses <code>R_user_dir</code> to persistently store
custom endpoints data between sessions. To set a different directory, you
may use <code>options("o311_user_dir")</code>. To clean up, run
<code>o311_reset_endpoints()</code> which deletes the package-specific user
directory and defaults back to
<code>system.file("endpoints.json", package = "r311")</code>.
</p>


<h3>See Also</h3>

<p><code>o311_api</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># read default endpoints
o311_endpoints()

# get all endpoints powered by Connected Bits
o311_endpoints(dialect = "Connected Bits")

# add a new endpoint
o311_add_endpoint(name = "test", root = "test.org/georeport/v2")

# read new endpoints
o311_endpoints()

# reset endpoints back to default
o311_reset_endpoints()
</code></pre>


</div>