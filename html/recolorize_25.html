<div class="container">

<table style="width: 100%;"><tr>
<td>hclust_color</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Plot and group colors by similarity</h2>

<h3>Description</h3>

<p>A wrapper for stats::hclust for clustering colors by similarity.
This works by converting a matrix of RGB centers to a given color space
(CIE Lab is the default), generating a distance matrix for those colors
in that color space (or a subset of channels of that color space),
clustering them, and plotting them with labels and colors. If either a
cutoff or a final number of colors is provided and <code>return_list = TRUE</code>,
function also returns a list of which color centers to combine.
</p>


<h3>Usage</h3>

<pre><code class="language-R">hclust_color(
  rgb_centers,
  dist_method = "euclidean",
  hclust_method = "complete",
  channels = 1:3,
  color_space = "Lab",
  ref_white = "D65",
  cutoff = NULL,
  n_final = NULL,
  return_list = TRUE,
  plotting = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>rgb_centers</code></td>
<td>
<p>A matrix of RGB centers. Rows are centers and columns
are R, G, and B values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dist_method</code></td>
<td>
<p>Method passed to stats::dist. One of  "euclidean",
"maximum", "manhattan", "canberra", "binary" or "minkowski".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hclust_method</code></td>
<td>
<p>Method passed to stats::hclust. One of "ward.D",
"ward.D2", "single", "complete", "average" (= UPGMA), "mcquitty" (= WPGMA),
"median" (= WPGMC) or "centroid" (= UPGMC).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>channels</code></td>
<td>
<p>Numeric: which color channels to use for clustering. Probably
some combination of 1, 2, and 3, e.g., to consider only luminance and
blue-yellow (b-channel) distance in CIE Lab space, <code style="white-space: pre;">⁠channels = c(1, 3⁠</code> (L
and b).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>color_space</code></td>
<td>
<p>Color space in which to do the clustering.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ref_white</code></td>
<td>
<p>Reference white for converting to different color spaces.
D65 (the default) corresponds to standard daylight. See
grDevices::convertColor.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cutoff</code></td>
<td>
<p>Either <code>NULL</code> or a numeric cutoff passed to stats::cutree.
Distance below which to combine clusters, i.e. height at which the tree
should be cut.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_final</code></td>
<td>
<p>Numeric. Desired number of groups. Overrides <code>cutoff</code> if
both are provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return_list</code></td>
<td>
<p>Logical. Return a list of new group assignments from
the <code>cutoff</code> or <code>n_final</code> values?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plotting</code></td>
<td>
<p>Logical. Plot a colored dendrogram?</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This is mostly useful in deciding where and in which color space
to place a cutoff for a <code>recolorize</code> object, since it is very fast. It
is called by recluster when combining layers by similarity.
</p>


<h3>Value</h3>

<p>A list of group assignments (i.e. which centers belong to which
groups), if <code>return_list = TRUE</code>.
</p>


<h3>See Also</h3>

<p>recluster
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# 50 random RGB colors
rgb_random &lt;- matrix(runif(150), nrow = 50, ncol = 3)

# default clustering (Lab space):
hclust_color(rgb_random, return_list = FALSE)

# clustering in RGB space (note change in Y-axis scale):
hclust_color(rgb_random, color_space = "sRGB", return_list = FALSE)

# clustering using only luminance:
hclust_color(rgb_random, channels = 1, return_list = FALSE)

# or only red-green ('a' channel):
hclust_color(rgb_random, channels = 2, return_list = FALSE)

# or only blue-yellow ('b' channel(:
hclust_color(rgb_random, channels = 3, return_list = FALSE)

# use a cutoff to get groups:
groups &lt;- hclust_color(rgb_random, cutoff = 100)
print(groups)

</code></pre>


</div>