<div class="container">

<table style="width: 100%;"><tr>
<td>get_eurostat_bulk</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Get Eurostat data in a standardized format</h2>

<h3>Description</h3>

<p>Download data sets from <a href="https://ec.europa.eu/eurostat/">Eurostat</a> database and put in a standardized format.
</p>


<h3>Usage</h3>

<pre><code class="language-R">get_eurostat_bulk(
  id,
  cache = TRUE,
  update_cache = FALSE,
  cache_dir = NULL,
  compress_file = TRUE,
  stringsAsFactors = TRUE,
  select_freq = NULL,
  keep_flags = FALSE,
  cflags = FALSE,
  check_toc = FALSE,
  verbose = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>a code name for the dataset of interest.
See <code>search_eurostat_toc</code> for details how to get an id.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cache</code></td>
<td>
<p>a logical value whether to do caching. Default is <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>update_cache</code></td>
<td>
<p>a logical value with a default value <code>FALSE</code>, whether to update cache. Can be set also with
<code>options(restatapi_update=TRUE)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cache_dir</code></td>
<td>
<p>a path to a cache directory. The <code>NULL</code> (default) uses the memory as cache. 
If the folder <code>cache_dir</code> directory does not exist it saves in the 'restatapi' directory 
under the temporary directory from <code>tempdir()</code>. Directory can also be set with
<code>option(restatapi_cache_dir=...)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>compress_file</code></td>
<td>
<p>a logical value whether to compress the
RDS-file in caching. Default is <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stringsAsFactors</code></td>
<td>
<p>a logical value with the default <code>TRUE</code>. In this case the columns are converted to factors. If <code>FALSE</code>, 
the strings are returned as characters.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>select_freq</code></td>
<td>
<p>a character symbol for a time frequency when a dataset has multiple time
frequencies. Possible values are:
A = annual, S = semi-annual, H = half-year, Q = quarterly, M = monthly, W = weekly, D = daily. 
The default is <code>NULL</code> as most datasets have only one time frequency. 
In case if there are multiple frequencies and <code>select_freq=NULL</code>, then only the most common frequency kept.
If all the frequencies needed the <code>get_eurostat_raw</code> function can be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keep_flags</code></td>
<td>
<p>a logical value whether the observation status (flags) - e.g. "confidential",
"provisional", etc. - should be kept in a separate column or if they
can be removed. Default is <code>FALSE</code>. For flag values see: 
<a href="https://ec.europa.eu/eurostat/api/dissemination/sdmx/2.1/codelist/ESTAT/OBS_STATUS/?compressed=false&amp;format=TSV&amp;lang=en">https://ec.europa.eu/eurostat/api/dissemination/sdmx/2.1/codelist/ESTAT/OBS_STATUS/?compressed=false&amp;format=TSV&amp;lang=en</a>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cflags</code></td>
<td>
<p>a logical value whether the missing observations with flag 'c' - "confidential"
should be kept or not. Default is <code>FALSE</code>, in this case these observations dropped from the dataset. If this parameter 
<code>TRUE</code> then all the flags and the suppressed observations with missing values are kept. In this case the parameter provided in <code>keep_flags</code> is set to <code>TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>check_toc</code></td>
<td>
<p>a logical value whether to check the provided <code>id</code> in the Table of Contents (TOC) or not. The default value 
<code>FALSE</code>, in this case the base URL for the download link is retrieved from the configuration file. 
If the value is <code>TRUE</code> then the TOC is downloaded and the <code>id</code> is checked in it. If it found there then the download link 
is retrieved form the TOC.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>a logical value with default <code>FALSE</code>, so detailed messages (for debugging) will not printed.
Can be set also with <code>options(restatapi_verbose=TRUE)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>other parameter(s) to pass on the <code>load_cfg</code> function</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Data sets are downloaded from <a href="https://wikis.ec.europa.eu/display/EUROSTATHELP/Transition+-+from+Eurostat+Bulk+Download+to+API">the Eurostat bulk download facility</a> 
in TSV format as in this case smaller file has to be downloaded and processed. If there is more then one frequency then
the dataset is filtered for a unique time frequency.
If no frequency is selected and there are multiple frequencies in the dataset, then the most common value is used used for frequency.
</p>
<p>Compared to the ouptut of the <code>get_eurostat_raw</code> function, the frequency (FREQ) and time format (TIME_FORMAT) columns are not included in the bulk data  
and the column names for the time period, observation values and status have standardised names: "time", "values" and "flags" 
independently if the data was downloaded previously in SDMX or TSV format.
</p>
<p>By default all datasets cached as they are often rather large. 
The datasets cached in memory (default) or can be stored in a temporary directory if <code>cache_dir</code> or <code>option(restatpi_cache_dir)</code> is defined.
The cache can be emptied with <code>clean_restatapi_cache</code>.
</p>
<p>The <code>id</code>, is a value from the <code>code</code> column of the table of contents (<code>get_eurostat_toc</code>), and can be searched for it with the <code>search_eurostat_toc</code> function. The id value can be retrieved from the <a href="https://ec.europa.eu/eurostat/data/database">Eurostat database</a>
as well. The Eurostat database gives codes in the Data Navigation Tree after every dataset
in parenthesis.
</p>


<h3>Value</h3>

<p>a data.table with the following columns: 
</p>

<table>
<tr>
<td style="text-align: left;">
     dimension names </td>
<td style="text-align: left;"> One column for each dimension in the data</td>
</tr>
<tr>
<td style="text-align: left;">
     <code>time</code> </td>
<td style="text-align: left;"> A column for the time dimension</td>
</tr>
<tr>
<td style="text-align: left;">
     <code>values</code> </td>
<td style="text-align: left;"> A column for numerical values</td>
</tr>
<tr>
<td style="text-align: left;">
     <code>flags</code> </td>
<td style="text-align: left;"> A column for flags if the <code>keep_flags=TRUE</code> or <code>cflags=TRUE</code> otherwise this column
     is not included in the data table
   </td>
</tr>
</table>
<p>The data.table does not include all missing values. The missing values are dropped if both the value and the flag is missing
on a particular time.
</p>


<h3>See Also</h3>

<p><code>get_eurostat_data</code>, <code>get_eurostat_raw</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">

if (!(grepl("amzn|-aws|-azure ",Sys.info()['release']))) options(timeout=2)
head(get_eurostat_bulk("agr_r_milkpr",keep_flags=TRUE))
options(restatapi_update=TRUE)
head(get_eurostat_bulk("avia_par_ee",check_toc=TRUE))
head(get_eurostat_bulk("avia_par_ee",select_freq="A",verbose=TRUE))
options(restatapi_update=FALSE)
head(get_eurostat_bulk("agr_r_milkpr",cache_dir=tempdir(),compress_file=FALSE,verbose=TRUE))
clean_restatapi_cache(cache_dir=tempdir(),verbose=TRUE)
options(timeout=60)

</code></pre>


</div>