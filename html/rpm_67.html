<div class="container">

<table style="width: 100%;"><tr>
<td>rpm-terms</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Terms used in a Revealed Preference Matchings Model</h2>

<h3>Description</h3>

<p>The function <code>rpm</code> is used to fit a revealed preference model
for men and women of certain
characteristics (or shared characteristics) of people of the opposite sex.
The model assumes a one-to-one stable matching using an observed set of
matchings and a set of (possibly dyadic) covariates to 
estimate the parameters for
linear equations of utilities.
It does this using an large-population likelihood based on ideas from Dagsvik (2000), Menzel (2015) and Goyal et al (2023).
</p>


<h3>Details</h3>

<p>The model represents the dyadic utility functions as deterministic linear utility functions of
dyadic variables. These utility functions are functions of observed characteristics of the women
and men.
These functions are entered as terms in the function call
to <code>rpm</code>.  This page describes the possible terms (and hence
linear utility functions) included in <code>rpm</code> package.
</p>


<h3>Value</h3>

<p>No return value, called for side effects.
</p>


<h3>Specifying models</h3>

<p>Terms to <code>rpm</code> are specified by a formula to represent the
pairings and covariates This is done via a <code>formula</code>, that is,
an formula object, of the form <code>~ &lt;term 1&gt; + &lt;term 2&gt; ...</code>, where
<code>&lt;term 1&gt;</code>, <code>&lt;term 2&gt;</code>, etc, are each terms chosen
from the list given below.
</p>

<dl>
<dt>
<code>absdiff(attr)</code> (quantitative attribute),
<code>absdiff(attr)</code> (quantitative attribute)</dt>
<dd>
<p><em>Absolute difference:</em>
The <code>attr</code> argument specifies a quantitative attribute 
This term adds one statistic to the model equaling
<code>abs(attr[i]-attr[j])</code> for all women-man dyad (i,j).
</p>
</dd>
<dt><code>W_greaterthan(attr)</code></dt>
<dd>
<p><em>Women's value
greater than the men's value</em> Adds one statistic
indicating if the women's value exceeds the men's value.
</p>
</dd>
<dt><code>M_greaterthan(attr)</code></dt>
<dd>
<p><em>Men's value
greater than the women's value</em> Adds one statistic
indicating if the men's value exceeds the women's value.
</p>
</dd>
<dt><code>W_atleast(attr,threshold=0)</code></dt>
<dd>
<p><em>Values
greater than or equal to a threshold</em> Adds one statistic
indicating if the women's value of the attribute equals or exceeds
<code>threshold</code>.
</p>
</dd>
<dt><code>W_atmost(threshold=0)</code></dt>
<dd>
<p><em>Values
less than or equal to a threshold</em> Adds one statistic
indicating if the women's value equals or is exceeded by
<code>threshold</code>.
</p>
</dd>
<dt>
<code>W_cov(attr)</code> (quantitative attribute),
<code>W_cov(attr)</code> (quantitative attribute)
</dt>
<dd>
<p><em>Main effect of a covariate for women:</em>
The <code>attr</code> argument specifies a quantitative attribute
This term adds a single statistic equaling the 
value of <code>attr(i)</code> for women <code class="reqn">i</code> in the dyad.
For categorical attributes,
see <code>W_factor</code>.
</p>
</dd>
<dt>
<code>diff(attr)</code> (quantitative attribute), <code>diff(attr)</code>
(quantitative attribute)</dt>
<dd>
<p><em>Woman's Gap:</em>
The <code>attr</code> argument specifies a quantitative attribute
This term adds one statistic to the model
being <code>attr[i]-attr[j]</code> for women <code class="reqn">i</code> and man <code class="reqn">j</code>.
Specifically, it is the excess of the woman's value over the man's value.
</p>
</dd>
<dt>
<code>WtoM_diff(attr, diff)</code> (ordinal categorical attribute), <code>WtoM_diff(attr)</code>
(ordinal categorical discrete attribute)</dt>
<dd>
<p><em>Woman's Gap:</em>
The <code>attr</code> argument specifies a ordinal categorical attribute
This term adds one statistic to the model
being an indicator that <code>attr[i]=attr[j]+diff</code> for women <code class="reqn">i</code> and man <code class="reqn">j</code>.
Specifically, it indicates if the woman's value is <code>diff</code> higher than the man's value.
</p>
</dd>
<dt>
<code>MtoW_diff(attr, diff)</code> (ordinal categorical attribute), <code>MtoW_diff(attr)</code>
(ordinal categorical discrete attribute)</dt>
<dd>
<p><em>Man's Gap:</em>
The <code>attr</code> argument specifies a ordinal categorical attribute
This term adds one statistic to the model
being an indicator that <code>attr[j]=attr[i]+diff</code> for women <code class="reqn">i</code> and man <code class="reqn">j</code>.
Specifically, it indicates if the man's value is <code>diff</code> higher than the woman's value.
</p>
</dd>
<dt>
<code>MtoW_diff(attr)</code> (quantitative attribute), <code>MtoW_diff(attr)</code>
(quantitative attribute)</dt>
<dd>
<p><em>Difference:</em>
The <code>attr</code> argument specifies a quantitative attribute
This term adds one statistic to the model
<code>attr[j]-attr[i]</code> for women <code class="reqn">i</code> and man <code class="reqn">j</code>.
</p>
</dd>
<dt>
<code>W_factor(attr, base=1, levels=-1)</code> (categorical attribute),
<code>W_factor(attr, base=1, levels=-1)</code> (categorical attribute)
</dt>
<dd>
<p><em>Factor attribute effect for women:</em>
The <code>attr</code> argument specifies a categorical attribute
This term adds
multiple statistics to the model, one for each of (a subset of) the
unique values of the <code>attr</code> attribute. Each of these statistics
indicates if the women's has that attribute.
</p>
</dd>
<dt>
<code>homophily(attr)</code>
</dt>
<dd>
<p><em>Uniform homophily effect:</em>
The <code>attr</code> argument specifies a categorical attribute
This term adds one statistic to the model
indicating that the dyad matches on that attribute.
</p>
</dd>
<dt>
<code>match(attr, diff=FALSE, collapse=NULL)</code>
</dt>
<dd>
<p><em>Attribute-based homophily effect:</em>
The <code>attr</code> argument specifies a categorical attribute
This term adds one statistic to the model for each categorical level,
unless <code>diff</code> is set to <code>TRUE</code>, in which case the term adds multiple 
statistics to the model, one for each of (a subset of) the unique values of the <code>attr</code>
attribute. 
If <code>diff</code> is set to <code>TRUE</code>, the optional argument <code>collapse</code> control what dyads 
are collapsed (or pooled).
Specifically, it is a list of indices of attribute values which are to be collapsed into a
single term. For example, <code>collapse=list(c(1,4))</code> will collapse the <code>(1,1)</code> and the 
<code>(4,4)</code> dyads into a single term (and group). Multiple lists can be included with arbitrary numbers of 
dyads in a group. 
</p>
</dd>
<dt>
<code>mix(attr, base=NULL, collapse=NULL)</code>
</dt>
<dd>
<p><em>Attribute mixing:</em> The <code>attr</code> argument specifies a categorical attributes
By default, this term adds one statistic to
the model for each possible pairing of attribute values. The
statistic indicates if the dyad 
has that pairing of values.
In other words, this term produces one statistic for
every entry in the mixing matrix for the attribute(s). The ordering of
the attribute values is lexicographic: alphabetical (for nominal categories) or
numerical (for ordered categories).
The optional argument <code>base</code> control what statistics are 
included in the model, specifically it lists the index of the omitted terms (in order).
For example, <code>base=2</code> omits the second term. 
The optional argument <code>collapse</code> control what dyads are collapsed (or pooled).
Specifically, it is a list of lists. Each element of the list is a list of dyads which are to be collapsed into a
single term. For example, <code>collapse=list(list(c(1,4),c(2,4)))</code> will collapse the <code>(1,4)</code> and the 
<code>(2,4)</code> dyads into a single term (and group). Multiple lists can be included with arbitrary numbers of 
dyads in a group. 
</p>
</dd>
</dl>
<h3>References</h3>

<p>Goyal, Shuchi; Handcock, Mark S.; Jackson, Heide M.; Rendall, Michael S. and Yeung, Fiona C. (2023).
<em>A Practical Revealed Preference Model for Separating Preferences and Availability Effects in Marriage Formation</em>,
<em>Journal of the Royal Statistical Society</em>, A. <a href="https://doi.org/10.1093/jrsssa/qnad031">doi:10.1093/jrsssa/qnad031</a> 
</p>
<p>Dagsvik, John K. (2000) <em>Aggregation in Matching Markets</em> <em>International Economic Review</em>,, Vol. 41, 27-57.
JSTOR: https://www.jstor.org/stable/2648822, <a href="https://doi.org/10.1111/1468-2354.00054">doi:10.1111/1468-2354.00054</a>
</p>
<p>Menzel, Konrad (2015).
<em>Large Matching Markets as Two-Sided Demand Systems</em>
Econometrica, Vol. 83, No. 3 (May, 2015), 897-941. <a href="https://doi.org/10.3982/ECTA12299">doi:10.3982/ECTA12299</a>
</p>


<h3>See Also</h3>

<p><code>rpm</code> package,
<code>rpm</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(rpm)
data(fauxmatching)

fit &lt;- rpm(~match("edu") + WtoM_diff("edu",3),
          Xdata=fauxmatching$Xdata, Zdata=fauxmatching$Zdata,
          X_w="X_w", Z_w="Z_w",
          pair_w="pair_w", pair_id="pair_id", Xid="pid", Zid="pid",
          sampled="sampled")
summary(fit)

</code></pre>


</div>