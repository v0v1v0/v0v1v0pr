<div class="container">

<table style="width: 100%;"><tr>
<td>TStoX</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Transform Time Series to Rectangular Form</h2>

<h3>Description</h3>

<p>Input a time series and transform it to a form suitable for prediction
using <code>lm</code> etc.
</p>


<h3>Usage</h3>

<pre><code class="language-R">TStoX(x,lg)
TStoXmv(xmat,lg,y)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A vector.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lg</code></td>
<td>
<p>Lag, a positive integer.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>xmat</code></td>
<td>
<p>A matrix, data frame etc., a multivariate time series.
Each column is a time series, over a common time period.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>A time series, again on that common time period.  If NULL in
<code>TStoXmv</code>, then <code>y</code> is set to <code>x</code> (i.e. for a 
univariate time series in which older values predict newer ones).</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Similar to <code>stats::embed</code>, but in lagged form, with applications
such as <code>lm</code> in mind.
</p>
<p><code>TStoX</code> is for transforming vectors, while <code>TStoXmv</code>
handles the multivariate time series case.  Intended for use with
<code>lm</code> or other regression/machine learning  model, predicting 
<code>y[i]</code> from observations <code>i-lg, i-lg+1,...,i-1</code>.
</p>


<h3>Value</h3>

<p>As noted, the idea is to set up something like <code>lm(Y ~ X)</code>.
Let <code>m</code> denote length of <code>x</code>, and in the matrix input
case, the number of rows in <code>xmat</code>.  Let <code>p</code> be 1 in the
vector case, <code>ncol(xmat)</code> in the matrix case.  The return value
is a matrix with <code>m-lg</code> rows.  There will be <code>p*lg+1</code>
columns, with "Y," the numbers to be predicted in the last column.
</p>
<p>In the output in the multivariate case, let k denote
<code>ncol(xmat)</code>.  Then the first k columns of the output  will be
the k series at lag <code>lg</code>, the second k columns will be the k
series at lag <code>lg-1</code>, ..., and the <code>lg</code>-th set of k
columns will be the k series at lag 1,
</p>


<h3>Author(s)</h3>

<p>Norm Matloff
</p>


<h3>Examples</h3>

<pre><code class="language-R">
x1 &lt;- c(5,12,13,8,88,6) 
x2 &lt;- c(5,4,3,18,168,0) 
y &lt;- 1:6 
xmat &lt;- cbind(x1,x2) 

TStoX(x1,2)
#      [,1] [,2] [,3]
# [1,]    5   12   13
# [2,]   12   13    8
# [3,]   13    8   88
# [4,]    8   88    6

xy &lt;- TStoXmv(xmat,2,y)
xy
#      [,1] [,2] [,3] [,4] [,5]
# [1,]    5    5   12    4    3
# [2,]   12    4   13    3    4
# [3,]   13    3    8   18    5
# [4,]    8   18   88  168    6

lm(xy[,5] ~ xy[,-5])
# Coefficients:
# (Intercept)    xy[, -5]1    xy[, -5]2    xy[, -5]3    xy[, -5]4
#       -65.6          3.2         18.2         -3.2           NA
# need n &gt; 7 here for useful lm() call, but this illustrates the idea
</code></pre>


</div>