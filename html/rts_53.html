<div class="container">

<table style="width: 100%;"><tr>
<td>period.apply</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Apply a function over specified time intervals</h2>

<h3>Description</h3>

<p>Apply specified function over each period of date/time defined in INDEX at each grid cell.
</p>


<h3>Usage</h3>

<pre><code class="language-R">period.apply(x, INDEX, FUN, ...) 
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p> a raster time series (<code>Raster*TS</code>) object created by <code>rts</code> </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>INDEX</code></td>
<td>
<p> a numeric vector of endpoints of time/date periods to apply function over </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>FUN</code></td>
<td>
<p> an argument of type <code>function</code> </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p> additional arguments for <code>FUN</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This functions subsets the raster data based on the specified time periods (endpoint for each period should be specified in <code>INDEX</code>), and <code>FUN</code> function will be applied to the subsetted values at each grid cell for each period. For each period, a raster will be calculated and the end of the date/time period will be assigned to it in the output raster time series object. If the <code>INDEX</code> is out of range, the function stops working and an error is generated.
</p>


<h3>Value</h3>

<p>RasterStackTS or RasterBrickTS
</p>


<h3>Author(s)</h3>

<p>Babak Naimi
</p>
<p><a href="mailto:naimi.b@gmail.com">naimi.b@gmail.com</a>
</p>
<p><a href="https://r-gis.net/">https://r-gis.net/</a>
</p>


<h3>See Also</h3>

 <p><code>period.apply</code></p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
file &lt;- system.file("external/ndvi", package="rts")

ndvi &lt;- rts(file) # read the ndvi time series from the specified file

ndvi

ep &lt;- endpoints(ndvi,'years') # extract the end index on each year period

ndvi.y &lt;- period.apply(ndvi,ep,mean) # apply the mean function on each year

ndvi.y

#---------
ep &lt;- endpoints(ndvi,'quarters') # extract the end index on each quarter of a year

# a function:
f &lt;- function(x) {
  if (min(x) &gt; 0.5) mean(x)
  else 0
}

ndvi.q &lt;- period.apply(ndvi,ep,f) # apply the function f on each quarter


## End(Not run)

</code></pre>


</div>