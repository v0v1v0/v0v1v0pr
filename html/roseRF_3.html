<div class="container">

<table style="width: 100%;"><tr>
<td>roseRF_pliv</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>ROSE random forest estimator for the partially linear instrumental variable model</h2>

<h3>Description</h3>

<p>ROSE random forest estimator for the partially linear instrumental variable model
</p>


<h3>Usage</h3>

<pre><code class="language-R">roseRF_pliv(
  y_formula,
  y_learner,
  y_pars = list(),
  x_formula,
  x_learner,
  x_pars = list(),
  IV1_formula = NA,
  IV1_learner = NA,
  IV1_pars = list(),
  IV2_formula = NA,
  IV2_learner = NA,
  IV2_pars = list(),
  IV3_formula = NA,
  IV3_learner = NA,
  IV3_pars = list(),
  IV4_formula = NA,
  IV4_learner = NA,
  IV4_pars = list(),
  IV5_formula = NA,
  IV5_learner = NA,
  IV5_pars = list(),
  data,
  K = 5,
  S = 1,
  max.depth = 10,
  num.trees = 500,
  min.node.size = max(10, ceiling(0.01 * (K - 1)/K * nrow(data))),
  replace = TRUE,
  sample.fraction = 0.8
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>y_formula</code></td>
<td>
<p>a two-sided formula object describing the regression model for <code class="reqn">\mathbb{E}[Y|Z]</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y_learner</code></td>
<td>
<p>a string specifying the regression method to fit the regression of <code class="reqn">Y</code> on <code class="reqn">Z</code> as given by <code>y_formula</code> (e.g. <code>randomforest, xgboost, neuralnet, gam</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y_pars</code></td>
<td>
<p>a list containing hyperparameters for the <code>y_learner</code> chosen. Default is an empty list, which performs hyperparameter tuning.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x_formula</code></td>
<td>
<p>a two-sided formula object describing the regression model for <code class="reqn">\mathbb{E}[X|Z]</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x_learner</code></td>
<td>
<p>a string specifying the regression method to fit the regression of <code class="reqn">X</code> on <code class="reqn">Z</code> as given by <code>x_formula</code> (e.g. <code>randomforest, xgboost, neuralnet, gam</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x_pars</code></td>
<td>
<p>a list containing hyperparameters for the <code>y_learner</code> chosen. Default is an empty list, which performs hyperparameter tuning.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>IV1_formula</code></td>
<td>
<p>a two-sided formula object for the model <code class="reqn">\mathbb{E}[V_1(X)|Z]</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>IV1_learner</code></td>
<td>
<p>a string specifying the regression method for <code class="reqn">\mathbb{E}[V_1(X)|Z]</code> estimation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>IV1_pars</code></td>
<td>
<p>a list containing hyperparameters for the <code>IV1_learner</code> chosen.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>IV2_formula</code></td>
<td>
<p>a two-sided formula object for the model <code class="reqn">\mathbb{E}[V_2|Z]</code>. Default is no formula / regression (i.e. <code class="reqn">J=1</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>IV2_learner</code></td>
<td>
<p>a string specifying the regression method for <code class="reqn">\mathbb{E}[V_2(X)|Z]</code> estimation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>IV2_pars</code></td>
<td>
<p>a list containing hyperparameters for the <code>IV2_learner</code> chosen.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>IV3_formula</code></td>
<td>
<p>a two-sided formula object for the model <code class="reqn">\mathbb{E}[V_3(X)|Z]</code>. Default is no formula / regression (i.e. <code class="reqn">J=1</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>IV3_learner</code></td>
<td>
<p>a string specifying the regression method for <code class="reqn">\mathbb{E}[V_3(X)|Z]</code> estimation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>IV3_pars</code></td>
<td>
<p>a list containing hyperparameters for the <code>IV3_learner</code> chosen.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>IV4_formula</code></td>
<td>
<p>a two-sided formula object for the model <code class="reqn">\mathbb{E}[V_4(X)|Z]</code>. Default is no formula / regression (i.e. <code class="reqn">J=1</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>IV4_learner</code></td>
<td>
<p>a string specifying the regression method for <code class="reqn">\mathbb{E}[V_4(X)|Z]</code> estimation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>IV4_pars</code></td>
<td>
<p>a list containing hyperparameters for the <code>IV4_learner</code> chosen.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>IV5_formula</code></td>
<td>
<p>a two-sided formula object for the model <code class="reqn">\mathbb{E}[V_5(X)|Z]</code>. Default is no formula / regression (i.e. <code class="reqn">J=1</code>)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>IV5_learner</code></td>
<td>
<p>a string specifying the regression method for <code class="reqn">\mathbb{E}[V_5(X)|Z]</code> estimation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>IV5_pars</code></td>
<td>
<p>a list containing hyperparameters for the <code>IV5_learner</code> chosen.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>a data frame containing the variables for the partially linear model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>K</code></td>
<td>
<p>the number of folds used for <code class="reqn">K</code>-fold cross-fitting. Default is 5.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>S</code></td>
<td>
<p>the number of repeats to mitigate the randomness in the estimator on the sample splits used for <code class="reqn">K</code>-fold cross-fitting. Default is 5.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max.depth</code></td>
<td>
<p>Maximum depth parameter used for ROSE random forests. Default is 5.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num.trees</code></td>
<td>
<p>Number of trees used for a single ROSE random forest. Default is 50.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min.node.size</code></td>
<td>
<p>Minimum node size of a leaf in each tree. Default is <code>max(10,ceiling(0.01 (K-1)/K nrow(data)))</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>replace</code></td>
<td>
<p>Whether sampling for a single random tree are performed with (bootstrap) or without replacement. Default is <code>TRUE</code> (i.e. bootstrap).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sample.fraction</code></td>
<td>
<p>Proportion of data used for each random tree. Default is 0.8.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list containing:
</p>

<dl>
<dt><code>theta</code></dt>
<dd>
<p>The estimator of <code class="reqn">\theta_0</code>.</p>
</dd>
<dt><code>stderror</code></dt>
<dd>
<p>Huber robust estimate of the standard error of the <code class="reqn">\theta_0</code>-estimator.</p>
</dd>
<dt><code>coefficients</code></dt>
<dd>
<p>Table of <code class="reqn">\theta_0</code> coefficient estimator, standard error, z-value and p-value.</p>
</dd>
</dl>
</div>