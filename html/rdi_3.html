<div class="container">

<table style="width: 100%;"><tr>
<td>convertRDI</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Convert RDI measures</h2>

<h3>Description</h3>

<p>Method to convert RDI values to fold/percent change
</p>


<h3>Usage</h3>

<pre><code class="language-R">convertRDI(d, models = NULL, calcSD = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>d</code></td>
<td>
<p>Distance matrix (as produced by calcRDI), or a vector of 
distances.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>models</code></td>
<td>
<p>Set of RDI models, as produced by rdiModel. If <code>NULL</code>,
RDI models will be calculated based on the attributes in the distance
matrix.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>calcSD</code></td>
<td>
<p>logical; if <code>TRUE</code>, standard deviations for each estimate will be returned.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The convertRDI function works by first generating a model for the RDI values at a given
repertoire size and feature count using the rdiModel function (see that 
method's help file for more details). The RDI models predict the average 
log-fold/percent change across a range of RDI values, and allows us to convert RDI to
a more stable and interpretable metric.  
</p>
<p>In addition to the average log-fold or percent change value, rdiModel 
also generates models for the standard deviation at each RDI value. This is useful for
understanding the confidence intervals around the fold change estimate.
</p>


<h3>Value</h3>

<p>A list containing either one or two features:
</p>

<table>
<tr>
<td style="text-align: right;">
  <em>pred</em>  </td>
<td style="text-align: left;"> The converted predictions; same length as <code>d</code>. </td>
</tr>
<tr>
<td style="text-align: right;">
  <em>sd</em>  </td>
<td style="text-align: left;"> If <code>calcSD==T</code>, a set of standard deviation estimates for each
               prediction. 
</td>
</tr>
</table>
<h3>Examples</h3>

<pre><code class="language-R">
#create genes
genes = sample(letters, 10000, replace=TRUE)
#create sequence annotations
seqAnnot = data.frame(donor = sample(1:4, 10000, replace=TRUE))
#calculate RDI
d = rdi(genes, seqAnnot)

##convert RDI to actual 'lfc' estimates and compare
dtrue = convertRDI(d)$pred
plot(d, dtrue)

##look at SD ranges around lfc estimates
dtrue = convertRDI(d, calcSD=TRUE)

##plot using ggplot2
library(ggplot2)
x = as.numeric(d)
y = as.numeric(dtrue$pred)
sd = as.numeric(dtrue$sd)
qplot(x,y)+geom_errorbar(aes(x=x, ymin=y-sd, ymax=y+sd))

</code></pre>


</div>