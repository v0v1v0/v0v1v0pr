<div class="container">

<table style="width: 100%;"><tr>
<td>import_pyroscience_workbench</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Import data from Pyroscience Workbench</h2>

<h3>Description</h3>

<p>Imports the raw channel data from Pyroscience Workbench output files. This allows "live" analyses while the trial is still running. This does not utilize the ".pyr" file, nor the text file that is created once the trial is finished. This utilizes the raw channel data found within the "ChannelData" folder that the software makes when the trial starts.
</p>


<h3>Usage</h3>

<pre><code class="language-R">import_pyroscience_workbench(
  folder,
  o2_unit = "percent_a.s.",
  sal = NULL,
  keep_metadata = FALSE,
  split_channels = FALSE,
  merge_close_measurements = "min"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>folder</code></td>
<td>
<p>a character string. The filepath to the parent folder (directory) which contains ChannelData.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>o2_unit</code></td>
<td>
<p>a character string. The unit of O2 measurement to be output in the data frame. Options are described in <code>conv_o2</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sal</code></td>
<td>
<p>numeric. If <code>o2_unit</code> is a concentration rather than partial pressure, the salinity of the chamber in which measurements were made must be entered here.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keep_metadata</code></td>
<td>
<p>logical. Should metadata from the file be returned as extra columns in the returned data frame? Default is <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>split_channels</code></td>
<td>
<p>logical. Should a list of data frames be returned with a separate data frame for each channel? Default is <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>merge_close_measurements</code></td>
<td>
<p>used only when <code>split_channels = FALSE</code> (the default). The frequency during which measurements are taken can be set uniquely for each channel in the Pyroscience Workbench software. When this happens, measurements may, at times, be nearly synchronized. When measurements are close together in time (even if not exactly at the same moment), it may be desirable to merge them together in the same row of the output dataframe and consider them to be the same timepoint. This parameter allows you to control whether that happens, and if so, how close is "close enough". Options are:
</p>

<dl>
<dt>
<code>0</code>: </dt>
<dd>
<p>Do not merge close measurements no matter how close in time (even if 1 msec apart).</p>
</dd>
<dt>"min" (default): </dt>
<dd>
<p>Merge measurements as close as the most frequently sampled channel (e.g. if channel 1 sampled every 5 seconds, channel 2 every 2 seconds, and channel 3 every 10 seconds, then any measurements within 2 seconds of each other will be merged on the same row in the output dataframe.)</p>
</dd>
<dt>"max": </dt>
<dd>
<p>Merge measurements as close as the least frequently sampled channel (e.g. if channel 1 sampled every 5 seconds, channel 2 every 2 seconds, and channel 3 every 10 seconds, then any measurements within 10 seconds of each other will be merged on the same row in the output dataframe. Warning: this will duplicate more frequent channels. Do not let your downstream statistics be altered by artificially raising the number of observations.)</p>
</dd>
<dt>custom-set numeric value: </dt>
<dd>
<p>A numeric value specifying how many seconds apart is "close enough" to merge measurements to the same timepoint. This may result in duplications of the same observations across multiple rows or not merging multiple observations as expected. Examine the output carefully.</p>
</dd>
</dl>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A data frame (or list of data frames) is returned.
</p>

<dl>
<dt>TIME</dt>
<dd>
<p>Date and time, POSIXct format. If <code>split_channels = FALSE</code> (default), then the timestamp is the average of all the measurements that were merged. For details, see <code>merge_close_measurements</code>.</p>
</dd>
<dt>DURATION</dt>
<dd>
<p>Duration of measurement trial (minutes).</p>
</dd>
<dt>CH_X_O2</dt>
<dd>
<p>Oxygen measurement in desired unit as determined by <code>o2_unit</code>.</p>
</dd>
<dt>CH_X_TEMP</dt>
<dd>
<p>Temperature recorded or defined at beginning of measurement trial.</p>
</dd>
<dt>CH_X_SAL</dt>
<dd>
<p>Salinity (psu). Only displayed if <code>sal != NULL</code>.</p>
</dd>
<dt>CH_X_STATUS</dt>
<dd>
<p>Warning or error messages from Pyroscience Workbench file.</p>
</dd>
<dt>...</dt>
<dd>
<p>Channel columns (CH_...) are repeated for each channel.</p>
</dd>
</dl>
<p>If <code>keep_metadata = TRUE</code>, then the following columns are appended to the returned data frame:
</p>

<dl>
<dt>CH_X_PHASE</dt>
<dd>
<p>Phase recorded. Phase is inversely related to O2.</p>
</dd>
<dt>CH_X_INTENSITY</dt>
<dd>
<p>Intensity is an indicator of the quality of the signal.</p>
</dd>
<dt>CH_X_AMB_LIGHT</dt>
<dd>
<p>Ambient light on the sensor. Expressed in mV.</p>
</dd>
<dt>CH_X_T_STATUS</dt>
<dd>
<p>Warning or error messages from Pyroscience Workbench file's temperature measurement.</p>
</dd>
<dt>CH_X_ATM_PRES</dt>
<dd>
<p>Atmospheric pressure (mbar).</p>
</dd>
<dt>CH_X_P_STATUS</dt>
<dd>
<p>Warning or error messages from Pyroscience Workbench file's atmospheric pressure measurement.</p>
</dd>
</dl>
<p>If <code>split_channels = TRUE</code>, then "<code>CH_X_</code>" is removed from the column names and multiple data frames are returned in a named list.
</p>


<h3>Note</h3>

<p>Oxygen conversions are estimates based on the <code>marelac</code> package.
</p>


<h3>Author(s)</h3>

<p>Matthew A. Birk, <a href="mailto:matthewabirk@gmail.com">matthewabirk@gmail.com</a>
</p>


<h3>See Also</h3>

<p><code>import_presens</code>, <code>import_witrox</code>, <code>conv_o2</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
folder &lt;- system.file('extdata/pyro_wb/', package = 'respirometry')
import_pyroscience_workbench(folder = folder, o2_unit = 'umol_per_l', sal = c(0, 35))

# I want each channel as a separate data frame.
data_list &lt;- import_pyroscience_workbench(folder = folder, split_channels = TRUE)
data_list$CH_2 # here's the channel 2 data frame.

## End(Not run)

</code></pre>


</div>