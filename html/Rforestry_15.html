<div class="container">

<table style="width: 100%;"><tr>
<td>impute_features</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Feature imputation using random forests neighborhoods</h2>

<h3>Description</h3>

<p>This function uses the neighborhoods implied by a random forest
to impute missing features. The neighbors of a data point are all the
training points assigned to the same leaf in at least one tree in the
forest. The weight of each neighbor is the fraction of trees in the forest
for which it was assigned to the same leaf. We impute a missing feature
for a point by computing the weighted average feature value, using
neighborhood weights, using all of the point's neighbors.
</p>


<h3>Usage</h3>

<pre><code class="language-R">impute_features(
  object,
  newdata,
  seed = round(runif(1) * 10000),
  use_mean_imputation_fallback = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>an object of class 'forestry'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>newdata</code></td>
<td>
<p>the feature data.frame we will impute missing features for.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>a random seed passed to the predict method of forestry</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use_mean_imputation_fallback</code></td>
<td>
<p>if TRUE, mean imputation (for numeric
variables) and mode imputation (for factor variables) is used for missing
features for which all neighbors also had the corresponding feature
missing; if FALSE these missing features remain NAs in the data frame
returned by 'impute_features'.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A data.frame that is newdata with imputed missing values.
</p>


<h3>Examples</h3>

<pre><code class="language-R">iris_with_missing &lt;- iris
idx_miss_factor &lt;- sample(nrow(iris), 25, replace = TRUE)
iris_with_missing[idx_miss_factor, 5] &lt;- NA
idx_miss_numeric &lt;- sample(nrow(iris), 25, replace = TRUE)
iris_with_missing[idx_miss_numeric, 3] &lt;- NA

x &lt;- iris_with_missing[,-1]
y &lt;- iris_with_missing[, 1]

forest &lt;- forestry(x, y, ntree = 500, seed = 2,nthread = 2)
imputed_x &lt;- impute_features(forest, x, seed = 2)
</code></pre>


</div>