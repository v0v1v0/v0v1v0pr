<div class="container">

<table style="width: 100%;"><tr>
<td>mod_data_model_detection</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Data Model Detection Module</h2>

<h3>Description</h3>

<p>This module will interrogate a user connected database, comparing it with
known common data models to determine the both the data model and version
(when applicable) of the user's database.
</p>
<p>It informs the rest of the application how to interpret and display the data
stored in the connected database, when possible. If an unsupported data model
is detected, the user is informed and given the opportunity to connect to
a different database.
</p>
<p>This module consists of the following components:
</p>


<h4>Module UI functions</h4>

<p>These functions return a Shiny <code>tagList</code> containing various UI elements of the
ReviewR application. UI components are calculated by the
<code>data_model_detection_server</code> function of this module.
</p>

<ul>
<li>
<p><code>data_model_detection_ui</code>: A server defined uiOutput
describing the detected data model and version.
</p>
</li>
<li>
<p><code>patient_chart_ui</code>: The "Patient Chart," with the appropriate display
elements based on the detected data model. Appears on the "Chart Review" tab
of ReviewR.
</p>
</li>
</ul>
<h4>Module Server function</h4>

<p>The server function of this module is responsible for calculating the display
elements included in the UI functions of this module as well as returning a
reactiveValues object containing various other objects used by other modules.
</p>

<ul><li>
<p><code>data_model_detection_server</code>: Contains the data model detection logic
and calculates UI elements. Returns a reactiveValues object containing variables
used in other modules.
</p>
</li></ul>
<h3>Usage</h3>

<pre><code class="language-R">data_model_detection_ui(id)

patient_chart_ui(id)

data_model_detection_server(id, database_vars, navigation_vars, parent_session)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>The Module namespace</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>database_vars</code></td>
<td>
<p>A reactiveValues object as returned by mod_database_setup.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>navigation_vars</code></td>
<td>
<p>A reactiveValues object as returned by mod_navigation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parent_session</code></td>
<td>
<p>The session information from the parent environment of this module.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><em>data_model_detection_ui</em>:
</p>
<table><tr style="vertical-align: top;">
<td><code>tagList</code></td>
<td>
<p>A uiOutput describing the detected data model and version.</p>
</td>
</tr></table>
<p><em>patient_chart_ui</em>:
</p>
<table><tr style="vertical-align: top;">
<td><code>tagList</code></td>
<td>
<p>The "Patient Chart" on the "Chart Review" tab of ReviewR.</p>
</td>
</tr></table>
<p><em>data_model_detection_server</em>:
</p>
<table><tr style="vertical-align: top;">
<td><code>reactiveValues</code></td>
<td>


<ul>
<li>
<p><em>table_map</em>: A tibble containing a mapping between the CDM standard
tables and fields to the user connected tables and fields.
</p>
</li>
<li>
<p><em>message</em>: A character vector containing the message describing the
detected data model and version.
</p>
</li>
<li>
<p><em>table_functions</em>: A tibble containing the table function names for
the detected data model as well as the table names which the functions will
create.
</p>
</li>
<li>
<p><em>all_patients_table</em>: A tibble containing <em>only</em> the "All Patients"
function and table name. Used to render the "All Patients" table on the
"Patient Search" tab.
</p>
</li>
<li>
<p><em>subject_tables</em>: A tibble containing the "Subject Specific"
functions and table names. Used to render the patient chart tabsets on
the "Chart Review" tab.
</p>
</li>
</ul>
</td>
</tr></table>
</div>