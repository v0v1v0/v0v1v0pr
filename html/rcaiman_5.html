<div class="container">

<table style="width: 100%;"><tr>
<td>calc_diameter</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate diameter</h2>

<h3>Description</h3>

<p>Calculate the diameter in pixels of a 180º fisheye image.
</p>


<h3>Usage</h3>

<pre><code class="language-R">calc_diameter(lens_coef, radius, angle)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>lens_coef</code></td>
<td>
<p>Numeric vector. Polynomial coefficients of the lens
projection function. See <code>calibrate_lens()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>radius</code></td>
<td>
<p>Numeric vector. Distance in pixels from the zenith.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>angle</code></td>
<td>
<p>Numeric vector. Zenith angle in degrees.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function helps handle devices with a field of view different than 180º.
Given a lens projection function and data points consisting of radii
(pixels) and their correspondent zenith angle (<code class="reqn">\theta</code>), it returns the
horizon radius (i.e., the radius for <code class="reqn">\theta</code> equal to 90º).
</p>
<p>When working with non-circular hemispherical photography, this function will
help to find the diameter that a circular image would have if the equipment
would record the whole hemisphere.
</p>
<p>The required data (radius-angle data pairs) can be obtained following the
instructions given in the
<a href="https://www.schleppi.ch/patrick/hemisfer/help/en/lens.htm">user manual of Hemisfer software</a>.
The following is a slightly simpler alternative:
</p>

<ul>
<li>
<p> Find a vertical wall and a leveled floor, both well-constructed.
</p>
</li>
<li>
<p> Draw a triangle of <code class="reqn">5 \times 4 \times 3</code> meters on the floor, with
the 4-meter side over the wall.
</p>
</li>
<li>
<p> Locate the camera over the vertex that is 3 meters away from the wall.
Place it at a given height above the floor, 1.3 meters for instance.
</p>
</li>
<li>
<p> Make a mark on the wall at the chosen height over the wall-vertex nearest
to the camera-vertex. Make four more marks with one meter of spacing and
following a horizontal line. This will create marks for 0º, 18º, 34º, 45º,
and 54º <code class="reqn">\theta</code>.
</p>
</li>
<li>
<p> Before taking the photograph, do not forget to align the zenith
coordinates with the 0º <code class="reqn">\theta</code> mark and check if the optical axis is
leveled.
</p>
</li>
</ul>
<p>The <a href="https://imagej.net/ij/docs/guide/146-19.html#toc-Subsection-19.2">line selection tool</a>
of <a href="https://imagej.net/ij/">ImageJ</a> can be used to measure
the distance in pixels between points on the image. Draw a line, and use the
dropdown menu Analyze&gt;Measure to obtain its length.
</p>
<p>For obtaining the projection of a new lens, refer to
<code>calibrate_lens()</code>.
</p>


<h3>Value</h3>

<p>Numeric vector of length one. Diameter adjusted to a whole number
(see <code>zenith_image()</code> for details about that constrain).
</p>


<h3>See Also</h3>

<p>Other Lens Functions: 
<code>azimuth_image()</code>,
<code>calc_relative_radius()</code>,
<code>calc_zenith_colrow()</code>,
<code>calibrate_lens()</code>,
<code>crosscalibrate_lens()</code>,
<code>expand_noncircular()</code>,
<code>extract_radiometry()</code>,
<code>fisheye_to_equidistant()</code>,
<code>fisheye_to_pano()</code>,
<code>lens()</code>,
<code>test_lens_coef()</code>,
<code>zenith_image()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Nikon D50 and Fisheye Nikkor 10.5mm lens
calc_diameter(lens("Nikkor_10.5mm"), 1202, 54)
</code></pre>


</div>