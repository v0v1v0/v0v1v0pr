<div class="container">

<table style="width: 100%;"><tr>
<td>predict.CauseSpecificCox</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Predicting Absolute Risk from Cause-Specific Cox Models</h2>

<h3>Description</h3>

<p>Apply formula to combine two or more Cox models into absolute risk (cumulative incidence function).
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'CauseSpecificCox'
predict(
  object,
  newdata,
  times,
  cause,
  type = "absRisk",
  landmark = NA,
  keep.times = 1L,
  keep.newdata = 1L,
  keep.strata = 1L,
  se = FALSE,
  band = FALSE,
  iid = FALSE,
  confint = (se + band) &gt; 0,
  average.iid = FALSE,
  product.limit = TRUE,
  store.iid = "full",
  diag = FALSE,
  max.time = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>The fitted cause specific Cox model</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>newdata</code></td>
<td>
<p>[data.frame or data.table]  Contain the values of the predictor variables
defining subject specific predictions relative to each cause.
Should have the same structure as the data set used to fit the <code>object</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>times</code></td>
<td>
<p>[numeric vector] Time points at which to return
the estimated absolute risk.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cause</code></td>
<td>
<p>[integer/character] Identifies the cause of interest among the competing
events.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>[character] Can be changed to <code>"survival"</code> if the event free survival should be output instead of the absolute risk.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>landmark</code></td>
<td>
<p>[integer] The starting time for the computation of the cumulative risk.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keep.times</code></td>
<td>
<p>[logical] If <code>TRUE</code> add the evaluation times to the output.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keep.newdata</code></td>
<td>
<p>[logical] If <code>TRUE</code> add the value of the covariates used to make the prediction in the output list.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keep.strata</code></td>
<td>
<p>[logical] If <code>TRUE</code> add the value of the strata used to make the prediction in the output list.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>se</code></td>
<td>
<p>[logical] If <code>TRUE</code> compute and add the standard errors to the output.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>band</code></td>
<td>
<p>[logical] If <code>TRUE</code> compute and add the quantiles for the confidence bands to the output.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>iid</code></td>
<td>
<p>[logical] If <code>TRUE</code> compute and add the influence function to the output.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>confint</code></td>
<td>
<p>[logical] If <code>TRUE</code> compute and add the confidence intervals/bands to the output.
They are computed applying the <code>confint</code> function to the output.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>average.iid</code></td>
<td>
<p>[logical]. If <code>TRUE</code> add the average of the influence function over <code>newdata</code> to the output.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>product.limit</code></td>
<td>
<p>[logical]. If <code>TRUE</code> the survival is computed using the product limit estimator.
Otherwise the exponential approximation is used (i.e. exp(-cumulative hazard)).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>store.iid</code></td>
<td>
<p>[character] Implementation used to estimate the influence function and the standard error.
Can be <code>"full"</code> or <code>"minimal"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>diag</code></td>
<td>
<p>[logical] when <code>FALSE</code> the absolute risk/survival for all observations at all times is computed,
otherwise it is only computed for the i-th observation at the i-th time.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max.time</code></td>
<td>
<p>[numeric] maximum time of the response of the fitted data.  Only relevant if
model <code>response</code> element has been removed</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>not used.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function computes the absolute risk as given by formula 2 of (Ozenne et al., 2017).
Confidence intervals and confidence bands can be computed using a first order von Mises expansion.
See the section "Construction of the confidence intervals" in (Ozenne et al., 2017).
</p>
<p>A detailed explanation about the meaning of the argument <code>store.iid</code> can be found
in (Ozenne et al., 2017) Appendix B "Saving the influence functions".
</p>
<p>Note: for Cox regression models with time varying
covariates it does not make sense to use this function, because
the predicted risk has to be a measurable function of the data
available at the time origin.
</p>
<p>The iid decomposition is output using an array containing the value of the influence
of each subject used to fit the object (dim 1),
for each subject in newdata (dim 3),
and each time (dim 2).
</p>


<h3>Author(s)</h3>

<p>Brice Ozenne broz@sund.ku.dk, Thomas A. Gerds
tag@biostat.ku.dk
</p>


<h3>References</h3>

<p>Brice Ozenne, Anne Lyngholm Sorensen, Thomas Scheike, Christian Torp-Pedersen and Thomas Alexander Gerds.
riskRegression: Predicting the Risk of an Event using Cox Regression Models.
The R Journal (2017) 9:2, pages 440-460.
</p>


<h3>See Also</h3>

<p><code>confint.predictCSC</code> to compute confidence intervals/bands.
<code>autoplot.predictCSC</code> to display the predictions.
</p>


<h3>Examples</h3>

<pre><code class="language-R">library(survival)
library(prodlim)
#### generate data ####
set.seed(5)
d &lt;- sampleData(80,outcome="comp") ## training dataset
nd &lt;- sampleData(4,outcome="comp") ## validation dataset
d$time &lt;- round(d$time,1) ## create tied events
ttt &lt;- sort(sample(x = unique(d$time), size = 10))

## estimate a CSC model based on the coxph function
CSC.fit &lt;- CSC(Hist(time,event)~ X3+X8, data=d, method = "breslow")

## compute the absolute risk of cause 1, in the validation dataset
## at time 1:10
CSC.risk &lt;-  predict(CSC.fit, newdata=nd, times=1:10, cause=1)
CSC.risk

## compute absolute risks with CI for cause 2
## (without displaying the value of the covariates)
predict(CSC.fit,newdata=nd,times=1:10,cause=2,se=TRUE,
        keep.newdata = FALSE)

## other example
library(survival)
CSC.fit.s &lt;- CSC(list(Hist(time,event)~ strata(X1)+X2+X9,
 Hist(time,event)~ X2+strata(X4)+X8+X7),data=d, method = "breslow")
predict(CSC.fit.s,cause=1,times=ttt,se=1L) ## note: absRisk&gt;1 due to small number of observations

## using the cph function instead of coxph
CSC.cph &lt;- CSC(Hist(time,event)~ X1+X2,data=d, method = "breslow", fitter = "cph")#' 
predict(CSC.cph, newdata = d, cause = 2, times = ttt)

## landmark analysis
T0 &lt;- 1
predCSC.afterT0 &lt;- predict(CSC.fit, newdata = d, cause = 2, times = ttt[ttt&gt;T0], landmark = T0)
predCSC.afterT0
</code></pre>


</div>