<div class="container">

<table style="width: 100%;"><tr>
<td>riskRegression</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Risk Regression
Fits a regression model for the risk of an event – allowing for competing
risks.</h2>

<h3>Description</h3>

<p>This is a wrapper for the function <code>comp.risk</code> from the timereg package.
The main difference is one marks variables in the formula that should have a
time-dependent effect whereas in <code>comp.risk</code> one marks variables that
should have a time constant (proportional) effect.
</p>


<h3>Usage</h3>

<pre><code class="language-R">riskRegression(
  formula,
  data,
  times,
  link = "relative",
  cause,
  conf.int = TRUE,
  cens.model,
  cens.formula,
  max.iter = 50,
  conservative = TRUE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>Formula where the left hand side specifies the event
history event.history and the right hand side the linear predictor.  See
examples.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>The data for fitting the model in which includes all
the variables included in formula.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>times</code></td>
<td>
<p>Vector of times. For each time point in <code>times</code>
estimate the baseline risk and the timevarying coefficients.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>link</code></td>
<td>
<p><code>"relative"</code> for the absolute risk regression
model.  <code>"logistic"</code> for the logistic risk regression model.
<code>"prop"</code> for the Fine-Gray regression model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cause</code></td>
<td>
<p>The cause of interest.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf.int</code></td>
<td>
<p>If <code>TRUE</code> return the iid decomposition, that
can be used to construct confidence bands for predictions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cens.model</code></td>
<td>
<p>Specified the model for the (conditional)
censoring distribution used for deriving weights (IFPW). Defaults
to "KM" (the Kaplan-Meier method ignoring covariates) alternatively
it may be "Cox" (Cox regression).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cens.formula</code></td>
<td>
<p>Right hand side of the formula used for fitting
the censoring model.  If not specified the right hand side of
<code>formula</code> is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max.iter</code></td>
<td>
<p>Maximal number of iterations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conservative</code></td>
<td>
<p>If <code>TRUE</code> use variance formula that ignores the contribution
by the estimate of the inverse of the probability of censoring weights</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments passed to <code>comp.risk</code></p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Thomas A. Gerds <a href="mailto:tag@biostat.ku.dk">tag@biostat.ku.dk</a>, Thomas H. Scheike <a href="mailto:ts@biostat.ku.dk">ts@biostat.ku.dk</a>
</p>


<h3>References</h3>

<p>Thomas A Gerds, Thomas H Scheike, and Per K Andersen. Absolute risk
regression for competing risks: interpretation, link functions, and
prediction. Statistics in medicine, 31(29):3921–3930, 2012.
</p>
<p>Scheike, Zhang and Gerds (2008), Predicting cumulative incidence probability
by direct binomial regression, Biometrika, 95, 205-220.
</p>
<p>Scheike and Zhang (2007), Flexible competing risks regression modelling and
goodness of fit, LIDA, 14, 464-483.
</p>
<p>Martinussen and Scheike (2006), Dynamic regression models for survival data,
Springer.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(prodlim)
data(Melanoma,package="riskRegression")
## tumor thickness on the log-scale
Melanoma$logthick &lt;- log(Melanoma$thick)

# Single binary factor

## absolute risk regression
library(survival)
library(prodlim)
fit.arr &lt;- ARR(Hist(time,status)~sex,data=Melanoma,cause=1)
print(fit.arr)
# show predicted cumulative incidences
plot(fit.arr,col=3:4,newdata=data.frame(sex=c("Female","Male")))

## compare with non-parametric Aalen-Johansen estimate
library(prodlim)
fit.aj &lt;- prodlim(Hist(time,status)~sex,data=Melanoma)
plot(fit.aj,conf.int=FALSE)
plot(fit.arr,add=TRUE,col=3:4,newdata=data.frame(sex=c("Female","Male")))

## with time-dependent effect
fit.tarr &lt;- ARR(Hist(time,status)~strata(sex),data=Melanoma,cause=1)
plot(fit.tarr,newdata=data.frame(sex=c("Female","Male")))

## logistic risk regression
fit.lrr &lt;- LRR(Hist(time,status)~sex,data=Melanoma,cause=1)
summary(fit.lrr)


# Single continuous factor

## tumor thickness on the log-scale
Melanoma$logthick &lt;- log(Melanoma$thick)

## absolute risk regression 
fit2.arr &lt;- ARR(Hist(time,status)~logthick,data=Melanoma,cause=1)
print(fit2.arr)
# show predicted cumulative incidences
plot(fit2.arr,col=1:5,newdata=data.frame(logthick=quantile(Melanoma$logthick)))

## comparison with nearest neighbor non-parametric Aalen-Johansen estimate
library(prodlim)
fit2.aj &lt;- prodlim(Hist(time,status)~logthick,data=Melanoma)
plot(fit2.aj,conf.int=FALSE,newdata=data.frame(logthick=quantile(Melanoma$logthick)))
plot(fit2.arr,add=TRUE,col=1:5,lty=3,newdata=data.frame(logthick=quantile(Melanoma$logthick)))

## logistic risk regression
fit2.lrr &lt;- LRR(Hist(time,status)~logthick,data=Melanoma,cause=1)
summary(fit2.lrr)

## change model for censoring weights
library(rms)
fit2a.lrr &lt;- LRR(Hist(time,status)~logthick,
                 data=Melanoma,
                 cause=1,
                 cens.model="cox",
                 cens.formula=~sex+epicel+ulcer+age+logthick)
summary(fit2a.lrr)

##  compare prediction performance
Score(list(ARR=fit2.arr,AJ=fit2.aj,LRR=fit2.lrr),formula=Hist(time,status)~1,data=Melanoma)


# multiple regression
library(riskRegression)
library(prodlim)
# absolute risk model
multi.arr &lt;- ARR(Hist(time,status)~logthick+sex+age+ulcer,data=Melanoma,cause=1)

# stratified model allowing different baseline risk for the two gender
multi.arr &lt;- ARR(Hist(time,status)~thick+strata(sex)+age+ulcer,data=Melanoma,cause=1)

# stratify by a continuous variable: strata(age)
multi.arr &lt;- ARR(Hist(time,status)~tp(thick,power=0)+strata(age)+sex+ulcer,
                 data=Melanoma,
                 cause=1)

fit.arr2a &lt;- ARR(Hist(time,status)~tp(thick,power=1),data=Melanoma,cause=1)
summary(fit.arr2a)
fit.arr2b &lt;- ARR(Hist(time,status)~timevar(thick),data=Melanoma,cause=1)
summary(fit.arr2b)

## logistic risk model
fit.lrr &lt;- LRR(Hist(time,status)~thick,data=Melanoma,cause=1)
summary(fit.lrr)





## nearest neighbor non-parametric Aalen-Johansen estimate
library(prodlim)
fit.aj &lt;- prodlim(Hist(time,status)~thick,data=Melanoma)
plot(fit.aj,conf.int=FALSE)

# prediction performance
x &lt;- Score(list(fit.arr2a,fit.arr2b,fit.lrr),
             data=Melanoma,
             formula=Hist(time,status)~1,
             cause=1,
             split.method="none")


</code></pre>


</div>