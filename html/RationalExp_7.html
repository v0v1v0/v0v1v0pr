<div class="container">

<table style="width: 100%;"><tr>
<td>test</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Implementation of the RE test with possible survey weights (direct and with parallel computing)</h2>

<h3>Description</h3>

<p>This function performs the test of rational expectations described in Section 3 of D’Haultfoeuille et al. (2018). By default, the test is implemented without covariates. To perform the test with covariates, one has to indicate in X a non-constant vector or matrix. Also, one can perform the « generalized » tests allowing for aggregate shocks by using the dummy variable generalized. Survey weights can be added. The user can modify the number of cores used by R to reduce the computational time. Tuning parameters used in the test can also be modified.
</p>


<h3>Usage</h3>

<pre><code class="language-R">test(Y_tilde, D, X = matrix(1, length(Y_tilde), 1),
  weights = rep(1/length(Y_tilde), length(Y_tilde)),
  generalized = "No", nbCores = 1, tuningParam = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Y_tilde</code></td>
<td>
<p>the vector stacking the realisations y then the anticipated values psi of respective sizes n_y and n_p.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>D</code></td>
<td>
<p>the vector stacking the dummies for the dataset of realisation : n_y ones then n_p zeros</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>X</code></td>
<td>
<p>the matrix of covariates.  Set to a vector of 1 by default (in which case the test without covariates is performed).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>the vector of survey weights. Uniform by default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>generalized</code></td>
<td>
<p>whether a generalized test should be performed or not: "Add" for additive shocks (default),  "Mult" for multiplicative shocks. Set by default to "No" (no generalized test).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nbCores</code></td>
<td>
<p>the number of cores used by the program. To reduce the computational time, this function can use several cores, in which case the library snowfall should be loaded first. By default nbCores is set to 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tuningParam</code></td>
<td>
<p>a dictionnary (see the example below for modification of the default parameters) containing:
</p>
<p>- the parameter p  in  Section 3 of DGM.  Default is0.05.
</p>
<p>- epsilon the parameter epsilonon in  Section 3 of DGM. Default value is 0.05 and p is set to 0 if a generalized test is performed.
</p>
<p>- B the number of bootstrap samples. Default value is 500.
</p>
<p>- grid_y: the number of points to be tested.
</p>
<p>Default is quantile(Y_tilde,seq(0,1,length.out=30)).
</p>
<p>- c:  the parameter c inSection 3 of DGM. Default is 0.3.
</p>
<p>- kappa : the parameter kappapa in  Section 3 of DGM. Default is  0.001.
</p>
<p>Default values are associated with the test without covariates.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>a list containing, in order:
</p>
<p>- N, the number of observations
</p>
<p>- cv01, the 1% critical value
</p>
<p>- cv05, the 5% critical value
</p>
<p>- cv10, the 10% critical value
</p>
<p>- T_n, the Test ststistic
</p>
<p>- B, the number of bootstrap samples
</p>
<p>- p_value, the p-value
</p>
<p>- T_reps, the vector of bootstraped test statitics.
</p>


<h3>References</h3>

<p>D’Haultfoeuille X, Gaillac C, Maurel A (2018). “Rationalizing Rational Expectations? Tests and Deviations.” NBER Working paper &lt;doi:10.3386/w25274&gt;
</p>
<p>Andrews D, Shi X (2017). “Inference Based on Many Conditional Moment Inequalities.” Journal of Econometrics, 196(2), 275–287.
</p>
<p>Andrews DW, Kim W, Shi X (2017). “Commands for testing conditional moment inequalities and equalities.” The Stata journal, 17(1).
</p>


<h3>Examples</h3>

<pre><code class="language-R">## The RE test without covariates
n_p=600
n_y=n_p
N &lt;- n_y + n_p
rho &lt;-0.29
sig=0.1
u=1
b=0.10
a=2

psi &lt;-rnorm(n_p,0,u)
pp_y &lt;- runif(n_y,0,1)
zeta &lt;- rnorm(n_y,a,sig)
zeta1 &lt;- rnorm(n_y,-a,sig)
pp1_y &lt;- 1*(pp_y &lt;b)
pp2_y &lt;- 1*(pp_y &gt;1-b)
pp3_y &lt;- 1*(pp_y &lt;=(1-b) &amp; pp_y &gt;=b)
psi_y &lt;-rnorm(n_y,0,u)
y =  rho*psi_y+ pp1_y*zeta + pp2_y*zeta1


D &lt;- rbind(matrix(1,n_y,1),matrix(0,n_p,1))
Y_tilde &lt;- rbind(matrix(y,n_y,1),matrix(psi,n_p,1))

#res &lt;- test(Y_tilde ,D)


</code></pre>


</div>