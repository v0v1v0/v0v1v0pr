<div class="container">

<table style="width: 100%;"><tr>
<td>class_svyreg_rob</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Utility Functions for Objects of Class svyreg_rob</h2>

<h3>Description</h3>

<p>Methods and utility functions for objects of class <code>svyreg_rob</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">## S3 method for class 'svyreg_rob'
print(x, digits = max(3L, getOption("digits") - 3L), ...)

## S3 method for class 'svyreg_rob'
summary(object, mode = c("design", "model", "compound"),
        digits = max(3L, getOption("digits") - 3L), ...)

## S3 method for class 'svyreg_rob'
coef(object, ...)

## S3 method for class 'svyreg_rob'
vcov(object, mode = c("design", "model", "compound"), ...)

## S3 method for class 'svyreg_rob'
SE(object, mode = c("design", "model", "compound"), ...)

## S3 method for class 'svyreg_rob'
residuals(object, ...)

## S3 method for class 'svyreg_rob'
fitted(object, ...)

## S3 method for class 'svyreg_rob'
robweights(object)

## S3 method for class 'svyreg_rob'
plot(x, which = 1L:4L,
     hex = FALSE, caption = c("Standardized residuals vs. Fitted Values",
     "Normal Q-Q", "Response vs. Fitted values",
     "Sqrt of abs(Residuals) vs. Fitted Values"),
	 panel = if (add.smooth) function(x, y, ...) panel.smooth(x, y,
     iter = iter.smooth, ...) else points, sub.caption = NULL, main = "",
	 ask = prod(par("mfcol")) &lt; length(which) &amp;&amp; dev.interactive(), ...,
	 id.n = 3, labels.id = names(residuals(x)), cex.id = 0.75, qqline = TRUE,
	 add.smooth = getOption("add.smooth"), iter.smooth = 3,
	 label.pos = c(4, 2), cex.caption = 1, cex.oma.main = 1.25)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>object of class <code>svyreg_rob</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>digits</code></td>
<td>
<p><code>[integer]</code> minimal number of significant digits.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments passed to the method.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>object of class <code>svyreg_rob</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mode</code></td>
<td>
<p><code>[character]</code> mode of variance estimator:
<code>"design"</code>, <code>"model"</code> or <code>"compound"</code> (default:
<code>"design"</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>which</code></td>
<td>
<p><code>[integer]</code> indicating which plots to be drawn; if
a subset of the plots is required, you can specify a subset of the
numbers <code>1:4</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>hex</code></td>
<td>
<p><code>[logical]</code> if <code>TRUE</code>, a hexagonally binned plot
is shown in place of a scatterplot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>caption</code></td>
<td>
<p><code>[character]</code> captions to appear above the plots;
vector of valid graphics annotations. It can be set to <code>""</code>
or <code>NA</code> to suppress all captions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>panel</code></td>
<td>
<p>panel function. The useful alternative to
<code>points</code>, <code>panel.smooth</code> can be chosen
by <code>add.smooth = TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sub.caption</code></td>
<td>
<p><code>[character]</code> common title—above the figures
if there are more than one; used as <code>sub</code> (s.<code>title</code>)
otherwise. If <code>NULL</code>, as by default, a possible abbreviated
version of <code>deparse(x$call)</code> is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>main</code></td>
<td>
<p><code>[character]</code> title to each plot—in addition
to <code>caption</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ask</code></td>
<td>
<p><code>[logical]</code>; if <code>TRUE</code>, the user is <em>ask</em>ed
before each plot, see <code>par(ask=.)</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id.n</code></td>
<td>
<p><code>[integer]</code> number of points to be labelled in each plot,
starting with the most extreme.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labels.id</code></td>
<td>
<p><code>[character]</code> vector of labels from which the
labels for extreme points will be chosen. <code>NULL</code> uses
observation numbers.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex.id</code></td>
<td>
<p><code>[numeric]</code> magnification of point labels.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>qqline</code></td>
<td>
<p><code>[logical]</code> indicating if a <code>qqline</code>
should be added to the normal Q-Q plot.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add.smooth</code></td>
<td>
<p><code>[logical]</code> indicating if a smoother should be
added to most plots; see also <code>panel</code> above.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>iter.smooth</code></td>
<td>
<p><code>[integer]</code> the number of robustness iterations,
the argument <code>iter</code> in <code>panel.smooth</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>label.pos</code></td>
<td>
<p><code>[numeric]</code> positioning of labels, for the left
half and right half of the graph respectively.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex.caption</code></td>
<td>
<p><code>[numeric]</code> controls the size of <code>caption</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cex.oma.main</code></td>
<td>
<p><code>[numeric]</code> controls the size of the
<code>sub.caption</code> only if that is <em>above</em> the figures when
there is more than one.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Package <span class="pkg">survey</span> must be attached to the search path in order to use
the functions (see <code>library</code> or <code>require</code>).
</p>

<dl>
<dt>Variance</dt>
<dd>
<p>For variance estimation (<code>summary</code>, <code>vcov</code>, and
<code>SE</code>) three modes are available:
</p>

<ul>
<li> <p><code>"design"</code>: design-based variance estimator using
linearization; see Binder (1983)
</p>
</li>
<li> <p><code>"model"</code>: model-based weighted variance estimator
(the sampling design is ignored)
</p>
</li>
<li> <p><code>"compound"</code>: design-model-based variance
estimator; see Rubin-Bleuer and Schiopu-Kratina (2005)
and Binder and Roberts (2009)
</p>
</li>
</ul>
</dd>
<dt>Utility functions</dt>
<dd>
<p>The following utility functions are available:
</p>

<ul>
<li> <p><code>summary</code> gives a summary of the estimation
properties
</p>
</li>
<li> <p><code>plot</code> shows diagnostic plots for the estimated
regression model
</p>
</li>
<li> <p><code>robweights</code> extracts the robustness weights
(if available)
</p>
</li>
<li> <p><code>coef</code> extracts the estimated regression coefficients
</p>
</li>
<li> <p><code>vcov</code> extracts the (estimated) covariance matrix
</p>
</li>
<li> <p><code>residuals</code> extracts the residuals
</p>
</li>
<li> <p><code>fitted</code> extracts the fitted values
</p>
</li>
</ul>
</dd>
</dl>
<h3>References</h3>

<p>Binder, D. A. (1983). On the Variances of Asymptotically Normal Estimators
from Complex Surveys. <em>International Statistical Review</em> <b>51</b>,
279–292. <a href="https://doi.org/10.2307/1402588">doi:10.2307/1402588</a>
</p>
<p>Binder, D. A. and Roberts, G. (2009). Design- and Model-Based Inference for
Model Parameters. In: <em>Sample Surveys: Inference and Analysis</em>
ed. by Pfeffermann, D. and Rao, C. R. Volume 29B of
<em>Handbook of Statistics</em>, Amsterdam: Elsevier, Chap. 24, 33–54
<a href="https://doi.org/10.1016/S0169-7161%2809%2900224-7">doi:10.1016/S0169-7161(09)00224-7</a>
</p>
<p>Rubin-Bleuer, S. and Schiopu-Kratina, I. (2005). On the Two-phase
framework for joint model and design-based inference.
<em>The Annals of Statistics</em> <b>33</b>, 2789–2810.
<a href="https://doi.org/10.1214/009053605000000651">doi:10.1214/009053605000000651</a>
</p>


<h3>See Also</h3>

<p>Weighted least squares: <code>svyreg</code>; robust weighted regression
<code>svyreg_huberM</code>, <code>svyreg_huberGM</code>,
<code>svyreg_tukeyM</code> and <code>svyreg_tukeyGM</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">head(workplace)

library(survey)
# Survey design for simple random sampling without replacement
dn &lt;- if (packageVersion("survey") &gt;= "4.2") {
        # survey design with pre-calibrated weights
        svydesign(ids = ~ID, strata = ~strat, fpc = ~fpc, weights = ~weight,
                  data = workplace, calibrate.formula = ~-1 + strat)
    } else {
        # legacy mode
        svydesign(ids = ~ID, strata = ~strat, fpc = ~fpc, weights = ~weight,
                  data = workplace)
    }

# Compute regression M-estimate with Huber psi-function
m &lt;- svyreg_huberM(payroll ~ employment, dn, k = 14)

# Diagnostic plots (e.g., standardized residuals against fitted values)
plot(m, which = 1L)

# Plot of the robustness weights of the M-estimate against its residuals
plot(residuals(m), robweights(m))

# Utility functions
summary(m)
coef(m)
SE(m)
vcov(m)
residuals(m)
fitted(m)
robweights(m)
</code></pre>


</div>