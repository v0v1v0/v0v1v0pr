<div class="container">

<table style="width: 100%;"><tr>
<td>rvn_rvh_overwrite</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Write/Overwrite Raven rvh file</h2>

<h3>Description</h3>

<p>Given an HRU and SubBasin dataframe, writes to the specified .rvh file. In the case of rvn_rvh_overwrite,
just the :SubBasins-:EndSubBasins and :HRUs-:EndHRUs blocks are re-written, retaining all other content.
</p>


<h3>Usage</h3>

<pre><code class="language-R">rvn_rvh_overwrite(filename, SBtable, HRUtable, basefile)

rvn_rvh_write(
  filename,
  SBtable = NULL,
  HRUtable = NULL,
  description = "Generated by RavenR rvn_rvh_write",
  author = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>filename</code></td>
<td>
<p>filepath of rvh file to write to (with .rvh extension)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>SBtable</code></td>
<td>
<p>Valid subbasin dataframe with required columns "SBID", "Name", "Downstream_ID", "Profile",
"ReachLength", and "Gauged". Can have additional columns.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>HRUtable</code></td>
<td>
<p>Valid HRU dataframe with required columns 'ID', 'Area', 'Elevation', 'Latitude', 'Longitude',
'SBID', 'LandUse', 'Vegetation', 'SoilProfile', 'Aquifer', 'Terrain', 'Slope', and 'Aspect'. Can have additional columns.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>basefile</code></td>
<td>
<p>original rvh file to overwrite (only used with rvn_rvh_overwrite)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>description</code></td>
<td>
<p>(optional) Description added after file header</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>author</code></td>
<td>
<p>(optional) Name of author, to be printed in file header.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>rvn_rvh_write</code> is typically used to create a 'clean' .rvh file.
</p>
<p><code>rvn_rvh_overwrite</code> is usually used after reading an original .rvh file and
processing the HRU and SubBasin tables, using (e.g., <code>rvn_rvh_cleanhrus</code>). This may also be used
to preserve commands in the rvh file such as reservoir information, comments outside of the
subbasin and HRU blocks, RedirectToFile commands, etc.
</p>
<p>Note that if using the rvn_rvh_overwrite function and the filename and basefile arguments are the same, the
original file will be overwritten while preserving lines outside of the subbasin and HRU blocks.
</p>
<p>If using <code>rvn_rvh_write</code>, the SBtable or HRUtable parameters may be omitted and provided as <code>NULL</code>.
In these cases, those sections will not be written in the rvh file. This may be useful in cases where one wishes to
separate the SubBasins and HRUs in different files.
</p>


<h3>Value</h3>

<table><tr style="vertical-align: top;">
<td><code>TRUE</code></td>
<td>
<p>returns <code>TRUE</code> if function runs properly</p>
</td>
</tr></table>
<h3>Functions</h3>


<ul><li> <p><code>rvn_rvh_overwrite()</code>: Overwrite contents of original .rvh file
</p>
</li></ul>
<h3>Author(s)</h3>

<p>James R. Craig, University of Waterloo
</p>
<p>Leland Scantlebury
</p>


<h3>See Also</h3>

<p><code>rvn_rvh_read</code> for the function used to read in the HRU and SubBasin data
<code>rvn_rvh_cleanhrus</code> for the function used to process HRU dataframe<br>
For generating blank SubBasin and HRU tables, see: <code>rvn_rvh_blankSBdf</code> and <code>rvn_rvh_blankHRUdf</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Example: write a blank rvh file
## create some blank tables
sbs_data &lt;- rvn_rvh_blankSBdf(nSubBasins = 1)
hru_data &lt;- rvn_rvh_blankHRUdf(nHRUs = 3)

# write to rvh file
rvn_rvh_write(file.path(tempdir(), "Blank.rvh"),
              SBtable = sbs_data,
              HRUtable = hru_data,
              description = "Example output - Blank Watershed Discretization File",
              author = "Raven Development Team")

# Example: Read in an rvh, clean its contents and write back to new file
nith &lt;- system.file("extdata","Nith.rvh",package = "RavenR")
rvh &lt;- rvn_rvh_read(nith)

# remove HRUs covering less than 5% of the total area
rvh$HRUtable &lt;- rvn_rvh_cleanhrus(rvh$HRUtable, rvh$SBtable, area_tol = 0.05)


# write the Subbasin and HRU tables to new file using rvn_rvh_write:
rvn_rvh_write(filename=file.path(tempdir(), "Nith_cleaned_write.rvh"),
             SBtable = rvh$SBtable,
             HRUtable = rvh$HRUtable)

# write to new file, while preserving all unedited information using rvn_rvh_overwrite:
rvn_rvh_overwrite(filename=file.path(tempdir(), "Nith_cleaned_overwrite.rvh"),
                  basefile=nith,
                  SBtable = rvh$SBtable,
                  HRUtable = rvh$HRUtable)

</code></pre>


</div>