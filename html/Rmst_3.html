<div class="container">

<table style="width: 100%;"><tr>
<td>assembly</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Assemble Computerized Adaptive Multistage Testing</h2>

<h3>Description</h3>

<p><code>mst</code> creates a multistage (MST) assembly model
</p>
<p><code>mst_route</code> adds/removes a route to/from the assembly model
</p>
<p><code>mst_objective</code> adds an objective to the assembly model
</p>
<p><code>mst_constraint</code> adds constraints to the assembly model
</p>
<p><code>mst_stage_length</code> sets length limits on stages
</p>
<p><code>mst_rdp</code> anchors the routing decision point (rdp) between adjacent modules
</p>
<p><code>mst_module_info</code> sets the information requirements for modules
</p>
<p><code>mst_assemble</code> tries to solve the assembly model
</p>
<p><code>mst_get_items</code> retrieves items from the assembly results
</p>


<h3>Usage</h3>

<pre><code class="language-R">mst(pool, design, n_panels = 1, method = c("topdown", "bottomup"),
  test_len = NULL, max_use = NULL, ...)

mst_route(x, route, op = c("+", "-"))

mst_objective(x, coef, mode = c("max", "min"), indices = NULL,
  target = NULL, method = NULL, ...)

mst_constraint(x, coef, min = NA, max = NA, level = NULL,
  indices = NULL, method = NULL)

mst_stage_length(x, stages, min = NA, max = NA)

mst_rdp(x, theta, indices, tol = 0.5)

mst_module_info(x, theta, min = NA, max = NA, indices)

mst_assemble(x, solver = c("lpsolve", "glpk"), silent = FALSE,
  time_limit = 30, message = FALSE, ...)

mst_get_items(x, panel_ix = NULL, stage_ix = NULL, module_ix = NULL,
  route_ix = NULL)

## S3 method for class 'mst'
print(x, ...)

## S3 method for class 'mst'
plot(x, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>pool</code></td>
<td>
<p>the item pool (a list of '3pl', 'gpcm', and 'grm' items)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>design</code></td>
<td>
<p>the MST design (string): e.g., "1-3", "1-2-2", "1-2-3"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_panels</code></td>
<td>
<p>the number of panels (integer)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>the design method (string): 'topdown' or 'bottomup'</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>test_len</code></td>
<td>
<p>the module/route length (integer)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_use</code></td>
<td>
<p>the maximum selection of items (integer)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>the MST object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>route</code></td>
<td>
<p>a MST route (a vector of module index)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>op</code></td>
<td>
<p><code>"+"</code> to add a route and <code>"-"</code> to remove a route</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>coef</code></td>
<td>
<p>the coefficients (numeric vector or string)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>mode</code></td>
<td>
<p>the optimization direction: <code>"max"</code> or <code>"min"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>indices</code></td>
<td>
<p>the indices of the route (topdown) or the module (bottomup) where the objective is added</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>target</code></td>
<td>
<p>the target values of the absolute objectives, <code>NULL</code> for the relative objective</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min</code></td>
<td>
<p>the lower bound of the constraint</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max</code></td>
<td>
<p>the upper bound of the constraint</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>level</code></td>
<td>
<p>the constrained level of categorical item attribute,
<code>NULL</code> for continuous item attributes</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stages</code></td>
<td>
<p>the stage indices</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>theta</code></td>
<td>
<p>the theta point where TIF is controlled</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tol</code></td>
<td>
<p>tolerance parameter (numeric)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>solver</code></td>
<td>
<p>the MIP solver: <code>"lpsolve"</code> or <code>"glpk"</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>silent</code></td>
<td>
<p><code>TRUE</code> to mute solving status</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time_limit</code></td>
<td>
<p>the time limit for solving the model in seconds</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>message</code></td>
<td>
<p><code>TRUE</code> to print messages from the solver</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>panel_ix</code></td>
<td>
<p>the panel index (int vector)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>stage_ix</code></td>
<td>
<p>the stage index (int vector)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>module_ix</code></td>
<td>
<p>the module index (int vector)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>route_ix</code></td>
<td>
<p>the route index (int vector)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>A <code>mst</code> object stores the definitions of the MST. When <code>mst_assemble</code>
is called, definitions are converted to a real mixed integer programming model for
assembly. If the model is solved, assembled items are appended to the original object. <br>
The bottom-up approach adds objectives and constraints on individual modules, and the top-down
approach adds objectives and constraints on routes.
</p>
<p><code>coef</code> in <code>mst_objective</code> can be a vector of theta points where TIFs are optimized, or
a continuous variable in the pool where the item attribute is optimized, or a numeric value with
the same length of the pool at either item or group level.
</p>
<p><code>plot.mst</code> draws module information functions when <code>byroute=FALSE</code>
and route information functions when <code>byroute=TRUE</code>. Use <code>label=TRUE</code>
to put labels on routes and modules.
</p>


<h3>Value</h3>

<p><code>mst</code> returns a <code>mst</code> object.
</p>
<p><code>mst_get_items</code> returns the assembled forms in a list of 3pl, gpcm, and grm items
</p>


<h3>Examples</h3>

<pre><code class="language-R">
## generate item pool
set.seed(123456)
items &lt;- Rirt::model_mixed_gendata(1, n_3pl=200)$items

## Ex. 1: 1-2-2 MST, 2 panels, 20 items, topdown
## maximize info. at -1 and 1 for easy and hard routes
x &lt;- mst(items, "1-2-2", n_panels=2, method='topdown', test_len=10, max_use=1)
x &lt;- mst_objective(x, -1, indices=1:2)
x &lt;- mst_objective(x, 1, indices=3:4)
x &lt;- mst_assemble(x, 'lpsolve', time_limit=30)
plot(x, byroute=TRUE, label=TRUE)

## Ex. 2: 1-2-3 MST, 2 panels, bottomup,
## remove two routes with large theta change: 1-2-6, 1-3-4
## 10 items in each module, content= and 3 items in content area 1 in each module
## maximize info. at -1, 0 and 1 for easy, medium, and hard modules
x &lt;- mst(items, "1-2-3", 1, 'bottomup', len=10, max_use=1)
x &lt;- mst_route(x, c(1, 2, 6), "-")
x &lt;- mst_route(x, c(1, 3, 4), "-")
x &lt;- mst_objective(x,  0, indices=c(1, 5))
x &lt;- mst_objective(x, -1, indices=c(2, 4))
x &lt;- mst_objective(x,  1, indices=c(3, 6))
x &lt;- mst_assemble(x, timeout=30)
plot(x, byroute=FALSE)
plot(x, byroute=TRUE)

</code></pre>


</div>