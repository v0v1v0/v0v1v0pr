<div class="container">

<table style="width: 100%;"><tr>
<td>eventsMethods</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Export, Import, and Delete Event Settings</h2>

<h3>Description</h3>

<p>These methods enable the user to export event settings,
import new events, update settings for existing events, or
delete events.
</p>


<h3>Usage</h3>

<pre><code class="language-R">exportEvents(rcon, ...)

importEvents(rcon, data, override = FALSE, ...)

deleteEvents(rcon, events = NULL, ...)

## S3 method for class 'redcapApiConnection'
exportEvents(
  rcon,
  arms = NULL,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)

## S3 method for class 'redcapApiConnection'
importEvents(
  rcon,
  data,
  override = FALSE,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)

## S3 method for class 'redcapApiConnection'
deleteEvents(
  rcon,
  events = NULL,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>arms</code></td>
<td>
<p><code>character</code> or <code>integerish</code> identifying the arm
numbers for which event data will be exported.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>events</code></td>
<td>
<p><code>character</code> giving the unique event names of the events to
be deleted.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p><code>data.frame</code>. Must have columns <code>event_name</code> and <code>arm_num</code>.
To modify existing events, it must also have a column <code>unique_event_name</code>.
It may optionally have columns for <code>days_offset</code>, <code>offset_min</code>, <code>offset_max</code>.
For backward compatibility, this argument may be passed as <code>event_data</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>override</code></td>
<td>
<p><code>logical(1)</code>. By default, data will add to or modify
existing arms data. When <code>TRUE</code>, all the existing arms data is
deleted and replaced with the contents of <code>data</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>error_handling</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("error", "null")</code>.
An option for how to handle errors returned by the API.
see <code>redcapError()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>config</code></td>
<td>
<p>A named <code>list</code>. Additional configuration parameters to pass to
<code>httr::POST()</code>. These are appended to any parameters in
<code>rcon$config</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>api_param</code></td>
<td>
<p>A named <code>list</code>. Additional API parameters to pass into the
body of the API call. This provides users to execute calls with options
that may not otherwise be supported by <code>redcapAPI</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Exporting events is not supported for classical REDCap projects. If
the user attempts to export arms for a classical project, a
data frame will be returned with zero rows.
</p>
<p>Additionally, in order for events to be exported, the project must be
longitudinal, have at least one arm, and at least one event defined.
When these conditions are not satifisfied, <code>exportEvents</code>
will return a data frame with zero rows.
</p>
<p>To import new events, the user must provide data with the
<code>unique_event_name</code> set to <code>NA</code> (REDCap assigns the unique
event name automatically from the user provided <code>event_name</code>).
</p>
<p>To modify existing events, the user must provide the <code>unique_event_name</code>.
The other fields in the data provided will overwrite the current values
for the matching event.
</p>
<p>Deleting events–whether by <code>deleteEvents</code> or <code>importEvents</code> with
<code>override = TRUE</code>–is a destructive act that also deletes
arms and records associated with the event. This is irreversible
data loss. REDCap will only permit these actions to occur in projects
in Development status.
</p>


<h3>Value</h3>

<p><code>exportEvents</code> returns a data frame with the columns:</p>

<table>
<tr>
<td style="text-align: left;">
    </td>
<td style="text-align: left;">  </td>
</tr>
<tr>
<td style="text-align: left;">
   event_name </td>
<td style="text-align: left;"> The user provided name for the event. </td>
</tr>
<tr>
<td style="text-align: left;">
   arm_num </td>
<td style="text-align: left;"> The arm number the event is associated with. </td>
</tr>
<tr>
<td style="text-align: left;">
   unique_event_name </td>
<td style="text-align: left;"> The REDCap generated event name. </td>
</tr>
<tr>
<td style="text-align: left;">
   custom_event_label </td>
<td style="text-align: left;"> An optional user provided label that may be used in place of the event name. </td>
</tr>
<tr>
<td style="text-align: left;">
   event_id </td>
<td style="text-align: left;"> REDCap's internal event identifier. </td>
</tr>
<tr>
<td style="text-align: left;">
   days_offset </td>
<td style="text-align: left;"> The number of days since time zero (start of the study or project period) an event is scheduled to occur. This field is only provided when the scheduling module is enabled. </td>
</tr>
<tr>
<td style="text-align: left;">
   offset_min </td>
<td style="text-align: left;"> The number of days before the <code>days_offset</code> during which the event may occur. This field is only provided when the scheduling module is enabled. </td>
</tr>
<tr>
<td style="text-align: left;">
   offset_max </td>
<td style="text-align: left;"> The number of days before the <code>days_offset</code> during which the event may occur. This field is only provided when  the scheduling module is enabled. </td>
</tr>
<tr>
<td style="text-align: left;">
</td>
</tr>
</table>
<p><code>importEvents</code> invisibly returns the number of events added or modified.
</p>
<p><code>deleteEvents</code> invisibly returns the number of events deleted.
</p>


<h3>Functions</h3>


<ul>
<li> <p><code>exportEvents()</code>: Export events from a REDCap project.
</p>
</li>
<li> <p><code>importEvents()</code>: Add events to a project or modify existing events.
</p>
</li>
<li> <p><code>deleteEvents()</code>: Delete events from a project.
</p>
</li>
</ul>
<h3>See Also</h3>

<p><code>exportMappings()</code>, <br><code>importMappings()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())

# Export all events
exportEvents(rcon)

# Export events for a subset of arms
exportEvents(rcon, 
             arms = c(1, 3))
             
# Import new events
NewEvents &lt;- data.frame(event_name = c("Event 1", 
                                       "Event 2"), 
                        arm_num = c(1, 1))
importEvents(rcon, 
             data = NewEvents)
             
# Modify existing events
UpdateEvents &lt;- data.frame(event_name = "Event 2 New Name", 
                           arm_num = 1, 
                           unique_event_name = "event_2_arm_1", 
                           custom_event_label = "The second visit")
importEvents(rcon, 
             data = UpdateEvents)
             
# Replace all events with a new set
NewEvents &lt;- data.frame(event_name = c("Event 1", 
                                       "Event 2", 
                                       "Event 1"), 
                        arm_num = c(1, 1, 2))
importEvents(rcon, 
             data = NewEvents, 
             override = TRUE)
             
# Delete events
deleteEvents(rcon, 
             events = c("event_1_arm_1", "event_1_arm_2"))

## End(Not run)

</code></pre>


</div>