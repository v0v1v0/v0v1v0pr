<div class="container">

<table style="width: 100%;"><tr>
<td>derive_streams</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Extract streams from a flow accumulation raster</h2>

<h3>Description</h3>

<p>Derive a raster and a vector layer of stream lines from a flow accumulation raster.
</p>


<h3>Usage</h3>

<pre><code class="language-R">derive_streams(
  dem,
  flow_acc,
  out_rast,
  out_vect,
  min_acc = 1000,
  min_length = 0,
  overwrite = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>dem</code></td>
<td>
<p>Name of an elevation raster in the current GRASS mapset.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>flow_acc</code></td>
<td>
<p>Name of a flow accumulation raster in the current GRASS mapset.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>out_rast</code></td>
<td>
<p>Name of the output raster dataset of stream lines. File extensions should not matter.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>out_vect</code></td>
<td>
<p>Name of the output vector dataset of stream lines. Should be WITHOUT .shp extension.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min_acc</code></td>
<td>
<p>The minimum accumulation value that a cell needs to be classified as a stream. Defaults to <code>1000</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min_length</code></td>
<td>
<p>The minimum length of a stream segment in cells. Defaults to <code>0</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>overwrite</code></td>
<td>
<p>A logical indicating whether the output should be allowed to overwrite existing files. Defaults to <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments to <code>r.stream.extract</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Nothing. A vector dataset with the name <code>basename(out)</code> will appear in the current GRASS mapset.
</p>


<h3>Examples</h3>

<pre><code class="language-R"> 
# Will only run if GRASS is running
if(check_running()){
# Retrieve paths to data sets
dem &lt;- system.file("extdata", "dem.tif", package = "rdwplus")
lus &lt;- system.file("extdata", "landuse.tif", package = "rdwplus")
sts &lt;- system.file("extdata", "site.shp", package = "rdwplus")
stm &lt;- system.file("extdata", "streams.shp", package = "rdwplus")

# Set environment
set_envir(dem)

# Get other data sets (stream layer, sites, land use, etc.)
raster_to_mapset(lus)
vector_to_mapset(c(stm, sts))

# Reclassify streams
out_stream &lt;- paste0(tempdir(), "/streams.tif")
rasterise_stream("streams", out_stream, TRUE)
reclassify_streams("streams.tif", "streams01.tif", overwrite = TRUE)

# Burn in the streams to the DEM
burn_in("dem.tif", "streams01.tif", "burndem.tif", overwrite = TRUE)

# Fill dem
fill_sinks("burndem.tif", "filldem.tif", "fd1.tif", "sinks.tif", overwrite = TRUE)

# Derive flow direction and accumulation grids
derive_flow("dem.tif", "fd.tif", "fa.tif", overwrite = T)

# Derive a new stream raster from the FA grid
derive_streams("dem.tif", "fa.tif", "new_stm.tif", "new_stm", min_acc = 200, overwrite = T)
}
</code></pre>


</div>