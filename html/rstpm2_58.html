<div class="container">

<table style="width: 100%;"><tr>
<td>predict-methods</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2> Predicted values for an stpm2 or pstpm2 fit</h2>

<h3>Description</h3>

<p>Given an <code>stpm2</code> fit and an optional list of new data, return predictions
</p>


<h3>Usage</h3>

<pre><code class="language-R">
    ## S4 method for signature 'stpm2'
predict(object, newdata=NULL,
               type=c("surv","cumhaz","hazard","density","hr","sdiff",
               "hdiff","loghazard","link","meansurv","meansurvdiff","meanhr",
               "odds","or","margsurv","marghaz","marghr","meanhaz","af",
               "fail","margfail","meanmargsurv","uncured","rmst","probcure",
               "lpmatrix", "gradh", "gradH","rmstdiff","lpmatrixD"),
               grid=FALSE,seqLength=300,
               type.relsurv=c("excess","total","other"), scale=365.24,
               rmap, ratetable=survival::survexp.us,
               se.fit=FALSE,link=NULL,exposed=NULL,var=NULL,
               keep.attributes=FALSE, use.gr=TRUE,level=0.95,
               n.gauss.quad=100,full=FALSE,...)
    ## S4 method for signature 'pstpm2'
predict(object, newdata=NULL,
               type=c("surv","cumhaz","hazard","density","hr","sdiff",
               "hdiff","loghazard","link","meansurv","meansurvdiff","meanhr",
               "odds","or","margsurv","marghaz","marghr","meanhaz","af",
               "fail","margfail","meanmargsurv","rmst","lpmatrix",
               "gradh", "gradH","rmstdiff","lpmatrixD"),
               grid=FALSE,seqLength=300,
               se.fit=FALSE,link=NULL,exposed=NULL,var=NULL,
               keep.attributes=FALSE, use.gr=TRUE,level=0.95,
               n.gauss.quad=100,full=FALSE,...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>an <code>stpm2</code> or <code>pstpm2</code> object</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>newdata</code></td>
<td>
<p>optional list of new data (required if type in
("hr","sdiff","hdiff","meansurvdiff","or","uncured")). For type in
("hr","sdiff","hdiff","meansurvdiff","or","af","uncured"), this defines the unexposed
newdata. This can be combined with <code>grid</code> to get a
regular set of event times (i.e. newdata would <em>not</em>
include the event times). </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>specify the type of prediction:
</p>

<dl>
<dt>"surv"</dt>
<dd>
<p>survival probabilities</p>
</dd>
<dt>"cumhaz"</dt>
<dd>
<p>cumulative hazard</p>
</dd>
<dt>"hazard"</dt>
<dd>
<p>hazard</p>
</dd>
<dt>"density"</dt>
<dd>
<p>density</p>
</dd>
<dt>"hr"</dt>
<dd>
<p>hazard ratio</p>
</dd>
<dt>"sdiff"</dt>
<dd>
<p>survival difference</p>
</dd>
<dt>"hdiff"</dt>
<dd>
<p>hazard difference</p>
</dd>
<dt>"loghazard"</dt>
<dd>
<p>log hazards</p>
</dd>
<dt>"meansurv"</dt>
<dd>
<p>mean survival</p>
</dd>
<dt>"meansurvdiff"</dt>
<dd>
<p>mean survival difference</p>
</dd>
<dt>"odds"</dt>
<dd>
<p>odds</p>
</dd>
<dt>"or"</dt>
<dd>
<p>odds ratio</p>
</dd>
<dt>"margsurv"</dt>
<dd>
<p>marginal (population) survival</p>
</dd>
<dt>"marghaz"</dt>
<dd>
<p>marginal (population) hazard</p>
</dd>
<dt>"marghr"</dt>
<dd>
<p>marginal (population) hazard ratio</p>
</dd>
<dt>"meanhaz"</dt>
<dd>
<p>mean hazard</p>
</dd>
<dt>"meanhr"</dt>
<dd>
<p>mean hazard ratio</p>
</dd>
<dt>"af"</dt>
<dd>
<p>attributable fraction</p>
</dd>
<dt>"fail"</dt>
<dd>
<p>failure (=1-survival)</p>
</dd>
<dt>"margfail"</dt>
<dd>
<p>marginal failure (=1-marginal survival)</p>
</dd>
<dt>"meanmargsurv"</dt>
<dd>
<p>mean marginal survival, averaged over the
frailty distribution</p>
</dd>
<dt>"uncured"</dt>
<dd>
<p>distribution for the uncured</p>
</dd>
<dt>"rmst"</dt>
<dd>
<p>restricted mean survival time</p>
</dd>
<dt>"rmstdiff"</dt>
<dd>
<p>restricted mean survival time difference</p>
</dd>
<dt>"probcure"</dt>
<dd>
<p>probability of cure</p>
</dd>
<dt>"lpmatrix"</dt>
<dd>
<p>design matrix</p>
</dd>
<dt>"lpmatrixD"</dt>
<dd>
<p>design matrix for the derivative with respect
to time</p>
</dd>
</dl>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grid</code></td>
<td>
<p>whether to merge newdata with a regular sequence of event
times (default=FALSE)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seqLength</code></td>
<td>
<p>length of the sequence used when <code>grid=TRUE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type.relsurv</code></td>
<td>
<p>type of predictions for relative survival models:
either "excess", "total" or "other"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scale</code></td>
<td>
<p>scale to go from the days in the <code>ratetable</code> object
to the analysis time used in the analysis</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rmap</code></td>
<td>
<p>an optional list that maps data set names to the ratetable
names. See <code>survexp</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ratetable</code></td>
<td>
<p>a table of event rates used in relative survival when
<code>type.relsurv</code> is "total" or "other"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>se.fit</code></td>
<td>
<p>whether to calculate confidence intervals (default=FALSE)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>link</code></td>
<td>
<p>allows a different link for the confidence interval
calculation (default=NULL, such that
switch(type,surv="cloglog",cumhaz="log",hazard="log",hr="log",sdiff="I",
hdiff="I",loghazard="I",link="I",odds="log",or="log",margsurv="cloglog",
marghaz="log",marghr="log"))</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>exposed</code></td>
<td>
<p>a function that takes newdata and returns a transformed
data-frame for those exposed or the counterfactual. By default, this increments <code>var</code> (except for cure
models, where it defaults to the last event time).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var</code></td>
<td>
<p>specify the variable name or names for the
exposed/unexposed (names are given as characters)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>keep.attributes</code></td>
<td>
<p>Boolean to determine whether the output should
include the newdata as an attribute (default=TRUE)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use.gr</code></td>
<td>
<p>Boolean to determine whether to use gradients in the
variance calculations when they are available (default=TRUE)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>level</code></td>
<td>
<p>confidence level for the confidence intervals (default=0.95)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n.gauss.quad</code></td>
<td>
<p>number of Gauassian quadrature points used for
integrations (default=100)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>full</code></td>
<td>
<p>logical for whether to return a full data-frame with
predictions and <code>newdata</code> combined. Useful for
<code>lattice</code> and <code>ggplot2</code> plots. (default=FALSE)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments (for generic compatibility)</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The confidence interval estimation is based on the delta method using
numerical differentiation.
</p>


<h3>Value</h3>

<p>A data-frame with components <code>Estimate</code>, <code>lower</code> and
<code>upper</code>, with an attribute "newdata" for the <code>newdata</code>
data-frame.  
</p>


<h3>Methods</h3>


<dl>
<dt>object= "stpm2"</dt>
<dd>
<p>an <code>stpm2</code> fit</p>
</dd>
</dl>
<h3>See Also</h3>

<p><code>stpm2</code></p>


</div>