<div class="container">

<table style="width: 100%;"><tr>
<td>case-weight-helpers</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Helpers for steps with case weights</h2>

<h3>Description</h3>

<p>These functions can be used to do basic calculations with or without case
weights.
</p>


<h3>Usage</h3>

<pre><code class="language-R">get_case_weights(info, .data, call = rlang::caller_env())

averages(x, wts = NULL, na_rm = TRUE)

medians(x, wts = NULL)

variances(x, wts = NULL, na_rm = TRUE)

correlations(x, wts = NULL, use = "everything", method = "pearson")

covariances(x, wts = NULL, use = "everything", method = "pearson")

pca_wts(x, wts = NULL)

are_weights_used(wts, unsupervised = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>info</code></td>
<td>
<p>A data frame from the <code>info</code> argument within steps</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>.data</code></td>
<td>
<p>The training data</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>call</code></td>
<td>
<p>The execution environment of a currently
running function, e.g. <code>caller_env()</code>. The function will be
mentioned in error messages as the source of the error. See the
<code>call</code> argument of <code>abort()</code> for more information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A numeric vector or a data frame</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wts</code></td>
<td>
<p>A vector of case weights</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na_rm</code></td>
<td>
<p>A logical value indicating whether <code>NA</code>
values should be removed during computations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use</code></td>
<td>
<p>Used by <code>correlations()</code> or <code>covariances()</code> to pass argument to
<code>cor()</code> or <code>cov()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>Used by <code>correlations()</code> or <code>covariances()</code> to pass argument to
<code>cor()</code> or <code>cov()</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>unsupervised</code></td>
<td>
<p>Can the step handle unsupervised weights</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>get_case_weights()</code> is designed for developers of recipe steps, to return
a column with the role of "case weight" as a vector.
</p>
<p>For the other functions, rows with missing case weights are removed from
calculations.
</p>
<p>For <code>averages()</code> and <code>variances()</code>, missing values in the data (<em>not</em> the
case weights) only affect the calculations for those rows. For
<code>correlations()</code>, the correlation matrix computation first removes rows
with any missing values (equal to the "complete.obs" strategy in
<code>stats::cor()</code>).
</p>
<p><code>are_weights_used()</code> is designed for developers of recipe steps and is used
inside print method to determine how printing should be done.
</p>


<h3>See Also</h3>

<p>developer_functions
</p>


</div>