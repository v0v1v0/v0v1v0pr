<div class="container">

<table style="width: 100%;"><tr>
<td>natural_join</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Make a natural_join node.</h2>

<h3>Description</h3>

<p>Natural join is a join by identity on all common columns specified in the <code>by</code>
argument.
Any common columns not specified in the <code>by</code> argument
are coalesced into a single column preferring the first or "a" table.
</p>


<h3>Usage</h3>

<pre><code class="language-R">natural_join(a, b, ..., by, jointype = "INNER", env = parent.frame())
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>a</code></td>
<td>
<p>source to select from.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>b</code></td>
<td>
<p>source to select from.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>force later arguments to bind by name</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>by</code></td>
<td>
<p>character, set of columns to match.  If by is a named character vector the right table will have columns renamed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>jointype</code></td>
<td>
<p>type of join ('INNER', 'LEFT', 'RIGHT', 'FULL').</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>env</code></td>
<td>
<p>environment to look to.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>natural_join node.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
if(requireNamespace("DBI", quietly = TRUE) &amp;&amp;
   requireNamespace("RSQLite", quietly = TRUE)) {
  my_db &lt;- DBI::dbConnect(RSQLite::SQLite(),
                          ":memory:")

  d1 &lt;- rq_copy_to(
    my_db, 'd1',
    build_frame(
      "key", "val", "val1" |
        "a"  , 1  ,  10    |
        "b"  , 2  ,  11    |
        "c"  , 3  ,  12    ))
  d2 &lt;- rq_copy_to(
    my_db, 'd2',
    build_frame(
      "key", "val", "val2" |
        "a"  , 5  ,  13    |
        "b"  , 6  ,  14    |
        "d"  , 7  ,  15    ))

  # key matching join
  optree &lt;- natural_join(d1, d2,
                         jointype = "LEFT", by = 'key')
  execute(my_db, optree) %.&gt;%
    print(.)

  DBI::dbDisconnect(my_db)
}

</code></pre>


</div>