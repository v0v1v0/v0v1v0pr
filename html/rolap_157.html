<div class="container">

<table style="width: 100%;"><tr>
<td>incremental_refresh</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Refresh a star database in a constellation</h2>

<h3>Description</h3>

<p>Incremental update of a star database from the star database generated with
the new data.
</p>


<h3>Usage</h3>

<pre><code class="language-R">incremental_refresh(db, sdbu, existing_instances, replace_transformations, ...)

## S3 method for class 'star_database'
incremental_refresh(
  db,
  sdbu,
  existing_instances = "ignore",
  replace_transformations = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>db</code></td>
<td>
<p>A <code>star_database</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sdbu</code></td>
<td>
<p>A <code>star_database_update</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>existing_instances</code></td>
<td>
<p>A string, operation to be carried out on the instances
of already existing facts. The possible values are: "ignore", "replace",
"group" and "delete".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>replace_transformations</code></td>
<td>
<p>A boolean, replace the <code>star_database</code>
transformation code with the <code>star_database_update</code> one.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>internal test parameters.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>There may be data in the update that already exists in the facts: it is
indicated what to do with it, replace it, group it, delete it or ignore it in
the update.
</p>
<p>If to obtain the update data we have had to perform new transformations (which
were not necessary to obtain the star database), we can indicate that these are
the new transformation operations for the star database. These operations are
not applied to the star database, they will only be applied to new periodic
updates.
</p>


<h3>Value</h3>

<p>A <code>star_database</code> object.
</p>


<h3>See Also</h3>

<p><code>star_database</code>
</p>
<p>Other star database refresh functions: 
<code>get_existing_fact_instances()</code>,
<code>get_lookup_tables()</code>,
<code>get_new_dimension_instances()</code>,
<code>get_star_database()</code>,
<code>get_star_schema()</code>,
<code>get_transformation_code()</code>,
<code>get_transformation_file()</code>,
<code>update_according_to()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
db &lt;-
  flat_table('ft_num', ft_cause_rpd[ft_cause_rpd$City != 'Cambridge' &amp;
                                      ft_cause_rpd$WEEK != '4',]) |&gt;
  as_star_database(mrs_cause_schema_rpd) |&gt;
  role_playing_dimension(rpd = "When",
                         roles = c("When Available", "When Received"))
f2 &lt;- flat_table('ft_num2', ft_cause_rpd[ft_cause_rpd$City != 'Bridgeport' &amp;
                                           ft_cause_rpd$WEEK != '2',])
f2 &lt;- f2 |&gt;
  update_according_to(db)

db &lt;- db |&gt;
  incremental_refresh(f2)

</code></pre>


</div>