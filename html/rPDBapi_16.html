<div class="container">

<table style="width: 100%;"><tr>
<td>generate_json_query</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate a JSON Query for RCSB PDB Data Retrieval</h2>

<h3>Description</h3>

<p>This function constructs a JSON query string tailored for retrieving data from the RCSB Protein Data Bank (PDB).
It is designed to accommodate a variety of data types, such as entries, polymer entities, assemblies, and chemical components.
The function is particularly useful when specific properties need to be queried across multiple PDB identifiers.
</p>


<h3>Usage</h3>

<pre><code class="language-R">generate_json_query(ids, data_type, properties)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>ids</code></td>
<td>
<p>A character vector of identifiers corresponding to the data you wish to retrieve. These identifiers should
match the type of data specified in the ‘data_type' argument. For example, if 'data_type' is ’ENTRY', the identifiers
should be PDB entry IDs like "1XYZ" or "2XYZ".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data_type</code></td>
<td>
<p>A string indicating the type of data to query. The function supports the following types:
</p>

<dl>
<dt>"ENTRY"</dt>
<dd>
<p>Refers to the entire PDB entry, typically associated with the full structural dataset.</p>
</dd>
<dt>"POLYMER_ENTITY"</dt>
<dd>
<p>Represents specific polymer entities, such as proteins or nucleic acids, within an entry.</p>
</dd>
<dt>"BRANCHED_ENTITY"</dt>
<dd>
<p>Refers to branched entities, often used to describe glycans or other complex molecules.</p>
</dd>
<dt>"NONPOLYMER_ENTITY"</dt>
<dd>
<p>Describes non-polymeric entities, such as ligands or cofactors.</p>
</dd>
<dt>"POLYMER_ENTITY_INSTANCE"</dt>
<dd>
<p>Specific instances of polymer entities, usually chains within a structure.</p>
</dd>
<dt>"BRANCHED_ENTITY_INSTANCE"</dt>
<dd>
<p>Instances of branched entities within a structure.</p>
</dd>
<dt>"NONPOLYMER_ENTITY_INSTANCE"</dt>
<dd>
<p>Instances of non-polymeric entities within a structure.</p>
</dd>
<dt>"ASSEMBLY"</dt>
<dd>
<p>Refers to macromolecular assemblies, which can include multiple chains and entities.</p>
</dd>
<dt>"CHEMICAL_COMPONENT"</dt>
<dd>
<p>Specific chemical components, often small molecules or ligands, within the PDB.</p>
</dd>
</dl>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>properties</code></td>
<td>
<p>A named list where each element represents a property to be included in the query for the corresponding
'data_type'. Each element of the list should be a character vector containing the specific properties you wish to retrieve.
For example, for 'data_type = "ENTRY"', properties might include 'cell = c("volume", "angle_beta")' to retrieve cell volume
and angle beta of the unit cell.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The function is designed to be flexible and extensible, allowing users to construct complex queries with multiple properties
and data types. The function internally maps the 'data_type' to the appropriate query format and ensures that the JSON string
is properly constructed. The 'properties' argument should align with the data type; otherwise, the query might not return
the desired results.
</p>
<p>The 'generate_json_query' function is particularly useful for researchers and bioinformaticians who need to retrieve specific
datasets from the PDB, especially when dealing with large-scale structural biology data. The generated JSON query can be used
in subsequent API calls to fetch the required data in a structured and efficient manner.
</p>


<h3>Value</h3>

<p>A string representing the generated JSON query. This string is formatted according to the requirements of the RCSB PDB API
and can be used directly in a GraphQL query to retrieve the specified data.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Example 1: Generate a query for PDB entries with specific properties
ids &lt;- c("1XYZ", "2XYZ")
properties &lt;- list(cell = c("volume", "angle_beta"), exptl = c("method"))
json_query &lt;- generate_json_query(ids, "ENTRY", properties)
print(json_query)

# Example 2: Generate a query for chemical components with specified properties
ids &lt;- c("ATP", "NAD")
properties &lt;- list(chem_comp = c("formula_weight", "type"))
json_query &lt;- generate_json_query(ids, "CHEMICAL_COMPONENT", properties)
print(json_query)

# Example 3: Generate a query for polymer entities within a PDB entry
ids &lt;- c("1XYZ_1", "2XYZ_2")
properties &lt;- list(entity_src_gen = c("organism_scientific", "gene_src_common"))
json_query &lt;- generate_json_query(ids, "POLYMER_ENTITY", properties)
print(json_query)

</code></pre>


</div>