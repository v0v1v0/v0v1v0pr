<div class="container">

<table style="width: 100%;"><tr>
<td>sim_prevalence</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Estimate prevalence using Monte Carlo simulation.</h2>

<h3>Description</h3>

<p>Estimates prevalent cases at a specific index date by use of Monte Carlo
simulation. Simulated cases are marked with age and sex to enable agreement
with population survival data where a cure model is used, and calculation of
the posterior distributions of each.
</p>


<h3>Usage</h3>

<pre><code class="language-R">sim_prevalence(
  data,
  index,
  starting_date,
  inc_model,
  surv_model,
  age_column = "age",
  N_boot = 1000,
  age_dead = 100
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>A data frame with the corresponding column names provided in
<code>form</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>index</code></td>
<td>
<p>The date at which to estimate point prevalence as a string in the format
YYYY-MM-DD.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>starting_date</code></td>
<td>
<p>The initial date to start simulating prevalence from as a <code>Date</code> object.
Typically the index date - (Nyears * 365.25). Allows for non-whole year prevalence estimations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>inc_model</code></td>
<td>
<p>An object that has a <code>draw_incident_population</code>
method. See the vignette for further guidance.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>surv_model</code></td>
<td>
<p>An object that has a <code>predict_survival_probability</code>
method. See the vignette for further guidance.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>age_column</code></td>
<td>
<p>A string providing the name of the column that holds patient age. If provided
then patients alive at <code>age_dead</code> are set to die. This helps combat 'immortal' patients.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>N_boot</code></td>
<td>
<p>Number of bootstrapped calculations to perform.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>age_dead</code></td>
<td>
<p>The age at which patients are set to be dead if they are still alive, to prevent
'immortal' patients. Used in conjunction with <code>age_column</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A list with the following attributes:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>results</code></td>
<td>
<p>A data.table containing the simulated incident populations from each
simulation along with their covariates and survival status at the index.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>full_surv_model</code></td>
<td>
<p>The survival model built on the full registry data set.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>full_inc_model</code></td>
<td>
<p>The incidence model built on the full registry data set.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>surv_models</code></td>
<td>
<p>A list containing survival models built on each bootstrap sample.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>inc_models</code></td>
<td>
<p>A list containing incidence models built on each bootstrap sample.</p>
</td>
</tr>
</table>
</div>