<div class="container">

<table style="width: 100%;"><tr>
<td>rhubv2</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>R-hub v2</h2>

<h3>Description</h3>

<p>Start here to learn about R-hub v2, especially if you
used the previous version of R-hub before.
</p>


<h3>R-hub v2</h3>



<h4>Introduction</h4>

<p>R-hub v2, i.e. version 2 or later of the rhub package is a completely
new check system. In this acticle we highlight the differences between
the old and the new system.
</p>
<p>There are two ways to use R-hub v2. The recommended way is to store your
R package in a GitHub repository and use the <code style="white-space: pre;">⁠rhub_*()⁠</code> functions to
start checks on GitHub Actions, using your own GitHub account.
</p>
<p>Alternatively, if you don't want to store your R package at GitHub, you
can use the <code style="white-space: pre;">⁠rc_*()⁠</code> functions to run checks in a shared GitHub
organization at https://github.com/r-hub2, using the R Consortium runners.
See more about the R Consortium runners below.
</p>



<h4>Transitioning from R-hub v1</h4>



<h5>Requirements for using R-hub v2</h5>


<ul>
<li>
<p> First, you need a GitHub account.
</p>
</li>
<li>
<p> Second, you need to have your R package in a GitHub repository.
In your local git clone make sure that the <code>origin</code> git remote is set
to the GitHub repository.
</p>
</li>
<li>
<p> Third, you need a GitHub <a href="https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token">Personal Access Token</a>
and you need to store it in the git credential store on your machine.
You can use <code>gitcreds::gitcreds_set()</code> to add the token to the git
credential store.
</p>
</li>
</ul>
<p>Call <code>rhub_setup()</code> from the local git clone to set up R-hub v2 for your
package. This adds a GitHub Actions workflow to your local repository.
Push this change to GitHub, into your default git branch and then you
are ready to call start checks with <code>rhub_check()</code>.
</p>



<h5>Differences from R-hub v1</h5>


<ul>
<li>
<p> The check picks up the package from GitHub, so it does not use
changes in your local git clone. You need to push the changes to
GitHub first. You can use a non-default branch, with the <code>branch</code>
argument of <code>rhub_check()</code>.
</p>
</li>
<li>
<p> You'll not get an email about the check results. But you'll receive
regular GitHub notifications about check failures, unless you opt out.
Github can also turn these into emails if you like.
</p>
</li>
<li>
<p> There is no live output from the check at the R console. See the
'Actions' tab of your repository on GitHub for a live check log.
</p>
</li>
<li>
<p> Many more specialized platforms are available.
</p>
</li>
<li>
<p> Most platforms use binary packages, so checks and in particular
installing dependencies is much faster.
</p>
</li>
</ul>
<h5>Private repositories</h5>

<p>GitHub Actions is free for public repositories.
For private repositories you also get some minutes for free, depending on
the GitHub subscription you have. See
<a href="https://docs.github.com/en/billing/managing-billing-for-github-actions/about-billing-for-github-actions">About billing for GitHub Actions</a>
for details.
</p>



<h5>Branches</h5>

<p>You can run checks on any branch that you push to GitHub, but you'll need
to add the R-hub workflow file (<code>.github/workflows/rhub.yaml</code> within
your repo) must be present in <strong>both</strong> the default branch (usually <code>main</code>)
and also in the branch you want to run the check on.
</p>




<h4>The R Consortium runners</h4>

<p>If you don't want to put your package on GitHub, you can still use the
rhub package to run package checks on any supported platform using a
shared pool of runners in the https://github.com/r-hub2 GitHub
organization.
</p>
<p>The process is similar to the first version of R-hub:
</p>

<ul>
<li>
<p> Set your working directory to the R package you want to check.
</p>
</li>
<li>
<p> Obtain a token from R-hub, to verify your email address:
</p>
<div class="sourceCode"><pre>rc_new_token()
</pre></div>
<p>(You do not need to do this, if you already submitted packages to a
previous version of R-hub from the same machine, using the same email
address. Call <code>rc_list_local_tokens()</code> to check if you already have
tokens.)
</p>
</li>
<li>
<p> Submit a build with
</p>
<div class="sourceCode"><pre>rc_submit()
</pre></div>
</li>
<li>
<p> Select the platforms you want to use, and follow the instructions and
the link provided to see your check results.
</p>
</li>
</ul>
<h5>Limitations of the R Consortium runners</h5>


<ul>
<li>
<p> You package will be public for the world, and will be stored in the
https://github.com/r-hub2 organization. Your check output and results
will be public for anyone with a GitHub account. If you want to keep
your package private, you can put it in a private GitHub repository,
and use the <code>rhub_setup()</code> and <code>rhub_check()</code> functions instead.
</p>
</li>
<li>
<p> The R Consortium runners are shared among all users, so you might need
to wait for your builds to start.
</p>
</li>
<li>
<p> You have to wait at least five minutes between submissions with
<code>rc_submit()</code>.
</p>
</li>
<li>
<p> Currently you need to create a GitHub account to see the check logs of
your package. You don't need a GitHub account to submit the checks.
</p>
</li>
</ul>
<p>To avoid these limitations (except for the neeed for a GitHub accounr),
put your package in a GitHub repository, and use the <code>rhub_setup()</code> and
<code>rhub_check()</code> functions instead of <code>rc_submit()</code> and the R Consortium
runners.
</p>




</div>