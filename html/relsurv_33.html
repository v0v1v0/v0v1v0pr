<div class="container">

<table style="width: 100%;"><tr>
<td>years</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compute one of the life years measures</h2>

<h3>Description</h3>

<p>Provides an estimate for one of the following measures: years lost (Andersen, 2013), years lost/saved (Andersen, 2017), or
life years difference (Manevski, Ruzic Gorenjec, Andersen, Pohar Perme, 2022).
</p>


<h3>Usage</h3>

<pre><code class="language-R">years(
  formula = formula(data),
  data,
  measure = c("yd", "yl2017", "yl2013"),
  ratetable = relsurv::slopop,
  rmap,
  var.estimator = c("none", "bootstrap", "greenwood"),
  B = 100,
  precision = 30,
  add.times,
  na.action = stats::na.omit,
  conf.int = 0.95,
  timefix = FALSE,
  is.boot = FALSE,
  first.boot = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>a formula object, with the response as a <code>Surv</code> object
on the left of a <code>~</code> operator, and, <code>~1</code> specified on the right.
</p>
<p>NOTE: The follow-up time must be in days.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>a data.frame in which to interpret the variables named in the
<code>formula</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>measure</code></td>
<td>
<p>choose which measure is used: 'yd' (life years difference; Manevski, Ruzic Gorenjec, Andersen, Pohar Perme, 2022), 'yl2017' (years lost/saved; Andersen 2017),
'yl2013' (years lost/saved; Andersen 2013).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ratetable</code></td>
<td>
<p>a table of event rates, organized as a <code>ratetable</code>
object, such as <code>slopop</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rmap</code></td>
<td>
<p>an optional list to be used if the variables are not organized
and named in the same way as in the <code>ratetable</code> object. See details
below.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var.estimator</code></td>
<td>
<p>Choose the estimator for the variance ('none', 'bootstrap', 'greenwood'). Default is 'none'.
The 'greenwood' option is possible only for <code>measure='yd'</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>B</code></td>
<td>
<p>if <code>var.estimator</code> is 'bootstrap'. The number of bootstrap replications. Default is 100.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>precision</code></td>
<td>
<p>precision for numerical integration of the population curve. Default is 30 (days).
The value may be decreased to get a
higher precision or increased to achieve a faster calculation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add.times</code></td>
<td>
<p>specific times at which the curves should be reported.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.action</code></td>
<td>
<p>a missing-data filter function. Default is <code>na.omit</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf.int</code></td>
<td>
<p>the confidence level for a two-sided confidence interval. Default is 0.95.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>timefix</code></td>
<td>
<p>the timefix argument in survival::survfit.formula. Default is FALSE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>is.boot</code></td>
<td>
<p>if TRUE, the function <code>years</code> has been called during a bootstrap replication.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>first.boot</code></td>
<td>
<p>if TRUE, this is the first bootstrap replication.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The life years difference (<code>measure='yd'</code>) is taken by default. If other
measures are of interest, use the <code>measure</code> argument.
</p>
<p>The follow-up time must be specified in days. The <code>ratetable</code>
being used may have different variable names and formats than the user's
data set, this is dealt with the <code>rmap</code> argument. For example, if
age is in years in the data but in days in the <code>ratetable</code> object,
age=age*365.241 should be used. The calendar year can be in any date format
(date, Date and POSIXt are allowed), the date formats in the
<code>ratetable</code> and in the data may differ.
</p>
<p>Numerical integration is performed, argument
precision is set with argument <code>precision</code>, which defaults to 30-day
intervals for intergration. For higher accuracy take a smaller value (e.g. precision=1 makes
the integration on a daily basis).
</p>
<p>The observed curves are reported at event and censoring times. The
population curves are reported at all times used for the numerical integration.
Note that for the years lost (Andersen, 2013) measure, only the excess absolute risk is reported.
</p>


<h3>Value</h3>

<p>A list containing the years measure, the observed and population curves (or the excess curve for Andersen 2013).
The values are given as separate data.frames through time. Times are given in days, all areas are given in years.
For <code>measure='yl2017'</code> values are reported only at the last time point.
Functions <code>plot_f</code> and <code>plot_years</code> can be then used for plotting.
</p>


<h3>See Also</h3>

<p><code>plot_f</code>, <code>plot_years</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(relsurv)
# Estimate the life years difference for the rdata dataset.
mod &lt;- years(Surv(time, cens)~1, data=rdata, measure='yd', ratetable=slopop,
             rmap=list(age=age*365.241), var.estimator = 'none')
# Plot the absolute risk (observed and population curve):
plot_f(mod)
# Plot the life years difference estimate:
plot_years(mod, conf.int=FALSE)
</code></pre>


</div>