<div class="container">

<table style="width: 100%;"><tr>
<td>prctilemlx</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Percentiles of the empiricial distribution of longitudinal data</h2>

<h3>Description</h3>

<p>Compute and display percentiles of the empiricial distribution of longitudinal data.
</p>


<h3>Usage</h3>

<pre><code class="language-R">prctilemlx(
  r = NULL,
  col = NULL,
  project = NULL,
  outputVariableName = NULL,
  number = 8,
  level = 80,
  plot = TRUE,
  color = NULL,
  group = NULL,
  facet = TRUE,
  labels = NULL,
  band = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>r</code></td>
<td>
<p>a data frame with a column ‘<span class="samp">⁠id⁠</span>’, a column ‘<span class="samp">⁠time⁠</span>’ and a column with values.
The times should be the same for each individual.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col</code></td>
<td>
<p>a vector with the three column indexes for ‘<span class="samp">⁠id⁠</span>’, ‘<span class="samp">⁠time/x⁠</span>’ and ‘<span class="samp">⁠y⁠</span>’. Default = c(1, 2,3).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>project</code></td>
<td>
<p>simulx project filename (with extension ".smlx")</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outputVariableName</code></td>
<td>
<p>name of the output to consider. By default the first output will be consider.
You must define either a 'r' dataframe and the associated 'col' argument or a simulx project and the name of the output 'outputVariableName"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>number</code></td>
<td>
<p>the number of intervals (i.e. the number of percentiles minus 1).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>level</code></td>
<td>
<p>the largest interval (i.e. the difference between the lowest and the highest percentile).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot</code></td>
<td>
<p>if <code>TRUE</code> the empirical distribution is displayed, if <code>FALSE</code>
the values are returned</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>color</code></td>
<td>
<p>colors to be used for the plots
In case of one group or facet = TRUE, only the first color will be used</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group</code></td>
<td>
<p>variable to be used for defining groups (by default, ‘<span class="samp">⁠group⁠</span>’ is used when it exists)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>facet</code></td>
<td>
<p>makes subplots for different groups if <code>TRUE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>labels</code></td>
<td>
<p>vector of strings</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>band</code></td>
<td>
<p>is deprecated (use number and level instead) ; a list with two fields
</p>

<ul>
<li> <p><code>number</code> the number of intervals (i.e. the number of percentiles minus 1).
</p>
</li>
<li> <p><code>level</code> the largest interval (i.e. the difference between the lowest and the highest percentile).
</p>
</li>
</ul>
</td>
</tr>
</table>
<h3>Details</h3>

<p>See http://simulx.webpopix.org/mlxr/prctilemlx/ for more details.
</p>


<h3>Value</h3>

<p>a ggplot object if <code>plot=TRUE</code> ; otherwise, a list with fields:
</p>

<ul>
<li>
<p> proba a vector of probabilities of length <code>band$number+1</code>
</p>
</li>
<li>
<p> color a vector of colors used for the plot of length <code>band$number</code>
</p>
</li>
<li>
<p> y a data frame with the values of the empirical percentiles computed at each time point
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
  myModel &lt;- inlineModel("
  [LONGITUDINAL]
  input = {ka, V, Cl}
  EQUATION:
  C = pkmodel(ka,V,Cl)
  
  [INDIVIDUAL]
  input = {ka_pop, V_pop, Cl_pop, omega_ka, omega_V, omega_Cl}
  DEFINITION:
  ka = {distribution=lognormal, reference=ka_pop, sd=omega_ka}
  V  = {distribution=lognormal, reference=V_pop,  sd=omega_V }
  Cl = {distribution=lognormal, reference=Cl_pop, sd=omega_Cl}
  ")
  
  N=2000
  
  pop.param   &lt;- c(
    ka_pop  = 1,    omega_ka  = 0.5,
    V_pop   = 10,   omega_V   = 0.4,
    Cl_pop  = 1,    omega_Cl  = 0.3)
    
  res &lt;- simulx(model     = myModel,
                parameter = pop.param,
                treatment = list(time=0, amount=100),
                group     = list(size=N, level='individual'),
                output    = list(name='C', time=seq(0,24,by=0.1)))
  # res$C is a data.frame with 2000x241=482000 rows and 3 columns
  head(res$C)
  # we can display the empirical percentiles of C using the default 
  # settings (i.e. percentiles of order 10%, 20%, ... 90%)
  prctilemlx(res$C)
  # The 3 quartiles (i.e. percentiles of order 25%, 50% and 75%) are displayed by 
  # selecting a 50% interval splitted into 2 subintervals
  prctilemlx(res$C, number=2, level=50)
  # A one 90% interval can be displayed using only one interval
  prctilemlx(res$C, number=1, level=90)
  # or 75 subintervals in order to better represent the continuous distribution 
  # of the data within this interval
  prctilemlx(res$C, number=75, level=90)
  # prctilemlx produces a ggplot object that can be modified
  pl &lt;- prctilemlx(res$C, number=4, level=80) 
  pl + ylab("concentration") + ggtitle("predictive distribution")
  # The percentiles are not plotted by setting plot=FALSE
  pr.out &lt;- prctilemlx(res$C, number=4, level=80, plot=FALSE)
  print(pr.out$proba)
  print(pr.out$color)
  print(pr.out$y[1:5,])

## End(Not run)
</code></pre>


</div>