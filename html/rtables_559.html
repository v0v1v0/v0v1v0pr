<div class="container">

<table style="width: 100%;"><tr>
<td>split_cols_by_multivar</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Associate multiple variables with columns</h2>

<h3>Description</h3>

<p>In some cases, the variable to be ultimately analyzed is most naturally defined on a column, not a row, basis.
When we need columns to reflect different variables entirely, rather than different levels of a single
variable, we use <code>split_cols_by_multivar</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">split_cols_by_multivar(
  lyt,
  vars,
  split_fun = NULL,
  varlabels = vars,
  varnames = NULL,
  nested = TRUE,
  extra_args = list(),
  show_colcounts = FALSE,
  colcount_format = NULL
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>lyt</code></td>
<td>
<p>(<code>PreDataTableLayouts</code>)<br> layout object pre-data used for tabulation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vars</code></td>
<td>
<p>(<code>character</code>)<br> vector of variable names.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>split_fun</code></td>
<td>
<p>(<code>function</code> or <code>NULL</code>)<br> custom splitting function. See custom_split_funs.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>varlabels</code></td>
<td>
<p>(<code>character</code>)<br> vector of labels for <code>vars</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>varnames</code></td>
<td>
<p>(<code>character</code>)<br> vector of names for <code>vars</code> which will appear in pathing. When <code>vars</code> are all
unique this will be the variable names. If not, these will be variable names with suffixes as necessary to enforce
uniqueness.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nested</code></td>
<td>
<p>(<code>logical</code>)<br> whether this layout instruction should be applied within the existing layout structure
<em>if possible</em> (<code>TRUE</code>, the default) or as a new top-level element (<code>FALSE</code>). Ignored if it would nest a split
underneath analyses, which is not allowed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>extra_args</code></td>
<td>
<p>(<code>list</code>)<br> extra arguments to be passed to the tabulation function. Element position in the list
corresponds to the children of this split. Named elements in the child-specific lists are ignored if they do
not match a formal argument of the tabulation function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>show_colcounts</code></td>
<td>
<p>(<code>logical(1)</code>)<br> should column counts be displayed at the level
facets created by this split. Defaults to <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>colcount_format</code></td>
<td>
<p>(<code>character(1)</code>)<br> if <code>show_colcounts</code> is <code>TRUE</code>, the
format which should be used to display column counts for facets generated by
this split. Defaults to <code>"(N=xx)"</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A <code>PreDataTableLayouts</code> object suitable for passing to further layouting functions, and to <code>build_table()</code>.
</p>


<h3>Author(s)</h3>

<p>Gabriel Becker
</p>


<h3>See Also</h3>

<p><code>analyze_colvars()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(dplyr)

ANL &lt;- DM %&gt;% mutate(value = rnorm(n()), pctdiff = runif(n()))

## toy example where we take the mean of the first variable and the
## count of &gt;.5 for the second.
colfuns &lt;- list(
  function(x) in_rows(mean = mean(x), .formats = "xx.x"),
  function(x) in_rows("# x &gt; 5" = sum(x &gt; .5), .formats = "xx")
)

lyt &lt;- basic_table() %&gt;%
  split_cols_by("ARM") %&gt;%
  split_cols_by_multivar(c("value", "pctdiff")) %&gt;%
  split_rows_by("RACE",
    split_label = "ethnicity",
    split_fun = drop_split_levels
  ) %&gt;%
  summarize_row_groups() %&gt;%
  analyze_colvars(afun = colfuns)
lyt

tbl &lt;- build_table(lyt, ANL)
tbl

</code></pre>


</div>