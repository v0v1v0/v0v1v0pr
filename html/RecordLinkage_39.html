<div class="container">

<table style="width: 100%;"><tr>
<td>emWeights</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculate weights</h2>

<h3>Description</h3>

<p>Calculates weights for Record Linkage based on an EM algorithm.
</p>


<h3>Usage</h3>

<pre><code class="language-R">  emWeights(rpairs, cutoff = 0.95, ...)

  ## S4 method for signature 'RecLinkData'
emWeights(rpairs, cutoff = 0.95, ...)

  ## S4 method for signature 'RLBigData'
emWeights(rpairs, cutoff = 0.95,
    verbose = TRUE, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>rpairs</code></td>
<td>
<p>The record pairs for which to
compute weights. See details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cutoff</code></td>
<td>
<p>Either a numeric value in the range [0,1] or a vector with the same 
length as the number of attributes in the data. Cutoff value for string comparator.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Logical. Whether to print progress messages.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional arguments passed to <code>mygllm</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Since package version 0.3, this is a generic functions with methods for
S3 objects of class <code>RecLinkData</code> as well as S4 objects
of classes <code>"RLBigDataDedup"</code> and
<code>"RLBigDataLinkage"</code>.
</p>
<p>The weight of a record pair is calculated by <code class="reqn">\log_{2}\frac{M}{U}</code>, where <code class="reqn">M</code> and <code class="reqn">U</code> are estimated m- and u-probabilities
for the present comparison pattern. If a string comparator is used, weights
are first calculated based on a binary table where all comparison 
values greater or equal <code>cutoff</code> are set to one, all other to zero.
The resulting weight is adjusted by adding for every pair
<code class="reqn">\log_{2}\left(\prod_{j:s^{i}_{j}\geq \textit{cutoff }}s^{i}_{j}\right)</code>, where
<code class="reqn">s^{i}_{j}</code> is the value of the string metric for attribute j in 
data pair i.
</p>
<p>The appropriate value of <code>cutoff</code> depends on the choice of string
comparator. The default is adjusted to <code>jarowinkler</code>,
a lower value (e.g. 0.7) is recommended for <code>levenshteinSim</code>.
</p>
<p>Estimation of <code class="reqn">M</code> and <code class="reqn">U</code> is done by an EM algorithm, implemented by
<code>mygllm</code>. For every comparison
pattern, the estimated numbers of matches and non-matches are used to compute
the corresponding probabilities. Estimations based on the average 
frequencies of values and given error rates are taken as initial values.
In our experience, this increases stability and performance of the
EM algorithm.
</p>
<p>Some progress messages are printed to the message stream (see
<code>message</code> if <code>verbose == TRUE</code>.
This includes progress bars, but these are suppressed if output is diverted by
<code>sink</code> to avoid cluttering the output file.
</p>


<h3>Value</h3>

<p>A copy of <code>rpairs</code> with the weights attached. See the class documentation
(<code>RecLinkData</code>, <code>"RLBigDataDedup"</code> and
<code>"RLBigDataLinkage"</code>) on how weights are stored.
</p>


<h3>Side effects</h3>

<p>The <code>"RLBigData"</code> method writes to a disk file containing
a <code>ffvector</code> that contains the calculated weights.
belonging to <code>object</code>
</p>


<h3>Author(s)</h3>

<p>Andreas Borg, Murat Sariyar</p>


<h3>References</h3>

<p>William E. Winkler: Using the EM Algorithm for Weight Computation
in the Fellegi-Sunter Model of Record Linkage, in: Proceedings of the Section 
on Survey Research Methods, American Statistical Association 1988, 
pp. 667â€“671.</p>


<h3>See Also</h3>

<p><code>emClassify</code> for classification of weighted pairs.
<code>epiWeights</code> for a different approach for weight calculation.
</p>


</div>