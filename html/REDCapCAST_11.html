<div class="container">

<table style="width: 100%;"><tr>
<td>ds2dd_detailed</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Extract data from stata file for data dictionary</h2>

<h3>Description</h3>

<p>Extract data from stata file for data dictionary
</p>


<h3>Usage</h3>

<pre><code class="language-R">ds2dd_detailed(
  data,
  add.auto.id = FALSE,
  date.format = "dmy",
  form.name = NULL,
  form.sep = NULL,
  form.prefix = TRUE,
  field.type = NULL,
  field.label = NULL,
  field.label.attr = "label",
  field.validation = NULL,
  metadata = names(REDCapCAST::redcapcast_meta),
  validate.time = FALSE,
  time.var.sel.pos = "[Tt]i[d(me)]",
  time.var.sel.neg = "[Dd]at[eo]"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>data frame</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>add.auto.id</code></td>
<td>
<p>flag to add id column</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>date.format</code></td>
<td>
<p>date format, character string. ymd/dmy/mdy. dafault is
dmy.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>form.name</code></td>
<td>
<p>manually specify form name(s). Vector of length 1 or
ncol(data). Default is NULL and "data" is used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>form.sep</code></td>
<td>
<p>If supplied dataset has form names as suffix or prefix to the
column/variable names, the seperator can be specified. If supplied, the
form.sep is ignored. Default is NULL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>form.prefix</code></td>
<td>
<p>Flag to set if form is prefix (TRUE) or suffix (FALSE) to
the column names. Assumes all columns have pre- or suffix if specified.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>field.type</code></td>
<td>
<p>manually specify field type(s). Vector of length 1 or
ncol(data). Default is NULL and "text" is used for everything but factors,
which wil get "radio".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>field.label</code></td>
<td>
<p>manually specify field label(s). Vector of length 1 or
ncol(data). Default is NULL and colnames(data) is used or attribute
'field.label.attr' for haven_labelled data set (imported .dta file with
'haven::read_dta()').</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>field.label.attr</code></td>
<td>
<p>attribute name for named labels for haven_labelled
data set (imported .dta file with 'haven::read_dta()'. Default is "label"</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>field.validation</code></td>
<td>
<p>manually specify field validation(s). Vector of
length 1 or ncol(data). Default is NULL and 'levels()' are used for factors
or attribute 'factor.labels.attr' for haven_labelled data set (imported .dta
file with 'haven::read_dta()').</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>metadata</code></td>
<td>
<p>redcap metadata headings. Default is
REDCapCAST:::metadata_names.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>validate.time</code></td>
<td>
<p>Flag to validate guessed time columns</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time.var.sel.pos</code></td>
<td>
<p>Positive selection regex string passed to
'gues_time_only_filter()' as sel.pos.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time.var.sel.neg</code></td>
<td>
<p>Negative selection regex string passed to
'gues_time_only_filter()' as sel.neg.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function is a natural development of the ds2dd() function. It assumes
that the first column is the ID-column. No checks.
Please, do always inspect the data dictionary before upload.
</p>
<p>Ensure, that the data set is formatted with as much information as possible.
</p>
<p>'field.type' can be supplied
</p>


<h3>Value</h3>

<p>list of length 2
</p>


<h3>Examples</h3>

<pre><code class="language-R">data &lt;- REDCapCAST::redcapcast_data
data |&gt; ds2dd_detailed(validate.time = TRUE)
data |&gt; ds2dd_detailed()
iris |&gt; ds2dd_detailed(add.auto.id = TRUE)
mtcars |&gt; ds2dd_detailed(add.auto.id = TRUE)
data &lt;- iris |&gt;
  ds2dd_detailed(add.auto.id = TRUE) |&gt;
  purrr::pluck("data")
names(data) &lt;- glue::glue("{sample(x = c('a','b'),size = length(names(data)),
replace=TRUE,prob = rep(x=.5,2))}__{names(data)}")
data |&gt; ds2dd_detailed(form.sep="__")
</code></pre>


</div>