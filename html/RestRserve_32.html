<div class="container">

<table style="width: 100%;"><tr>
<td>Request</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Creates Request object</h2>

<h3>Description</h3>

<p>Called internally for handling incoming requests from Rserve side.
Also useful for testing.
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>path</code></dt>
<dd>
<p>Request path.</p>
</dd>
<dt><code>method</code></dt>
<dd>
<p>Request HTTP method.</p>
</dd>
<dt><code>headers</code></dt>
<dd>
<p>Request headers.</p>
</dd>
<dt><code>cookies</code></dt>
<dd>
<p>Request cookies.</p>
</dd>
<dt><code>context</code></dt>
<dd>
<p>Environment to store any data. Can be used in middlewares.</p>
</dd>
<dt><code>content_type</code></dt>
<dd>
<p>Request body content type.</p>
</dd>
<dt><code>body</code></dt>
<dd>
<p>Request body.</p>
</dd>
<dt><code>parameters_query</code></dt>
<dd>
<p>Request query parameters.</p>
</dd>
<dt><code>parameters_body</code></dt>
<dd>
<p>Request body parameters.</p>
</dd>
<dt><code>parameters_path</code></dt>
<dd>
<p>List of parameters extracted from templated path
after routing. For example if we have some handler listening at
<code style="white-space: pre;">⁠/job/{job_id}⁠</code> and we are receiving request at <code style="white-space: pre;">⁠/job/1⁠</code> then
<code>parameters_path</code> will be <code>list(job_id = "1")</code>.<br>
It is important to understand that <code>parameters_path</code> will be available
(not empty) only after request will reach handler.<br>
This effectively means that <code>parameters_path</code> can be used inside handler
and response middleware (but not request middleware!).</p>
</dd>
<dt><code>files</code></dt>
<dd>
<p>Structure which contains positions and lengths of files for
the multipart body.</p>
</dd>
<dt><code>decode</code></dt>
<dd>
<p>Function to decode body for the specific content type.</p>
</dd>
</dl>
</div>


<h3>Active bindings</h3>

<div class="r6-active-bindings">

<dl>
<dt><code>id</code></dt>
<dd>
<p>Automatically generated UUID for each request. Read only.</p>
</dd>
<dt><code>date</code></dt>
<dd>
<p>Request <code>Date</code> header converted to <code>POSIXct</code>.</p>
</dd>
<dt><code>accept</code></dt>
<dd>
<p>Splitted <code>Accept</code> request header.</p>
</dd>
<dt><code>accept_json</code></dt>
<dd>
<p>Request accepts JSON response.</p>
</dd>
<dt><code>accept_xml</code></dt>
<dd>
<p>Request accepts XML response.</p>
</dd>
</dl>
</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-Request-new"><code>Request$new()</code></a>
</p>
</li>
<li> <p><a href="#method-Request-set_id"><code>Request$set_id()</code></a>
</p>
</li>
<li> <p><a href="#method-Request-reset"><code>Request$reset()</code></a>
</p>
</li>
<li> <p><a href="#method-Request-get_header"><code>Request$get_header()</code></a>
</p>
</li>
<li> <p><a href="#method-Request-get_param_query"><code>Request$get_param_query()</code></a>
</p>
</li>
<li> <p><a href="#method-Request-get_param_body"><code>Request$get_param_body()</code></a>
</p>
</li>
<li> <p><a href="#method-Request-get_param_path"><code>Request$get_param_path()</code></a>
</p>
</li>
<li> <p><a href="#method-Request-get_file"><code>Request$get_file()</code></a>
</p>
</li>
<li> <p><a href="#method-Request-print"><code>Request$print()</code></a>
</p>
</li>
<li> <p><a href="#method-Request-clone"><code>Request$clone()</code></a>
</p>
</li>
</ul>
<hr>
<a id="method-Request-new"></a>



<h4>Method <code>new()</code>
</h4>

<p>Creates Request object
</p>


<h5>Usage</h5>

<div class="r"><pre>Request$new(
  path = "/",
  method = c("GET", "HEAD", "POST", "PUT", "DELETE", "CONNECT", "OPTIONS", "TRACE",
    "PATCH"),
  parameters_query = list(),
  parameters_body = list(),
  headers = list(),
  body = NULL,
  cookies = list(),
  content_type = NULL,
  decode = NULL,
  ...
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>path</code></dt>
<dd>
<p>Character with requested path. Always starts with <code>/</code>.</p>
</dd>
<dt><code>method</code></dt>
<dd>
<p>Request HTTP method.</p>
</dd>
<dt><code>parameters_query</code></dt>
<dd>
<p>A named list with URL decoded query parameters.</p>
</dd>
<dt><code>parameters_body</code></dt>
<dd>
<p>A named list with URL decoded body parameters.
This field is helpful when request is a urlencoded form or a multipart form.</p>
</dd>
<dt><code>headers</code></dt>
<dd>
<p>Request HTTP headers represented as named list.</p>
</dd>
<dt><code>body</code></dt>
<dd>
<p>Request body. Can be anything and in conjunction with
<code>content_type</code> defines how HTTP body will be represented.</p>
</dd>
<dt><code>cookies</code></dt>
<dd>
<p>Cookies represented as named list. <strong>Note</strong> that cookies
should be provided explicitly - they won't be derived from <code>headers</code>.</p>
</dd>
<dt><code>content_type</code></dt>
<dd>
<p>HTTP content type. <strong>Note</strong> that <code>content_type</code>
should be provided explicitly - it won't be derived from <code>headers</code>.</p>
</dd>
<dt><code>decode</code></dt>
<dd>
<p>Function to decode body for the specific content type.</p>
</dd>
<dt><code>...</code></dt>
<dd>
<p>Not used at this moment.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-Request-set_id"></a>



<h4>Method <code>set_id()</code>
</h4>

<p>Set request id.
</p>


<h5>Usage</h5>

<div class="r"><pre>Request$set_id(id = uuid::UUIDgenerate(TRUE))</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>id</code></dt>
<dd>
<p>Request id.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-Request-reset"></a>



<h4>Method <code>reset()</code>
</h4>

<p>Resets request object. This is not useful for end user, but useful for
RestRserve internals - resetting R6 class is much faster then initialize it.
</p>


<h5>Usage</h5>

<div class="r"><pre>Request$reset()</pre></div>


<hr>
<a id="method-Request-get_header"></a>



<h4>Method <code>get_header()</code>
</h4>

<p>Get HTTP response header value. If requested header is empty returns <code>default</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>Request$get_header(name, default = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>name</code></dt>
<dd>
<p>Header field name.</p>
</dd>
<dt><code>default</code></dt>
<dd>
<p>Default value if header does not exists.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>Header field values (character string).
</p>


<hr>
<a id="method-Request-get_param_query"></a>



<h4>Method <code>get_param_query()</code>
</h4>

<p>Get request query parameter by name.
</p>


<h5>Usage</h5>

<div class="r"><pre>Request$get_param_query(name)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>name</code></dt>
<dd>
<p>Query parameter name.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>Query parameter value (character string).
</p>


<hr>
<a id="method-Request-get_param_body"></a>



<h4>Method <code>get_param_body()</code>
</h4>

<p>Get request body parameter by name.
</p>


<h5>Usage</h5>

<div class="r"><pre>Request$get_param_body(name)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>name</code></dt>
<dd>
<p>Body field name.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>Body field value.
</p>


<hr>
<a id="method-Request-get_param_path"></a>



<h4>Method <code>get_param_path()</code>
</h4>

<p>Get templated path parameter by name.
</p>


<h5>Usage</h5>

<div class="r"><pre>Request$get_param_path(name)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>name</code></dt>
<dd>
<p>Path parameter name.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>Path parameter value.
</p>


<hr>
<a id="method-Request-get_file"></a>



<h4>Method <code>get_file()</code>
</h4>

<p>Extract specific file from multipart body.
</p>


<h5>Usage</h5>

<div class="r"><pre>Request$get_file(name)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>name</code></dt>
<dd>
<p>Body file name.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>Raw vector with <code>filname</code> and <code>content-type</code> attributes.
</p>


<hr>
<a id="method-Request-print"></a>



<h4>Method <code>print()</code>
</h4>

<p>Print method.
</p>


<h5>Usage</h5>

<div class="r"><pre>Request$print()</pre></div>


<hr>
<a id="method-Request-clone"></a>



<h4>Method <code>clone()</code>
</h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>Request$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt>
<dd>
<p>Whether to make a deep clone.</p>
</dd>
</dl>
</div>




<h3>See Also</h3>

<p>Response Application
</p>


<h3>Examples</h3>

<pre><code class="language-R"># init simply request
rq = Request$new(
  path = "/",
  parameters_query = list(
    "param1" = "value1",
    "param2" = "value2"
  ),
  headers = list(
    "Content-encoding" = "identity",
    "Custom-field" = "value"
  ),
  cookies = list(
    "sessionId" = "1"
  )
)
# get request UUID
rq$id
# get content accept
rq$accept
# get request content type
rq$content_type
# get header by name (lower case)
rq$get_header("custom-field")
# get query param by name
rq$get_param_query("param1")
# print request
rq

</code></pre>


</div>