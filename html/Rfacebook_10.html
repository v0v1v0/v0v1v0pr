<div class="container">

<table style="width: 100%;"><tr>
<td>getInsights</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Extract Insights metric from a Facebook page (admin role required)</h2>

<h3>Description</h3>

<p><code>getInsights</code> retrieves information from an owned Facebook page. Note 
that you must specify wich metric from insights you need and the period.
To request multiple metrics at one time, pass a vector of metric names with a vector
of periods of the same length. If only one period is supplied, it will apply to each metric.
Please refer to Facebook's documentation for valid combinations of objects, metrics and periods.
</p>
<p>Note that some insights require a page access token, see <code>getPageToken</code>
</p>


<h3>Usage</h3>

<pre><code class="language-R">getInsights(object_id, token, metric, period = "day", parms = NA,
  version = 2.3, n = 5)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object_id</code></td>
<td>
<p>An object (page, post, domain) ID.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>token</code></td>
<td>
<p>Either a temporary access token created at
<a href="https://developers.facebook.com/tools/explorer">https://developers.facebook.com/tools/explorer</a> or the OAuth token 
created with <code>fbOAuth</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>metric</code></td>
<td>
<p>The metric(s) which you want to get values for.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>period</code></td>
<td>
<p>Time intervals to return</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parms</code></td>
<td>
<p>Optional argument that can be used to append additional
parameters. For example, <code>&amp;since=DATE&amp;until=DATE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>version</code></td>
<td>
<p>specifies what API version to use in the request. Version 2.5 is default.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>Number of time intervals of metric values to return. Note that all
metrics returned will be multiple of 3, except for lifetime period. Default
n is 5</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The current list of supported metrics and periods is: page_fan_adds, page_fan_removes, 
page_views_login, page_views_login, page_views_logout, page_views, page_story_adds, 
page_impressions, page_posts_impressions, page_consumptions, post_consumptions_by_type, 
page_consumptions, and page_fans_country.
</p>
<p>For more information, see: <a href="https://developers.facebook.com/docs/graph-api/reference/v2.5/insights">https://developers.facebook.com/docs/graph-api/reference/v2.5/insights</a>
</p>


<h3>Author(s)</h3>

<p>Danilo Silva <a href="mailto:silvadaniloc@gmail.com">silvadaniloc@gmail.com</a>
Eduardo Carvalho <a href="mailto:eduardooc.86@gmail.com">eduardooc.86@gmail.com</a>
Andrew Geisler <a href="https://github.com/andrewgeisler">https://github.com/andrewgeisler</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
## See examples for fbOAuth to know how token was created.
## Getting page impressions for Facebook's Facebook Page
## (only owner or admin of page)
 load("fb_oauth")
insights &lt;- getInsights(object_id="20531316728", token=fb_oauth, metric='page_impressions')
## Getting post impressions for a random Facebook's page post
## (only owner or admin of page)
 insights &lt;- getInsights(object_id='221568044327801_754789777921289', 
     token=fb_oauth, metric='post_impressions', period='days_28')
## Getting page fans for date range
## (only owner or admin of page)
insights &lt;- getInsights(object_id='221568044327801',
    token=fb_oauth, metric=c'page_fans', period='lifetime', 
    parms='&amp;since=2015-01-01&amp;until=2015-01-31', version=2.5)
#' ## Getting page fans AND page impressions for date range
## (only owner or admin of page)
insights &lt;- getInsights(object_id='221568044327801',
    token=fb_oauth, metric=c('page_fans','page_impressions'), period=c('lifetime','day'), 
    parms='&amp;since=2015-01-01&amp;until=2015-01-31')        
## Count of fans by country
  insights &lt;- getInsights(object_id='221568044327801_754789777921289', 
     token=fb_oauth, metric='page_fans_country', period='lifetime')

## End(Not run)

</code></pre>


</div>