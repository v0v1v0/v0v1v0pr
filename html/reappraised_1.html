<div class="container">

<table style="width: 100%;"><tr>
<td>anova_fn</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Compares differences between baseline means using Carlisle's montecarlo anova method</h2>

<h3>Description</h3>

<p>Creates plots of distribution of p-values for differences in baseline means calculated using Carlisle's montecarlo anova method.<br></p>


<h3>Usage</h3>

<pre><code class="language-R">anova_fn(
  df = anova_data,
  method = "alt",
  seed = 0,
  sims = -1,
  btsp = 500,
  title = "",
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df</code></td>
<td>
<p>dataframe generated from load_clean function</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>"orig" is adapted from original code; "alt" avoids using loops in the code (see details)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>seed</code></td>
<td>
<p>the seed to use for random number generation, default 0 = current date and time. Specify seed to make repeatable.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sims</code></td>
<td>
<p>number of simulations, default -1 = function selects based on number of variables and sample size</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>btsp</code></td>
<td>
<p>number of bootstrap repeats used to generate 95% confidence interval around AUC</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>title</code></td>
<td>
<p>optional title for plots</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>TRUE or FALSE indicates whether progress bar and comments show and prints plot</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Method is from Carlisle JB, Loadsman JA. Evidence for non-random sampling in randomised, controlled trials by Yuhji Saitoh. Anaesthesia. 2017;72:17-27.<br>
R code is in appendix to paper. This function is adapted from that code.<br>
The function has two methods. The published code selects each variable from each study then generates
simulations for that variable using a row-wise approach with several loops. The adapted method is method = "orig".
The method = "alt" generates all the simulations at once and initially I thought was considerably faster, but in practice the time savings are small.<br>
The results from the two approaches will not be identical even if the same random number seed is used
because they use the generated random numbers in different orders but the p-values generated differ by about &lt;0.1. Usually the
differences are close to 0.01 (although this depends on the number of simulations- more simulations = smaller differences).
The code that generates the p-value for each variable from the simulated means is essentially the same.
</p>
<p>Returns a list containing 3 objects and (if verbose = TRUE) prints the plot anova_ecdf
</p>


<h3>Value</h3>

<p>list containing 3 objects as described
</p>

<ul>
<li>
<p> anova_ecdf = plot of cumulative distribution of calculated p-values compared to the expected uniform distribution
</p>
</li>
<li>
<p> anova_pvalues = plots of distribution of calculated p-values and AUC, as for pval_cont_fn()
</p>
</li>
<li>
<p> anova_all_results = list containing
</p>

<ul>
<li>
<p> anova_data = data frame of baseline data, with calculated p-values
</p>
</li>
<li>
<p> anova_pvals = plot of distribution of calculated p-values from anova_pvalues
</p>
</li>
<li>
<p> anova_auc = plot of AUC of calculated p-values from anova_pvalues
</p>
</li>
</ul>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R"># load example data
anova_data &lt;- load_clean(import= "no", file.cont = "SI_pvals_cont",anova= "yes",
format.cont = "wide")$anova_data


# run function (takes only a few seconds)
anova_fn(seed=10, sims = 100, btsp = 100)$anova_ecdf

# to import an excel spreadsheet (modify using local path,
# file and sheet name, range, and format):

# get path for example files
path &lt;- system.file("extdata", "reappraised_examples.xlsx", package = "reappraised",
                    mustWork = TRUE)
# delete file name from path
path &lt;- sub("/[^/]+$", "", path)

# load data
anova_data &lt;- load_clean(import= "yes", anova = "yes", dir = path,
     file.name.cont = "reappraised_examples.xlsx", sheet.name.cont = "SI_pvals_cont",
     range.name.cont = "A:O", format.cont = "wide")$anova_data

</code></pre>


</div>