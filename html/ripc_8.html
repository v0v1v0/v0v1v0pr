<div class="container">

<table style="width: 100%;"><tr>
<td>ipc_get_population</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Get population resources from the IPC API</h2>

<h3>Description</h3>

<p>Accesses the population resources on the IPC API. Contains detailed
population data. If <code>country</code> and/or <code>start</code> and <code>end</code> parameters are passed,
accesses the <strong>population</strong> advanced API endpoint and pulls in all data.
filtered by those parameters. To get the population data for a specific
analysis, available on the <strong>types/{id}</strong> advanced API endpoint,
pass in <code>id</code>. You cannot pass in both sets of parameters.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ipc_get_population(
  country = NULL,
  start = NULL,
  end = NULL,
  id = NULL,
  api_key = NULL,
  tidy_df = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>country</code></td>
<td>
<p>ISO2 country code.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>start</code></td>
<td>
<p>Start year.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>end</code></td>
<td>
<p>End year.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>Analysis ID.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>api_key</code></td>
<td>
<p>IPC API key. If <code>NULL</code> (the default), looks for <code>IPC_API_KEY</code>
in the environment.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>tidy_df</code></td>
<td>
<p>If <code>TRUE</code>, returns a tidy data frame wrangled as described in
the Tidy section of the documentation. If <code>FALSE</code>, returns
the data frame as returned direct from the IPC-CH API.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Unlike the other <code>ipc_get_..()</code> family of functions, this returns a list of
datasets, corresponding to <code>country</code>, <code>areas</code>, and <code>groups</code> data. The benefit of
<code>ipc_get_population()</code> is that the
returned data for each level of analysis contains all periods of analysis.
</p>
<p>Groups data, where available, are geographies within a country that
comprise multiple areas and/or points.
Areas and points data is the lowest level of IPC analysis where population
estimates for each phase are provided and a general area-level classification
is made. There is no phase classification at
the group level, but populations in each phase are provided. The same applies
to country-level data.
</p>
<p>These datasets are available elsewhere through:
</p>

<ul>
<li>
<p> Country data: <code>ipc_get_country()</code>
</p>
</li>
<li>
<p> Areas data: <code>ipc_get_areas()</code>
</p>
</li>
<li>
<p> Groups data: Not available through other functions
</p>
</li>
</ul>
<p>See the respective function documentation for more details on what each
dataset comprises or the <a href="https://www.ipcinfo.org">IPC website</a> and
<a href="https://docs.api.ipcinfo.org">API documentation</a> for more detailed and
comprehensive information on the data and analysis.
</p>


<h3>Value</h3>

<p>A list of 3 data frames:
</p>

<ul>
<li>
<p> Country data frame.
</p>
</li>
<li>
<p> Areas data frame.
</p>
</li>
<li>
<p> Groups data frame.
</p>
</li>
</ul>
<p>Refer to the <a href="https://docs.api.ipcinfo.org">IPC-CH Public API documentation</a>
for details on the returned values, with variables described in full in the
<a href="https://observablehq.com/@ipc/ipc-api-extended-documentation">extended documentation</a>.
</p>


<h3>Tidy</h3>

<p>When <code>tidy_df</code> is <code>TRUE</code>, the data returned from the population end point is
transformed into a list of 3 data frames to ensure that each row represents a
single analysis, and all estimates and values are stored as columns, while
data at different levels of aggregation are in completely separate data
frames. The steps are:
</p>

<ol>
<li> <p><code>analysis_period_start</code> and <code>analysis_period_end</code> created as <code>Date</code> columns
from the <code>period_dates</code> column respectively, allocating the day of the
start and end periods to be the 15th of the month.
</p>
</li>
<li> <p><code>analysis_date</code> converted to a date column, using the 15th day of the month.
</p>
</li>
<li> <p><code>phases</code> is unnested from a list column to bring the phase data into
the main data frame.
</p>
</li>
<li>
<p> The population estimates are pivoted to a wider format with names <code>phase#_num</code>
and <code>phase#_pct</code>.
</p>
</li>
<li> <p><code>id</code> column renamed to <code>analysis_id</code>.
</p>
</li>
<li>
<p> Data frames are split out so multiple aggregations not present in a single
single data frame.
</p>
</li>
</ol>
<h3>Examples</h3>

<pre><code class="language-R">
# get all populations from the simplified API
ipc_get_population()

# get populations for specific analysis ID from advanced API
ipc_get_population(id = 12856213) # analysis with areas data frame
ipc_get_population(id = 65508276) # analysis with groups data frame

</code></pre>


</div>