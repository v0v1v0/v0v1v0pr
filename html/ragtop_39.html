<div class="container">

<table style="width: 100%;"><tr>
<td>implied_volatility_with_term_struct</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Find the implied volatility of a european-exercise option with term structures</h2>

<h3>Description</h3>

<p>Use the Black-Scholes formula to generate European option values and run them
through Newton's method until a constant volatility matching the provided
option price has been found.
</p>


<h3>Usage</h3>

<pre><code class="language-R">implied_volatility_with_term_struct(
  option_price,
  callput,
  S0,
  K,
  time,
  ...,
  starting_volatility_estimate = 0.5,
  relative_tolerance = 1e-06,
  max.iter = 100,
  max_vola = 4
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>option_price</code></td>
<td>
<p>Option price to match</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>callput</code></td>
<td>
<p>1 for calls, -1 for puts</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>S0</code></td>
<td>
<p>initial underlying price</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>K</code></td>
<td>
<p>strike</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>time</code></td>
<td>
<p>Time to expiration</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Further arguments to be passed on to <code>black_scholes_on_term_structures</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>starting_volatility_estimate</code></td>
<td>
<p>The Newton method's original guess</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>relative_tolerance</code></td>
<td>
<p>Relative tolerance in instrument price defining the root-finder halting condition</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max.iter</code></td>
<td>
<p>Maximum number of root-finder iterations allowed</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_vola</code></td>
<td>
<p>Maximum volatility to try</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Differs from <code>implied_volatility</code> by calling <code>black_scholes_on_term_structures</code> for
pricing, thereby allowing term structures of rates, and a nontrivial <code>survival_probability_fcn</code>
</p>


<h3>Value</h3>

<p>Estimated volatility
</p>


<h3>See Also</h3>

<p><code>implied_volatility</code> for simpler cases with constant
parameters, <code>black_scholes_on_term_structures</code> for the underlying
pricing algorithm, <code>implied_volatilities_with_rates_struct</code> when
neither volatilities nor survival probabilities have a nontrivial term structure
</p>
<p>Other Implied Volatilities: 
<code>american_implied_volatility()</code>,
<code>equivalent_bs_vola_to_jump()</code>,
<code>equivalent_jump_vola_to_bs()</code>,
<code>fit_variance_cumulation()</code>,
<code>implied_jump_process_volatility()</code>,
<code>implied_volatilities_with_rates_struct()</code>,
<code>implied_volatilities()</code>,
<code>implied_volatility()</code>
</p>
<p>Other Equity Independent Default Intensity: 
<code>american_implied_volatility()</code>,
<code>american()</code>,
<code>black_scholes_on_term_structures()</code>,
<code>blackscholes()</code>,
<code>equivalent_bs_vola_to_jump()</code>,
<code>equivalent_jump_vola_to_bs()</code>,
<code>implied_volatilities_with_rates_struct()</code>,
<code>implied_volatilities()</code>,
<code>implied_volatility()</code>
</p>
<p>Other European Options: 
<code>black_scholes_on_term_structures()</code>,
<code>blackscholes()</code>,
<code>implied_volatilities_with_rates_struct()</code>,
<code>implied_volatilities()</code>,
<code>implied_volatility()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Dividends
divs = data.frame(time=seq(from=0.11, to=2, by=0.25),
                  fixed=seq(1.5, 1, length.out=8),
                  proportional = seq(1, 1.5, length.out=8))
surv_prob_fcn = function(T, t, ...) {
  exp(-0.07 * (T - t)) }
disc_factor_fcn = function(T, t, ...) {
  exp(-0.03 * (T - t)) }
implied_volatility_with_term_struct(
    option_price = 12, S0 = 150, callput=PUT,
    K = 147.50, time=1.5,
    discount_factor_fcn=disc_factor_fcn,
    survival_probability_fcn=surv_prob_fcn,
    dividends=divs)
</code></pre>


</div>