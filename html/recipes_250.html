<div class="container">

<table style="width: 100%;"><tr>
<td>step_string2factor</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Convert strings to factors</h2>

<h3>Description</h3>

<p><code>step_string2factor()</code> will convert one or more character vectors to factors
(ordered or unordered).
</p>
<p><em>Use this step only in special cases</em> (see Details) and instead convert
strings to factors before using any tidymodels functions.
</p>


<h3>Usage</h3>

<pre><code class="language-R">step_string2factor(
  recipe,
  ...,
  role = NA,
  trained = FALSE,
  levels = NULL,
  ordered = FALSE,
  skip = FALSE,
  id = rand_id("string2factor")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>recipe</code></td>
<td>
<p>A recipe object. The step will be added to the
sequence of operations for this recipe.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>One or more selector functions to choose variables
for this step. See <code>selections()</code> for more details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>role</code></td>
<td>
<p>Not used by this step since no new variables are
created.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>trained</code></td>
<td>
<p>A logical to indicate if the quantities for
preprocessing have been estimated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>levels</code></td>
<td>
<p>An options specification of the levels to be used
for the new factor. If left <code>NULL</code>, the sorted unique
values present when <code>bake</code> is called will be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ordered</code></td>
<td>
<p>A single logical value; should the factor(s) be
ordered?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>skip</code></td>
<td>
<p>A logical. Should the step be skipped when the
recipe is baked by <code>bake()</code>? While all operations are baked
when <code>prep()</code> is run, some operations may not be able to be
conducted on new data (e.g. processing the outcome variable(s)).
Care should be taken when using <code>skip = TRUE</code> as it may affect
the computations for subsequent operations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>id</code></td>
<td>
<p>A character string that is unique to this step to identify it.</p>
</td>
</tr>
</table>
<h3>Details</h3>



<h4>When should you use this step?</h4>

<p>In most cases, if you are planning to use <code>step_string2factor()</code>
without setting <code>levels</code>, you will be better off converting
those character variables to factor variables <strong>before using a recipe</strong>.
</p>
<p>This can be done using <span class="pkg">dplyr</span> with the following code
</p>
<div class="sourceCode r"><pre>df &lt;- mutate(df, across(where(is.character), as.factor))
</pre></div>
<p>During resampling, the complete set of values might
not be in the character data. Converting them to factors with
<code>step_string2factor()</code>  then will misconfigure the levels.
</p>
<p>If the <code>levels</code> argument to <code>step_string2factor()</code>is used, it will
convert all variables affected by this step to have the same
levels. Because of this, you will need to know the full set of level
when you define the recipe.
</p>
<p>Also, note that <code>prep()</code> has an option <code>strings_as_factors</code> that
defaults to <code>TRUE</code>. This should be changed so that raw character
data will be applied to <code>step_string2factor()</code>. However, this step
can also take existing factors (but will leave them as-is).
</p>



<h3>Value</h3>

<p>An updated version of <code>recipe</code> with the new step added to the
sequence of any existing operations.
</p>


<h3>Tidying</h3>

<p>When you <code>tidy()</code> this step, a tibble is returned with
columns <code>terms</code>, <code>ordered</code> , and <code>id</code>:
</p>

<dl>
<dt>terms</dt>
<dd>
<p>character, the selectors or variables selected</p>
</dd>
<dt>ordered</dt>
<dd>
<p>logical, are factors ordered</p>
</dd>
<dt>id</dt>
<dd>
<p>character, id of this step</p>
</dd>
</dl>
<h3>Case weights</h3>

<p>The underlying operation does not allow for case weights.
</p>


<h3>See Also</h3>

<p>Other dummy variable and encoding steps: 
<code>step_bin2factor()</code>,
<code>step_count()</code>,
<code>step_date()</code>,
<code>step_dummy()</code>,
<code>step_dummy_extract()</code>,
<code>step_dummy_multi_choice()</code>,
<code>step_factor2string()</code>,
<code>step_holiday()</code>,
<code>step_indicate_na()</code>,
<code>step_integer()</code>,
<code>step_novel()</code>,
<code>step_num2factor()</code>,
<code>step_ordinalscore()</code>,
<code>step_other()</code>,
<code>step_regex()</code>,
<code>step_relevel()</code>,
<code>step_time()</code>,
<code>step_unknown()</code>,
<code>step_unorder()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
data(Sacramento, package = "modeldata")

# convert factor to string to demonstrate
Sacramento$city &lt;- as.character(Sacramento$city)

rec &lt;- recipe(~ city + zip, data = Sacramento)

make_factor &lt;- rec %&gt;%
  step_string2factor(city)

make_factor &lt;- prep(make_factor,
  training = Sacramento
)

make_factor

# note that `city` is a factor in recipe output
bake(make_factor, new_data = NULL) %&gt;% head()

# ...but remains a string in the data
Sacramento %&gt;% head()

</code></pre>


</div>