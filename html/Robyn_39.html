<div class="container">

<table style="width: 100%;"><tr>
<td>robyn_response</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Response and Saturation Curves</h2>

<h3>Description</h3>

<p><code>robyn_response()</code> returns the response for a given
spend level of a given <code>paid_media_vars</code> from a selected model
result and selected model build (initial model, refresh model, etc.).
</p>


<h3>Usage</h3>

<pre><code class="language-R">robyn_response(
  InputCollect = NULL,
  OutputCollect = NULL,
  json_file = NULL,
  robyn_object = NULL,
  select_build = NULL,
  select_model = NULL,
  metric_name = NULL,
  metric_value = NULL,
  date_range = NULL,
  dt_hyppar = NULL,
  dt_coef = NULL,
  quiet = FALSE,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>InputCollect</code></td>
<td>
<p>List. Contains all input parameters for the model.
Required when <code>robyn_object</code> is not provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>OutputCollect</code></td>
<td>
<p>List. Containing all model result.
Required when <code>robyn_object</code> is not provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>json_file</code></td>
<td>
<p>Character. JSON file to import previously exported inputs or
recreate a model. To generate this file, use <code>robyn_write()</code>.
If you didn't export your data in the json file as "raw_data",
<code>dt_input</code> must be provided; <code>dt_holidays</code> input is optional.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>robyn_object</code></td>
<td>
<p>Character or List. Path of the <code>Robyn.RDS</code> object
that contains all previous modeling information or the imported list.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>select_build</code></td>
<td>
<p>Integer. Default to the latest model build. <code>select_build = 0</code>
selects the initial model. <code>select_build = 1</code> selects the first refresh model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>select_model</code></td>
<td>
<p>Character. A model <code>SolID</code>. When <code>robyn_object</code>
is provided, <code>select_model</code> defaults to the already selected <code>SolID</code>. When
<code>robyn_object</code> is not provided, <code>select_model</code> must be provided with
<code>InputCollect</code> and <code>OutputCollect</code>, and must be one of
<code>OutputCollect$allSolutions</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>metric_name</code></td>
<td>
<p>A character. Selected media variable for the response.
Must be one value from paid_media_spends, paid_media_vars or organic_vars</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>metric_value</code></td>
<td>
<p>Numeric. Desired metric value to return a response for.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>date_range</code></td>
<td>
<p>Character. Date(s) to apply adstocked transformations and pick mean spends
per channel. Set one of: "all", "last", or "last_n" (where
n is the last N dates available), date (i.e. "2022-03-27"), or date range
(i.e. <code>c("2022-01-01", "2022-12-31")</code>). Default to "all".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dt_hyppar</code></td>
<td>
<p>A data.frame. When <code>robyn_object</code> is not provided, use
<code>dt_hyppar = OutputCollect$resultHypParam</code>. It must be provided along
<code>select_model</code>, <code>dt_coef</code> and <code>InputCollect</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dt_coef</code></td>
<td>
<p>A data.frame. When <code>robyn_object</code> is not provided, use
<code>dt_coef = OutputCollect$xDecompAgg</code>. It must be provided along
<code>select_model</code>, <code>dt_hyppar</code> and <code>InputCollect</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>quiet</code></td>
<td>
<p>Boolean. Keep messages off?</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Additional parameters passed to <code>robyn_outputs()</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>List. Response value and plot. Class: <code>robyn_response</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# Having InputCollect and OutputCollect objects
## Recreate original saturation curve
Response &lt;- robyn_response(
  InputCollect = InputCollect,
  OutputCollect = OutputCollect,
  select_model = select_model,
  metric_name = "facebook_S"
)
Response$plot

## Or you can call a JSON file directly (a bit slower)
# Response &lt;- robyn_response(
#   json_file = "your_json_path.json",
#   dt_input = dt_simulated_weekly,
#   dt_holidays = dt_prophet_holidays,
#   metric_name = "facebook_S"
# )

## Get the "next 100 dollar" marginal response on Spend1
Spend1 &lt;- 20000
Response1 &lt;- robyn_response(
  InputCollect = InputCollect,
  OutputCollect = OutputCollect,
  select_model = select_model,
  metric_name = "facebook_S",
  metric_value = Spend1, # total budget for date_range
  date_range = "last_1" # last two periods
)
Response1$plot

Spend2 &lt;- Spend1 + 100
Response2 &lt;- robyn_response(
  InputCollect = InputCollect,
  OutputCollect = OutputCollect,
  select_model = select_model,
  metric_name = "facebook_S",
  metric_value = Spend2,
  date_range = "last_1"
)
# ROAS for the 100$ from Spend1 level
(Response2$response_total - Response1$response_total) / (Spend2 - Spend1)

## Get response from for a given budget and date_range
Spend3 &lt;- 100000
Response3 &lt;- robyn_response(
  InputCollect = InputCollect,
  OutputCollect = OutputCollect,
  select_model = select_model,
  metric_name = "facebook_S",
  metric_value = Spend3, # total budget for date_range
  date_range = "last_5" # last 5 periods
)
Response3$plot

## Example of getting paid media exposure response curves
imps &lt;- 10000000
response_imps &lt;- robyn_response(
  InputCollect = InputCollect,
  OutputCollect = OutputCollect,
  select_model = select_model,
  metric_name = "facebook_I",
  metric_value = imps
)
response_imps$response_total / imps * 1000
response_imps$plot

## Example of getting organic media exposure response curves
sendings &lt;- 30000
response_sending &lt;- robyn_response(
  InputCollect = InputCollect,
  OutputCollect = OutputCollect,
  select_model = select_model,
  metric_name = "newsletter",
  metric_value = sendings
)
# response per 1000 sendings
response_sending$response_total / sendings * 1000
response_sending$plot

## End(Not run)
</code></pre>


</div>