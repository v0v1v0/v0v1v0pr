<div class="container">

<table style="width: 100%;"><tr>
<td>shift_array</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Shift array by index</h2>

<h3>Description</h3>

<p>Re-arrange arrays in parallel
</p>


<h3>Usage</h3>

<pre><code class="language-R">shift_array(x, along_margin, unit_margin, shift_amount)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>array, must have at least matrix</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>along_margin</code></td>
<td>
<p>which index is to be shifted</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>unit_margin</code></td>
<td>
<p>which dimension decides <code>shift_amount</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>shift_amount</code></td>
<td>
<p>shift amount along <code>along_margin</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>A simple use-case for this function is to think of a matrix where each row
is a signal and columns stand for time. The objective is to align (time-lock)
each signal according to certain events. For each signal, we want to shift
the time points by certain amount.
</p>
<p>In this case, the shift amount is defined by <code>shift_amount</code>, whose
length equals to number of signals. <code>along_margin=2</code> as we want to shift
time points (column, the second dimension) for each signal. <code>unit_margin=1</code>
because the shift amount is depend on the signal number.
</p>


<h3>Value</h3>

<p>An array with same dimensions as the input <code>x</code>, but with
index shifted. The missing elements will be filled with <code>NA</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
# Set ncores = 2 to comply to CRAN policy. Please don't run this line
ravetools_threads(n_threads = 2L)



x &lt;- matrix(1:10, nrow = 2, byrow = TRUE)
z &lt;- shift_array(x, 2, 1, c(1,2))

y &lt;- NA * x
y[1,1:4] = x[1,2:5]
y[2,1:3] = x[2,3:5]

# Check if z ang y are the same
z - y

# array case
# x is Trial x Frequency x Time
x &lt;- array(1:27, c(3,3,3))

# Shift time for each trial, amount is 1, -1, 0
shift_amount &lt;- c(1,-1,0)
z &lt;- shift_array(x, 3, 1, shift_amount)

oldpar &lt;- par(mfrow = c(3, 2), mai = c(0.8, 0.6, 0.4, 0.1))
for( ii in 1:3 ){
  image(t(x[ii, ,]), ylab = 'Frequency', xlab = 'Time',
        main = paste('Trial', ii))
  image(t(z[ii, ,]), ylab = 'Frequency', xlab = 'Time',
        main = paste('Shifted amount:', shift_amount[ii]))
}
par(oldpar)

</code></pre>


</div>