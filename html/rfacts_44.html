<div class="container">

<table style="width: 100%;"><tr>
<td>run_flfll</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate param files to prepare for trial simulations</h2>

<h3>Description</h3>

<p>Generate the preparatory files required for simulation.
</p>


<h3>Usage</h3>

<pre><code class="language-R">run_flfll(
  facts_file,
  output_path = tempfile(),
  log_path = output_path,
  n_burn = NULL,
  n_mcmc = NULL,
  n_weeks_files = 10000,
  n_patients_files = 10000,
  n_mcmc_files = 0,
  n_mcmc_thin = NULL,
  flfll_seed = NULL,
  flfll_offset = NULL,
  verbose = FALSE,
  max_sims = 99999L
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>facts_file</code></td>
<td>
<p>Character, name of a FACTS file.
Usually has a <code style="white-space: pre;">⁠*.facts⁠</code> file extension.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>output_path</code></td>
<td>
<p>Character, directory path to the files to generate.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>log_path</code></td>
<td>
<p>Character, path to the log file generated by FLFLL.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_burn</code></td>
<td>
<p>Number of burn-in iterations for the MCMC.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_mcmc</code></td>
<td>
<p>Number of MCMC iterations used in inference.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_weeks_files</code></td>
<td>
<p>Number of <code>weeks*.csv</code> files to save in <code>output_path</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_patients_files</code></td>
<td>
<p>Number of <code>patients*.csv</code> files to save in
<code>output_path</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_mcmc_files</code></td>
<td>
<p>Number of <code>mcmc*.csv</code> files to save in
<code>output_path</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n_mcmc_thin</code></td>
<td>
<p>Number of thinning iterations for the MCMC.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>flfll_seed</code></td>
<td>
<p>Positive integer, random number generator seed for FLFLL.
This seed is only used for stochastic preprocessing steps for generating
the <code style="white-space: pre;">⁠*.param⁠</code> files. It is not the random number generator seed
for the actual trial simulations. To set the trial simulation seed,
use the <code>seed</code> argument of <code>run_facts()</code>, <code>run_engine()</code>, or
one of the specific <code style="white-space: pre;">⁠run_engine*()⁠</code> functions.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>flfll_offset</code></td>
<td>
<p>Integer, offset for the random number generator.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Logical, whether to print progress information to the
R console.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_sims</code></td>
<td>
<p>Positive integer of length 1, maximum number of simulations
that will be allowed to run for certain engines like CRM
in subsequent calls to the engine. If the <code>n_sims</code> argument
of the engine is larger than <code>max_sims</code>, only <code>max_sims</code>
simulations will be run. The <code>max_sims</code> argument
only applies to FLFLL &gt;= 6.4.1
and only needs to be set manually if you are manually calling
<code>run_flfll()</code> and then the engine instead of just <code>run_facts()</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>For advanced control over trial simulations, you must first call
<code>run_flfll()</code> and then call one of the engine functions
such as <code>run_engine_contin()</code>.
<code>run_flfll()</code> generates the preparatory <code style="white-space: pre;">⁠*.param⁠</code> files that the
<code style="white-space: pre;">⁠run_engine_*()⁠</code> functions understand.
You will pass these <code style="white-space: pre;">⁠*.param⁠</code> files or their parent
directory to <code>param_files</code> argument of <code>run_engine_contin()</code> etc.
</p>


<h3>Value</h3>

<p>Character, the value of <code>output_path</code>.
<code>output_path</code> is the directory path to the files generated by
<code>run_flfll()</code>.
</p>


<h3>See Also</h3>

<p><code>get_facts_file_example()</code>, <code>run_engine()</code>, <code>run_engine_contin()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Can only run if system dependencies are configured:
if (file.exists(Sys.getenv("RFACTS_PATHS"))) {
facts_file &lt;- get_facts_file_example("contin.facts") # example FACTS file
out &lt;- run_flfll(facts_file, verbose = FALSE) # Generate param files.
# Run the simulations.
run_engine(
  facts_file,
  param_files = out,
  n_sims = 1,
  verbose = FALSE
)
read_patients(out)
}
</code></pre>


</div>