<div class="container">

<table style="width: 100%;"><tr>
<td>setup_density_plot</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Set up information for a density plot of the indirect effect(s)</h2>

<h3>Description</h3>

<p>Extract the relevant information for a density plot of the indirect
effect(s) from results of (robust) mediation analysis.
</p>


<h3>Usage</h3>

<pre><code class="language-R">setup_density_plot(object, ...)

## S3 method for class 'boot_test_mediation'
setup_density_plot(object, ...)

## S3 method for class 'sobel_test_mediation'
setup_density_plot(object, grid = NULL, level = 0.95, ...)

## S3 method for class 'list'
setup_density_plot(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>an object inheriting from class
<code>"test_mediation"</code> containing results from
(robust) mediation analysis, or a list of such objects.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments to be passed down.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>grid</code></td>
<td>
<p>an optional numeric vector containing the values at which to
evaluate the assumed normal density from Sobel's test.  The default is to
take 512 equally spaced points between the estimated indirect effect
<code class="reqn">\pm</code> three times the standard error according to Sobel's formula.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>level</code></td>
<td>
<p>numeric;  the confidence level of the confidence intervals
from Sobel's test.  The default is to include 95% confidence intervals.
Note that this is not used for bootstrap tests, as those require to specify
the confidence level already in <code>test_mediation()</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function is used internally by <code>density_plot()</code>.  It may
also be useful for users who want to produce a similar plot, but who want
more control over what information to display or how to display that
information.
</p>


<h3>Value</h3>

<p>An object of class <code>"setup_density_plot"</code> with the following
components:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>density</code></td>
<td>
<p>a data frame containing the values of the indirect effect
where the density is estimated (column <code>Indirect</code>), and the estimated
density values (column <code>Density</code>).  In case of a model with multiple
indirect effects, there is a column <code>Effect</code> that indicates the
different indirect effects.  If a list of <code>"test_mediation"</code>
objects has been supplied, there is also a column <code>Method</code>, which takes
the names or indices of the list elements to indicate the different methods.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ci</code></td>
<td>
<p>a data frame consisting of column <code>Estimate</code> containing the
point estimates, column <code>Lower</code> for the lower confidence limit, and
column <code>Upper</code> for the upper confidence limit.  In case of a model with
multiple indirect effects, there is a column <code>Effect</code> that indicates
the different indirect effects.  If a list of <code>"test_mediation"</code>
objects has been supplied, there is also a column <code>Method</code>, which takes
the names or indices of the list elements to indicate the different methods.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>test</code></td>
<td>
<p>a character string indicating whether the object contains
results from a bootstrap test (<code>"boot"</code>) or a Sobel test
(<code>"sobel"</code>), or a vector of such character strings if a list of
<code>"test_mediation"</code> objects has been supplied.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>level</code></td>
<td>
<p>numeric; the confidence level used for the confidence intervals
of the indirect effect(s).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>have_effects</code></td>
<td>
<p>a logical indicating whether the mediation model
contains multiple indirect effects  If <code>TRUE</code>, the data frames in the
<code>density</code> and <code>ci</code> components contain a column <code>Effect</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>have_methods</code></td>
<td>
<p>a logical indicating whether a list of
<code>"test_mediation"</code> objects has been supplied.  If <code>TRUE</code>,
the data frames in the <code>density</code> and <code>ci</code> components contain a
column <code>Method</code>.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Andreas Alfons
</p>


<h3>References</h3>

<p>Alfons, A., Ates, N.Y. and Groenen, P.J.F. (2022) Robust Mediation Analysis:
The <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> Package <span class="pkg">robmed</span>.  <em>Journal of Statistical Software</em>,
<b>103</b>(13), 1â€“45.  doi:10.18637/jss.v103.i13.
</p>


<h3>See Also</h3>

<p><code>test_mediation()</code>, <code>density_plot()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data("BSG2014")

# run fast-and-robust bootstrap test
boot &lt;- test_mediation(BSG2014,
                       x = "ValueDiversity",
                       y = "TeamCommitment",
                       m = "TaskConflict")

# set up information for plot
setup &lt;- setup_density_plot(boot)

# plot only density and confidence interval
ggplot() +
  geom_density(aes(x = Indirect, y = Density), data = setup$density,
               stat = "identity") +
  geom_rect(aes(xmin = Lower, xmax = Upper,
                ymin = -Inf, ymax = Inf),
            data = setup$ci, color = NA, alpha = 0.2) +
  labs(x = "Indirect effect", y = "Bootstrap density")

</code></pre>


</div>