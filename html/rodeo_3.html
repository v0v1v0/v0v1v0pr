<div class="container">

<table style="width: 100%;"><tr>
<td>compile</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate Executable Code</h2>

<h3>Description</h3>

<p>Creates and 'compiles' a function for use with numerical methods from
package <code>deSolve</code> or <code>rootSolve</code>.
</p>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>sources</code></td>
<td>
<p>Name(s) of source files(s) where functions appearing in
process rates or stoichiometric factors are implemented. Can be <code>NULL</code>
if no external functions are required, the name of a single file, or a
vector of file names. See notes below.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fortran</code></td>
<td>
<p>If <code>TRUE</code>, Fortran code is generated and compiled into a shared
library. If <code>FALSE</code>, R code is generated.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>target</code></td>
<td>
<p>Name of a 'target environment'. Currently, 'deSolve' is the
only supported value.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lib</code></td>
<td>
<p>File path to be used for the generated library (without
the platform specific extension). Note that any uppercase characters will
be converted to lowercase. By default, the file is created in R's
temporary folder under a random name.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reuse</code></td>
<td>
<p>If <code>TRUE</code>, an already existing library file will be loaded.
Use this to prevent
unnecessary re-compilation but note that R is likely to crash in case
of any mismatches between the object and the existing library. Default is
<code>FALSE</code>, i.e. the library is unconditionally build from scratch.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>invisible(NULL)</code>
</p>


<h3>Note</h3>

<p>The expected language of the external code passed in <code>sources</code>
depends on the value of <code>fortran</code>.
</p>
<p>If <code>fortran</code> is <code>FALSE</code>, R code is generated and made executable
by <code>eval</code> and <code>parse</code>. Auxiliary code
passed via <code>sources</code> is made available via <code>source</code>.
The created R function is stored in the object.
</p>
<p>If <code>fortran</code> is <code>TRUE</code>, the external code passed in 
<code>sources</code> must implement a module with the fixed name 'functions'.
This module must contain all user-defined functions referenced in process
rates or stoichiometric factors.
</p>
<p>If <code>fortran</code> is <code>TRUE</code>, a shared library is created. The library
is immediately loaded with <code>dyn.load</code> and it is
automatically unloaded with <code>dyn.unload</code> when the
object's <code>finalize</code> method is called.
</p>
<p>The name of the library (base name without extension) as well as the name
of the function to compute the  derivatives are stored in the object.
These names can be queried with the
<code>libName</code> and <code>libFunc</code> methods, respectively.
Unless a file path is specified via the <code>lib</code> argument, the library is
created in the folder returned by <code>tempdir</code> under a
unique random name.
</p>


<h3>Author(s)</h3>

<p><a href="mailto:david.kneis@tu-dresden.de">david.kneis@tu-dresden.de</a>
</p>


<h3>See Also</h3>

<p>This method internally calls <code>generate</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(vars, pars, funs, pros, stoi)
model &lt;- rodeo$new(vars, pars, funs, pros, stoi, dim=c(1))
# This would trigger compilation assuming that 'functionsCode.f95' contains
# a Fortran implementation of all functions; see vignette for full example
## Not run: 
model$compile(sources="functionsCode.f95")

## End(Not run)
</code></pre>


</div>