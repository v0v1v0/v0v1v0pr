<div class="container">

<table style="width: 100%;"><tr>
<td>load_cfg</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Load configuration data from JSON</h2>

<h3>Description</h3>

<p>Load the configuration information to the '.restatapi_env' from the JSON configuration file.
</p>


<h3>Usage</h3>

<pre><code class="language-R">load_cfg(
  api_version = "default",
  cfg_file = "github",
  load_toc = FALSE,
  parallel = TRUE,
  max_cores = FALSE,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>api_version</code></td>
<td>
<p>It can be either "old", "new", "test" or "current". The default value is "current" which defined by the DEFAULT_API_VERSION value of the config file.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cfg_file</code></td>
<td>
<p>The location of the config file. It can be either "github" (the default value) or "local".</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>load_toc</code></td>
<td>
<p>The default value <code>FALSE</code>, which means that the XML version of the Table of contents (TOC) will not be downloaded and 
cached automatically in the '.restatapi_env' when the package is loaded.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>parallel</code></td>
<td>
<p>A boolean with the default value <code>TRUE</code>. If there are multiple cores/logical processors then part of the data 
extraction is made in parallel reducing significantly the time needed for large datasets. If the value is <code>FALSE</code> the option <code>restatapi_cores</code> set to 1.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_cores</code></td>
<td>
<p>A boolean with the default value <code>FALSE</code>. If the parameter 'parallel' is <code>TRUE</code> then this parameter is taken into account otherwise it is ignored.
If the value is <code>TRUE</code>, then the maximum minus one cores/logical processors are used for parallel computing. If the parameter <code>FALSE</code>, 
then the default value of <code>getOption("mc.cores")</code> is used, if it is defined. If <code>mc.cores</code> is <code>NULL</code> then depending on the memory size and number of available cores/threads the <code>restatapi_cores</code> are set to 2 or 4 cores/logical processors. 
Otherwise the parallel processing turned off by setting the option <code>restatapi_cores</code> to 1.
The number of cores used for parallel computing can be changed any time with <code>options(restatapi_cores=...)</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>A boolean if the verbose message about the configuration to be showed or not. The default is <code>FALSE</code>. Can be set also with <code>options(restatapi_verbose=TRUE)</code></p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Loads configuration data from a JSON file. The function first tries to load the configuration file from GitHub. 
If it is not possible it loads from the file delivered with the package. By this way different version of the API can be tested. 
Since in many cases there is http/https redirection in the download which can cause problems with the 'wininet' download method, the 'libcurl' method is used when it is available.
This configuration code sets up the parallel processing to handle large XML files efficiently. By default if there is more then 4 cores/logical processors and at least 32 GB of RAM then
4 cores are used for parallel computing. If there is more then 2 cores then 2 cores are used. This default configuration can be overwritten with <code>options(restatapi_cores=...)</code> or with the <code>max_cores=TRUE</code> parameter.
In the second case part of the computation distributed over the maximum number minus one cores. By using the <code>max_cores=TRUE</code> option there is a higher probability that the program will run out off memory for larger datasets.  
In addition, the list of country codes are loaded to the variable <code>cc</code> (country codes), based on the  <a href="https://ec.europa.eu/eurostat/ramon/nomenclatures/index.cfm?TargetUrl=LST_NOM_DTL&amp;StrNom=CL_GEO&amp;StrLanguageCode=EN&amp;IntPcKey=42277583&amp;IntResult=1&amp;StrLayoutCode=HIERARCHIC">Eurostat standard code list</a>
</p>


<h3>Value</h3>

<p>it returns 4 objects in the '.restatapi_env'  
</p>

<ul>
<li> <p><code>cfg</code> a list with all the configuration data
</p>
</li>
<li> <p><code>rav</code> a character string with a number defining the API_VERSION from the configuration file to be used later. It is 
determined based on the <code>api_version</code> parameter.   
</p>
</li>
<li> <p><code>cc</code> a list containing the 2 character country codes of the member states for different EU composition like EU15, EU28 or EA (Euro Area).   
</p>
</li>
<li> <p><code>dmethod</code> the download method to be used to access Eurostat database. If the 'libcurl' method exists under Windows then 
it will be the default method for file download, otherwise it will be set 'auto'. The download method can be changed any time with <code>options(restatapi_dmethod=...)</code>
</p>
</li>
</ul>
<h3>Examples</h3>

<pre><code class="language-R">
load_cfg(parallel=FALSE)
options(restatapi_dmethod="auto")
load_cfg(api_version="test",verbose=TRUE,max_cores=FALSE)
load_cfg()
eu&lt;-get("cc",envir=.restatapi_env)
eu$EU28
eu$EA15

</code></pre>


</div>