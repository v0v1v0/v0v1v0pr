<div class="container">

<table style="width: 100%;"><tr>
<td>mice.impute.rfpred.cate</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Univariate sampler function for categorical variables for prediction-based
imputation, using predicted probabilities of random forest</h2>

<h3>Description</h3>

<p>Please note that functions with names starting with "mice.impute" are
exported to be visible for the mice sampler functions. Please do not call
these functions directly unless you know exactly what you are doing.
</p>
<p>For categorical variables only.
</p>
<p>Part of project <code>RfEmpImp</code>, the function <code>mice.impute.rfpred.cate</code>
is for categorical variables, performing imputation based on predicted
probabilities for the categories.
</p>


<h3>Usage</h3>

<pre><code class="language-R">mice.impute.rfpred.cate(
  y,
  ry,
  x,
  wy = NULL,
  num.trees.cate = 10,
  use.pred.prob.cate = TRUE,
  forest.vote.cate = FALSE,
  pre.boot = TRUE,
  num.threads = NULL,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>Vector to be imputed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ry</code></td>
<td>
<p>Logical vector of length <code>length(y)</code> indicating the
the subset <code>y[ry]</code> of elements in <code>y</code> to which the imputation
model is fitted. The <code>ry</code> generally distinguishes the observed
(<code>TRUE</code>) and missing values (<code>FALSE</code>) in <code>y</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Numeric design matrix with <code>length(y)</code> rows with predictors for
<code>y</code>. Matrix <code>x</code> may have no missing values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>wy</code></td>
<td>
<p>Logical vector of length <code>length(y)</code>. A <code>TRUE</code> value
indicates locations in <code>y</code> for which imputations are created.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num.trees.cate</code></td>
<td>
<p>Number of trees to build for categorical variables,
default to <code>10</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use.pred.prob.cate</code></td>
<td>
<p>Logical, <code>TRUE</code> for assigning categories based
on predicted probabilities, <code>FALSE</code> for imputation based on random draws
from predictions of classification trees, default to <code>TRUE</code>. Note that
if <code>forest.vote.cate = TRUE</code>, then this option is invalid.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>forest.vote.cate</code></td>
<td>
<p>Logical, <code>TRUE</code> for assigning categories based
on majority votes of random forests, <code>FALSE</code> for imputation based on
control of option <code>use.pred.prob.cate</code>, default to <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pre.boot</code></td>
<td>
<p>Perform bootstrap prior to imputation to get 'proper'
multiple imputation, i.e. accommodating sampling variation in estimating
population regression parameters (see Shah et al. 2014).
It should be noted that if <code>TRUE</code>, this option is in effect even if the
number of trees is set to one.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>num.threads</code></td>
<td>
<p>Number of threads for parallel computing. The default is
<code>num.threads = NULL</code> and all the processors available can be used.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Other arguments to pass down.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>RfEmpImp</code> Imputation sampler for: categorical variables based on
predicted probabilities.
</p>


<h3>Value</h3>

<p>Vector with imputed data, same type as <code>y</code>, and of length
<code>sum(wy)</code>.
</p>


<h3>Author(s)</h3>

<p>Shangzhi Hong
</p>


<h3>References</h3>

<p>Hong, Shangzhi, et al. "Multiple imputation using chained random forests."
Preprint, submitted April 30, 2020. https://arxiv.org/abs/2004.14823.
</p>
<p>Shah, Anoop D., et al. "Comparison of random forest and parametric
imputation models for imputing missing data using MICE: a CALIBER study."
American journal of epidemiology 179.6 (2014): 764-774.
</p>
<p>Malley, James D., et al. "Probability machines." Methods of information
in medicine 51.01 (2012): 74-81.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Prepare data
mtcars.catmcar &lt;- mtcars
mtcars.catmcar[, c("gear", "carb")] &lt;-
    gen.mcar(mtcars.catmcar[, c("gear", "carb")], warn.empty.row = FALSE)
mtcars.catmcar &lt;- conv.factor(mtcars.catmcar, c("gear", "carb"))
# Perform imputation
impObj &lt;- mice(mtcars.catmcar, method = "rfpred.cate", m = 5, maxit = 5,
maxcor = 1.0, eps = 0,
remove.collinear = FALSE, remove.constant = FALSE,
printFlag = FALSE)

</code></pre>


</div>