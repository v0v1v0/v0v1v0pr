<div class="container">

<table style="width: 100%;"><tr>
<td>rpartScore</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Classification trees for ordinal responses
</h2>

<h3>Description</h3>

<p>This function allows the user to build classification trees for ordinal responses within the CART framework.
The trees are grown using the Generalized Gini impurity function, where the misclassification costs are given by the absolute or squared differences in scores assigned to the categories of the response.
Pruning is based on the total misclassification rate or on the total misclassification cost.
</p>


<h3>Usage</h3>

<pre><code class="language-R">rpartScore(formula, data, weights, subset, na.action = na.rpart,
 	split = "abs", prune = "mc",
 	model = FALSE, x = FALSE, y = TRUE,
 	control, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>

<p>a formula, as in the <code>lm</code> function.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>

<p>an optional data frame in which to interpret the variables named in the formula.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>

<p>optional case weights.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>subset</code></td>
<td>

<p>optional expression saying that only a subset of the rows of the data should be used in the fit.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.action</code></td>
<td>

<p>The default action deletes all observations for which <code>y</code> is missing, but keeps those in which one or more predictors are missing.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>split</code></td>
<td>

<p>One of <code>"abs"</code> or <code>"quad"</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>prune</code></td>
<td>

<p>One of <code>"mc"</code> or <code>"mr"</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>model</code></td>
<td>

<p>if logical: keep a copy of the model frame in the result? If the input value for model is a model frame (likely from an earlier call to the <code>rpart</code> or <code>rpartScore</code> function), then this frame is used rather than constructing new data.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>

<p>keep a copy of the <code>x</code> matrix in the result.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>

<p>keep a copy of the dependent variable in the result. If missing and <code>model</code> is supplied this defaults to <code>FALSE</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>control</code></td>
<td>

<p>options that control details of the <code>rpart</code> algorithm.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>

<p>arguments to <code>rpart.control</code> may also be specified in the call to <code>rpartScore</code>. They are checked against the list of valid arguments.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The use of this function is almost the same as the <code>rpart</code> function. <br>
It is assumed that a set of (not necessarily linear) numerical scores has been assigned to the ordered categories of the response.<br>
The main difference with respect to the <code>rpart</code> function is the presence of two
arguments (<code>split</code> and <code>prune</code>) instead of the <code>method</code> argument.<br>
The argument <code>split</code> controls the splitting function used to grow the classification tree, by setting the
misclassification costs in the generalized Gini impurity function equal to the absolute (<code>"abs"</code> - is the default option) or to the squared
(<code>"quad"</code>) differences in scores. <br>
The argument <code>prune</code> allows the user to select the prediction performance measure used to prune the classification tree,
and can take two values: <code>"mr"</code> (total misclassification rate) or <code>"mc"</code> (total misclassification cost - is the default option).
</p>


<h3>Value</h3>

<p>An object of class <code>rpart</code>, a superset of class <code>tree</code>.
</p>


<h3>Author(s)</h3>

<p>Giuliano Galimberti, Gabriele Soffritti, Matteo Di Maso
</p>


<h3>References</h3>

<p>Breiman L., Friedman J.H., Olshen R.A., Stone C.J. 1984 <em>Classification and Regression Trees</em>. Wadsworth International.
</p>
<p>Galimberti G., Soffritti G., Di Maso M. 2012 Classification Trees for Ordinal Responses in <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span>: The <code>rpartScore</code> Package.
<em>Journal of Statistical Software</em>, <b>47</b>(10), 1-25. <a href="https://doi.org/10.18637/jss.v047.i10">doi:10.18637/jss.v047.i10</a>.
</p>
<p>Piccarreta R. 2008 Classication Trees for Ordinal Variables. <em>Computational Statistics</em>, <b>23</b>, 407-427. <a href="https://doi.org/10.1007/s00180-007-0077-5">doi:10.1007/s00180-007-0077-5</a>.
</p>


<h3>See Also</h3>

<p><code>rpart</code>,<code>rpart.control</code>,
<code>rpart.object</code>,<code>summary.rpart</code>,
<code>print.rpart</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data("birthwt",package="MASS")

birthwt$Category.s &lt;- ifelse(birthwt$bwt &lt;= 2500, 3,
 	ifelse(birthwt$bwt &lt;= 3000, 2,
 	ifelse(birthwt$bwt &lt;= 3500, 1, 0)))

T.abs.mc &lt;- rpartScore(Category.s ~ age + lwt + race + smoke +
 	ptl + ht + ui + ftv, data = birthwt)

plotcp(T.abs.mc)

T.abs.mc.pruned&lt;-prune(T.abs.mc,cp=0.02)

plot(T.abs.mc.pruned)

text(T.abs.mc.pruned)

T.quad.mr &lt;- rpartScore(Category.s ~ age + lwt + race + smoke + ptl + ht +
 	ui + ftv, split = "quad", prune = "mr", data = birthwt)

</code></pre>


</div>