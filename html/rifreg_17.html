<div class="container">

<table style="width: 100%;"><tr>
<td>rifreg</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>RIF regression</h2>

<h3>Description</h3>

<p>Estimate a recentered influence function (RIF) regression for a
distributional statistic of interest.
</p>


<h3>Usage</h3>

<pre><code class="language-R">rifreg(
  formula,
  data,
  statistic = "quantiles",
  weights = NULL,
  probs = c(1:9)/10,
  custom_rif_function = NULL,
  na.action = na.omit,
  bootstrap = FALSE,
  bootstrap_iterations = 100,
  cores = 1,
  ...
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>formula</code></td>
<td>
<p>an object of class "formula". See lm for further details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>data</code></td>
<td>
<p>a data frame containing the variables in the model.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>statistic</code></td>
<td>
<p>string containing the distributional statistic for which to compute the RIF. Can be one of
"quantiles", "mean", "variance", "gini", "interquantile_range", "interquantile_ratio", or "custom".
Default is "quantiles". If "custom" is selected, a <code>custom_rif_function</code> needs to be provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>numeric vector of non-negative observation weights, hence of same length as <code>dep_var</code>.
The default (<code>NULL</code>) is equivalent to <code>weights = rep(1, length(dep_var))</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>probs</code></td>
<td>
<p>a vector of length 1 or more with probabilities of quantiles. Each quantile is indicated with a value between 0 and 1.
Default is <code>c(1:9)/10</code>. If <code>statistic = "quantiles"</code>, a single RIF regression for every quantile in <code>probs</code>
is estimated. An interquantile ratio (range) is defined by the ratio (difference) between the <code>max(probs)</code>-quantile and
the <code>min(probs)</code>-quantile.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>custom_rif_function</code></td>
<td>
<p>the RIF function to compute the RIF of the custom distributional statistic.
Default is NULL. Only needs to be provided if <code>statistic = "custom"</code>.
Every custom_rif_function needs the parameters <code>dep_var</code>, <code>weights</code> and <code>probs</code>.
If they are not needed, they must be set to NULL in the function definition (e.g. <code>probs = NULL</code>).
A custom function must return a data frame containing at least a "rif" and "weights" column.
See <code>examples</code> for further details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.action</code></td>
<td>
<p>generic function that defines how NAs in the data should be handled.
Default is <code>na.omit</code>, leading to exclusion of observations that contain one or more missings.
See na.action for further details.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bootstrap</code></td>
<td>
<p>boolean (default = FALSE) indicating if bootstrapped standard errors will be computed</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bootstrap_iterations</code></td>
<td>
<p>positive integer indicating the number of bootstrap iterations to execute.
Only required if <code>bootstrap = TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cores</code></td>
<td>
<p>positive integer indicating the number of cores to use when computing bootstrapped standard errors.
Only required if <code>bootstrap = TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional parameters passed to the <code>custom_rif_function</code>.
Apart from <code>dep_var</code>, <code>weights</code> and <code>probs</code> they must have a different name than the the ones in
<code>rifreg</code>. For instance, if you want to pass a parameter <code>statistic</code> to the
<code>custom_rif_function</code>, name it <code>custom_statistic</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p><code>rifreg</code> returns an object of <code>class</code> <code>"rifreg"</code>.
</p>
<p>A <code>"rifreg"</code> object is a list containing the following components:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>estimates</code></td>
<td>
<p>a matrix of RIF regression coefficients for each
covariate and the intercept. In case of several quantiles,
coefficient estimates for each quantile are provided.
Equivalent to <code>coef()</code> call of an object of class <code>"lm"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rif_lm</code></td>
<td>
<p>one or several objects of class <code>"lm"</code>,
containing the detailed RIF regression results.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rif</code></td>
<td>
<p>a data frame containing the RIF for each observation. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bootstrap_se</code></td>
<td>
<p>bootstrapped standard errors for each coefficient.
Only provided if <code>bootstrap = TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bootstrap_vcov</code></td>
<td>
<p>the bootstrapped variance-covariance matrix for each coefficient.
Only provided if <code>bootstrap = TRUE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>statistic</code></td>
<td>
<p>the distributional statistic for which the RIF was computed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>custom_rif_function</code></td>
<td>
<p>The custom RIF function in case it was provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>probs</code></td>
<td>
<p>the probabilities of the quantiles that were computed, in case the distributional
statistic requires quantiles.</p>
</td>
</tr>
</table>
<h3>References</h3>

<p>Firpo, Sergio P., Nicole M. Fortin, and Thomas Lemieux. 2009. “Unconditional Quantile
Regressions.” <em>Econometrica</em> 77(3): 953–73.
</p>
<p>Cowell, Frank A., and Emmanuel Flachaire. 2015. “Statistical Methods for Distributional Analysis.”
In Anthony B. Atkinson and François Bourguignon (eds.), <em>Handbook of Income Distribution</em>. Amsterdam: Elsevier.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
rifreg &lt;- rifreg(
  formula = log(wage) ~ union +
    nonwhite +
    married +
    education +
    experience,
  data = men8385,
  statistic = "quantiles",
  weights = weights,
  probs = seq(0.1, 0.9, 0.1),
  bootstrap = FALSE
)


# custom function
custom_variance_function &lt;- function(dep_var, weights, probs = NULL) {
  weighted_mean &lt;- weighted.mean(x = dep_var, w = weights)
  rif &lt;- (dep_var - weighted_mean)^2
  rif &lt;- data.frame(rif, weights)
  names(rif) &lt;- c("rif_variance", "weights")
  return(rif)
}

rifreg &lt;- rifreg(
  formula = log(wage) ~ union + nonwhite + married + education + experience,
  data = men8385,
  statistic = "custom",
  weights = weights,
  probs = NULL,
  custom_rif_function = custom_variance_function,
  bootstrap = FALSE
)

</code></pre>


</div>