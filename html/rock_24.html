<div class="container">

<table style="width: 100%;"><tr>
<td>collapse_occurrences</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Collapse the occurrences in utterances into groups</h2>

<h3>Description</h3>

<p>This function collapses all occurrences into groups
sharing the same identifier, by default the <code>stanzaId</code>
identifier (<code style="white-space: pre;">⁠[[sid=..]]⁠</code>).
</p>


<h3>Usage</h3>

<pre><code class="language-R">collapse_occurrences(
  parsedSource,
  collapseBy = "stanzaId",
  columns = NULL,
  logical = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>parsedSource</code></td>
<td>
<p>The parsed sources as provided by <code>parse_source()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>collapseBy</code></td>
<td>
<p>The column in the <code>sourceDf</code> (in the <code>parsedSource</code> object)
to collapse by (i.e. the column specifying the groups to collapse).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>columns</code></td>
<td>
<p>The columns to collapse; if unspecified (i.e. <code>NULL</code>), all
codes stored in the <code>code</code> object in the <code>codings</code> object in the
<code>parsedSource</code> object are taken (i.e. all used codes in the <code>parsedSource</code>
object).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>logical</code></td>
<td>
<p>Whether to return the counts of the occurrences (<code>FALSE</code>) or
simply whether any code occurreded in the group at all (<code>TRUE</code>).</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A dataframe with one row for each value of of <code>collapseBy</code> and columns
for <code>collapseBy</code> and each of the <code>columns</code>, with in the cells the counts (if
<code>logical</code> is <code>FALSE</code>) or <code>TRUE</code> or <code>FALSE</code> (if <code>logical</code> is <code>TRUE</code>).
</p>


<h3>Examples</h3>

<pre><code class="language-R">### Get path to example source
exampleFile &lt;-
  system.file("extdata", "example-1.rock", package="rock");

### Parse example source
parsedExample &lt;-
  rock::parse_source(exampleFile);

### Collapse logically, using a code (either occurring or not):
collapsedExample &lt;-
  rock::collapse_occurrences(parsedExample,
                             collapseBy = 'childCode1');

### Show result: only two rows left after collapsing,
### because 'childCode1' is either 0 or 1:
collapsedExample;

### Collapse using weights (i.e. count codes in each segment):
collapsedExample &lt;-
  rock::collapse_occurrences(parsedExample,
                             collapseBy = 'childCode1',
                             logical=FALSE);


</code></pre>


</div>