<div class="container">

<table style="width: 100%;"><tr>
<td>read_caim</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Read a canopy image from a file</h2>

<h3>Description</h3>

<p>Wrapper function for <code>terra::rast()</code>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">read_caim(path = NULL, upper_left = NULL, width = NULL, height = NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>path</code></td>
<td>
<p>Character vector of length one. Path to an image, including file
extension. The function will return a data example if no arguments are
provided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>upper_left</code></td>
<td>
<p>An integer vector of length two. The pixels coordinates of
the upper left corner of a region of interest (ROI). These coordinates
should be in the raster coordinates system. This system works like a
spreadsheet, i.e, when going down through the vertical axis, the <em>row</em>
number increases (<strong>IMPORTANT</strong>: column and row must be provided instead of
row and column, as is the norm for objects from the class <em>data.frame</em> and
others alike)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>width, height</code></td>
<td>
<p>An integer vector of length one. The size of the boxy ROI
whose upper left corner is the <code>upper_left</code> argument.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Run <code>read_caim()</code> to obtain an example of a hemispherical photo taken in
non-diffuse light conditions in a <em>Nothofagus pumilio</em> forest with a FC-E9
auxiliary lens attached to a Nikon Coolpix 5700.
</p>
<p>Since this function aims to read born-digital color photographs, RGB-JPEG and
RGB-TIFF are the expected input. However, since this function is a wrapper
for <code>terra::rast()</code>, format compatibility is heritages from it.
</p>
<p>Use <code>upper_left</code>, <code>width</code>, and <code>height</code> to read a particular region from the
file. Although any image editor can be used to obtain those parameters, this
function was tested with <a href="https://imagej.net/ij/">‘ImageJ’</a>, so it might
be wise to use it.
</p>
<p><strong>TIP</strong>: For obtaining <code>upper_left</code>, <code>width</code>, and
<code>height</code>, open the image on the Fiji distro of ImageJ, draw a rectangular
selection, and go to Edit&gt;Selection&gt;Specify. The same workflow may work with
other distros.
</p>


<h3>Value</h3>

<p>An object from class SpatRaster with its layers named
<em>Red</em>, <em>Green</em>, and <em>Blue</em> when a born-digital color
photographs is provided as input.
</p>


<h3>Note</h3>

<p>The example image was obtained with this code:
</p>
<div class="sourceCode"><pre>zenith_colrow &lt;- c(1290, 988)
z &lt;- zenith_image(745*2, lens("Nikon_FCE9"))
a &lt;- azimuth_image(z)
r &lt;- read_caim_raw("DSCN4606.NEF", z, a, zenith_colrow, radius = 300)
z &lt;- zenith_image(ncol(r), lens())
r &lt;- correct_vignetting(r, z, c(0.0638, -0.101))
r &lt;- c(mean(r$Y, r$M), r$G, r$C)
r &lt;- normalize(r, -1)
write_caim(r*2^16-2, "example.tif", 16)
</pre></div>


<h3>See Also</h3>

<p>Other Tool Functions: 
<code>colorfulness()</code>,
<code>correct_vignetting()</code>,
<code>defuzzify()</code>,
<code>extract_dn()</code>,
<code>extract_feature()</code>,
<code>extract_rl()</code>,
<code>extract_sky_points_simple()</code>,
<code>extract_sky_points()</code>,
<code>extract_sun_coord()</code>,
<code>find_sky_pixels_nonnull()</code>,
<code>find_sky_pixels()</code>,
<code>masking()</code>,
<code>optim_normalize()</code>,
<code>percentage_of_clipped_highlights()</code>,
<code>read_bin()</code>,
<code>read_caim_raw()</code>,
<code>write_bin()</code>,
<code>write_caim()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">path &lt;- system.file("external/DSCN4500.JPG", package = "rcaiman")
zenith_colrow &lt;- c(1250, 1020)
diameter &lt;- 745*2
caim &lt;- read_caim(path, zenith_colrow - diameter/2, diameter, diameter)
plot(caim$Blue)
</code></pre>


</div>