<div class="container">

<table style="width: 100%;"><tr>
<td>searchbyterm</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Search by term</h2>

<h3>Description</h3>

<p>Flexible search for records using keywords/terms
</p>


<h3>Usage</h3>

<pre><code class="language-R">searchbyterm(
  ...,
  limit = 1000,
  compact = TRUE,
  messages = TRUE,
  only_dwc = TRUE,
  callopts = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>arguments, must be named, see section <code>Parameters</code> for details.
Multiple inputs to a single parameter are supported, but you have to
construct that string yourself with <code>AND</code> or <code>OR</code> operators; see
examples below.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>limit</code></td>
<td>
<p>(numeric) Limit on the number of records returned. If &gt;1000
results, we use a cursor internally, but you should still get up to the
results you asked for. See also <code>bigsearch()</code> to get larger
result sets in a text file via email.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>compact</code></td>
<td>
<p>(logical) Return a compact data frame</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>messages</code></td>
<td>
<p>(logical) Print progress and information messages.
Default: <code>TRUE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>only_dwc</code></td>
<td>
<p>(logical) whether or not to return only Darwin Core term
fields. Default: <code>TRUE</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>callopts</code></td>
<td>
<p>(named list) Curl arguments passed on to crul::verb-GET</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>searchbyterm()</code> builds a query from input parameters
based on Darwin Core (dwc) terms (for the full list of terms, see
https://code.google.com/p/darwincore/wiki/DarwinCoreTerms).
</p>


<h3>Value</h3>

<p>A list with two slots:
</p>

<ul>
<li>
<p> meta: a named list of metadata for the search results
</p>
</li>
<li>
<p> data: a data frame of search results, columns vary
</p>
</li>
</ul>
<h3>Parameters</h3>

<p>All these parameters can be passed in to <code>searchbyterm()</code>. All others
will be silently dropped.
</p>
<p>See https://github.com/VertNet/webapp/wiki/The-API-search-function
for more details
</p>
<p><strong>taxon</strong>
</p>

<ul>
<li>
<p> kingdom (character) Taxonomic kingdom
</p>
</li>
<li>
<p> phylum (character) Taxonomic phylum
</p>
</li>
<li>
<p> class (character) Taxonomic class
</p>
</li>
<li>
<p> order (character) Taxonomic order
</p>
</li>
<li>
<p> family (character) Taxonomic family
</p>
</li>
<li>
<p> genus (character) Taxonomic genus
</p>
</li>
<li>
<p> specificepithet (character) Taxonomic specific epithet, e.g. (sapiens
in Homo sapiens)
</p>
</li>
<li>
<p> infraspecificepithet (character) Taxonomic infraspecific epithet
</p>
</li>
<li>
<p> scientificname (character) scientific name
</p>
</li>
<li>
<p> vernacularname (character) a verncular name
</p>
</li>
</ul>
<p><strong>event</strong>
</p>

<ul>
<li>
<p> year (numeric) Year or range of years designated by comparison
operators "&lt;", "&gt;", "&lt;=" or "&gt;=". You can pass in more than one of these
queries, in a vector. See example below
</p>
</li>
<li>
<p> month (numeric) month or range of months designated by comparison
operators "&lt;", "&gt;", "&lt;=" or "&gt;=". You can pass in more than one of these
queries, in a vector. See example below
</p>
</li>
<li>
<p> day (numeric) day or range of days designated by comparison
operators "&lt;", "&gt;", "&lt;=" or "&gt;=". You can pass in more than one of these
queries, in a vector. See example below
</p>
</li>
<li>
<p> eventdate Event date associated with this occurrence record; yyyy-mm-dd
or the range yyyy-mm-dd/yyyy-mm-dd (character)
</p>
</li>
</ul>
<p><strong>record level</strong>
</p>

<ul>
<li>
<p> institutioncode (character) Code name for the provider/institution
of record
</p>
</li>
<li>
<p> occurrenceid (character) Provider's unique identifier for this
occurrence record
</p>
</li>
<li>
<p> catalognumber (character) Provider's catalog number or other ID for
this record
</p>
</li>
<li>
<p> collectioncode (character) collection code
</p>
</li>
<li>
<p> license (dcterms:license) license string
</p>
</li>
<li>
<p> iptlicense (eml:intellectualRights) license string
</p>
</li>
<li>
<p> basisofrecord (character) one of PreservedSpecimen, FossilSpecimen,
MaterialSample, Occurrence, MachineObservation, HumanObservation
</p>
</li>
<li>
<p> hasmedia (logical) Record also references associated media, such as a
film or video
</p>
</li>
<li>
<p> isfossil (logical) <code>dwc:basisOfRecord</code> is FossilSpecimen or collection
is a paleo collection
</p>
</li>
<li>
<p> haslicense (logical) <code>dcterms:license</code> or <code>eml:intellectualRights</code> has a
license designated
</p>
</li>
</ul>
<p><strong>identification</strong>
</p>

<ul>
<li>
<p> typestatus (character) a type status
</p>
</li>
<li>
<p> hastypestatus (logical) type status known or not
</p>
</li>
</ul>
<p><strong>occurrence</strong>
</p>

<ul>
<li>
<p> iptrecordid (character) (same as <code>dwc:occurrenceID</code>)
</p>
</li>
<li>
<p> recordedby (character) Collector name
</p>
</li>
<li>
<p> recordnumber (character) record number
</p>
</li>
<li>
<p> fieldnumber (character) field number
</p>
</li>
<li>
<p> establishmentmeans (character) establishment means
</p>
</li>
<li>
<p> wascaptive (logical) (<code>dwc:establishmentMeans</code> or occurrenceRemarks suggests
it was captive)
</p>
</li>
<li>
<p> wasinvasive (logical) (was the organism recorded to be invasive where
and when it occurred)
</p>
</li>
<li>
<p> sex (character) standardized sex from original sex field or extracted
from elsewhere in the record
</p>
</li>
<li>
<p> lifestage (character) lifeStage from original sex field or extracted
from elsewhere in the record
</p>
</li>
<li>
<p> preparations (not sure what this means)
</p>
</li>
<li>
<p> hastissue (logical) Record is likely to reference tissues
</p>
</li>
<li>
<p> reproductivecondition (not sure what this means)
</p>
</li>
</ul>
<p><strong>location</strong>
</p>

<ul>
<li>
<p> continent (character) Continent to search for occurrence
</p>
</li>
<li>
<p> country (character) Country to search for occurrence
</p>
</li>
<li>
<p> stateprovince (character) State or province to search for occurrence
</p>
</li>
<li>
<p> county (character) County to search for occurrence
</p>
</li>
<li>
<p> island (character) Island to search for occurrence
</p>
</li>
<li>
<p> igroup (character) Island group to search for occurrence
</p>
</li>
<li>
<p> municipality (character)
</p>
</li>
<li>
<p> waterbody (character)
</p>
</li>
<li>
<p> geodeticdatum (character)
</p>
</li>
<li>
<p> georeferencedby (character)
</p>
</li>
<li>
<p> georeferenceverificationstatus (character)
</p>
</li>
<li>
<p> location a Google GeoField of the <code>dwc:decimalLatitude</code>,
<code>dwc:decimalLongitude</code>
</p>
</li>
<li>
<p> mappable (logical) Record includes valid coordinates in decimal latitude
and decimal longitude
</p>
</li>
</ul>
<p><strong>geological context</strong>
</p>

<ul>
<li>
<p> bed (character) geological bed
</p>
</li>
<li>
<p> formation (character) geological formation
</p>
</li>
<li>
<p> group (character) geological group
</p>
</li>
<li>
<p> member (character) geological member
</p>
</li>
</ul>
<p><strong>traits</strong>
</p>

<ul>
<li>
<p> haslength (logical) (was a value for length extracted?)
</p>
</li>
<li>
<p> hasmass (logical) (was a value for mass extraccted?)
</p>
</li>
<li>
<p> hassex (logical) (does the record have sex?)
</p>
</li>
<li>
<p> haslifestage (logical) (does the record have life stage?)
</p>
</li>
<li>
<p> lengthtype (character) type of length measurement extracted from the
record, can refer to a number or to a range) ('total length',
'standard length', 'snout-vent length','head-body length', 'fork length',
'total length range', 'standard length range', 'snout-vent length range',
'head-body length range', 'fork length range'
</p>
</li>
<li>
<p> lengthinmm (numeric) length measurement extracted from the record
</p>
</li>
<li>
<p> massing (numeric) mass measurement extracted from the record (For
detailed information about trait extraction and aggregation and querying
via the VertNet portal, see http://vertnet.org/resources/traitsguide.html
</p>
</li>
</ul>
<p><strong>data set</strong>
</p>

<ul>
<li>
<p> gbifdatasetid (character) GBIF identifier for the data set
</p>
</li>
<li>
<p> gbifpublisherid (character) GBIF identifier for the data publishing
organization
</p>
</li>
<li>
<p> lastindexed (character) date (YYYY-MM-DD) the record was most recently
indexed into VertNet
</p>
</li>
<li>
<p> networks (character) one of MaNIS, ORNIS, HerpNET, FishNet, VertNet,
Arctos, Paleo
</p>
</li>
<li>
<p> migrator (character) the version of the migrator used to process the
data set, a date of form (YYYY-MM-DD)
</p>
</li>
<li>
<p> orgcountry (character) the country where the organization is located
</p>
</li>
<li>
<p> orgstateprovince (character) the first-level administrative unit where
the organization is located
</p>
</li>
</ul>
<p><strong>index</strong>
</p>

<ul>
<li>
<p> rank (character) a higher number means the record is more complete
with respect to georeferences, scientific names, and event dates
</p>
</li>
<li>
<p> vntype (character) Type of record; "specimen" or "observation"
</p>
</li>
<li>
<p> hashid (integer) a value to distribute records in 10k bins; 0-9998
</p>
</li>
</ul>
<p><strong>other</strong>
</p>

<ul><li>
<p> coordinateuncertaintyinmeters (character) Coordinate uncertainty
in meters (numeric) or range of uncertainty values designated by
comparison operators "&lt;", "&gt;", "&lt;=", or "&gt;="
</p>
</li></ul>
<h3>No results?</h3>

<p>It's possible to get no results with a call to <code>searchbyterm()</code>,
then run it again 10 seconds later, and you do get a result.
I'm not sure why this is, something having to do with Vertnet's
infrastucture that I'm not aware of. Point is, if you are sure
you haven't made any mistakes with the parameters, etc., then
simply run the function call again.
</p>


<h3>References</h3>

<p>https://github.com/VertNet/webapp/wiki/The-API-search-function
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# Find multiple species
out &lt;- searchbyterm(genus = "ochotona",
  specificepithet = "(princeps OR collaris)", limit=10)

# iptrecordid
searchbyterm(iptrecordid = "7108667e-1483-4d04-b204-6a44a73a5219")

# you can pass more than one, as above, in a single string in parens
records &lt;- "(7108667e-1483-4d04-b204-6a44a73a5219 OR 1efe900e-bde2-45e7-9747-2b2c3e5f36c3)"
searchbyterm(iptrecordid = records, callopts = list(verbose = TRUE))

# Specifying a range (in meters) for uncertainty in spatial location
# (use quotes)
out &lt;- searchbyterm(class = "aves", stateprovince = "nevada", 
  coordinateuncertaintyinmeters = "&lt;25")
out &lt;- searchbyterm(class = "aves", stateprovince = "california", year = 1976,
  coordinateuncertaintyinmeters = "&lt;=1000")

# Specifying records by event date (use quotes)
out &lt;- searchbyterm(class = "aves", stateprovince = "california",
  eventdate = "2009-03-25")
# ...but specifying a date range may not work
out &lt;- searchbyterm(specificepithet = "nigripes",
  eventdate = "1935-09-01/1935-09-30")

# Pass in curl options for curl debugging
out &lt;- searchbyterm(class = "aves", limit = 10,
 callopts = list(verbose = TRUE))

# Use more than one year query
searchbyterm(genus = "mustela", specificepithet = "nigripes",
   year = c('&gt;=1900', '&lt;=1940'))

searchbyterm(sex  = "male", limit = 30)$data$sex
searchbyterm(lifestage  = "juvenile", limit = 30)$data$lifestage

## End(Not run)
</code></pre>


</div>