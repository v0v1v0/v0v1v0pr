<div class="container">

<table style="width: 100%;"><tr>
<td>RaoAUC</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Accumulation function for parametric Rao's index of quadratic entropy (Q)</h2>

<h3>Description</h3>

<p>RaoAUC computes the accumulation function (integral or area under the curve) 
of the parametric version of Rao's index of quadratic entropy (Q) on different 
classes of numeric matrices using a moving window algorithm.
</p>


<h3>Usage</h3>

<pre><code class="language-R">RaoAUC(
  alphas = 1:5,
  x,
  dist_m = "euclidean",
  window = 9,
  method = "classic",
  rasterAUC = TRUE,
  lambda = 0,
  na.tolerance = 1,
  rescale = FALSE,
  diag = TRUE,
  simplify = 0,
  np = 1,
  cluster.type = "SOCK",
  debugging = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>alphas</code></td>
<td>
<p>A continuous vector of alphas in the form start:end over which integrated the parametric Rao's index. 
Default value is 1:5.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>Input data may be a matrix, a Spatial Grid Data Frame, a SpatRaster, or a list of these objects. 
In the latter case, if <code>method="classic"</code> only the first element of the list will be considered.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dist_m</code></td>
<td>
<p>Define the type of distance to be calculated between numerical categories. <code>dist_m</code> can be 
a character string which defines the name of the distance to derive such as "euclidean". 
The distance names allowed are the same as for <code>proxy::dist</code>. Alternatively, <code>dist_m</code> can be 
a function which calculates a user-defined distance, (i.e., <code>function(x,y) {return(cos(y-x)-sin(y-x))}</code>) 
or a matrix of distances. If <code>method="multidimension"</code> then only "euclidean", "manhattan", 
"canberra", "minkowski" and "mahalanobis" can be used. Default value is "euclidean".
If <code>proxy::dist</code> is a matrix then the function will assume that this is the distance matrix, 
and therefore no distance will be derived.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>window</code></td>
<td>
<p>The side of the square moving window, it must be an odd numeric value greater than 1 to ensure that the target pixel is in the centre of the moving window. Default value is 3.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>Currently, there are two ways to calculate the parametric version of Rao's index. 
If <code>method="classic"</code>, then the normal parametric Rao's index will be calculated on a single matrix. 
If <code>method="multidimension"</code> (experimental!) a list of matrices must be provided as input. 
In the latter case, the overall distance matrix will be calculated in a multi- or hyper-dimensional system 
by using the distance measure defined through the function argument <code>dist_m</code>. 
Each pairwise distance is then multiplied by the inverse of the squared number of pixels in the considered 
moving window, and the Rao's Q is finally derived by applying a summation. Default value is <em>"classic"</em>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rasterAUC</code></td>
<td>
<p>Boolean, if TRUE the output will be a SpatRaster object with <em>x</em> as a raster template.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lambda</code></td>
<td>
<p>The value of the lambda of Minkowski's distance. Considered only if <code>dist_m = "minkowski"</code> 
and <code>method="multidimension"</code>. Default value is 0.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>na.tolerance</code></td>
<td>
<p>Numeric value <code class="reqn">(0.0-1.0)</code> which indicates the proportion of NA values that will be 
tolerated to calculate parametric Rao's index in each moving window over <em>x</em>. 
If the relative proportion of NA's in a moving window is bigger than na.tolerance, 
then the value of the window will be set as NA, otherwise Rao's index will be calculated 
considering the non-NA values. Default values are 1.0 (i.e., no tolerance for NA's). Default value is 1.0.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rescale</code></td>
<td>
<p>Boolean. Considered only if <code>method="multidimension"</code>. If TRUE, each element of <code>x</code> 
is rescaled and centred.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>diag</code></td>
<td>
<p>Boolean. If TRUE then the diagonal of the distance matrix is filled with 0's, otherwise with NA's. 
If <code>diag=TRUE</code> and <code>alpha=0</code>, the output matrix will inexorably be composed of 0's.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>simplify</code></td>
<td>
<p>Number of decimal places to be retained to calculate distances in Rao's index. Only if <em>x</em> is floats.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>np</code></td>
<td>
<p>The number of processes (cores) which will be spawned. Default value is 2.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>cluster.type</code></td>
<td>
<p>The type of cluster which will be created. The options are <em>"MPI"</em> (which calls "makeMPIcluster"), 
<em>"FORK"</em> (which calls "makeForkCluster"), and <em>"SOCK"</em> (which calls "makeCluster"). Default type is <em>"SOCK"</em>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>debugging</code></td>
<td>
<p>A boolean variable set to FALSE by default. If TRUE, additional messages will be printed. 
For debugging only.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The accumulation function for the parametric Rao's Index (<code class="reqn">Q</code>) is calculated integrating numerically 
over a range of alphas. *RaoAUC* is therefore equal to <code class="reqn">(\int_{a}^{b} {1\over{N^4}}\cdot{d_{i,j}^{\alpha}})^{1\over{\alpha}} dx</code>. 
Where <em>N</em> is the number of pixels in a moving window, and <em>alpha</em> is a weight assigned to distances.
</p>


<h3>Value</h3>

<p>A matrix of dimension <code>dim(x)</code>. If <code>rasterAUC=TRUE</code>, then the output is a SpatRaster with <em>x</em> as a template.
</p>


<h3>Author(s)</h3>

<p>Matteo Marcantonio <a href="mailto:marcantoniomatteo@gmail.com">marcantoniomatteo@gmail.com</a>
</p>


<h3>References</h3>

<p>Rocchini, D., M. Marcantonio, and C. Ricotta (2017). Measuring Rao’s Q diversity index from remote sensing: 
An open source solution. Ecological Indicators. 72: 234–238.
</p>


<h3>See Also</h3>

<p><code>paRao</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Minimal example; RaoAUC with alphas ranging from 1 to 10
a &lt;- matrix(c(10,10,10,20,20,20,20,30,30), ncol=3, nrow=3)
out &lt;- RaoAUC(alphas=1:10, x=a, window=3, dist_m="euclidean", na.tolerance=1, rasterAUC=TRUE)

</code></pre>


</div>