<div class="container">

<table style="width: 100%;"><tr>
<td>delta.estimate</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>

Calculates treatment effect
</h2>

<h3>Description</h3>


<p>This function calculates the treatment effect estimate, the difference in the average outcome in the treatment group minus the control group. This function is intended to be used for a fully observed continuous outcome. The user can also request a variance estimate, estimated using perturbating-resampling, and a 95% confidence interval. If a confidence interval is requested two versions are provided: a normal approximation based interval and a quantile based interval, both use perturbation-resampling. 
</p>


<h3>Usage</h3>

<pre><code class="language-R">delta.estimate(yone,yzero, var = FALSE, conf.int = FALSE, weight = NULL, 
weight.perturb = NULL)</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>yone</code></td>
<td>


<p>numeric vector; primary outcome for treated observations.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>yzero</code></td>
<td>


<p>numeric vector; primary outcome for control observations.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var</code></td>
<td>


<p>TRUE or FALSE; indicates whether a variance estimate for delta is requested, default is FALSE.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf.int</code></td>
<td>


<p>TRUE or FALSE; indicates whether a 95% confidence interval for delta is requested, default is FALSE.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weight</code></td>
<td>


<p>a n1+n0 by x matrix of weights where n1 = length of yone and n0 = length of yzero, default is null; generally not supplied by use but only used by other functions.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weight.perturb</code></td>
<td>


<p>a n1+n0 by x matrix of weights where n1 = length of yone and n0 = length of yzero, default is null; generally used for confidence interval construction and may be supplied by user.
</p>
</td>
</tr>
</table>
<h3>Details</h3>


<p>Let <code class="reqn">Y^{(1)}</code> and <code class="reqn">Y^{(0)}</code> denote the primary outcome under the treatment and primary outcome under the control,respectively. The treatment effect, <code class="reqn">\Delta</code>, is the expected difference in <code class="reqn">Y^{(1)}</code> compared to <code class="reqn">Y^{(0)}</code>, <code class="reqn"> \Delta=E(Y^{(1)}-Y^{(0)}).</code> We estimate <code class="reqn">\Delta</code> as </p>
<p style="text-align: center;"><code class="reqn">\hat{\Delta}
= n_1^{-1} \sum_{i=1}^{n_1} Y_{1i}  - n_0^{-1} \sum_{i=1}^{n_0}  Y_{0i}</code>
</p>
<p> where <code class="reqn">Y_{1i}</code> is the observed primary outcome for person <code class="reqn">i</code> in the treated group, <code class="reqn">Y_{0i}</code> is the observed primary outcome for person <code class="reqn">i</code> in the control group, and <code class="reqn">n_1</code> and <code class="reqn">n_0</code> are the number of individuals in the treatment and control group, respectively. Randomized treatment assignment is assumed throughout this package.
</p>
<p>Variance estimation and confidence interval construction are performed using perturbation-resampling. Specifically, let <code class="reqn">\left \{ V^{(b)} = (V_{11}^{(b)}, ...V_{1n_1}^{(b)}, V_{01}^{(b)}, ...V_{0n_0}^{(b)})^T, b=1,....,D \right \}</code> be <code class="reqn">n \times D</code> independent copies of a positive random variables <code class="reqn">V</code> from a known distribution with unit mean and unit variance. Let
</p>
<p style="text-align: center;"><code class="reqn">\hat{\Delta}^{(b)}  = \frac{  \sum_{i=1}^{n_1} V_{1i}^{(b)} Y_{1i}}{ \sum_{i=1}^{n_1} V_{1i}^{(b)}}  - \frac{  \sum_{i=1}^{n_0} V_{0i}^{(b)} Y_{0i}}{ \sum_{i=1}^{n_0} V_{0i}^{(b)}}.</code>
</p>
<p>The variance of <code class="reqn">\hat{\Delta}</code> is obtained as the empirical variance of <code class="reqn">\{\hat{\Delta}^{(b)}, b = 1,...,D\}.</code> In this package, we use weights generated from an Exponential(1) distribution and use <code class="reqn">D=500</code>.  We construct two versions of the <code class="reqn">95\%</code> confidence interval for <code class="reqn">\hat{\Delta}</code>: one based on a normal approximation confidence interval using the estimated variance and another taking the 2.5th and 97.5th empirical percentiles of <code class="reqn">\hat{\Delta}^{(b)}</code>.
</p>


<h3>Value</h3>






<p>A list is returned:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>delta </code></td>
<td>
<p>the estimate, <code class="reqn">\hat{\Delta}</code>, described above. </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var </code></td>
<td>
<p>the variance estimate of <code class="reqn">\hat{\Delta}</code>; if var = TRUE or conf.int = TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf.int.normal</code></td>
<td>
<p>a vector of size 2; the 95% confidence interval for <code class="reqn">\hat{\Delta}</code> based on a normal approximation; if conf.int = TRUE.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>conf.int.quantile</code></td>
<td>
<p>a vector of size 2; the 95% confidence interval for <code class="reqn">\hat{\Delta}</code> based on sample quantiles of the perturbed values, described above; if conf.int = TRUE.</p>
</td>
</tr>
</table>
<h3>Author(s)</h3>


<p>Layla Parast
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(d_example)
names(d_example)
delta.estimate(yone=d_example$y1, yzero=d_example$y0)
</code></pre>


</div>