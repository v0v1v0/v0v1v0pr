<div class="container">

<table style="width: 100%;"><tr>
<td>generate_roof</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Generate a 3D roof model</h2>

<h3>Description</h3>

<p>This function generates a 3D roof model from a straight skeleton.
</p>


<h3>Usage</h3>

<pre><code class="language-R">generate_roof(
  skeleton,
  max_height = NA,
  vertical_offset = 0,
  base = FALSE,
  base_height = 0,
  angle = 45,
  sides = FALSE,
  double_sided = FALSE,
  scale_all_max = FALSE,
  swap_yz = TRUE,
  progress = TRUE,
  material = material_list(),
  roof_material = NA,
  verbose = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>skeleton</code></td>
<td>
<p>Default 'NULL'. A straight skeleton generated from the 'skeletonize' function.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_height</code></td>
<td>
<p>Default 'NA'. The maximum height of the roof.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>vertical_offset</code></td>
<td>
<p>Default '0'. The vertical offset of the roof.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>base</code></td>
<td>
<p>Default 'TRUE'. A logical flag that controls whether to generate the bottom of the roof.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>base_height</code></td>
<td>
<p>Default 'vertical_offset'. Height of the base.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>angle</code></td>
<td>
<p>Default '45'. Angle of the roof.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>sides</code></td>
<td>
<p>Default 'FALSE'. A logical flag on whether to draw the sides. This will automatically be set to 'TRUE'
if 'base = TRUE' and the 'base_height' is less than 'vertical_offset'.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>double_sided</code></td>
<td>
<p>Default 'FALSE'. A logical flag that controls whether the polygon should be double-sided.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>scale_all_max</code></td>
<td>
<p>Default 'FALSE'. If passing in a list of multiple skeletons with polygons, whether to scale each polygon to the overall
max height, or whether to scale each max height to the maximum internal distance in the polygon.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>swap_yz</code></td>
<td>
<p>Default 'TRUE'. A logical flag that controls whether to swap the y and z coordinates in the resulting mesh.
If 'TRUE', the y and z coordinates will be swapped.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>progress</code></td>
<td>
<p>Default 'TRUE'. A logical flag to control whether a progress bar is displayed during roof generation.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>material</code></td>
<td>
<p>Default 'material_list()'. Interface to set the color/appearance/material options for the resulting 'ray_mesh' mesh.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>roof_material</code></td>
<td>
<p>Default 'NA', uses the material specified in 'material'. Interface to set the color/appearance/material options for the resulting 'ray_mesh' rooftop mesh.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Default 'FALSE'. A logical flag to control whether additional timing information should be displayed.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A 3D mesh of the roof model.
</p>


<h3>Examples</h3>

<pre><code class="language-R">#Generate vertices and holes
vertices = matrix(c(0,0, 7,0, 7,7, 0,7, 0,0), ncol = 2, byrow = TRUE)-3.5
hole_1 = matrix(c(1,1, 2,1, 2,2, 1,2, 1,1), ncol = 2, byrow = TRUE)[5:1,]-3.5
hole_2 = matrix(c(5,5, 6,5, 6,6, 5,6, 5,5), ncol = 2, byrow = TRUE)[5:1,]-3.5
skeleton = skeletonize(vertices, holes = list(hole_1, hole_2))
if(run_documentation()) {
plot_skeleton(skeleton)
}

#Generate a roof model and specify the material
if(run_documentation()) {
  library(rayrender)
  library(rayvertex)
  roof_model = generate_roof(skeleton, material = material_list(diffuse="purple"))
  scene_base = xz_rect(xwidth=100,zwidth=100,
                       material=diffuse(color="grey20", checkercolor="white")) |&gt;
    add_object(sphere(y=8,z=10,x=-3,material=light(intensity=100))) |&gt;
    add_object(sphere(y=800,z=10,x=-3,radius=100,material=light(intensity=5)))

  raymesh_model(roof_model, override_material = FALSE) |&gt;
    add_object(scene_base) |&gt;
    render_scene(lookfrom=c(10,30,20), sample_method = "sobol_blue",
                 width=800,height=800,fov=0,ortho_dimensions=c(10,10))
}

# Change the maximum height of the roof
if(run_documentation()) {
  roof_model = generate_roof(skeleton, max_height=5)
  raymesh_model(roof_model, material = diffuse(color="purple")) |&gt;
    add_object(scene_base) |&gt;
    render_scene(lookfrom=c(10,30,20), sample_method = "sobol_blue",
                 width=800,height=800,fov=0,ortho_dimensions=c(10,10))
}

#Add a vertical_offset to the roof, without a base
if(run_documentation()) {
  roof_model = generate_roof(skeleton, vertical_offset = 2, base = FALSE)
  raymesh_model(roof_model, material = diffuse(color="purple")) |&gt;
    add_object(scene_base) |&gt;
    render_scene(lookfrom=c(10,10,20), lookat=c(0,2,0), sample_method = "sobol_blue",
                 width=800,height=800,fov=0,ortho_dimensions=c(10,10))
}

# Add a base
if(run_documentation()) {
  roof_model = generate_roof(skeleton, vertical_offset = 2, base = TRUE)
  raymesh_model(roof_model, material = diffuse(color="purple")) |&gt;
    add_object(scene_base) |&gt;
    render_scene(lookfrom=c(10,10,20), lookat=c(0,2,0), sample_method = "sobol_blue",
                 width=800,height=800,fov=0,ortho_dimensions=c(10,10))
}

# Change the base height (note that the vertical_offset is measured from the base, not from zero)
if(run_documentation()) {
  roof_model = generate_roof(skeleton, vertical_offset = 2, base = TRUE, base_height=1)
  raymesh_model(roof_model, material = diffuse(color="purple")) |&gt;
    add_object(scene_base) |&gt;
    render_scene(lookfrom=c(10,10,20), lookat=c(0,2,0), sample_method = "sobol_blue",
                 width=800,height=800,fov=0,ortho_dimensions=c(10,10))
}


# Skeletonize and turn an {sf} object into a roof
if(run_documentation()) {
  us_states = spData::us_states
  cali = us_states[us_states$NAME == "California",]
  cali_skeleton = skeletonize(cali)
  plot_skeleton(cali_skeleton)
  roof_model_cali = generate_roof(cali_skeleton, max_height = 2) |&gt;
    center_mesh() |&gt;
    translate_mesh(c(0,1,0))

  raymesh_model(roof_model_cali, material = diffuse(color="purple")) |&gt;
    add_object(scene_base) |&gt;
    add_object(sphere(x=-10,z=-10,y=4,material=light(color="red", intensity=40))) |&gt;
    add_object(sphere(x=10,z=-10,y=4,material=light(color="orange", intensity=40))) |&gt;
    render_scene(lookfrom=c(0,10,-1), sample_method = "sobol_blue",
                 width=800,height=800,fov=0, ortho_dimensions=c(12,12))
}
</code></pre>


</div>