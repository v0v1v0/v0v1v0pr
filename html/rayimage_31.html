<div class="container">

<table style="width: 100%;"><tr>
<td>render_convolution</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Render Convolution</h2>

<h3>Description</h3>

<p>Takes an image and applys a convolution operation to it, using
a user-supplied or built-in kernel. Edges are calculated by limiting the size
of the kernel to only that overlapping the actual image (renormalizing the
kernel for the edges).
</p>


<h3>Usage</h3>

<pre><code class="language-R">render_convolution(
  image,
  kernel = "gaussian",
  kernel_dim = 11,
  kernel_extent = 3,
  absolute = TRUE,
  min_value = NULL,
  filename = NULL,
  preview = FALSE,
  gamma_correction = FALSE,
  progress = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>image</code></td>
<td>
<p>Image filename or 3-layer RGB array.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>kernel</code></td>
<td>
<p>Default <code>gaussian</code>. By default, an 11x11 Gaussian kernel with a mean
of <code>0</code> and a standard deviation of <code>1</code>, running from <code>-kernel_extent</code> to <code>kernel_extent</code>.
If numeric, this will be the standard deviation of the normal distribution. If a
matrix, it will be used directly as the convolution kernel (but resized always to be an odd number
of columns and rows).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>kernel_dim</code></td>
<td>
<p>Default <code>11</code>. The dimension of the <code>gaussian</code> kernel. Ignored
if user specifies their own kernel.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>kernel_extent</code></td>
<td>
<p>Default <code>3</code>. Extent over which to calculate the kernel.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>absolute</code></td>
<td>
<p>Default <code>TRUE</code>. Whether to take the absolute value of the convolution.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>min_value</code></td>
<td>
<p>Default <code>NULL</code>. If numeric, specifies he minimum value (for any color channel)
for a pixel to have the convolution performed.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filename</code></td>
<td>
<p>Default <code>NULL</code>. The filename of the image to be saved. If this is not given, the image will be plotted instead.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>preview</code></td>
<td>
<p>Default <code>TRUE</code>. Whether to plot the convolved image, or just to return the values.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>gamma_correction</code></td>
<td>
<p>Default <code>TRUE</code>. Controls gamma correction when adding colors. Default exponent of 2.2.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>progress</code></td>
<td>
<p>Default <code>TRUE</code>. Whether to display a progress bar.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>3-layer RGB array of the processed image.
</p>


<h3>Examples</h3>

<pre><code class="language-R">if(run_documentation()){
#Perform a convolution with the default gaussian kernel
plot_image(dragon)
}
if(run_documentation()){
#Perform a convolution with the default gaussian kernel
render_convolution(dragon, preview = TRUE)
}
if(run_documentation()){
#Increase the width of the kernel
render_convolution(dragon, kernel = 2, kernel_dim=21,kernel_extent=6, preview = TRUE)
}
if(run_documentation()){
#Perform edge detection using a edge detection kernel
edge = matrix(c(-1,-1,-1,-1,8,-1,-1,-1,-1),3,3)
render_convolution(render_bw(dragon), kernel = edge, preview = TRUE, absolute=FALSE)
}
if(run_documentation()){
#Perform edge detection with Sobel matrices
sobel1 = matrix(c(1,2,1,0,0,0,-1,-2,-1),3,3)
sobel2 = matrix(c(1,2,1,0,0,0,-1,-2,-1),3,3,byrow=TRUE)
sob1 = render_convolution(render_bw(dragon), kernel = sobel1)
sob2 = render_convolution(render_bw(dragon), kernel = sobel2)
sob_all = sob1 + sob2
plot_image(sob1)
plot_image(sob2)
plot_image(sob_all)
}

if(run_documentation()){
#Only perform the convolution on bright pixels (bloom)
render_convolution(dragon, kernel = 5, kernel_dim=24, kernel_extent=24,
                  min_value=1, preview = TRUE)
}
if(run_documentation()){
#Use a built-in kernel:
render_convolution(dragon, kernel = generate_2d_exponential(falloff=2, dim=31, width=21),
                  preview = TRUE)
}
if(run_documentation()){
#We can also apply this function to matrices:
volcano |&gt; image()
volcano |&gt;
 render_convolution(kernel=generate_2d_gaussian(sd=1,dim=31)) |&gt;
 image()
}
if(run_documentation()){
#Use a custom kernel (in this case, an X shape):
custom = diag(10) + (diag(10)[,10:1])
plot_image(custom)
render_convolution(dragon, kernel = custom, preview = TRUE)
}
</code></pre>


</div>