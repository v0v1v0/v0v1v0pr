<div class="container">

<table style="width: 100%;"><tr>
<td>Response</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Creates Response object</h2>

<h3>Description</h3>

<p>Creates response object.
</p>


<h3>Public fields</h3>

<div class="r6-fields">

<dl>
<dt><code>body</code></dt>
<dd>
<p>Response body.<br>
If it is a named character with a name <code>file</code> or <code>tmpfile</code>
then the value is considered as a path to a file and content oh this file
is served as body. The latter will be deleted once served.</p>
</dd>
<dt><code>content_type</code></dt>
<dd>
<p>Response body content (media) type. Will be translated
to <code>Content-type</code> header.</p>
</dd>
<dt><code>headers</code></dt>
<dd>
<p>Response headers.</p>
</dd>
<dt><code>status_code</code></dt>
<dd>
<p>Response HTTP status code.</p>
</dd>
<dt><code>cookies</code></dt>
<dd>
<p>Response cookies. Will be translated to <code>Set-Cookie</code> headers.</p>
</dd>
<dt><code>context</code></dt>
<dd>
<p>Environment to store any data. Can be used in middlewares.</p>
</dd>
<dt><code>encode</code></dt>
<dd>
<p>Function to encode body for specific content.</p>
</dd>
</dl>
</div>


<h3>Active bindings</h3>

<div class="r6-active-bindings">

<dl>
<dt><code>status</code></dt>
<dd>
<p>Paste together status code and description.</p>
</dd>
</dl>
</div>


<h3>Methods</h3>



<h4>Public methods</h4>


<ul>
<li> <p><a href="#method-Response-new"><code>Response$new()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-reset"><code>Response$reset()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-set_content_type"><code>Response$set_content_type()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-set_status_code"><code>Response$set_status_code()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-has_header"><code>Response$has_header()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-get_header"><code>Response$get_header()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-set_header"><code>Response$set_header()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-delete_header"><code>Response$delete_header()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-append_header"><code>Response$append_header()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-set_date"><code>Response$set_date()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-unset_date"><code>Response$unset_date()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-set_cookie"><code>Response$set_cookie()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-unset_cookie"><code>Response$unset_cookie()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-set_body"><code>Response$set_body()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-set_response"><code>Response$set_response()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-print"><code>Response$print()</code></a>
</p>
</li>
<li> <p><a href="#method-Response-clone"><code>Response$clone()</code></a>
</p>
</li>
</ul>
<hr>
<a id="method-Response-new"></a>



<h4>Method <code>new()</code>
</h4>

<p>Creates Response object
</p>


<h5>Usage</h5>

<div class="r"><pre>Response$new(
  body = NULL,
  content_type = "text/plain",
  headers = list(Server = getOption("RestRserve.headers.server")),
  status_code = 200L,
  encode = NULL,
  ...
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>body</code></dt>
<dd>
<p>Response body.</p>
</dd>
<dt><code>content_type</code></dt>
<dd>
<p>Response body content (media) type.</p>
</dd>
<dt><code>headers</code></dt>
<dd>
<p>Response headers.</p>
</dd>
<dt><code>status_code</code></dt>
<dd>
<p>Response status code.</p>
</dd>
<dt><code>encode</code></dt>
<dd>
<p>Function to encode body for specific content.</p>
</dd>
<dt><code>...</code></dt>
<dd>
<p>Not used at this moment.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-Response-reset"></a>



<h4>Method <code>reset()</code>
</h4>

<p>Resets response object. This is not useful for end user, but useful for
RestRserve internals - resetting R6 class is much faster then initialize it.
</p>


<h5>Usage</h5>

<div class="r"><pre>Response$reset()</pre></div>


<hr>
<a id="method-Response-set_content_type"></a>



<h4>Method <code>set_content_type()</code>
</h4>

<p>Set content type for response body.
</p>


<h5>Usage</h5>

<div class="r"><pre>Response$set_content_type(content_type = "text/plain")</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>content_type</code></dt>
<dd>
<p>Response body content (media) type.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-Response-set_status_code"></a>



<h4>Method <code>set_status_code()</code>
</h4>

<p>Set HTTP status code for response. See <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status">docs on MDN</a>.
</p>


<h5>Usage</h5>

<div class="r"><pre>Response$set_status_code(code)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>code</code></dt>
<dd>
<p>Status code as integer number.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-Response-has_header"></a>



<h4>Method <code>has_header()</code>
</h4>

<p>Determine whether or not the response header exists.
</p>


<h5>Usage</h5>

<div class="r"><pre>Response$has_header(name)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>name</code></dt>
<dd>
<p>Header field name.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>Logical value.
</p>


<hr>
<a id="method-Response-get_header"></a>



<h4>Method <code>get_header()</code>
</h4>

<p>Get HTTP response header value. If requested header is empty returns <code>default</code>.
</p>


<h5>Usage</h5>

<div class="r"><pre>Response$get_header(name, default = NULL)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>name</code></dt>
<dd>
<p>Header field name.</p>
</dd>
<dt><code>default</code></dt>
<dd>
<p>Default value if header does not exists.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>Header field values (character string).
</p>


<hr>
<a id="method-Response-set_header"></a>



<h4>Method <code>set_header()</code>
</h4>

<p>Set HTTP response header. <code>Content-type</code> and <code>Content-length</code> headers not
allowed (use <code>content_type</code> field instead).
</p>


<h5>Usage</h5>

<div class="r"><pre>Response$set_header(name, value)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>name</code></dt>
<dd>
<p>Header field name.</p>
</dd>
<dt><code>value</code></dt>
<dd>
<p>Header field value.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-Response-delete_header"></a>



<h4>Method <code>delete_header()</code>
</h4>

<p>Unset HTTP response header.
</p>


<h5>Usage</h5>

<div class="r"><pre>Response$delete_header(name)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>name</code></dt>
<dd>
<p>Header field name.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>Logical value.
</p>


<hr>
<a id="method-Response-append_header"></a>



<h4>Method <code>append_header()</code>
</h4>

<p>Append HTTP response header. If header exists <code style="white-space: pre;">⁠,⁠</code> separator will be used.
Don't use this method to set cookie (use <code>set_cookie</code> method instead).
</p>


<h5>Usage</h5>

<div class="r"><pre>Response$append_header(name, value)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>name</code></dt>
<dd>
<p>Header field name.</p>
</dd>
<dt><code>value</code></dt>
<dd>
<p>Header field value.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-Response-set_date"></a>



<h4>Method <code>set_date()</code>
</h4>

<p>Set <code>Date</code> HTTP header. See <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Date">docs on MDN</a>.
</p>


<h5>Usage</h5>

<div class="r"><pre>Response$set_date(dtm = Sys.time())</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>dtm</code></dt>
<dd>
<p>POSIXct value.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-Response-unset_date"></a>



<h4>Method <code>unset_date()</code>
</h4>

<p>Unset <code>Date</code> HTTP header.
</p>


<h5>Usage</h5>

<div class="r"><pre>Response$unset_date()</pre></div>



<h5>Returns</h5>

<p>Logical value.
</p>


<hr>
<a id="method-Response-set_cookie"></a>



<h4>Method <code>set_cookie()</code>
</h4>

<p>Set cookie. See <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie">docs on MDN</a>.
</p>


<h5>Usage</h5>

<div class="r"><pre>Response$set_cookie(
  name,
  value,
  expires = NULL,
  max_age = NULL,
  domain = NULL,
  path = NULL,
  secure = NULL,
  http_only = NULL
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>name</code></dt>
<dd>
<p>Cookie name.</p>
</dd>
<dt><code>value</code></dt>
<dd>
<p>Cookie value.</p>
</dd>
<dt><code>expires</code></dt>
<dd>
<p>Cookie expires date and time (POSIXct).</p>
</dd>
<dt><code>max_age</code></dt>
<dd>
<p>Max cookie age (integer).</p>
</dd>
<dt><code>domain</code></dt>
<dd>
<p>Cookie domain.</p>
</dd>
<dt><code>path</code></dt>
<dd>
<p>Cookie path.</p>
</dd>
<dt><code>secure</code></dt>
<dd>
<p>Cookie secure flag.</p>
</dd>
<dt><code>http_only</code></dt>
<dd>
<p>Cookie HTTP only flag.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-Response-unset_cookie"></a>



<h4>Method <code>unset_cookie()</code>
</h4>

<p>Unset cookie with given name.
</p>


<h5>Usage</h5>

<div class="r"><pre>Response$unset_cookie(name)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>name</code></dt>
<dd>
<p>Cookie name.</p>
</dd>
</dl>
</div>



<h5>Returns</h5>

<p>Logical value.
</p>


<hr>
<a id="method-Response-set_body"></a>



<h4>Method <code>set_body()</code>
</h4>

<p>Set response body.
</p>


<h5>Usage</h5>

<div class="r"><pre>Response$set_body(body)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>body</code></dt>
<dd>
<p>Response body.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-Response-set_response"></a>



<h4>Method <code>set_response()</code>
</h4>

<p>Set response fields.
</p>


<h5>Usage</h5>

<div class="r"><pre>Response$set_response(
  status_code,
  body = NULL,
  content_type = self$content_type
)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>status_code</code></dt>
<dd>
<p>Response HTTP status code.</p>
</dd>
<dt><code>body</code></dt>
<dd>
<p>Response body.</p>
</dd>
<dt><code>content_type</code></dt>
<dd>
<p>content_type Response body content (media) type.</p>
</dd>
</dl>
</div>


<hr>
<a id="method-Response-print"></a>



<h4>Method <code>print()</code>
</h4>

<p>Print method.
</p>


<h5>Usage</h5>

<div class="r"><pre>Response$print()</pre></div>


<hr>
<a id="method-Response-clone"></a>



<h4>Method <code>clone()</code>
</h4>

<p>The objects of this class are cloneable with this method.
</p>


<h5>Usage</h5>

<div class="r"><pre>Response$clone(deep = FALSE)</pre></div>



<h5>Arguments</h5>

<div class="arguments">

<dl>
<dt><code>deep</code></dt>
<dd>
<p>Whether to make a deep clone.</p>
</dd>
</dl>
</div>




<h3>See Also</h3>

<p>Request Application
</p>


<h3>Examples</h3>

<pre><code class="language-R"># init response
rs = Response$new()
# set body media type
rs$set_content_type("text/plain")
# set body content
rs$set_body("OK")
# set response status code
rs$set_status_code(200L)
# print response
rs

# init response
rs = Response$new()
# static file path
file_path = system.file("DESCRIPTION", package = "RestRserve")
# get last file modification timestamp
file_mtime = file.mtime(file_path)
# set body
rs$set_body(c("file" = file_path))
# set content type
rs$set_content_type("text/plain")
# set current timestamp
rs$set_date()
# set 'last-modified' header
rs$set_header("Last-Modified", as(file_mtime, "HTTPDate"))
# print response
rs

</code></pre>


</div>