<div class="container">

<table style="width: 100%;"><tr>
<td>setupDiagnosticPlot</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Set up a diagnostic plot for a sequence of regression models</h2>

<h3>Description</h3>

<p>Extract the fitted values and residuals of a sequence of regression models
(such as robust least angle regression models or sparse least trimmed
squares regression models) and other useful information for diagnostic
plots.
</p>


<h3>Usage</h3>

<pre><code class="language-R">setupDiagnosticPlot(object, ...)

## S3 method for class 'seqModel'
setupDiagnosticPlot(object, s = NA, covArgs = list(...), ...)

## S3 method for class 'perrySeqModel'
setupDiagnosticPlot(object, ...)

## S3 method for class 'tslars'
setupDiagnosticPlot(object, p, ...)

## S3 method for class 'sparseLTS'
setupDiagnosticPlot(
  object,
  s = NA,
  fit = c("reweighted", "raw", "both"),
  covArgs = list(...),
  ...
)

## S3 method for class 'perrySparseLTS'
setupDiagnosticPlot(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>the model fit from which to extract information.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>additional arguments to be passed to
<code>covMcd</code> can be specified directly instead of via
<code>covArgs</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>s</code></td>
<td>
<p>for the <code>"seqModel"</code> method, an integer vector giving the
steps of the submodels from which to extract information (the default is to
use the optimal submodel).  For the <code>"sparseLTS"</code> method, an integer
vector giving the indices of the models from which to extract information
(the default is to use the optimal model for each of the requested fits).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>covArgs</code></td>
<td>
<p>a list of arguments to be passed to
<code>covMcd</code> for computing robust Mahalanobis distances.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>p</code></td>
<td>
<p>an integer giving the lag length for which to extract information
(the default is to use the optimal lag length).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fit</code></td>
<td>
<p>a character string specifying from which fit to extract
information.  Possible values are <code>"reweighted"</code> (the default) to
convert the reweighted fit, <code>"raw"</code> to convert the raw fit, or
<code>"both"</code> to convert both fits.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>Note that the argument <code>alpha</code> for controlling the subset size
behaves differently for <code>sparseLTS</code> than for
<code>covMcd</code>.  For <code>sparseLTS</code>, the subset
size <code class="reqn">h</code> is determined by the fraction <code>alpha</code> of the number of
observations <code class="reqn">n</code>.  For <code>covMcd</code>, on the other
hand, the subset size also depends on the number of variables <code class="reqn">p</code> (see
<code>h.alpha.n</code>).  However, the <code>"sparseLTS"</code> and
<code>"perrySparseLTS"</code> methods attempt to compute the MCD using the same
subset size that is used to compute the sparse least trimmed squares
regressions.  This may not be possible if the number of selected variables
is large compared to the number of observations, in which case a warning is
given and <code>NA</code>s are returned for the robust Mahalanobis distances.
</p>


<h3>Value</h3>

<p>An object of class <code>"setupDiagnosticPlot"</code> with the following
components:
</p>

<dl>
<dt><code>data</code></dt>
<dd>
<p>a data frame containing the columns listed below.
</p>

<dl>
<dt><code>step</code></dt>
<dd>
<p>the steps (for the <code>"seqModel"</code> method) or
indices (for the <code>"sparseLTS"</code> method) of the models (only returned
if more than one model is requested).</p>
</dd>
<dt><code>fit</code></dt>
<dd>
<p>the model fits (only returned if both the reweighted
and raw fit are requested in the <code>"sparseLTS"</code> method).</p>
</dd>
<dt><code>index</code></dt>
<dd>
<p>the indices of the observations.</p>
</dd>
<dt><code>fitted</code></dt>
<dd>
<p>the fitted values.</p>
</dd>
<dt><code>residual</code></dt>
<dd>
<p>the standardized residuals.</p>
</dd>
<dt><code>theoretical</code></dt>
<dd>
<p>the corresponding theoretical quantiles from
the standard normal distribution.</p>
</dd>
<dt><code>qqd</code></dt>
<dd>
<p>the absolute distances from a reference line through
the first and third sample and theoretical quartiles.</p>
</dd>
<dt><code>rd</code></dt>
<dd>
<p>the robust Mahalanobis distances computed via the
minimum covariance determinant (MCD) estimator (see
<code>covMcd</code>).</p>
</dd>
<dt><code>xyd</code></dt>
<dd>
<p>the pairwise maxima of the absolute values of the
standardized residuals and the robust Mahalanobis distances, divided by
the respective other outlier detection cutoff point.</p>
</dd>
<dt><code>weight</code></dt>
<dd>
<p>the weights indicating regression outliers.</p>
</dd>
<dt><code>leverage</code></dt>
<dd>
<p>logicals indicating leverage points (i.e.,
outliers in the predictor space).</p>
</dd>
<dt><code>Diagnostics</code></dt>
<dd>
<p>a factor with levels <code>"Potential outlier"</code>
(potential regression outliers) and <code>"Regular observation"</code> (data
points following the model).</p>
</dd>
</dl>
</dd>
<dt><code>qqLine</code></dt>
<dd>
<p>a data frame containing the intercepts and slopes of
the respective reference lines to be displayed in residual Q-Q plots.</p>
</dd>
<dt><code>q</code></dt>
<dd>
<p>a data frame containing the quantiles of the Mahalanobis
distribution used as cutoff points for detecting leverage points.</p>
</dd>
<dt><code>facets</code></dt>
<dd>
<p>default faceting formula for the diagnostic plots
(only returned where applicable).</p>
</dd>
</dl>
<h3>Author(s)</h3>

<p>Andreas Alfons
</p>


<h3>See Also</h3>

<p><code>diagnosticPlot</code>, <code>rlars</code>,
<code>grplars</code>, <code>rgrplars</code>, <code>tslarsP</code>,
<code>rtslarsP</code>, <code>tslars</code>, <code>rtslars</code>,
<code>sparseLTS</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## generate data
# example is not high-dimensional to keep computation time low
library("mvtnorm")
set.seed(1234)  # for reproducibility
n &lt;- 100  # number of observations
p &lt;- 25   # number of variables
beta &lt;- rep.int(c(1, 0), c(5, p-5))  # coefficients
sigma &lt;- 0.5      # controls signal-to-noise ratio
epsilon &lt;- 0.1    # contamination level
Sigma &lt;- 0.5^t(sapply(1:p, function(i, j) abs(i-j), 1:p))
x &lt;- rmvnorm(n, sigma=Sigma)    # predictor matrix
e &lt;- rnorm(n)                   # error terms
i &lt;- 1:ceiling(epsilon*n)       # observations to be contaminated
e[i] &lt;- e[i] + 5                # vertical outliers
y &lt;- c(x %*% beta + sigma * e)  # response
x[i,] &lt;- x[i,] + 5              # bad leverage points


## robust LARS
# fit model
fitRlars &lt;- rlars(x, y, sMax = 10)
# extract information for plotting
setup &lt;- setupDiagnosticPlot(fitRlars)
diagnosticPlot(setup)


## sparse LTS
# fit model
fitSparseLTS &lt;- sparseLTS(x, y, lambda = 0.05, mode = "fraction")
# extract information for plotting
setup1 &lt;- setupDiagnosticPlot(fitSparseLTS)
diagnosticPlot(setup1)
setup2 &lt;- setupDiagnosticPlot(fitSparseLTS, fit = "both")
diagnosticPlot(setup2)
</code></pre>


</div>