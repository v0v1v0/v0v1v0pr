<div class="container">

<table style="width: 100%;"><tr>
<td>ci</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Calculates different type of concentration indexes</h2>

<h3>Description</h3>

<p>This function calculates the relative concentration index (Kakwani et al.), the generalized concentration index (Clarke et al., 2002), the Wagstaff index for bounded variables (Owen et al. 2016), and the concentration index with Erreygers' correction (Erreygers et al., 2009).  It returns an object of class <code>hci</code> for which confidence intervals, summaries and plots are defined.
</p>


<h3>Usage</h3>

<pre><code class="language-R">ci(
  ineqvar,
  outcome,
  weights = NULL,
  type = c("CI", "CIg", "CIc", "CIw"),
  method = c("linreg_delta", "linreg_convenience", "cov_convenience", "direct"),
  df_correction = TRUE,
  robust_se = FALSE,
  rse_type = "HC3"
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>ineqvar</code></td>
<td>
<p>Used for ranking, usually relates to the socioeconomic position, for example income.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>outcome</code></td>
<td>
<p>The variable in which the inequality should be measures, for example health.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>weights</code></td>
<td>
<p>Optional, used to weigh the observations. Defaults to equal weights for all observations.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>type</code></td>
<td>
<p>Character, the type of concentration index to be calculated: relative concentration index (<code>CI</code>, default), generalized concentration index (<code>CIg</code>), concentration index with Erreygers Correction <code>CIc</code>, or Wagstaff concentration index suitable for bounded and binary outcomes <code>CIw</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>method</code></td>
<td>
<p>Character, defines the calculation method. One of:
</p>

<ul>
<li> <p><code>linreg_delta</code>: Based on linear regression without transforming the left hand side variable. Computes correct standard errors that take into account the sampling variability of the estimate of the mean (O’Donnell et al. 2008, Owen et al. 2016)
</p>
</li>
<li> <p><code>linreg_convenience</code>): Based on simpler regression with transformed left hand side variable. Standard errors do not take into account thee sampling variability of the estimate of the mean(O’Donnell et al. 2008, Owen et al. 2016)
</p>
</li>
<li> <p><code>cov_convenience</code>: Based on covariance. Equivalent to <code>linreg_convenience</code> (O’Donnell et al. 2008, Owen et al. 2016)
</p>
</li>
<li> <p><code>direct</code>: Using direct formula, standard errors do no take weighting appropriately into account  (O’Donnell et al. 2008, Kakwani et al. 1997)
</p>
</li>
</ul>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>df_correction</code></td>
<td>
<p>If <code>TRUE</code> (default), calculates the concentration index based on the population variance (derived from the sample variance).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>robust_se</code></td>
<td>
<p>Uses robust standard errors if <code>TRUE</code>. Only available for the <code style="white-space: pre;">⁠linreg_*⁠</code> type methods. Requires the <code>sandwich</code> package.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rse_type</code></td>
<td>
<p>Character, type argument for the <code>vcovHC()</code>. <code>HC3</code>' is suggested as default, set to <code>HC1</code> for Stata compatibility. See <code>?sandwich::vcovHC()</code> for options.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An  S3 object of class <code>hci</code>. Contains:
</p>

<ul>
<li> <p><code>concentration_index</code> The concentration index
</p>
</li>
<li> <p><code>type</code> The type
</p>
</li>
<li> <p><code>method</code> The method used for calculation
</p>
</li>
<li> <p><code>variance</code> The variance,used for calculation of confidence intervals
</p>
</li>
<li> <p><code>fractional_rank</code> Computed fractional rank <code>NA</code>
</p>
</li>
<li> <p><code>outcome</code> Outcome after removing <code>NA</code>
</p>
</li>
<li> <p><code>call</code> Call signature
</p>
</li>
<li> <p><code>n</code> Number of observations after removing <code>NA</code>
</p>
</li>
<li> <p><code>robust_se</code> Were robust standard errors calculated?
</p>
</li>
<li> <p><code>rse_type</code> Type of robust standard errors.
</p>
</li>
<li> <p><code>df_correction</code> Do the degrees of freedom correspond to a sample?
</p>
</li>
</ul>
<h3>References</h3>

<p>Clarke, P. M., Gerdtham, U. G., Johannesson, M., Bingefors, K., &amp; Smith, L. (2002). On the measurement of relative and absolute income-related health inequality. Social Science &amp; Medicine, 55(11), 1923-1928
</p>
<p>Erreygers, G. (2009). Correcting the concentration index. Journal of health economics, 28(2), 504-515
</p>
<p>Kakwani, N., Wagstaff, A., &amp; Van Doorslaer, E. (1997). Socioeconomic inequalities in health: measurement, computation, and statistical inference. Journal of econometrics, 77(1), 87-103.
</p>
<p>O'Donnel, O., O'Neill S., Van Ourti T., &amp; Walsh B. (2016). Conindex: Estimation of Concentration Indices. The Stata Journal 16(1): 112-138.
</p>
<p>O’Donnell, O., Van Doorslaer, E. , Wagstaff, A., Lindelow, M., 2008. Analyzing Health Equity Using Household Survey Data: A Guide to Techniques and Their Implementation, World Bank Publications. The World Bank.
</p>


<h3>Examples</h3>

<pre><code class="language-R"># Direct
data(housing)
ci.bmi &lt;- ci(ineqvar = housing$income, outcome = housing$bmi, method = "direct")
summary(ci.bmi)

# retrieve value
ci.bmi$concentration_index

# obtain confidence intervals
confint(ci.bmi, level = 0.95) 

plot(ci.bmi)

# Wagstaff type with binary outcome and robust standard errors 
# that should correspond to Stata (depends on 'sandwich'):


ci.bmi.b &lt;- ci(housing$income, housing$high.bmi, type = "CIw", robust_se = TRUE, 
   rse_type = "HC1")

</code></pre>


</div>