<div class="container">

<table style="width: 100%;"><tr>
<td>xy2segvert</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Convert XY Coordinates to River Locations</h2>

<h3>Description</h3>

<p>This function determines the closest vertex in the river network
to each point of XY data and returns a list of river locations, defined 
as segment numbers and vertex numbers.
</p>


<h3>Usage</h3>

<pre><code class="language-R">xy2segvert(x, y, rivers)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p>A vector of x-coordinates to transform</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>y</code></td>
<td>
<p>A vector of y-coordinates to transform</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>rivers</code></td>
<td>
<p>The river network object to use</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>A data frame of river locations, with segment numbers in <code>$seg</code>, 
vertex numbers in <code>$vert</code>, and the snapping distance for each point in 
<code>$snapdist</code>.
</p>


<h3>Note</h3>

<p>Conversion to river locations is only valid if the input XY 
coordinates and river network are in the same projected coordinate system. 
Point data in geographic coordinates can be projected using 
sf_project in package 'sf', and an example is shown below.
</p>


<h3>Author(s)</h3>

<p>Matt Tyers
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(Gulk,fakefish)
head(fakefish)

fakefish.riv &lt;- xy2segvert(x=fakefish$x, y=fakefish$y, rivers=Gulk)
head(fakefish.riv)

plot(x=Gulk, xlim=c(862000,882000), ylim=c(6978000,6993000))
points(fakefish$x, fakefish$y, pch=16, col=2)
riverpoints(seg=fakefish.riv$seg, vert=fakefish.riv$vert, rivers=Gulk, pch=15, col=4)


## converting a matrix of points stored in long-lat to Alaska Albers Equal Area:
data(line98, Kenai1)
head(line98)  # note that coordinates are stored in long-lat, NOT lat-long

line98albers &lt;- sf::sf_project(pts=line98, to="+proj=aea +lat_1=55 +lat_2=65 
    +lat_0=50 +lon_0=-154 +x_0=0 +y_0=0 +datum=NAD83 +units=m +no_defs 
    +ellps=GRS80")
head(line98albers)

zoomtoseg(seg=c(162,19), rivers=Kenai1)
points(line98albers)
</code></pre>


</div>