<div class="container">

<table style="width: 100%;"><tr>
<td>csu_ageSpecific_top</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>csu_ageSpecific_top</h2>

<h3>Description</h3>

<p><code>csu_ageSpecific_top</code> calculate and plot Age-Specific Rate for the top X cancer or top X population.
</p>


<h3>Usage</h3>

<pre><code class="language-R">csu_ageSpecific_top(df_data,
           var_age="age",
       	   var_cases="cases",
           var_py="py",
           var_top, 
           group_by=NULL,
           missing_age=NULL,
           db_rate = 100000,
           logscale = FALSE,
           nb_top = 5,
           plot_title=NULL,
           plot_subtitle=NULL,
           var_color=NULL)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df_data</code></td>
<td>

<p>Data (need to be R <code>data.frame</code> format, see example to import csv file).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var_age</code></td>
<td>

<p>Age variable. Several format are accepted 
</p>

<table>
<tr>
<td style="text-align: left;">
			1 </td>
<td style="text-align: left;"> "0-4" </td>
<td style="text-align: left;"> 0 </td>
</tr>
<tr>
<td style="text-align: left;">
			2 </td>
<td style="text-align: left;"> "5-9" </td>
<td style="text-align: left;"> 5 </td>
</tr>
<tr>
<td style="text-align: left;">
			3 </td>
<td style="text-align: left;"> "10-14" </td>
<td style="text-align: left;"> 10 </td>
</tr>
<tr>
<td style="text-align: left;">
			... </td>
<td style="text-align: left;"> ... </td>
<td style="text-align: left;"> ... </td>
</tr>
<tr>
<td style="text-align: left;">
			17 </td>
<td style="text-align: left;"> "80-84" </td>
<td style="text-align: left;"> 80 </td>
</tr>
<tr>
<td style="text-align: left;">
			18 </td>
<td style="text-align: left;"> "85+" </td>
<td style="text-align: left;"> 85 </td>
</tr>
<tr>
<td style="text-align: left;">
		</td>
</tr>
</table>
<p>Missing age value must be precise in the option <code>missing_age</code>.<br>
Last age group will always be considere without size (ie: 80+,85+, etc..). 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var_cases</code></td>
<td>

<p>Number of event (cases, deaths, ...) variable.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var_py</code></td>
<td>

<p>Population year variable.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var_top</code></td>
<td>

<p>Cancer label variable or country/registry variable for example.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group_by</code></td>
<td>

<p>Variable to compare different age specific rate (sex, registry ...).<br>
Only one variable can be chosen.
One graph will be produce per variable.
If the variable is a factor, the labels associate to the variable will be the subtitle of the plot.
See <code>factor</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>missing_age</code></td>
<td>

<p>Age value representing the missing age cases.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>db_rate</code></td>
<td>

<p>The denominator population. Default is 100000.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>logscale</code></td>
<td>

<p>Logical value: if <code>TRUE</code> Y-axis use logscale.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>nb_top</code></td>
<td>

<p>Lowest Rank include. Default is 5.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot_title</code></td>
<td>

<p>Title of the plot.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>plot_subtitle</code></td>
<td>

<p>Subtitle of the plot. (For example, "Top 5 cancer").
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var_color</code></td>
<td>

<p>Variable with a color associate to each cancer.<br>
The color codes are hexadecimal (e.g. "#FF0000") or predefined R color names (e.g. "red").<br>
This allow to keep the same color coding for each graph.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function keep only the top X cancer and plot their age specific rate.
The <code>group_by</code> option allow to compare different population. 
If the population data stops before 85+ (75+ for instance), the population data <b>must</b> be 0 when the population data is unknown so, the program can detect automatically the last age group (70+,75+,80+ or 85+) for population.
</p>


<h3>Value</h3>

<p>Return plots and a <code>data.frame</code>.
</p>


<h3>Author(s)</h3>

<p>Mathieu Laversanne
</p>


<h3>References</h3>

<p><a href="https://publications.iarc.fr/_publications/media/download/3753/609d0d7711047dd76d7f3dbaa25d7f041fcd013e.pdf">https://publications.iarc.fr/_publications/media/download/3753/609d0d7711047dd76d7f3dbaa25d7f041fcd013e.pdf</a>
</p>


<h3>See Also</h3>

<p><code>csu_group_cases</code>
<code>csu_merge_cases_pop</code>
<code>csu_asr</code>
<code>csu_cumrisk</code>
<code>csu_eapc</code>
<code>csu_ageSpecific</code>
<code>csu_bar_top</code>
<code>csu_time_trend</code>
<code>csu_trendCohortPeriod</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(Rcan)
data("csu_CI5XII_data")

#get the id_code asssociate to id_label
#print(unique(csu_CI5XII_data[,c("id_label", "id_code")]),nrows = 1000)

#get the cancer code asssociate to cancer_label
#print(unique(csu_CI5XII_data[,c("cancer_label", "cancer_code")]),nrows = 1000)

#remove all cancers:
df_data &lt;- subset(csu_CI5XII_data ,cancer_code &lt; 62)
df_data$sex &lt;- factor(df_data$sex, levels=c(1,2), labels=c("Male", "Female"))

#select Thailand changmai
df_data_1 &lt;- subset(df_data, id_code==476400199)


# plot for Thailand Changmai
dt_result_1 &lt;- 
	csu_ageSpecific_top(df_data_1,
		var_age="age", 
		var_cases="cases", 
		var_py="py",
		var_top="cancer_label", 
		group_by="sex", 
		plot_title= "Thailand, Chiangmai",
		plot_subtitle = "Top 5 cancer",
		missing_age = 19)



	#select USAm NPCR
	df_data_2 &lt;- subset(df_data,id_code== 384008099)


	# plot for USA NPCR
	dt_result_2 &lt;- 
		csu_ageSpecific_top(
			df_data_2,
			var_age="age", 
			var_cases="cases", 
			var_py="py",
			var_top="cancer_label", 
			group_by="sex", 
			plot_title= "USA",
			plot_subtitle = "Top 5 cancer",
			missing_age = 19
			)




	
</code></pre>


</div>