<div class="container">

<table style="width: 100%;"><tr>
<td>expand_noncircular</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Expand non-circular</h2>

<h3>Description</h3>

<p>Expand a non-circular hemispherical photograph.
</p>


<h3>Usage</h3>

<pre><code class="language-R">expand_noncircular(caim, z, zenith_colrow)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>caim</code></td>
<td>
<p>SpatRaster. The return of a call to <code>read_caim()</code> or
<code>read_caim_raw()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>z</code></td>
<td>
<p>SpatRaster built with <code>zenith_image()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>zenith_colrow</code></td>
<td>
<p>Numeric vector of length two. Raster coordinates of the
zenith. See <code>calc_zenith_colrow()</code>.</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>An object of class SpatRaster that is the result of adding
margins (<code>NA</code> pixels) to <code>caim</code>. The zenith point depicted in the picture
should be in the center of the image or very close to it.
</p>


<h3>See Also</h3>

<p>Other Lens Functions: 
<code>azimuth_image()</code>,
<code>calc_diameter()</code>,
<code>calc_relative_radius()</code>,
<code>calc_zenith_colrow()</code>,
<code>calibrate_lens()</code>,
<code>crosscalibrate_lens()</code>,
<code>extract_radiometry()</code>,
<code>fisheye_to_equidistant()</code>,
<code>fisheye_to_pano()</code>,
<code>lens()</code>,
<code>test_lens_coef()</code>,
<code>zenith_image()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 

 # ====================================================================
 # Non-circular Fisheye images from a Smartphone with an Auxiliary Lens
 # (Also applicable to Non-circular images from DSLR cameras)
 # ====================================================================

 path &lt;- system.file("external/APC_0581.jpg", package = "rcaiman")
 caim &lt;- read_caim(path)
 z &lt;- zenith_image(2132/2,  c(0.7836, 0.1512, -0.1558))
 a &lt;- azimuth_image(z)
 zenith_colrow &lt;- c(1063, 771)/2
 caim &lt;- expand_noncircular(caim, z, zenith_colrow)
 plot(caim$Blue, col = seq(0,1,1/255) %&gt;% grey())
 m &lt;- !is.na(caim$Red) &amp; !is.na(z)
 plot(m, add = TRUE, alpha = 0.3, legend = FALSE)


 # ============================
 # Restricted View Canopy Photo
 # ============================

 path &lt;- system.file("external/APC_0020.jpg", package = "rcaiman")
 caim &lt;- read_caim(path)
 plot(caim)
 caim &lt;- normalize(caim)
 diameter &lt;- calc_diameter(lens(), sqrt(nrow(caim)^2 + ncol(caim)^2)/2, 90)
 z &lt;- zenith_image(diameter, lens())
 caim &lt;- expand_noncircular(caim, z, c(ncol(caim)/2, nrow(caim)/2))
 m &lt;- !is.na(caim$Red)
 a &lt;- azimuth_image(z)
 caim[!m] &lt;- 0
 z &lt;- normalize(z, 0, 90) * 30.15 #60.3ยบ diagonal FOV according to metadata
 plot(caim$Blue, col = seq(0,1,1/255) %&gt;% grey())
 m &lt;- !is.na(caim$Red) &amp; !is.na(z)
 plot(m, add = TRUE, alpha = 0.3, legend = FALSE)

## End(Not run)
</code></pre>


</div>