<div class="container">

<table style="width: 100%;"><tr>
<td>cmaEvalMeanX</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Evaluate the meanX of the current population.</h2>

<h3>Description</h3>

<p>After executing <code>cmaOptimDP</code>, there is a current population and a best-ever solution.
Evaluate for the mean of the current population whether it is feasible and whether
the mean is an even better solution. If so, update the best-ever solution.
</p>


<h3>Usage</h3>

<pre><code class="language-R">cmaEvalMeanX(cma, fitFunc, isFeasible = function(x) TRUE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>cma</code></td>
<td>
<p>CMA-ES Java object, already initialized with <code>cmaInit</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fitFunc</code></td>
<td>
<p>a function to be minimized. Signature: accepts a vector x, returns a double.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>isFeasible</code></td>
<td>
<p>[<code>function(x){TRUE}</code>] a Boolean function checking the feasibility
of the vector <code>x</code>. The default is to return always <code>TRUE</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>The code of this function is also instructive as a full example for the extensibility of the
<a href="http://cran.r-project.org/web/packages/rJava/index.html"><code>rJava</code></a>
interface to CMA-ES. See the full code in <code>demo/demoEvalMeanX</code>. Some example <code>rJava</code>-calls are:
</p>
<pre>
   rJava::.jcall(cma,"[D","getMeanX");
   bestSolutionObj =
     rJava::.jcall(cma,"Lfr/inria/optimization/cmaes/CMASolution;","setFitnessOfMeanX",fitFunc(meanX));
   rJava::.jcall(bestSolutionObj,"J","getEvaluationNumber");
</pre>
<p>Every direct method of classes in the CMA-ES Java package <code>cmaes</code> (see [Hansen09] for the complete Javadoc
and [Hansen13] for an overview on CMA-ES in total) can be accessed with the <code>.jcall</code>-mechanism
of the <a href="http://cran.r-project.org/web/packages/rJava/index.html"><code>rJava</code></a> R package:
</p>
<pre>
     rJava::.jcall(obj,returnType,method,...)
</pre>
<p>where <code>...</code> stands for the calling parameter(s) of <code>method</code>. <br><code>returnType</code> is a string following the JNI type convention (see, e.g. [Oracle14])
</p>

<table>
<tr>
<td style="text-align: center;">
     </td>
<td style="text-align: center;"> Field Descriptor </td>
<td style="text-align: center;">  Java Language Type  </td>
</tr>
<tr>
<td style="text-align: center;">
     </td>
<td style="text-align: center;">       Z          </td>
<td style="text-align: center;">  boolean  </td>
</tr>
<tr>
<td style="text-align: center;">
     </td>
<td style="text-align: center;">       C          </td>
<td style="text-align: center;">  char  </td>
</tr>
<tr>
<td style="text-align: center;">
     </td>
<td style="text-align: center;">       I          </td>
<td style="text-align: center;">  int  </td>
</tr>
<tr>
<td style="text-align: center;">
     </td>
<td style="text-align: center;">       J          </td>
<td style="text-align: center;">  long  </td>
</tr>
<tr>
<td style="text-align: center;">
     </td>
<td style="text-align: center;">       F          </td>
<td style="text-align: center;">  float  </td>
</tr>
<tr>
<td style="text-align: center;">
     </td>
<td style="text-align: center;">       D          </td>
<td style="text-align: center;">  double  </td>
</tr>
<tr>
<td style="text-align: center;">
     </td>
<td style="text-align: center;">      [I          </td>
<td style="text-align: center;">  int[]  </td>
</tr>
<tr>
<td style="text-align: center;">
     </td>
<td style="text-align: center;">     [[D          </td>
<td style="text-align: center;">  double[][]  </td>
</tr>
<tr>
<td style="text-align: center;">
     </td>
<td style="text-align: center;"> Ljava/langString;</td>
<td style="text-align: center;">  java.lang.String  </td>
</tr>
<tr>
<td style="text-align: center;">
     </td>
<td style="text-align: center;">       S          </td>
<td style="text-align: center;">  java.lang.String  </td>
</tr>
<tr>
<td style="text-align: center;">
     </td>
<td style="text-align: center;">       T          </td>
<td style="text-align: center;">  short  </td>
</tr>
<tr>
<td style="text-align: center;">
   </td>
</tr>
</table>
<p>(Note: (a) the terminating <code>";"</code> in <code>"Ljava/langString;"</code> (!) and (b) <code>"S"</code> is a short hand for <code>"Ljava/langString;"</code> and
<code>"T"</code> is the re-mapped code for <code>short</code>. ) <br><br>
The calling parameters in <code>...</code> have to be matched exactly. In R, numeric vectors are stored as <code>doubles</code>, so the calling syntax
</p>
<pre>
          bestSolutionObj = .jcall(cma,rType,"setFitnessOfMeanX",fitFunc(meanX));
</pre>
<p>is just right for the Java method <code>setFitnessOfMeanX(double[]) </code>. In other cases, the calling R variable <code>x</code>
has to be cast explicitly:
</p>

<table>
<tr>
<td style="text-align: center;">
     </td>
<td style="text-align: center;">     Cast         </td>
<td style="text-align: center;">  Java Language Type  </td>
</tr>
<tr>
<td style="text-align: center;">
     </td>
<td style="text-align: center;">   .jbyte(x)      </td>
<td style="text-align: center;">  byte  </td>
</tr>
<tr>
<td style="text-align: center;">
     </td>
<td style="text-align: center;">   .jchar(x)      </td>
<td style="text-align: center;">  char  </td>
</tr>
<tr>
<td style="text-align: center;">
     </td>
<td style="text-align: center;">  as.integer(x)   </td>
<td style="text-align: center;">  int  </td>
</tr>
<tr>
<td style="text-align: center;">
     </td>
<td style="text-align: center;">   .jlong(x)      </td>
<td style="text-align: center;">  long  </td>
</tr>
<tr>
<td style="text-align: center;">
     </td>
<td style="text-align: center;">   .jfloat(x)     </td>
<td style="text-align: center;">  float  </td>
</tr>
<tr>
<td style="text-align: center;">
   </td>
</tr>
</table>
<h3>Value</h3>

<p><code>bestSolution</code>, a list with entries:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>bestX</code></td>
<td>
<p>  a vector of length <code>dimension</code> containing the best-ever
solution, including <code>meanX</code>  </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>meanX</code></td>
<td>
<p>  a vector of length <code>dimension</code> containing the mean of
the current (last) population in <code>cma</code> </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bestFitness</code></td>
<td>
<p>  the best-ever fitness value, including the evaluation of meanX  </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>bestEvalNum</code></td>
<td>
<p>  the function evaluation count where <code>bestFitness</code> occured  </p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lastEvalNum</code></td>
<td>
<p>  the total function evaluation count. If <code>bestEvalNum==lastEvalNum</code>
then the best-ever fitness occured in the evaluation of <code>meanX</code>.  </p>
</td>
</tr>
</table>
<h3>Author(s)</h3>

<p>Wolfgang Konen, FHK, 2013-2015
</p>


<h3>References</h3>

<p>[Hansen09] <a href="https://www.lri.fr/~hansen/javadoc">https://www.lri.fr/~hansen/javadoc</a> Nikolaus Hansen: Javadoc for CMA-ES Java package fr.inria.optimization.cmaes, 2009.  <br>
[Hansen13] <a href="https://www.lri.fr/~hansen/cmaesintro.html">https://www.lri.fr/~hansen/cmaesintro.html</a> Nikolaus Hansen: The CMA Evolution Strategy, 2013. <br>
[Oracle14] <a href="http://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/jniTOC.html">http://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/jniTOC.html</a>
Oracle: The Java Native Interface. Programmer's Guide and Specification.
Chapter 3 (JNI types), Sec. 'Type Signatures', 2014.
</p>


<h3>See Also</h3>

<p><code>cmaInit</code>, <code>cmaOptimDP</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
   ## just to show the syntax, without calling cmaOptimDP
   fitFunc &lt;- function(x) {  sum(x*x); }
   isFeasible &lt;- function(x) {  TRUE;  }
   cma &lt;- cmaNew(propFile="CMAEvolutionStrategy.properties");
   cmaInit(cma,dimension=2,initialX=1.5);
   bestSolution=cmaEvalMeanX(cma,fitFunc,isFeasible);
   str(bestSolution);
   
## End(Not run)
</code></pre>


</div>