<div class="container">

<table style="width: 100%;"><tr>
<td>get_nih_data</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>get_nih_data</h2>

<h3>Description</h3>

<p>Easily send a pre-made JSON request to NIH RePORTER Project API,
retrieve and process the results
</p>


<h3>Usage</h3>

<pre><code class="language-R">get_nih_data(
  query,
  max_pages = NULL,
  flatten_result = FALSE,
  return_meta = FALSE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>query</code></td>
<td>
<p>A valid JSON request formatted for the RePORTER Project API, as returned
by the <code>make_req</code> method</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>max_pages</code></td>
<td>
<p>numeric(1); default: NULL; An integer specifying to only fetch (up to)
the first <code>max_pages</code> number of pages from the result set. Useful for testing your
query/obtaining schema information. Default behavior is to fetch all pages.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>flatten_result</code></td>
<td>
<p>(default: FALSE) If TRUE, flatten nested dataframes and collapse nested
vectors to a single character column with elements delimited by a semi-colon</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return_meta</code></td>
<td>
<p>(default: FALSE) If TRUE, will return a <code>list</code> containing your result
set as well as the meta data - this includes a count of total projects matching
your query and can be useful for programming.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>A request to the RePORTER Project API requires retrieving paginated results,
combining them, and often flattening the combined ragged data.frame to a familiar flat
format which we can use in analyses. This method handles all of that for you.
</p>


<h3>Value</h3>

<p>When <code>return_meta = FALSE</code>: a <code>tibble</code> containing your result set
(up to API max of 10,000 records); else if <code>include_meta = TRUE</code>, a named list 
containing the result set and the metadata from the initial API response.
</p>
<p>If an API error occurs, this method will print an informative message and return <code>NA</code>.
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(repoRter.nih)

## make the usual request
req &lt;- make_req(criteria = 
                    list(advanced_text_search = 
                        list(operator = "Or",
                             search_field = "all",
                             search_text = "sarcoidosis lupus") ),
                 message = FALSE)

## get the data ragged
## Not run: 
res &lt;- get_nih_data(req,
                    max_pages = 1)

## get the data flattened
res_flattened &lt;- get_nih_data(req,
                              flatten_result = TRUE,
                              max_pages = 1)

## End(Not run)

</code></pre>


</div>