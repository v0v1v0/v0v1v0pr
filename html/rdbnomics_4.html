<div class="container">

<table style="width: 100%;"><tr>
<td>rdb_by_api_link</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Download DBnomics data using API link (deprecated).</h2>

<h3>Description</h3>

<p><code>rdb_by_api_link</code> downloads data series from
<a href="https://db.nomics.world/">DBnomics</a>.
</p>


<h3>Usage</h3>

<pre><code class="language-R">rdb_by_api_link(
  api_link,
  use_readLines = getOption("rdbnomics.use_readLines"),
  curl_config = getOption("rdbnomics.curl_config"),
  filters = getOption("rdbnomics.filters")
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>api_link</code></td>
<td>
<p>Character string. DBnomics API link of the search.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>use_readLines</code></td>
<td>
<p>Logical (default <code>FALSE</code>). If <code>TRUE</code>, then
the data are requested and read with the base function <code>readLines</code> i.e.
through the default R internet connection. This can be used to get round the
error <code>Could not resolve host: api.db.nomics.world</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>curl_config</code></td>
<td>
<p>Named list (default <code>NULL</code>). If not
<code>NULL</code>, it is used to configure a proxy connection. This
configuration is passed to the function <code>curl_fetch_memory</code> of the package
<span class="pkg">curl</span>. A temporary <code>curl_handle</code> object is created internally
with arguments equal to the provided list in <code>curl_config</code>.<br>
For <code>curl_fetch_memory</code> arguments see <code>curl_fetch</code>.
For available curl options see <code>curl_options</code>,
<code>names(curl_options())</code> and
<a href="https://curl.haxx.se/libcurl/c/curl_easy_setopt.html">libcurl</a>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>filters</code></td>
<td>
<p>List (default <code>NULL</code>). This argument must be a named
list for one filter because the function <code>toJSON</code> of the package <span class="pkg">jsonlite</span>
is used before sending the request to the server. For multiple filters,
you have to provide a list of valid filters (see examples).<br>
A valid filter is a named list with an element <code>code</code> which is a character string,
and an element <code>parameters</code> which is a named list with elements <code>frequency</code>
and <code>method</code> or a NULL.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function gives you access to hundreds of millions data series from
<a href="https://api.db.nomics.world/">DBnomics API</a> (documentation about
the API can be found <a href="https://api.db.nomics.world/v22/apidocs">here</a>).
The API link is given on the
<a href="https://db.nomics.world/">DBnomics website</a>.
</p>


<h3>Value</h3>

<p>A <code>data.table</code>.
</p>


<h3>Author(s)</h3>

<p>Sebastien Galais
</p>


<h3>See Also</h3>

<p><code>rdb</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
# Fetch two series from different datasets of different providers :
df1 &lt;- rdb_by_api_link(
  paste0(
    "https://api.db.nomics.world/v22/",
    "series?observations=1&amp;series_ids=AMECO/ZUTN/EA19.1.0.0.0.ZUTN,IMF/CPI/A.AT.PCPIT_IX"
  )
)

# Fetch one series from the dataset 'Doing Business' of WB provider :
df2 &lt;- rdb_by_api_link(
  paste0(
    "https://api.db.nomics.world/v22/series/WB/DB?dimensions=%7B%22",
    "indicator%22%3A%5B%22IC.REG.PROC.FE.NO%22%5D%7D&amp;q=Doing%20Business",
    "&amp;observations=1&amp;format=json&amp;align_periods=1&amp;offset=0&amp;facets=0"
  )
)


## Use a specific proxy to fetch the data
# Fetch one series from the dataset 'Doing Business' of WB provider :
h &lt;- list(
  proxy = "&lt;proxy&gt;",
  proxyport = &lt;port&gt;,
  proxyusername = "&lt;username&gt;",
  proxypassword = "&lt;password&gt;"
)
options(rdbnomics.curl_config = h)
df2 &lt;- rdb_by_api_link(
  paste0(
    "https://api.db.nomics.world/v22/series/WB/DB?dimensions=%7B%22",
    "indicator%22%3A%5B%22IC.REG.PROC.FE.NO%22%5D%7D&amp;q=Doing%20Business",
    "&amp;observations=1&amp;format=json&amp;align_periods=1&amp;offset=0&amp;facets=0"
  )
)
# or to use once
df2 &lt;- rdb_by_api_link(
  paste0(
    "https://api.db.nomics.world/v22/series/WB/DB?dimensions=%7B%22",
    "indicator%22%3A%5B%22IC.REG.PROC.FE.NO%22%5D%7D&amp;q=Doing%20Business",
    "&amp;observations=1&amp;format=json&amp;align_periods=1&amp;offset=0&amp;facets=0"
  ),
  curl_config = h
)


## Use R default connection to avoid a proxy failure (in some cases)
# Fetch one series from the dataset 'Doing Business' of WB provider :
options(rdbnomics.use_readLines = TRUE)
df2 &lt;- rdb_by_api_link(
  paste0(
    "https://api.db.nomics.world/v22/series/WB/DB?dimensions=%7B%22",
    "indicator%22%3A%5B%22IC.REG.PROC.FE.NO%22%5D%7D&amp;q=Doing%20Business",
    "&amp;observations=1&amp;format=json&amp;align_periods=1&amp;offset=0&amp;facets=0"
  )
)
# or to use once
df2 &lt;- rdb_by_api_link(
  paste0(
    "https://api.db.nomics.world/v22/series/WB/DB?dimensions=%7B%22",
    "indicator%22%3A%5B%22IC.REG.PROC.FE.NO%22%5D%7D&amp;q=Doing%20Business",
    "&amp;observations=1&amp;format=json&amp;align_periods=1&amp;offset=0&amp;facets=0"
  ),
  use_readLines = TRUE
)


## Apply filter(s) to the series
# One filter
df3 &lt;- rdb_by_api_link(
  "https://api.db.nomics.world/v22/series/IMF/WEO:2019-10/ABW.BCA?observations=1",
  filters = list(
    code = "interpolate",
    parameters = list(frequency = "daily", method = "spline")
  )
)

# Two filters
df3 &lt;- rdb_by_api_link(
  "https://api.db.nomics.world/v22/series/IMF/WEO:2019-10/ABW.BCA?observations=1",
  filters = list(
    list(
      code = "interpolate",
      parameters = list(frequency = "quarterly", method = "spline")
    ),
    list(
      code = "aggregate",
      parameters = list(frequency = "annual", method = "average")
    )
  )
)

## End(Not run)
</code></pre>


</div>