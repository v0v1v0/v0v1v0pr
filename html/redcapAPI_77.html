<div class="container">

<table style="width: 100%;"><tr>
<td>fileRepositoryMethods</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Export, Import, or Delete Multiple Files from the File Repository</h2>

<h3>Description</h3>

<p>These methods enable the user to export, import, or delete
entire folders of files from the file repository. These actions
may be done recursively to include subfolders as well.
</p>


<h3>Usage</h3>

<pre><code class="language-R">exportFileRepository(
  rcon,
  folder_id,
  dir = getwd(),
  dir_create = FALSE,
  recursive = FALSE,
  ...
)

importFileRepository(rcon, dir, folder_id = numeric(0), ...)

deleteFileRepository(rcon, folder_id, recursive = FALSE, ...)

## S3 method for class 'redcapApiConnection'
exportFileRepository(
  rcon,
  folder_id = numeric(0),
  dir = getwd(),
  dir_create = FALSE,
  recursive = FALSE,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)

## S3 method for class 'redcapApiConnection'
importFileRepository(
  rcon,
  dir,
  folder_id = numeric(0),
  dag_id = numeric(0),
  role_id = numeric(0),
  recursive = FALSE,
  ...,
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)

## S3 method for class 'redcapApiConnection'
deleteFileRepository(
  rcon,
  folder_id,
  recursive = FALSE,
  ...,
  confirm = c("ask", "no", "yes"),
  error_handling = getOption("redcap_error_handling"),
  config = list(),
  api_param = list()
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>rcon</code></td>
<td>
<p>A <code>redcapConnection</code> object.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>folder_id</code></td>
<td>
<p><code>integerish(0/1)</code> The folder ID with the files to
download. If length 0, defaults to the top-level directory.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dir</code></td>
<td>
<p><code>character(1)</code>. A directory on the local system to which
the files are to be saved. Defaults to the working directory.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dir_create</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code> create the directory
<code>dir</code> if it does not already exist. Defaults to <code>FALSE</code>.
If <code>dir</code> does not exist and <code>dir_create = FALSE</code>, an error is thrown.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>dag_id</code></td>
<td>
<p><code>integerish(0/1)</code> The ID of a data access group. When
provided, access to the folder will be restricted to the DAG.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>role_id</code></td>
<td>
<p><code>integerish(0/1)</code> The ID of a role. When provided,
access to the folder will be restricted to users with that role.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>recursive</code></td>
<td>
<p><code>logical(1)</code>. When <code>TRUE</code>, export all subfolders
and their files as well.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>confirm</code></td>
<td>
<p><code>character</code>. One of <code>c("ask", "no", "yes")</code>.
When <code>"ask"</code>, user will be prompted to confirm the deletion.
When <code>"no"</code>, the function will terminate with no action. When
<code>"yes"</code>, the function will proceed without confirmation (useful
for automated processes).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Arguments to pass to other methods</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>error_handling</code></td>
<td>
<p><code>character(1)</code>. One of <code>c("error", "null")</code>.
An option for how to handle errors returned by the API.
see <code>redcapError()</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>config</code></td>
<td>
<p>A named <code>list</code>. Additional configuration parameters to pass to
<code>httr::POST()</code>. These are appended to any parameters in
<code>rcon$config</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>api_param</code></td>
<td>
<p>A named <code>list</code>. Additional API parameters to pass into the
body of the API call. This provides users to execute calls with options
that may not otherwise be supported by <code>redcapAPI</code>.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>deleteFileRepository</code> will only delete files and cannot
delete folders.
</p>
<p>Deleted files will remain in the recycling bin for up to 30 days.
</p>


<h3>Value</h3>

<p><code>exportFileRepository</code> returns a data frame with the locations to which
the files were saved on the local system. It has the columns:</p>

<table>
<tr>
<td style="text-align: left;">
    </td>
<td style="text-align: left;">  </td>
</tr>
<tr>
<td style="text-align: left;">
   <code>directory</code> </td>
<td style="text-align: left;"> The directory in which the file is saved. </td>
</tr>
<tr>
<td style="text-align: left;">
   <code>filename</code> </td>
<td style="text-align: left;"> The name of the saved file. </td>
</tr>
<tr>
<td style="text-align: left;">
</td>
</tr>
</table>
<p><code>importFileRepository</code> returns a data frame with the locations to which
the files were saved on the local system. It has the columns:</p>

<table>
<tr>
<td style="text-align: left;">
    </td>
<td style="text-align: left;">  </td>
</tr>
<tr>
<td style="text-align: left;">
   <code>directory</code> </td>
<td style="text-align: left;"> The directory in which the file is saved. </td>
</tr>
<tr>
<td style="text-align: left;">
   <code>filename</code> </td>
<td style="text-align: left;"> The name of the saved file. </td>
</tr>
<tr>
<td style="text-align: left;">
</td>
</tr>
</table>
<p><code>deleteFileRepository</code> returns a data frame listing the files that
were deleted from the file repository. It has the columns:</p>

<table>
<tr>
<td style="text-align: left;">
    </td>
<td style="text-align: left;">  </td>
</tr>
<tr>
<td style="text-align: left;">
   <code>folder_id</code> </td>
<td style="text-align: left;"> The REDCap assigned ID number for the folder. This will be <code>NA</code> for files. </td>
</tr>
<tr>
<td style="text-align: left;">
   <code>doc_id</code> </td>
<td style="text-align: left;"> The REDCap assigned ID number for the file. </td>
</tr>
<tr>
<td style="text-align: left;">
   <code>name</code> </td>
<td style="text-align: left;"> The filename of the deleted files. </td>
</tr>
<tr>
<td style="text-align: left;">
   <code>parent_folder</code> </td>
<td style="text-align: left;"> The folder ID of parent folder. </td>
</tr>
<tr>
<td style="text-align: left;">
</td>
</tr>
</table>
<h3>Functions</h3>


<ul>
<li> <p><code>exportFileRepository()</code>: Export multiple files from the File Repository.
</p>
</li>
<li> <p><code>importFileRepository()</code>: Import multiple files to the File Repository.
</p>
</li>
<li> <p><code>deleteFileRepository()</code>: Delete multiple files from the File Repository.
</p>
</li>
</ul>
<h3>See Also</h3>

<p><code>exportFromFileRepository()</code>, <br><code>importToFileRepository()</code>, <br><code>deleteFromFileRepository()</code>, <br><code>exportFileRepositoryListing()</code>, <br><code>createFileRepositoryFolder()</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">## Not run: 
unlockREDCap(connections = c(rcon = "project_alias"), 
             url = "your_redcap_url", 
             keyring = "API_KEYs", 
             envir = globalenv())
             
save_location &lt;- tempdir()

# Export the top-level file repository folder
exportFileRepository(rcon, 
                     folder_id = numeric(0), 
                     dir = save_location)
                     
# Export the entire repository 
exportFileRepository(rcon, 
                     folder_id = numeric(0), 
                     dir = save_location, 
                     recursive = TRUE)
                     
# Export a file repository folder below the top-level
exportFileRepository(rcon, 
                     folder_id = 12345, 
                     dir = save_location)
                     
# Import the files from a folder to the top-level file repository
importFileRepository(rcon, 
                     dir = "path/to/folder")
                     
# Import the files from a folder to sub folder of the file repository
importFileRepository(rcon, 
                     dir = "path/to/folder", 
                     folder_id = 12345) 
                     
# Import the files from a folder and assign to a specific 
# Data Access Group
importFileRepository(rcon, 
                     dir = "path/to/folder", 
                     dag_id = 789)  
                     
# Delete files from the top-level folder of the file repository
deleteFileRepository(rcon, 
                     folder_id = numeric(0))
                     
# Delete all the file sfrom the file repository
deleteFileRepository(rcon, 
                     folder_id = numeric(0), 
                     recursive = TRUE)                   

## End(Not run)

</code></pre>


</div>