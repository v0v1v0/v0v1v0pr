<div class="container">

<table style="width: 100%;"><tr>
<td>csu_asr</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>csu_asr</h2>

<h3>Description</h3>

<p><code>csu_asr</code> calculate Age-Standardized Rate (ASR) and Truncated Age-Standardized Rate (TASR) across different population (Registry, year, sex...)
</p>


<h3>Usage</h3>

<pre><code class="language-R">csu_asr(df_data,
		var_age = "age",
		var_cases = "cases",
		var_py ="py",
		group_by=NULL,
		var_age_group=NULL,
		missing_age = NULL,
		db_rate = 100000,
		first_age = 1,
		last_age = 18,
		pop_base = "SEGI",
		crude_rate = FALSE,
		var_st_err = NULL,
		correction_info = FALSE,
		var_asr = "asr",
		age_dropped = FALSE)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>df_data</code></td>
<td>

<p>Data (need to be R <code>data.frame</code> format, see example to import csv file).
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var_age</code></td>
<td>

<p>Age variable. Several format are accepted 
</p>

<table>
<tr>
<td style="text-align: left;">
			1 </td>
<td style="text-align: left;"> "0-4" </td>
<td style="text-align: left;"> 0 </td>
</tr>
<tr>
<td style="text-align: left;">
			2 </td>
<td style="text-align: left;"> "5-9" </td>
<td style="text-align: left;"> 5 </td>
</tr>
<tr>
<td style="text-align: left;">
			3 </td>
<td style="text-align: left;"> "10-14" </td>
<td style="text-align: left;"> 10 </td>
</tr>
<tr>
<td style="text-align: left;">
			... </td>
<td style="text-align: left;"> ... </td>
<td style="text-align: left;"> ... </td>
</tr>
<tr>
<td style="text-align: left;">
			17 </td>
<td style="text-align: left;"> "80-84" </td>
<td style="text-align: left;"> 80 </td>
</tr>
<tr>
<td style="text-align: left;">
			18 </td>
<td style="text-align: left;"> "85+" </td>
<td style="text-align: left;"> 85 </td>
</tr>
<tr>
<td style="text-align: left;">
		</td>
</tr>
</table>
<p>Missing age value must be precise in the option <code>missing_age</code>.<br>
Last age group will always be considere without size (ie: 80+,85+, etc..). 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var_cases</code></td>
<td>

<p>Number of event (cases, deaths, ...) variable.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var_py</code></td>
<td>

<p>Population year variable.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>group_by</code></td>
<td>

<p>A vector of variables to compare different ASR (sex, country, cancer ...).<br>
Any variable included in the next option var_age_group <b>must</b> be also include here.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var_age_group</code></td>
<td>

<p>Variables over which the number of population age-group might change.<br>
For example the last age group (70+, 75+, 80+ or 85+) can vary across registries, or year, but not across sex.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>missing_age</code></td>
<td>

<p>Age value representing the missing age cases.<br> 
If not precise, missing age value will not affect the calculation.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>db_rate</code></td>
<td>

<p>The denominator population. Default is 100000.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>first_age</code></td>
<td>

<p>First age group included (for Truncated ASR), <b>must</b> be between 1 and 17. 1 represents 0-4, 2 represents 5-9, ... 5 represents 20-24 etc.<br></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>last_age</code></td>
<td>

<p>Last age group included (for Truncated ASR), <b>must</b> be between 2 and 18. 2 represents 5-9, ... 5 represents 20-24, ... 18 represents 85+ etc.<br>
To calculate ASR for 15-69 years, use: <code>first_age(4), last_age(14)</code>.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>pop_base</code></td>
<td>

<p>Select the standard population:<br></p>

<table>
<tr>
<td style="text-align: left;">
		"SEGI" </td>
<td style="text-align: left;"> SEGI world standard population (1960).</td>
</tr>
<tr>
<td style="text-align: left;">
		"EURO" </td>
<td style="text-align: left;"> EURO is the European standard population (1976).</td>
</tr>
<tr>
<td style="text-align: left;">
		"EURO2" </td>
<td style="text-align: left;"> EURO2 is the European standard population (2013).</td>
</tr>
<tr>
<td style="text-align: left;">
		"WHO" </td>
<td style="text-align: left;"> WHO is the WHO standard population (2001).</td>
</tr>
<tr>
<td style="text-align: left;">
	</td>
</tr>
</table>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>crude_rate</code></td>
<td>

<p>Logical value. if <code>TRUE</code> calculate the crude rate instead of the ASR.<br>
Variables <code>var_age_group</code>, <code>missing_age</code>, <code>pop_base</code>, <code>var_st_err</code>, <code>correction_info</code> are not used.<br>
Default name of the new variable is "crude_rate".
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var_st_err</code></td>
<td>

<p>Calculate the Standard error and name of the new variable. 
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>correction_info</code></td>
<td>

<p>Logical value. if <code>TRUE</code> compute the variable "correction" : percentage of missing age cases.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>var_asr</code></td>
<td>

<p>Name of the new variable for the ASR.
</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>age_dropped</code></td>
<td>

<p>Only for truncated ASR.<br>
Logical value: if <code>TRUE</code>, Assume the age group not used are already dropped from the data.<br>
First_age and last_age option <b>must</b> still be filled.
</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>This function take automatically account the number of age group (last age group can be 70+,75+,80+,85+):<br>
If the population data stops before 85+ (75+ for instance), the population data <b>must</b> be 0 when the population data is unknown so, the program can detect automatically the last age group (70+,75+,80+ or 85+) for population.
</p>


<h3>Value</h3>

<p>Give the list of population with less than 18 age group (last age group: 70+, 75+, 80+).<br>
Return a <code>data.frame</code>.
</p>


<h3>Author(s)</h3>

<p>Mathieu Laversanne
</p>


<h3>References</h3>

<p><a href="https://publications.iarc.fr/_publications/media/download/3753/609d0d7711047dd76d7f3dbaa25d7f041fcd013e.pdf">https://publications.iarc.fr/_publications/media/download/3753/609d0d7711047dd76d7f3dbaa25d7f041fcd013e.pdf</a>
</p>


<h3>See Also</h3>

<p><code>csu_group_cases</code>
<code>csu_merge_cases_pop</code>
<code>csu_cumrisk</code>
<code>csu_eapc</code>
<code>csu_ageSpecific</code>
<code>csu_ageSpecific_top</code>
<code>csu_bar_top</code>
<code>csu_time_trend</code>
<code>csu_trendCohortPeriod</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">data(csu_registry_data_1)
data(csu_registry_data_2)

# you can import your data from csv file using read.csv:
# mydata &lt;-  read.csv("mydata.csv", sep=",")

# Age standardized rate (ASR) with no missing age cases.
result &lt;- csu_asr(csu_registry_data_1, 
                  "age", "cases", "py",
                  group_by = c("registry", "registry_label" ),
                  var_age_group = c("registry_label"))
				  
# you can export your result as csv file using write.csv:
# write.csv(result, file="result.csv")
				  
# ASR,  with the percentage of correction due to missing age cases. 
result &lt;- csu_asr(csu_registry_data_1, 
                  "age", "cases", "py",
                  group_by = c("registry", "registry_label" ),
                  var_age_group = c("registry_label"),
				  missing_age = 19,				  
				  correction_info = TRUE)	
				  
# ASR and standard error with missing age.
result &lt;- csu_asr(csu_registry_data_2, 
                  "age", "cases", "py",
                  group_by = c("registry", "registry_label", "sex", "year", "ethnic" ),
                  var_age_group = c("registry_label"), 
                  var_st_err = "st_err",
				  missing_age = 99)
				  
# Truncated ASR, 25-69 years.
result &lt;- csu_asr(csu_registry_data_2, 
                  "age", "cases", "py",
                  group_by = c("registry", "registry_label", "sex", "year", "ethnic" ),
                  var_age_group = c("registry_label"), 
                  var_st_err = "st_err",
				  first_age = 6, 
				  last_age = 14,
				  missing_age = 99)	

# Truncated ASR, 0-15 with denominator population = 1000000. 
result &lt;- csu_asr(csu_registry_data_2, 
                  "age", "cases", "py",
                  group_by = c("registry", "registry_label", "sex", "year", "ethnic" ),
                  var_age_group = c("registry_label"), 
                  var_st_err = "st_err",
				  first_age = 1, 
				  last_age = 3, 
				  missing_age = 99,	
				  db_rate = 1000000)		
				  
# ASR with EURO population as reference (instead of SEGI)
result &lt;- csu_asr(csu_registry_data_1, 
                  "age", "cases", "py",
                  group_by = c("registry", "registry_label" ),
                  var_age_group = c("registry_label"),
				  missing_age = 19,
                  pop_base = "EURO")
				    		  
</code></pre>


</div>