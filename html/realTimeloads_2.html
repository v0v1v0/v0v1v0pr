<div class="container">

<table style="width: 100%;"><tr>
<td>acoustic_backscatter_processing</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Process acoustic backscatter from hADCP</h2>

<h3>Description</h3>

<p>Processes acoustic backscatter from horizontally profiling ADCP (hADCP). Returns attenuation of sound due to water and suspended-sediment. Applies all corrections to acoustic backscatter detailed in the guideline.
</p>


<h3>Usage</h3>

<pre><code class="language-R">acoustic_backscatter_processing(
  Site,
  ADCP,
  Height,
  Sonde,
  Echo_Intensity_Beam_1,
  Echo_Intensity_Beam_2,
  Instrument_Noise_Level = NULL,
  Include_Rayleigh = FALSE,
  Include_near_field_correction = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>Site</code></td>
<td>
<p>Data frame with site, local vertical datum, and ADCP elevation information
</p>

<dl>
<dt>Site_name</dt>
<dd>
<p>Site name (string)</p>
</dd>
<dt>Site_number</dt>
<dd>
<p>Unique site code (string)</p>
</dd>
<dt>ADCP_elevation_above_bed_m</dt>
<dd>
<p>Elevation of the ADCP above the bed (m)</p>
</dd>
<dt>ADCP_elevation_above_gauge_datum_m</dt>
<dd>
<p>Elevation of the ADCP above local gauge datum (m)</p>
</dd>
<dt>Distance_of_gauge_datum_below_thalweg_m</dt>
<dd>
<p>Distance from local gauge datum to lower point in cross-section (m)</p>
</dd>
<dt>Start_date_and_time</dt>
<dd>
<p>Installation date of ADCP (time, POSIXct)</p>
</dd>
<dt>End_date_and_time</dt>
<dd>
<p>Date if/when ADCP is moved vertically (time, POSIXct)</p>
</dd>
<dt>Comment</dt>
<dd>
<p>User comment (string)</p>
</dd>
</dl>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>ADCP</code></td>
<td>
<p>Data frame with various readings from ADCP
</p>

<dl>
<dt>Site_number</dt>
<dd>
<p>Unique site code (string)</p>
</dd>
<dt>time</dt>
<dd>
<p>Date and time (time, POSIXct)</p>
</dd>
<dt>Ensemble</dt>
<dd>
<p>Measurment ensemble number (integer)</p>
</dd>
<dt>Accoustic_Frequency_kHz</dt>
<dd>
<p>Acoustic frequency of ADCP (kHz)</p>
</dd>
<dt>Transducer_radius_m</dt>
<dd>
<p>Radius of ADCP transducer (m)</p>
</dd>
<dt>Beam_angle_degrees</dt>
<dd>
<p>Angle of beam relative to normal (degrees)</p>
</dd>
<dt>Beam_aspect_ratio</dt>
<dd>
<p>Ratio of beam radius to beam length (-)</p>
</dd>
<dt>Range_to_bed_of_acoustic_beams_m</dt>
<dd>
<p>Normal range to bed, optional (m)</p>
</dd>
<dt>Range_to_water_surface_of_acoustic_beams_m</dt>
<dd>
<p>Normal range to water surface, optional (m)</p>
</dd>
<dt>Number_of_Cells</dt>
<dd>
<p>Number of measurement cells along beam (integer)</p>
</dd>
<dt>Bin_Size_m</dt>
<dd>
<p>Cell width measured normal to ADCP (m)</p>
</dd>
<dt>Blanking_distance_m</dt>
<dd>
<p>Blanking distance measured normal to ADCP (m)</p>
</dd>
<dt>Instrument_serial_number</dt>
<dd>
<p>Serial number of ADCP instrument (string)</p>
</dd>
<dt>CPU_serial_number</dt>
<dd>
<p>Serial number of ADCP CPU (string)</p>
</dd>
<dt>Ambient_Noise_Level_Beam_1_Counts</dt>
<dd>
<p>Ambient noise level for beam 1, optional (counts)</p>
</dd>
<dt>Ambient_Noise_Level_Beam_2_Counts</dt>
<dd>
<p>Ambient noise level for beam 2, optional (counts)</p>
</dd>
<dt>Distance_to_Bin_1_mid_point_m</dt>
<dd>
<p>Reported distance normal to ADCP to midpoint of bin/cell (m)</p>
</dd>
<dt>Distance_to_surface_m</dt>
<dd>
<p>Reported depth of ADCP from vertical beam, optional (m)</p>
</dd>
<dt>Speed_of_sound_m_per_s</dt>
<dd>
<p>Speed of sound used by ADCP in the field (m/s)</p>
</dd>
<dt>Temperature_degC</dt>
<dd>
<p>Temperature recorded by ADCP (degrees C)</p>
</dd>
<dt>Pressure_dbar</dt>
<dd>
<p>Pressure recorded by ADCP (dBar)</p>
</dd>
<dt>Salinity_PSU</dt>
<dd>
<p>Salinity in PSU recorded or assumed in ADCP data file, optional (PSU)</p>
</dd>
<dt>Distance_to_surface_m</dt>
<dd>
<p>Distance to water surface reported by vertical beam of ADCP (m)</p>
</dd>
<dt>Power_supply_voltage</dt>
<dd>
<p>Power to ADCP (V)</p>
</dd>
</dl>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Height</code></td>
<td>
<p>Data frame with timeseries of river height
</p>

<dl>
<dt>time</dt>
<dd>
<p>Date and time (time, POSIXct)</p>
</dd>
<dt>Height_m</dt>
<dd>
<p>Water surface elevation above gauge datum (m)</p>
</dd>
<dt>Site_number</dt>
<dd>
<p>Unique site code (string)</p>
</dd>
</dl>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Sonde</code></td>
<td>
<p>Data frame with timeseries of conductivity, temperature, and depth from sonde
</p>

<dl>
<dt>time</dt>
<dd>
<p>Date and time (time, POSIXct)</p>
</dd>
<dt>Water_Temperature_degC</dt>
<dd>
<p>Temperature (degrees C)</p>
</dd>
<dt>Conductivity_uS_per_cm</dt>
<dd>
<p>Conductivity (microS/cm)</p>
</dd>
<dt>Pressure_dbar</dt>
<dd>
<p>Pressure (dbar)</p>
</dd>
<dt>Site_number</dt>
<dd>
<p>Unique site code (string)</p>
</dd>
</dl>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Echo_Intensity_Beam_1</code></td>
<td>
<p>Data frame of acoustic backscatter measurements from beam 2
</p>

<dl>
<dt>Site_number</dt>
<dd>
<p>Unique site code (string)</p>
</dd>
<dt>time</dt>
<dd>
<p>Date and time (time, POSIXct)</p>
</dd>
<dt>Echo_Intensity_Counts_cell_n</dt>
<dd>
<p>Acoustic backscatter in nth cell (counts)</p>
</dd>
</dl>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Echo_Intensity_Beam_2</code></td>
<td>
<p>Data frame of acoustic backscatter measurements from beam 2
</p>

<dl>
<dt>Site_number</dt>
<dd>
<p>Unique site code (string)</p>
</dd>
<dt>time</dt>
<dd>
<p>Date and time (time, POSIXct)</p>
</dd>
<dt>Echo_Intensity_Counts_cell_n</dt>
<dd>
<p>Acoustic backscatter in nth cell (counts)</p>
</dd>
</dl>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Instrument_Noise_Level</code></td>
<td>
<p>Estimate of noise level, recommended if ambient noise level is not recorded (counts)</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Include_Rayleigh</code></td>
<td>
<p>Logical to include data within Rayleigh Distance for processing of acoustic backsactter</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>Include_near_field_correction</code></td>
<td>
<p>Logical to include near-field correction of Downing et al (1995)</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>List with processed data, all variable names and units are written-out in list items, see Livsey (in review) for details of each variable
</p>


<h3>Author(s)</h3>

<p>Daniel Livsey (2023) ORCID: 0000-0002-2028-6128
</p>


<h3>References</h3>

<p>Livsey, D.N. (in review). National Industry Guidelines for hydrometric monitoringâ€“Part 12: Application of acoustic Doppler velocity meters to measure suspended-sediment load. Bureau of Meteorology. Melbourne, Australia.
</p>


<h3>Examples</h3>

<pre><code class="language-R">InputData &lt;- realTimeloads::ExampleData
Site &lt;- InputData$Site
ADCP &lt;- InputData$ADCP
Height &lt;- InputData$Height
Sonde &lt;- InputData$Sonde
EIa &lt;- InputData$Echo_Intensity
# example code assumes backscatter is equal across beams
EIb &lt;- InputData$Echo_Intensity
Output &lt;- acoustic_backscatter_processing(Site,ADCP,Height,Sonde,EIa,EIb)
</code></pre>


</div>