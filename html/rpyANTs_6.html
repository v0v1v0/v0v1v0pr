<div class="container">

<table style="width: 100%;"><tr>
<td>antspynet_preprocess_brain_image</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>Process brain image prior to segmentation</h2>

<h3>Description</h3>

<p>Strip skulls, normalize intensity, align and re-sample to template. This
procedure is needed for many <code>antspynet</code> functions since the deep
neural networks are trained in template spaces
</p>


<h3>Usage</h3>

<pre><code class="language-R">antspynet_preprocess_brain_image(
  x,
  truncate_intensity = c(0.01, 0.99),
  brain_extraction_modality = c("none", "t1", "t1v0", "t1nobrainer", "t1combined",
    "flair", "t2", "bold", "fa", "t1infant", "t2infant"),
  template_transform_type = c("None", "Affine", "Rigid"),
  template = c("biobank", "croppedMni152"),
  do_bias_correction = TRUE,
  return_bias_field = FALSE,
  do_denoising = TRUE,
  intensity_matching_type = c("regression", "histogram"),
  reference_image = NULL,
  intensity_normalization_type = NULL,
  verbose = TRUE
)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>x</code></td>
<td>
<p><code>'ANTsImage'</code> or path to image to process</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>truncate_intensity</code></td>
<td>
<p>defines the quantile threshold for truncating the
image intensity</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>brain_extraction_modality</code></td>
<td>
<p>character of length 1, perform brain
extraction modality</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>template_transform_type</code></td>
<td>
<p>either <code>'Rigid'</code> or <code>'Affine'</code>
align to template brain</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>template</code></td>
<td>
<p>template image (not skull-stripped) or string, e.g.
<code>'biobank'</code>, <code>'croppedMni152'</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>do_bias_correction</code></td>
<td>
<p>whether to perform bias field correction</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>return_bias_field</code></td>
<td>
<p>return bias field as an additional output without
bias correcting the image</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>do_denoising</code></td>
<td>
<p>whether to remove noises using non-local means</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>intensity_matching_type</code></td>
<td>
<p>either <code>'regression'</code> or
<code>'histogram'</code>; only is performed if <code>reference_image</code> is not
<code>NULL</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>reference_image</code></td>
<td>
<p><code>'ANTsImage'</code> or path to image, or <code>NULL</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>intensity_normalization_type</code></td>
<td>
<p>either re-scale the intensities to
<code>c(0, 1)</code> (<code>'01'</code>), or for zero-mean, unit variance
(<code>'0mean'</code>); if <code>NULL</code> normalization is not performed</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>print progress to the screen</p>
</td>
</tr>
</table>
<h3>Value</h3>

<p>Dictionary with images after process. The images are registered and
re-sampled into template.
</p>


<h3>See Also</h3>

<p><code>antspynet$preprocess_brain_image</code>
</p>


<h3>Examples</h3>

<pre><code class="language-R">
library(rpyANTs)
if(interactive() &amp;&amp; ants_available("antspynet")) {
  image_path &lt;- ants$get_ants_data('r30')
  preprocessed &lt;- antspynet_preprocess_brain_image(
    image_path, verbose = FALSE
  )

  # Compare
  orig_img &lt;- as_ANTsImage(image_path)
  new_img &lt;- preprocessed$preprocessed_image
  pal &lt;- grDevices::gray.colors(256, start = 0, end = 1)

  par(mfrow = c(1, 2), mar = c(0.1, 0.1, 0.1, 0.1),
      bg = "black", fg = "white")
  image(orig_img[], asp = 1, axes = FALSE,
        col = pal, ylim = c(1, 0))
  image(new_img[], asp = 1, axes = FALSE,
        col = pal, ylim = c(1, 0))

}


</code></pre>


</div>